"use strict";var Bu=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var Tt=(t,e,r)=>(Bu(t,e,"read from private field"),r?r.call(t):e.get(t)),gr=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},cr=(t,e,r,n)=>(Bu(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);const Ut=require("react");require("@walletconnect/modal-sign-html");const rh=require("events"),lg=require("@walletconnect/utils"),dg=require("zustand"),fi=require("@tanstack/react-query"),hg=require("debug");function fg(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const wn=fg(Ut),Hu=new rh;async function Wr(){return new Promise(t=>{setInterval(()=>{},200),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}function tu(t){Ut.useEffect(()=>(Wr().then(e=>{e.onSessionDelete(t)}),()=>{Wr().then(e=>{e.offSessionDelete(t)})}),[t])}function nh(t){Ut.useEffect(()=>(Wr().then(e=>{e.onSessionExpire(t)}),()=>{Wr().then(e=>{e.offSessionExpire(t)})}),[t])}function ru(t){Ut.useEffect(()=>(Wr().then(e=>{e.onSessionUpdate(t)}),()=>{Wr().then(e=>{e.offSessionUpdate(t)})}),[t])}function mr(){const[t,e]=Ut.useState(void 0);return tu(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),ru(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:n}=r.params,s={...t,namespaces:n};e(s)}}),nh(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),Ut.useEffect(()=>{async function r(){const s=await(await Wr()).getSession();e(s)}return r(),Hu.on("session_change",r),()=>{Hu.off("session_change",r)}},[]),t}function $s(t){Ut.useEffect(()=>(Wr().then(e=>{e.onSessionEvent(t)}),()=>{Wr().then(e=>{e.offSessionEvent(t)})}),[t])}var pg={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function gg(t,e){let r;try{r=t()}catch{return}return{getItem:s=>{var i;const a=c=>c===null?null:JSON.parse(c,e==null?void 0:e.reviver),o=(i=r.getItem(s))!=null?i:null;return o instanceof Promise?o.then(a):a(o)},setItem:(s,i)=>r.setItem(s,JSON.stringify(i,e==null?void 0:e.replacer)),removeItem:s=>r.removeItem(s)}}const pi=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return pi(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return pi(n)(r)}}}},yg=(t,e)=>(r,n,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:T=>T,version:0,merge:(T,U)=>({...U,...T}),...e},a=!1;const o=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return t((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...T)},n,s);const d=pi(i.serialize),f=()=>{const T=i.partialize({...n()});let U;const v=d({state:T,version:i.version}).then(O=>u.setItem(i.name,O)).catch(O=>{U=O});if(U)throw U;return v},p=s.setState;s.setState=(T,U)=>{p(T,U),f()};const m=t((...T)=>{r(...T),f()},n,s);let b;const E=()=>{var T;if(!u)return;a=!1,o.forEach(v=>v(n()));const U=((T=i.onRehydrateStorage)==null?void 0:T.call(i,n()))||void 0;return pi(u.getItem.bind(u))(i.name).then(v=>{if(v)return i.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return i.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var O;return b=i.merge(v,(O=n())!=null?O:m),r(b,!0),f()}).then(()=>{U==null||U(b,void 0),a=!0,c.forEach(v=>v(b))}).catch(v=>{U==null||U(void 0,v)})};return s.persist={setOptions:T=>{i={...i,...T},T.getStorage&&(u=T.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>E(),hasHydrated:()=>a,onHydrate:T=>(o.add(T),()=>{o.delete(T)}),onFinishHydration:T=>(c.add(T),()=>{c.delete(T)})},E(),b||m},mg=(t,e)=>(r,n,s)=>{let i={storage:gg(()=>localStorage),partialize:E=>E,version:0,merge:(E,T)=>({...T,...E}),...e},a=!1;const o=new Set,c=new Set;let u=i.storage;if(!u)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...E)},n,s);const d=()=>{const E=i.partialize({...n()});return u.setItem(i.name,{state:E,version:i.version})},f=s.setState;s.setState=(E,T)=>{f(E,T),d()};const p=t((...E)=>{r(...E),d()},n,s);s.getInitialState=()=>p;let m;const b=()=>{var E,T;if(!u)return;a=!1,o.forEach(v=>{var O;return v((O=n())!=null?O:p)});const U=((T=i.onRehydrateStorage)==null?void 0:T.call(i,(E=n())!=null?E:p))||void 0;return pi(u.getItem.bind(u))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return i.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var O;return m=i.merge(v,(O=n())!=null?O:p),r(m,!0),d()}).then(()=>{U==null||U(m,void 0),m=n(),a=!0,c.forEach(v=>v(m))}).catch(v=>{U==null||U(void 0,v)})};return s.persist={setOptions:E=>{i={...i,...E},E.storage&&(u=E.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>b(),hasHydrated:()=>a,onHydrate:E=>(o.add(E),()=>{o.delete(E)}),onFinishHydration:E=>(c.add(E),()=>{c.delete(E)})},i.skipHydration||b(),m||p},vg=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((pg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),yg(t,e)):mg(t,e),_g=vg,hn=dg.create()(_g((t,e)=>({account:void 0,chainId:"aleo:1",setAccount:r=>{t({account:r})},setChainId:r=>{t({chainId:r})},onDisconnect:()=>{t({account:void 0,chainId:void 0}),Lu.clear(),console.log("onDisconnect called!")}}),{name:"puzzle-wallet-store"}));function nu(){const[t,e]=Ut.useState(void 0),[r,n]=Ut.useState(void 0),[s,i]=Ut.useState(!1);return{data:t,error:r,loading:s,setData:e,setError:n,setLoading:i}}async function sh(t,e){const n=await(await Wr()).request(t);if(n===void 0&&e)throw console.error("Result is undefined, retrying..."),new Error("Result is undefined, retrying...");return n}function Yi({queryKey:t,wcParams:e,enabled:r,queryOptions:n}){return fi.useQuery(t,async()=>sh(e,t),n??{staleTime:t[0]==="getEvent"?7500:45e3,refetchInterval:t[0]==="getEvent"?5e3:3e4,refetchIntervalInBackground:!0,enabled:r,retry:!0})}function Qi(t){const{data:e,error:r,loading:n,setData:s,setError:i,setLoading:a}=nu();async function o(c){try{a(!0),i(void 0);const u=await sh(t??c);return s(u),u}catch(u){throw i(u),u}finally{a(!1)}}return{data:e,error:r,loading:n,request:o}}const $o=(t,e=!0,r=4,n=!0)=>t?t.length<r?t:n?`(...${t.slice(-r)})`:t.length<r*2?t:`${t.slice(0,r+(e?5:0))}...${t.slice(t.length-r,t.length)}`:"",bg=()=>{const t=mr(),[e,r,n]=hn(u=>[u.account,u.setAccount,u.onDisconnect]),{refetch:s,data:i,error:a,isLoading:o}=Yi({queryKey:["useAccount",t==null?void 0:t.topic],enabled:!!t,wcParams:{topic:t==null?void 0:t.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getSelectedAccount"}}});$s(({params:u,topic:d})=>{if(u.event.name==="accountSelected"&&t&&t.topic===d){const p=u.event.address??u.event.data.address,m=u.chainId.split(":")[0],b=u.chainId.split(":")[1];r({network:m,chainId:b,address:p,shortenedAddress:$o(p)})}}),ru(({params:u,topic:d})=>{const f=u.event.address??u.event.data.address,p=u.chainId.split(":")[0],m=u.chainId.split(":")[1];r({network:p,chainId:m,address:f,shortenedAddress:$o(f)})}),tu(({params:u,topic:d})=>{n()}),Ut.useEffect(()=>{t&&!o&&s()},[t==null?void 0:t.topic]),Ut.useEffect(()=>{if(i){const u=i,d=u==null?void 0:u.account;d&&r(d)}},[i]);const c=a?a.message:i&&i.error;return{account:e,error:c,loading:o}},wg=({address:t,multisig:e})=>{const r=mr(),[n]=hn(f=>[f.account]),{refetch:s,data:i,error:a,isLoading:o}=Yi({queryKey:["useBalance",t,(n==null?void 0:n.address)??"",e,r==null?void 0:r.topic],enabled:!!r&&!!n&&(e?!!t:!0),wcParams:{topic:r==null?void 0:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}}});$s(({params:f,topic:p})=>{const m=f.event.name,b=f.event.address??f.event.data.address;(m==="selectedAccountSynced"&&!e||m==="sharedAccountSynced"&&e&&b===t)&&s()}),Ut.useEffect(()=>{r&&!o&&s()},[r==null?void 0:r.topic]);const c=a?a.message:i&&i.error,u=i;return{balances:u==null?void 0:u.balances,error:c,loading:o}},Eg=Symbol(),Wu=Object.getPrototypeOf,sc=new WeakMap,Sg=t=>t&&(sc.has(t)?sc.get(t):Wu(t)===Object.prototype||Wu(t)===Array.prototype),xg=t=>Sg(t)&&t[Eg]||null,Gu=(t,e=!0)=>{sc.set(t,e)};var Vo={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Va=t=>typeof t=="object"&&t!==null,En=new WeakMap,bo=new WeakSet,Ig=(t=Object.is,e=(u,d)=>new Proxy(u,d),r=u=>Va(u)&&!bo.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),n=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},s=new WeakMap,i=(u,d,f=n)=>{const p=s.get(u);if((p==null?void 0:p[0])===d)return p[1];const m=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return Gu(m,!0),s.set(u,[d,m]),Reflect.ownKeys(u).forEach(b=>{if(Object.getOwnPropertyDescriptor(m,b))return;const E=Reflect.get(u,b),T={value:E,enumerable:!0,configurable:!0};if(bo.has(E))Gu(E,!1);else if(E instanceof Promise)delete T.value,T.get=()=>f(E);else if(En.has(E)){const[U,v]=En.get(E);T.value=i(U,v(),f)}Object.defineProperty(m,b,T)}),Object.preventExtensions(m)},a=new WeakMap,o=[1,1],c=u=>{if(!Va(u))throw new Error("object required");const d=a.get(u);if(d)return d;let f=o[0];const p=new Set,m=(g,P=++o[0])=>{f!==P&&(f=P,p.forEach(k=>k(g,P)))};let b=o[1];const E=(g=++o[1])=>(b!==g&&!p.size&&(b=g,U.forEach(([P])=>{const k=P[1](g);k>f&&(f=k)})),f),T=g=>(P,k)=>{const M=[...P];M[1]=[g,...M[1]],m(M,k)},U=new Map,v=(g,P)=>{if((Vo?"production":void 0)!=="production"&&U.has(g))throw new Error("prop listener already exists");if(p.size){const k=P[3](T(g));U.set(g,[P,k])}else U.set(g,[P])},O=g=>{var P;const k=U.get(g);k&&(U.delete(g),(P=k[1])==null||P.call(k))},w=g=>(p.add(g),p.size===1&&U.forEach(([P,k],M)=>{if((Vo?"production":void 0)!=="production"&&k)throw new Error("remove already exists");const G=P[3](T(M));U.set(M,[P,G])}),()=>{p.delete(g),p.size===0&&U.forEach(([P,k],M)=>{k&&(k(),U.set(M,[P]))})}),x=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),y=e(x,{deleteProperty(g,P){const k=Reflect.get(g,P);O(P);const M=Reflect.deleteProperty(g,P);return M&&m(["delete",[P],k]),M},set(g,P,k,M){const G=Reflect.has(g,P),Y=Reflect.get(g,P,M);if(G&&(t(Y,k)||a.has(k)&&t(Y,a.get(k))))return!0;O(P),Va(k)&&(k=xg(k)||k);let C=k;if(k instanceof Promise)k.then(A=>{k.status="fulfilled",k.value=A,m(["resolve",[P],A])}).catch(A=>{k.status="rejected",k.reason=A,m(["reject",[P],A])});else{!En.has(k)&&r(k)&&(C=c(k));const A=!bo.has(C)&&En.get(C);A&&v(P,A)}return Reflect.set(g,P,C,M),m(["set",[P],k,Y]),!0}});a.set(u,y);const l=[x,E,i,w];return En.set(y,l),Reflect.ownKeys(u).forEach(g=>{const P=Object.getOwnPropertyDescriptor(u,g);"value"in P&&(y[g]=u[g],delete P.value,delete P.writable),Object.defineProperty(x,g,P)}),y})=>[c,En,bo,t,e,r,n,s,i,a,o],[Og]=Ig();function Dn(t={}){return Og(t)}function os(t,e,r){const n=En.get(t);(Vo?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],a=n[3];let o=!1;const c=a(u=>{if(i.push(u),r){e(i.splice(0));return}s||(s=Promise.resolve().then(()=>{s=void 0,o&&e(i.splice(0))}))});return o=!0,()=>{o=!1,c()}}function Tg(t,e){const r=En.get(t);(Vo?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[n,s,i]=r;return i(n,s(),e)}const kt=Dn({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),su={state:kt,subscribe(t){return os(kt,()=>t(kt))},push(t,e){t!==kt.view&&(kt.view=t,e&&(kt.data=e),kt.history.push(t))},reset(t){kt.view=t,kt.history=[t]},replace(t){kt.history.length>1&&(kt.history[kt.history.length-1]=t,kt.view=t)},goBack(){if(kt.history.length>1){kt.history.pop();const[t]=kt.history.slice(-1);kt.view=t}},setData(t){kt.data=t}},$t={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return $t.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return $t.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if($t.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const s=encodeURIComponent(e);return`${n}wc?uri=${s}`},formatUniversalUrl(t,e,r){if(!$t.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const s=encodeURIComponent(e);return`${n}wc?uri=${s}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem($t.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem($t.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem($t.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem($t.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=su.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},Cg=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),Ft=Dn({enabled:Cg,userSessionId:"",events:[],connectedWalletId:void 0}),ih={state:Ft,subscribe(t){return os(Ft.events,()=>t(Tg(Ft.events[Ft.events.length-1])))},initialize(){Ft.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(Ft.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){Ft.connectedWalletId=t},click(t){if(Ft.enabled){const e={type:"CLICK",name:t.name,userSessionId:Ft.userSessionId,timestamp:Date.now(),data:t};Ft.events.push(e)}},track(t){if(Ft.enabled){const e={type:"TRACK",name:t.name,userSessionId:Ft.userSessionId,timestamp:Date.now(),data:t};Ft.events.push(e)}},view(t){if(Ft.enabled){const e={type:"VIEW",name:t.name,userSessionId:Ft.userSessionId,timestamp:Date.now(),data:t};Ft.events.push(e)}}},qr=Dn({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),xr={state:qr,subscribe(t){return os(qr,()=>t(qr))},setChains(t){qr.chains=t},setWalletConnectUri(t){qr.walletConnectUri=t},setIsCustomDesktop(t){qr.isCustomDesktop=t},setIsCustomMobile(t){qr.isCustomMobile=t},setIsDataLoaded(t){qr.isDataLoaded=t},setIsUiLoaded(t){qr.isUiLoaded=t},setIsAuth(t){qr.isAuth=t}},wo=Dn({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Xn={state:wo,subscribe(t){return os(wo,()=>t(wo))},setConfig(t){var e,r;ih.initialize(),xr.setChains(t.chains),xr.setIsAuth(!!t.enableAuthMode),xr.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),xr.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),$t.setModalVersionInStorage(),Object.assign(wo,t)}};var Ng=Object.defineProperty,Yu=Object.getOwnPropertySymbols,Pg=Object.prototype.hasOwnProperty,kg=Object.prototype.propertyIsEnumerable,Qu=(t,e,r)=>e in t?Ng(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rg=(t,e)=>{for(var r in e||(e={}))Pg.call(e,r)&&Qu(t,r,e[r]);if(Yu)for(var r of Yu(e))kg.call(e,r)&&Qu(t,r,e[r]);return t};const ic="https://explorer-api.walletconnect.com",oc="wcm",ac="js-2.6.2";async function Eo(t,e){const r=Rg({sdkType:oc,sdkVersion:ac},e),n=new URL(t,ic);return n.searchParams.append("projectId",Xn.state.projectId),Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.append(s,String(i))}),(await fetch(n)).json()}const qn={async getDesktopListings(t){return Eo("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return Eo("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return Eo("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return Eo("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${ic}/w3m/v1/getWalletImage/${t}?projectId=${Xn.state.projectId}&sdkType=${oc}&sdkVersion=${ac}`},getAssetImageUrl(t){return`${ic}/w3m/v1/getAssetImage/${t}?projectId=${Xn.state.projectId}&sdkType=${oc}&sdkVersion=${ac}`}};var Ag=Object.defineProperty,Ju=Object.getOwnPropertySymbols,jg=Object.prototype.hasOwnProperty,Lg=Object.prototype.propertyIsEnumerable,Xu=(t,e,r)=>e in t?Ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ug=(t,e)=>{for(var r in e||(e={}))jg.call(e,r)&&Xu(t,r,e[r]);if(Ju)for(var r of Ju(e))Lg.call(e,r)&&Xu(t,r,e[r]);return t};const el=$t.isMobile(),Zr=Dn({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),Mg={state:Zr,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Xn.state;if(t==="NONE"||e==="ALL"&&!t)return Zr.recomendedWallets;if($t.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await qn.getAllListings(r),s=Object.values(n);s.sort((i,a)=>{const o=t.indexOf(i.id),c=t.indexOf(a.id);return o-c}),Zr.recomendedWallets=s}else{const{chains:r,isAuth:n}=xr.state,s=r==null?void 0:r.join(","),i=$t.isArray(e),a={page:1,sdks:n?"auth_v1":void 0,entries:$t.RECOMMENDED_WALLET_AMOUNT,chains:s,version:2,excludedIds:i?e.join(","):void 0},{listings:o}=el?await qn.getMobileListings(a):await qn.getDesktopListings(a);Zr.recomendedWallets=Object.values(o)}return Zr.recomendedWallets},async getWallets(t){const e=Ug({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Xn.state,{recomendedWallets:s}=Zr;if(n==="ALL")return Zr.wallets;s.length?e.excludedIds=s.map(f=>f.id).join(","):$t.isArray(r)&&(e.excludedIds=r.join(",")),$t.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),xr.state.isAuth&&(e.sdks="auth_v1");const{page:i,search:a}=t,{listings:o,total:c}=el?await qn.getMobileListings(e):await qn.getDesktopListings(e),u=Object.values(o),d=a?"search":"wallets";return Zr[d]={listings:[...Zr[d].listings,...u],total:c,page:i??1},{listings:u,total:c}},getWalletImageUrl(t){return qn.getWalletImageUrl(t)},getAssetImageUrl(t){return qn.getAssetImageUrl(t)},resetSearch(){Zr.search={listings:[],total:0,page:1}}},hs=Dn({open:!1}),Po={state:hs,subscribe(t){return os(hs,()=>t(hs))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=xr.state;if($t.removeWalletConnectDeepLink(),xr.setWalletConnectUri(t==null?void 0:t.uri),xr.setChains(t==null?void 0:t.chains),su.reset("ConnectWallet"),r&&n)hs.open=!0,e();else{const s=setInterval(()=>{const i=xr.state;i.isUiLoaded&&i.isDataLoaded&&(clearInterval(s),hs.open=!0,e())},200)}})},close(){hs.open=!1}};var Dg=Object.defineProperty,tl=Object.getOwnPropertySymbols,zg=Object.prototype.hasOwnProperty,$g=Object.prototype.propertyIsEnumerable,rl=(t,e,r)=>e in t?Dg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vg=(t,e)=>{for(var r in e||(e={}))zg.call(e,r)&&rl(t,r,e[r]);if(tl)for(var r of tl(e))$g.call(e,r)&&rl(t,r,e[r]);return t};function qg(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Ws=Dn({themeMode:qg()?"dark":"light"}),cc={state:Ws,subscribe(t){return os(Ws,()=>t(Ws))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(Ws.themeMode=e),r&&(Ws.themeVariables=Vg({},r))}},Zn=Dn({open:!1,message:"",variant:"success"}),Zg={state:Zn,subscribe(t){return os(Zn,()=>t(Zn))},openToast(t,e){Zn.open=!0,Zn.message=t,Zn.variant=e},closeToast(){Zn.open=!1}};let Fg=class{constructor(t){this.openModal=Po.open,this.closeModal=Po.close,this.subscribeModal=Po.subscribe,this.setTheme=cc.setThemeConfig,cc.setThemeConfig(t),Xn.setConfig(t),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>require("./index-CHpClWja-Df6arlVy.cjs"));const t=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",t),xr.setIsUiLoaded(!0)}}};var On=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ou(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var au={exports:{}},Ss=typeof Reflect=="object"?Reflect:null,nl=Ss&&typeof Ss.apply=="function"?Ss.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},ko;Ss&&typeof Ss.ownKeys=="function"?ko=Ss.ownKeys:Object.getOwnPropertySymbols?ko=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ko=function(t){return Object.getOwnPropertyNames(t)};function Kg(t){console&&console.warn&&console.warn(t)}var oh=Number.isNaN||function(t){return t!==t};function et(){et.init.call(this)}au.exports=et;au.exports.once=Gg;et.EventEmitter=et;et.prototype._events=void 0;et.prototype._eventsCount=0;et.prototype._maxListeners=void 0;var sl=10;function ba(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(et,"defaultMaxListeners",{enumerable:!0,get:function(){return sl},set:function(t){if(typeof t!="number"||t<0||oh(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");sl=t}});et.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};et.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||oh(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function ah(t){return t._maxListeners===void 0?et.defaultMaxListeners:t._maxListeners}et.prototype.getMaxListeners=function(){return ah(this)};et.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var i;if(e.length>0&&(i=e[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var o=s[t];if(o===void 0)return!1;if(typeof o=="function")nl(o,this,e);else for(var c=o.length,u=hh(o,c),r=0;r<c;++r)nl(u[r],this,e);return!0};function ch(t,e,r,n){var s,i,a;if(ba(r),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),a=i[e]),a===void 0)a=i[e]=r,++t._eventsCount;else if(typeof a=="function"?a=i[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),s=ah(t),s>0&&a.length>s&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,Kg(o)}return t}et.prototype.addListener=function(t,e){return ch(this,t,e,!1)};et.prototype.on=et.prototype.addListener;et.prototype.prependListener=function(t,e){return ch(this,t,e,!0)};function Bg(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function uh(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=Bg.bind(n);return s.listener=r,n.wrapFn=s,s}et.prototype.once=function(t,e){return ba(e),this.on(t,uh(this,t,e)),this};et.prototype.prependOnceListener=function(t,e){return ba(e),this.prependListener(t,uh(this,t,e)),this};et.prototype.removeListener=function(t,e){var r,n,s,i,a;if(ba(e),n=this._events,n===void 0)return this;if(r=n[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(s=-1,i=r.length-1;i>=0;i--)if(r[i]===e||r[i].listener===e){a=r[i].listener,s=i;break}if(s<0)return this;s===0?r.shift():Hg(r,s),r.length===1&&(n[t]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this};et.prototype.off=et.prototype.removeListener;et.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var s=Object.keys(r),i;for(n=0;n<s.length;++n)i=s[n],i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this};function lh(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?Wg(s):hh(s,s.length)}et.prototype.listeners=function(t){return lh(this,t,!0)};et.prototype.rawListeners=function(t){return lh(this,t,!1)};et.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):dh.call(t,e)};et.prototype.listenerCount=dh;function dh(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}et.prototype.eventNames=function(){return this._eventsCount>0?ko(this._events):[]};function hh(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Hg(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Wg(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Gg(t,e){return new Promise(function(r,n){function s(a){t.removeListener(e,i),n(a)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}fh(t,e,i,{once:!0}),e!=="error"&&Yg(t,s,{once:!0})})}function Yg(t,e,r){typeof t.on=="function"&&fh(t,"error",e,r)}function fh(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){n.once&&t.removeEventListener(e,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Mr=au.exports;const cu=iu(Mr),Qg=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Jg=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Xg=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function ey(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){ty(t);return}return e}function ty(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function So(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!Xg.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Qg.test(t)||Jg.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,ey)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function ry(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Rt(t,...e){try{return ry(t(...e))}catch(r){return Promise.reject(r)}}function ny(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function sy(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Ro(t){if(ny(t))return String(t);if(sy(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Ro(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function ph(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const uc="base64:";function iy(t){if(typeof t=="string")return t;ph();const e=Buffer.from(t).toString("base64");return uc+e}function oy(t){return typeof t!="string"||!t.startsWith(uc)?t:(ph(),Buffer.from(t.slice(uc.length),"base64"))}function lr(t){return t?t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function ay(...t){return lr(t.join(":"))}function xo(t){return t=lr(t),t?t+":":""}const cy="memory",uy=()=>{const t=new Map;return{name:cy,options:{},hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return Array.from(t.keys())},clear(){t.clear()},dispose(){t.clear()}}};function ly(t={}){const e={mounts:{"":t.driver||uy()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=u=>{for(const d of e.mountpoints)if(u.startsWith(d))return{base:d,relativeKey:u.slice(d.length),driver:e.mounts[d]};return{base:"",relativeKey:u,driver:e.mounts[""]}},n=(u,d)=>e.mountpoints.filter(f=>f.startsWith(u)||d&&u.startsWith(f)).map(f=>({relativeBase:u.length>f.length?u.slice(f.length):void 0,mountpoint:f,driver:e.mounts[f]})),s=(u,d)=>{if(e.watching){d=lr(d);for(const f of e.watchListeners)f(u,d)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await il(e.mounts[u],s,u)}},a=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},o=(u,d,f)=>{const p=new Map,m=b=>{let E=p.get(b.base);return E||(E={driver:b.driver,base:b.base,items:[]},p.set(b.base,E)),E};for(const b of u){const E=typeof b=="string",T=lr(E?b:b.key),U=E?void 0:b.value,v=E||!b.options?d:{...d,...b.options},O=r(T);m(O).items.push({key:T,value:U,relativeKey:O.relativeKey,options:v})}return Promise.all([...p.values()].map(b=>f(b))).then(b=>b.flat())},c={hasItem(u,d={}){u=lr(u);const{relativeKey:f,driver:p}=r(u);return Rt(p.hasItem,f,d)},getItem(u,d={}){u=lr(u);const{relativeKey:f,driver:p}=r(u);return Rt(p.getItem,f,d).then(m=>So(m))},getItems(u,d){return o(u,d,f=>f.driver.getItems?Rt(f.driver.getItems,f.items.map(p=>({key:p.relativeKey,options:p.options})),d).then(p=>p.map(m=>({key:ay(f.base,m.key),value:So(m.value)}))):Promise.all(f.items.map(p=>Rt(f.driver.getItem,p.relativeKey,p.options).then(m=>({key:p.key,value:So(m)})))))},getItemRaw(u,d={}){u=lr(u);const{relativeKey:f,driver:p}=r(u);return p.getItemRaw?Rt(p.getItemRaw,f,d):Rt(p.getItem,f,d).then(m=>oy(m))},async setItem(u,d,f={}){if(d===void 0)return c.removeItem(u);u=lr(u);const{relativeKey:p,driver:m}=r(u);m.setItem&&(await Rt(m.setItem,p,Ro(d),f),m.watch||s("update",u))},async setItems(u,d){await o(u,d,async f=>{f.driver.setItems&&await Rt(f.driver.setItems,f.items.map(p=>({key:p.relativeKey,value:Ro(p.value),options:p.options})),d),f.driver.setItem&&await Promise.all(f.items.map(p=>Rt(f.driver.setItem,p.relativeKey,Ro(p.value),p.options)))})},async setItemRaw(u,d,f={}){if(d===void 0)return c.removeItem(u,f);u=lr(u);const{relativeKey:p,driver:m}=r(u);if(m.setItemRaw)await Rt(m.setItemRaw,p,d,f);else if(m.setItem)await Rt(m.setItem,p,iy(d),f);else return;m.watch||s("update",u)},async removeItem(u,d={}){typeof d=="boolean"&&(d={removeMeta:d}),u=lr(u);const{relativeKey:f,driver:p}=r(u);p.removeItem&&(await Rt(p.removeItem,f,d),(d.removeMeta||d.removeMata)&&await Rt(p.removeItem,f+"$",d),p.watch||s("remove",u))},async getMeta(u,d={}){typeof d=="boolean"&&(d={nativeOnly:d}),u=lr(u);const{relativeKey:f,driver:p}=r(u),m=Object.create(null);if(p.getMeta&&Object.assign(m,await Rt(p.getMeta,f,d)),!d.nativeOnly){const b=await Rt(p.getItem,f+"$",d).then(E=>So(E));b&&typeof b=="object"&&(typeof b.atime=="string"&&(b.atime=new Date(b.atime)),typeof b.mtime=="string"&&(b.mtime=new Date(b.mtime)),Object.assign(m,b))}return m},setMeta(u,d,f={}){return this.setItem(u+"$",d,f)},removeMeta(u,d={}){return this.removeItem(u+"$",d)},async getKeys(u,d={}){u=xo(u);const f=n(u,!0);let p=[];const m=[];for(const b of f){const E=(await Rt(b.driver.getKeys,b.relativeBase,d)).map(T=>b.mountpoint+lr(T)).filter(T=>!p.some(U=>T.startsWith(U)));m.push(...E),p=[b.mountpoint,...p.filter(T=>!T.startsWith(b.mountpoint))]}return u?m.filter(b=>b.startsWith(u)&&!b.endsWith("$")):m.filter(b=>!b.endsWith("$"))},async clear(u,d={}){u=xo(u),await Promise.all(n(u,!1).map(async f=>{if(f.driver.clear)return Rt(f.driver.clear,f.relativeBase,d);if(f.driver.removeItem){const p=await f.driver.getKeys(f.relativeBase||"",d);return Promise.all(p.map(m=>f.driver.removeItem(m,d)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>ol(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(d=>d!==u),e.watchListeners.length===0&&await a()}},async unwatch(){e.watchListeners=[],await a()},mount(u,d){if(u=xo(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((f,p)=>p.length-f.length)),e.mounts[u]=d,e.watching&&Promise.resolve(il(d,s,u)).then(f=>{e.unwatch[u]=f}).catch(console.error),c},async unmount(u,d=!0){u=xo(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&(e.unwatch[u](),delete e.unwatch[u]),d&&await ol(e.mounts[u]),e.mountpoints=e.mountpoints.filter(f=>f!==u),delete e.mounts[u])},getMount(u=""){u=lr(u)+":";const d=r(u);return{driver:d.driver,base:d.base}},getMounts(u="",d={}){return u=lr(u),n(u,d.parents).map(f=>({driver:f.driver,base:f.mountpoint}))}};return c}function il(t,e,r){return t.watch?t.watch((n,s)=>e(n,r+s)):()=>{}}async function ol(t){typeof t.dispose=="function"&&await Rt(t.dispose)}function as(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function gh(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=as(r);return(s,i)=>n.then(a=>i(a.transaction(e,s).objectStore(e)))}let qa;function Ji(){return qa||(qa=gh("keyval-store","keyval")),qa}function al(t,e=Ji()){return e("readonly",r=>as(r.get(t)))}function dy(t,e,r=Ji()){return r("readwrite",n=>(n.put(e,t),as(n.transaction)))}function hy(t,e=Ji()){return e("readwrite",r=>(r.delete(t),as(r.transaction)))}function fy(t=Ji()){return t("readwrite",e=>(e.clear(),as(e.transaction)))}function py(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},as(t.transaction)}function gy(t=Ji()){return t("readonly",e=>{if(e.getAllKeys)return as(e.getAllKeys());const r=[];return py(e,n=>r.push(n.key)).then(()=>r)})}const yy=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),my=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function wa(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return my(t)}catch{return t}}function Xi(t){return typeof t=="string"?t:yy(t)||""}const vy="idb-keyval";var _y=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=s=>e+s;let n;return t.dbName&&t.storeName&&(n=gh(t.dbName,t.storeName)),{name:vy,options:t,async hasItem(s){return!(typeof await al(r(s),n)>"u")},async getItem(s){return await al(r(s),n)??null},setItem(s,i){return dy(r(s),i,n)},removeItem(s){return hy(r(s),n)},getKeys(){return gy(n)},clear(){return fy(n)}}};const by="WALLET_CONNECT_V2_INDEXED_DB",wy="keyvaluestorage";let Ey=class{constructor(){this.indexedDb=ly({driver:_y({dbName:by,storeName:wy})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const e=await this.indexedDb.getItem(t);if(e!==null)return e}async setItem(t,e){await this.indexedDb.setItem(t,Xi(e))}async removeItem(t){await this.indexedDb.removeItem(t)}};var Za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ao={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Za<"u"&&Za.localStorage?Ao.exports=Za.localStorage:typeof window<"u"&&window.localStorage?Ao.exports=window.localStorage:Ao.exports=new e})();function Sy(t){var e;return[t[0],wa((e=t[1])!=null?e:"")]}let xy=class{constructor(){this.localStorage=Ao.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Sy)}async getItem(t){const e=this.localStorage.getItem(t);if(e!==null)return wa(e)}async setItem(t,e){this.localStorage.setItem(t,Xi(e))}async removeItem(t){this.localStorage.removeItem(t)}};const Iy="wc_storage_version",cl=1,Oy=async(t,e,r)=>{const n=Iy,s=await e.getItem(n);if(s&&s>=cl){r(e);return}const i=await t.getKeys();if(!i.length){r(e);return}const a=[];for(;i.length;){const o=i.shift();if(!o)continue;const c=o.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(o);await e.setItem(o,u),a.push(o)}}await e.setItem(n,cl),r(e),Ty(t,a)},Ty=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let Cy=class{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const t=new xy;this.storage=t;try{const e=new Ey;Oy(t,e,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,e){return await this.initialize(),this.storage.setItem(t,e)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const e=setInterval(()=>{this.initialized&&(clearInterval(e),t())},20)})}};var Vs={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lc=function(t,e){return lc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},lc(t,e)};function Ny(t,e){lc(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var dc=function(){return dc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},dc.apply(this,arguments)};function Py(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function ky(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(i=(s<3?a(i):s>3?a(e,r,i):a(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function Ry(t,e){return function(r,n){e(r,n,t)}}function Ay(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function jy(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})}function Ly(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Uy(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function My(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function hc(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yh(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function Dy(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(yh(arguments[e]));return t}function zy(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],a=0,o=i.length;a<o;a++,s++)n[s]=i[a];return n}function gi(t){return this instanceof gi?(this.v=t,this):new gi(t)}function $y(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(p){n[p]&&(s[p]=function(m){return new Promise(function(b,E){i.push([p,m,b,E])>1||o(p,m)})})}function o(p,m){try{c(n[p](m))}catch(b){f(i[0][3],b)}}function c(p){p.value instanceof gi?Promise.resolve(p.value.v).then(u,d):f(i[0][2],p)}function u(p){o("next",p)}function d(p){o("throw",p)}function f(p,m){p(m),i.shift(),i.length&&o(i[0][0],i[0][1])}}function Vy(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(a){return(r=!r)?{value:gi(t[s](a)),done:s==="return"}:i?i(a):a}:i}}function qy(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof hc=="function"?hc(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(o,c){a=t[i](a),s(o,c,a.done,a.value)})}}function s(i,a,o,c){Promise.resolve(c).then(function(u){i({value:u,done:o})},a)}}function Zy(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Fy(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Ky(t){return t&&t.__esModule?t:{default:t}}function By(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Hy(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const Wy=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return dc},__asyncDelegator:Vy,__asyncGenerator:$y,__asyncValues:qy,__await:gi,__awaiter:jy,__classPrivateFieldGet:By,__classPrivateFieldSet:Hy,__createBinding:Uy,__decorate:ky,__exportStar:My,__extends:Ny,__generator:Ly,__importDefault:Ky,__importStar:Fy,__makeTemplateObject:Zy,__metadata:Ay,__param:Ry,__read:yh,__rest:Py,__spread:Dy,__spreadArrays:zy,__values:hc},Symbol.toStringTag,{value:"Module"})),en=ou(Wy);var Gs={},ae={},ul={},Ys={},ll;function Gy(){if(ll)return Ys;ll=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Ys.delay=t,Ys}var Fn={},dl={},fs={},hl;function Yy(){return hl||(hl=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.ONE_THOUSAND=fs.ONE_HUNDRED=void 0,fs.ONE_HUNDRED=100,fs.ONE_THOUSAND=1e3),fs}var fl={},pl;function Qy(){return pl||(pl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(fl)),fl}var gl;function mh(){return gl||(gl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=en;e.__exportStar(Yy(),t),e.__exportStar(Qy(),t)}(dl)),dl}var yl;function Jy(){if(yl)return Fn;yl=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.fromMiliseconds=Fn.toMiliseconds=void 0;const t=mh();function e(n){return n*t.ONE_THOUSAND}Fn.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Fn.fromMiliseconds=r,Fn}var ml;function Xy(){return ml||(ml=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=en;e.__exportStar(Gy(),t),e.__exportStar(Jy(),t)}(ul)),ul}var ps={},vl;function em(){if(vl)return ps;vl=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const s=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:s})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return ps.Watch=t,ps.default=t,ps}var _l={},Qs={},bl;function tm(){if(bl)return Qs;bl=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.IWatch=void 0;class t{}return Qs.IWatch=t,Qs}var wl;function rm(){return wl||(wl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),en.__exportStar(tm(),t)}(_l)),_l}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=en;e.__exportStar(Xy(),t),e.__exportStar(em(),t),e.__exportStar(rm(),t),e.__exportStar(mh(),t)})(ae);var El={},Js={};let cs=class{};const nm=Object.freeze(Object.defineProperty({__proto__:null,IEvents:cs},Symbol.toStringTag,{value:"Module"})),sm=ou(nm);var Sl;function im(){if(Sl)return Js;Sl=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.IHeartBeat=void 0;const t=sm;class e extends t.IEvents{constructor(n){super()}}return Js.IHeartBeat=e,Js}var xl;function vh(){return xl||(xl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),en.__exportStar(im(),t)}(El)),El}var Il={},Kn={},Ol;function om(){if(Ol)return Kn;Ol=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.HEARTBEAT_EVENTS=Kn.HEARTBEAT_INTERVAL=void 0;const t=ae;return Kn.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,Kn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Kn}var Tl;function _h(){return Tl||(Tl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),en.__exportStar(om(),t)}(Il)),Il}var Cl;function am(){if(Cl)return Gs;Cl=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.HeartBeat=void 0;const t=en,e=Mr,r=ae,n=vh(),s=_h();class i extends n.IHeartBeat{constructor(o){super(o),this.events=new e.EventEmitter,this.interval=s.HEARTBEAT_INTERVAL,this.interval=(o==null?void 0:o.interval)||s.HEARTBEAT_INTERVAL}static init(o){return t.__awaiter(this,void 0,void 0,function*(){const c=new i(o);return yield c.init(),c})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(o,c){this.events.on(o,c)}once(o,c){this.events.once(o,c)}off(o,c){this.events.off(o,c)}removeListener(o,c){this.events.removeListener(o,c)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(s.HEARTBEAT_EVENTS.pulse)}}return Gs.HeartBeat=i,Gs}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=en;e.__exportStar(am(),t),e.__exportStar(vh(),t),e.__exportStar(_h(),t)})(Vs);var He={},Fa,Nl;function cm(){if(Nl)return Fa;Nl=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Fa=e;function e(r,n,s){var i=s&&s.stringify||t,a=1;if(typeof r=="object"&&r!==null){var o=n.length+a;if(o===1)return r;var c=new Array(o);c[0]=i(r);for(var u=1;u<o;u++)c[u]=i(n[u]);return c.join(" ")}if(typeof r!="string")return r;var d=n.length;if(d===0)return r;for(var f="",p=1-a,m=-1,b=r&&r.length||0,E=0;E<b;){if(r.charCodeAt(E)===37&&E+1<b){switch(m=m>-1?m:0,r.charCodeAt(E+1)){case 100:case 102:if(p>=d||n[p]==null)break;m<E&&(f+=r.slice(m,E)),f+=Number(n[p]),m=E+2,E++;break;case 105:if(p>=d||n[p]==null)break;m<E&&(f+=r.slice(m,E)),f+=Math.floor(Number(n[p])),m=E+2,E++;break;case 79:case 111:case 106:if(p>=d||n[p]===void 0)break;m<E&&(f+=r.slice(m,E));var T=typeof n[p];if(T==="string"){f+="'"+n[p]+"'",m=E+2,E++;break}if(T==="function"){f+=n[p].name||"<anonymous>",m=E+2,E++;break}f+=i(n[p]),m=E+2,E++;break;case 115:if(p>=d)break;m<E&&(f+=r.slice(m,E)),f+=String(n[p]),m=E+2,E++;break;case 37:m<E&&(f+=r.slice(m,E)),f+="%",m=E+2,E++,p--;break}++p}++E}return m===-1?r:(m<b&&(f+=r.slice(m)),f)}return Fa}var Ka,Pl;function um(){if(Pl)return Ka;Pl=1;const t=cm();Ka=s;const e=x().console||{},r={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:b,res:b,err:p};function n(y,l){return Array.isArray(y)?y.filter(function(g){return g!=="!stdSerializers.err"}):y===!0?Object.keys(l):!1}function s(y){y=y||{},y.browser=y.browser||{};const l=y.browser.transmit;if(l&&typeof l.send!="function")throw Error("pino: transmit option must have a send function");const g=y.browser.write||e;y.browser.write&&(y.browser.asObject=!0);const P=y.serializers||{},k=n(y.browser.serialize,P);let M=y.browser.serialize;Array.isArray(y.browser.serialize)&&y.browser.serialize.indexOf("!stdSerializers.err")>-1&&(M=!1);const G=["error","fatal","warn","info","debug","trace"];typeof g=="function"&&(g.error=g.fatal=g.warn=g.info=g.debug=g.trace=g),y.enabled===!1&&(y.level="silent");const Y=y.level||"info",C=Object.create(g);C.log||(C.log=T),Object.defineProperty(C,"levelVal",{get:X}),Object.defineProperty(C,"level",{get:Z,set:$});const A={transmit:l,serialize:k,asObject:y.browser.asObject,levels:G,timestamp:m(y)};C.levels=s.levels,C.level=Y,C.setMaxListeners=C.getMaxListeners=C.emit=C.addListener=C.on=C.prependListener=C.once=C.prependOnceListener=C.removeListener=C.removeAllListeners=C.listeners=C.listenerCount=C.eventNames=C.write=C.flush=T,C.serializers=P,C._serialize=k,C._stdErrSerialize=M,C.child=q,l&&(C._logEvent=f());function X(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Z(){return this._level}function $(z){if(z!=="silent"&&!this.levels.values[z])throw Error("unknown level "+z);this._level=z,i(A,C,"error","log"),i(A,C,"fatal","error"),i(A,C,"warn","error"),i(A,C,"info","log"),i(A,C,"debug","log"),i(A,C,"trace","log")}function q(z,F){if(!z)throw new Error("missing bindings for child Pino");F=F||{},k&&z.serializers&&(F.serializers=z.serializers);const ye=F.serializers;if(k&&ye){var K=Object.assign({},P,ye),de=y.browser.serialize===!0?Object.keys(K):k;delete z.serializers,c([z],de,K,this._stdErrSerialize)}function ne(le){this._childLevel=(le._childLevel|0)+1,this.error=u(le,z,"error"),this.fatal=u(le,z,"fatal"),this.warn=u(le,z,"warn"),this.info=u(le,z,"info"),this.debug=u(le,z,"debug"),this.trace=u(le,z,"trace"),K&&(this.serializers=K,this._serialize=de),l&&(this._logEvent=f([].concat(le._logEvent.bindings,z)))}return ne.prototype=this,new ne(this)}return C}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=r,s.stdTimeFunctions=Object.assign({},{nullTime:U,epochTime:v,unixTime:O,isoTime:w});function i(y,l,g,P){const k=Object.getPrototypeOf(l);l[g]=l.levelVal>l.levels.values[g]?T:k[g]?k[g]:e[g]||e[P]||T,a(y,l,g)}function a(y,l,g){!y.transmit&&l[g]===T||(l[g]=function(P){return function(){const k=y.timestamp(),M=new Array(arguments.length),G=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var Y=0;Y<M.length;Y++)M[Y]=arguments[Y];if(y.serialize&&!y.asObject&&c(M,this._serialize,this.serializers,this._stdErrSerialize),y.asObject?P.call(G,o(this,g,M,k)):P.apply(G,M),y.transmit){const C=y.transmit.level||l.level,A=s.levels.values[C],X=s.levels.values[g];if(X<A)return;d(this,{ts:k,methodLevel:g,methodValue:X,transmitLevel:C,transmitValue:s.levels.values[y.transmit.level||l.level],send:y.transmit.send,val:l.levelVal},M)}}}(l[g]))}function o(y,l,g,P){y._serialize&&c(g,y._serialize,y.serializers,y._stdErrSerialize);const k=g.slice();let M=k[0];const G={};P&&(G.time=P),G.level=s.levels.values[l];let Y=(y._childLevel|0)+1;if(Y<1&&(Y=1),M!==null&&typeof M=="object"){for(;Y--&&typeof k[0]=="object";)Object.assign(G,k.shift());M=k.length?t(k.shift(),k):void 0}else typeof M=="string"&&(M=t(k.shift(),k));return M!==void 0&&(G.msg=M),G}function c(y,l,g,P){for(const k in y)if(P&&y[k]instanceof Error)y[k]=s.stdSerializers.err(y[k]);else if(typeof y[k]=="object"&&!Array.isArray(y[k]))for(const M in y[k])l&&l.indexOf(M)>-1&&M in g&&(y[k][M]=g[M](y[k][M]))}function u(y,l,g){return function(){const P=new Array(1+arguments.length);P[0]=l;for(var k=1;k<P.length;k++)P[k]=arguments[k-1];return y[g].apply(this,P)}}function d(y,l,g){const P=l.send,k=l.ts,M=l.methodLevel,G=l.methodValue,Y=l.val,C=y._logEvent.bindings;c(g,y._serialize||Object.keys(y.serializers),y.serializers,y._stdErrSerialize===void 0?!0:y._stdErrSerialize),y._logEvent.ts=k,y._logEvent.messages=g.filter(function(A){return C.indexOf(A)===-1}),y._logEvent.level.label=M,y._logEvent.level.value=G,P(M,y._logEvent,Y),y._logEvent=f(C)}function f(y){return{ts:0,messages:[],bindings:y||[],level:{label:"",value:0}}}function p(y){const l={type:y.constructor.name,msg:y.message,stack:y.stack};for(const g in y)l[g]===void 0&&(l[g]=y[g]);return l}function m(y){return typeof y.timestamp=="function"?y.timestamp:y.timestamp===!1?U:v}function b(){return{}}function E(y){return y}function T(){}function U(){return!1}function v(){return Date.now()}function O(){return Math.round(Date.now()/1e3)}function w(){return new Date(Date.now()).toISOString()}function x(){function y(l){return typeof l<"u"&&l}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return y(self)||y(window)||y(this)||{}}}return Ka}var gs={},kl;function bh(){return kl||(kl=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.PINO_CUSTOM_CONTEXT_KEY=gs.PINO_LOGGER_DEFAULTS=void 0,gs.PINO_LOGGER_DEFAULTS={level:"info"},gs.PINO_CUSTOM_CONTEXT_KEY="custom_context"),gs}var Xt={},Rl;function lm(){if(Rl)return Xt;Rl=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.generateChildLogger=Xt.formatChildLoggerContext=Xt.getLoggerContext=Xt.setBrowserLoggerContext=Xt.getBrowserLoggerContext=Xt.getDefaultLoggerOptions=void 0;const t=bh();function e(o){return Object.assign(Object.assign({},o),{level:(o==null?void 0:o.level)||t.PINO_LOGGER_DEFAULTS.level})}Xt.getDefaultLoggerOptions=e;function r(o,c=t.PINO_CUSTOM_CONTEXT_KEY){return o[c]||""}Xt.getBrowserLoggerContext=r;function n(o,c,u=t.PINO_CUSTOM_CONTEXT_KEY){return o[u]=c,o}Xt.setBrowserLoggerContext=n;function s(o,c=t.PINO_CUSTOM_CONTEXT_KEY){let u="";return typeof o.bindings>"u"?u=r(o,c):u=o.bindings().context||"",u}Xt.getLoggerContext=s;function i(o,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(o,u);return d.trim()?`${d}/${c}`:c}Xt.formatChildLoggerContext=i;function a(o,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=i(o,c,u),f=o.child({context:d});return n(f,d,u)}return Xt.generateChildLogger=a,Xt}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=en,r=e.__importDefault(um());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(bh(),t),e.__exportStar(lm(),t)})(He);let dm=class extends cs{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}},hm=class extends cs{constructor(t,e){super(),this.core=t,this.logger=e,this.records=new Map}},fm=class{constructor(t,e){this.logger=t,this.core=e}},pm=class extends cs{constructor(t,e){super(),this.relayer=t,this.logger=e}},gm=class extends cs{constructor(t){super()}},ym=class{constructor(t,e,r,n){this.core=t,this.logger=e,this.name=r}};class mm extends cs{constructor(e,r){super(),this.relayer=e,this.logger=r}}let vm=class extends cs{constructor(t,e){super(),this.core=t,this.logger=e}},_m=class{constructor(t,e){this.projectId=t,this.logger=e}},bm=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},wm=class{constructor(t){this.client=t}};var uu={},qs={},Ea={},Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.BrowserRandomSource=void 0;const Al=65536;class Em{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Al)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Al)));return r}}Sa.BrowserRandomSource=Em;function Sm(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xa={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});function xm(t){for(var e=0;e<t.length;e++)t[e]=0;return t}vr.wipe=xm;const Im={},Om=Object.freeze(Object.defineProperty({__proto__:null,default:Im},Symbol.toStringTag,{value:"Module"})),Tm=ou(Om);Object.defineProperty(xa,"__esModule",{value:!0});xa.NodeRandomSource=void 0;const Cm=vr;class Nm{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Sm<"u"){const e=Tm;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let s=0;s<n.length;s++)n[s]=r[s];return(0,Cm.wipe)(r),n}}xa.NodeRandomSource=Nm;Object.defineProperty(Ea,"__esModule",{value:!0});Ea.SystemRandomSource=void 0;const Pm=Sa,km=xa;class Rm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Pm.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new km.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Ea.SystemRandomSource=Rm;var Se={},wh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(o,c){var u=o>>>16&65535,d=o&65535,f=c>>>16&65535,p=c&65535;return d*p+(u*p+d*f<<16>>>0)|0}t.mul=Math.imul||e;function r(o,c){return o+c|0}t.add=r;function n(o,c){return o-c|0}t.sub=n;function s(o,c){return o<<c|o>>>32-c}t.rotl=s;function i(o,c){return o<<32-c|o>>>c}t.rotr=i;function a(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o}t.isInteger=Number.isInteger||a,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(o){return t.isInteger(o)&&o>=-t.MAX_SAFE_INTEGER&&o<=t.MAX_SAFE_INTEGER}})(wh);Object.defineProperty(Se,"__esModule",{value:!0});var Eh=wh;function Am(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}Se.readInt16BE=Am;function jm(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}Se.readUint16BE=jm;function Lm(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}Se.readInt16LE=Lm;function Um(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}Se.readUint16LE=Um;function Sh(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}Se.writeUint16BE=Sh;Se.writeInt16BE=Sh;function xh(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}Se.writeUint16LE=xh;Se.writeInt16LE=xh;function fc(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}Se.readInt32BE=fc;function pc(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Se.readUint32BE=pc;function gc(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}Se.readInt32LE=gc;function yc(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}Se.readUint32LE=yc;function qo(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}Se.writeUint32BE=qo;Se.writeInt32BE=qo;function Zo(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}Se.writeUint32LE=Zo;Se.writeInt32LE=Zo;function Mm(t,e){e===void 0&&(e=0);var r=fc(t,e),n=fc(t,e+4);return r*4294967296+n-(n>>31)*4294967296}Se.readInt64BE=Mm;function Dm(t,e){e===void 0&&(e=0);var r=pc(t,e),n=pc(t,e+4);return r*4294967296+n}Se.readUint64BE=Dm;function zm(t,e){e===void 0&&(e=0);var r=gc(t,e),n=gc(t,e+4);return n*4294967296+r-(r>>31)*4294967296}Se.readInt64LE=zm;function $m(t,e){e===void 0&&(e=0);var r=yc(t,e),n=yc(t,e+4);return n*4294967296+r}Se.readUint64LE=$m;function Ih(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),qo(t/4294967296>>>0,e,r),qo(t>>>0,e,r+4),e}Se.writeUint64BE=Ih;Se.writeInt64BE=Ih;function Oh(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Zo(t>>>0,e,r),Zo(t/4294967296>>>0,e,r+4),e}Se.writeUint64LE=Oh;Se.writeInt64LE=Oh;function Vm(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,s=1,i=t/8+r-1;i>=r;i--)n+=e[i]*s,s*=256;return n}Se.readUintBE=Vm;function qm(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,s=1,i=r;i<r+t/8;i++)n+=e[i]*s,s*=256;return n}Se.readUintLE=qm;function Zm(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Eh.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var s=1,i=t/8+n-1;i>=n;i--)r[i]=e/s&255,s*=256;return r}Se.writeUintBE=Zm;function Fm(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Eh.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var s=1,i=n;i<n+t/8;i++)r[i]=e/s&255,s*=256;return r}Se.writeUintLE=Fm;function Km(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}Se.readFloat32BE=Km;function Bm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}Se.readFloat32LE=Bm;function Hm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}Se.readFloat64BE=Hm;function Wm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}Se.readFloat64LE=Wm;function Gm(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}Se.writeFloat32BE=Gm;function Ym(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}Se.writeFloat32LE=Ym;function Qm(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}Se.writeFloat64BE=Qm;function Jm(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}Se.writeFloat64LE=Jm;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=Ea,r=Se,n=vr;t.defaultRandomSource=new e.SystemRandomSource;function s(u,d=t.defaultRandomSource){return d.randomBytes(u)}t.randomBytes=s;function i(u=t.defaultRandomSource){const d=s(4,u),f=(0,r.readUint32LE)(d);return(0,n.wipe)(d),f}t.randomUint32=i;const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function o(u,d=a,f=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let p="";const m=d.length,b=256-256%m;for(;u>0;){const E=s(Math.ceil(u*256/b),f);for(let T=0;T<E.length&&u>0;T++){const U=E[T];U<b&&(p+=d.charAt(U%m),u--)}(0,n.wipe)(E)}return p}t.randomString=o;function c(u,d=a,f=t.defaultRandomSource){const p=Math.ceil(u/(Math.log(d.length)/Math.LN2));return o(p,d,f)}t.randomStringForEntropy=c})(qs);var Th={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Se,r=vr;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function o(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},o.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},o.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,p=u<<3,m=u%128<112?128:256;this._buffer[d]=128;for(var b=d+1;b<m-8;b++)this._buffer[b]=0;e.writeUint32BE(f,this._buffer,m-8),e.writeUint32BE(p,this._buffer,m-4),i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,m),this._finished=!0}for(var b=0;b<this.digestLength/8;b++)e.writeUint32BE(this._stateHi[b],c,b*8),e.writeUint32BE(this._stateLo[b],c,b*8+4);return this},o.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},o}();t.SHA512=n;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function i(o,c,u,d,f,p,m){for(var b=u[0],E=u[1],T=u[2],U=u[3],v=u[4],O=u[5],w=u[6],x=u[7],y=d[0],l=d[1],g=d[2],P=d[3],k=d[4],M=d[5],G=d[6],Y=d[7],C,A,X,Z,$,q,z,F;m>=128;){for(var ye=0;ye<16;ye++){var K=8*ye+p;o[ye]=e.readUint32BE(f,K),c[ye]=e.readUint32BE(f,K+4)}for(var ye=0;ye<80;ye++){var de=b,ne=E,le=T,L=U,j=v,N=O,h=w,I=x,W=y,ee=l,je=g,Le=P,Oe=k,Ze=M,at=G,tt=Y;if(C=x,A=Y,$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=(v>>>14|k<<18)^(v>>>18|k<<14)^(k>>>9|v<<23),A=(k>>>14|v<<18)^(k>>>18|v<<14)^(v>>>9|k<<23),$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,C=v&O^~v&w,A=k&M^~k&G,$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,C=s[ye*2],A=s[ye*2+1],$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,C=o[ye%16],A=c[ye%16],$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,X=z&65535|F<<16,Z=$&65535|q<<16,C=X,A=Z,$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=(b>>>28|y<<4)^(y>>>2|b<<30)^(y>>>7|b<<25),A=(y>>>28|b<<4)^(b>>>2|y<<30)^(b>>>7|y<<25),$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,C=b&E^b&T^E&T,A=y&l^y&g^l&g,$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,I=z&65535|F<<16,tt=$&65535|q<<16,C=L,A=Le,$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=X,A=Z,$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,L=z&65535|F<<16,Le=$&65535|q<<16,E=de,T=ne,U=le,v=L,O=j,w=N,x=h,b=I,l=W,g=ee,P=je,k=Le,M=Oe,G=Ze,Y=at,y=tt,ye%16===15)for(var K=0;K<16;K++)C=o[K],A=c[K],$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=o[(K+9)%16],A=c[(K+9)%16],$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,X=o[(K+1)%16],Z=c[(K+1)%16],C=(X>>>1|Z<<31)^(X>>>8|Z<<24)^X>>>7,A=(Z>>>1|X<<31)^(Z>>>8|X<<24)^(Z>>>7|X<<25),$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,X=o[(K+14)%16],Z=c[(K+14)%16],C=(X>>>19|Z<<13)^(Z>>>29|X<<3)^X>>>6,A=(Z>>>19|X<<13)^(X>>>29|Z<<3)^(Z>>>6|X<<26),$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,o[K]=z&65535|F<<16,c[K]=$&65535|q<<16}C=b,A=y,$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=u[0],A=d[0],$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,u[0]=b=z&65535|F<<16,d[0]=y=$&65535|q<<16,C=E,A=l,$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=u[1],A=d[1],$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,u[1]=E=z&65535|F<<16,d[1]=l=$&65535|q<<16,C=T,A=g,$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=u[2],A=d[2],$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,u[2]=T=z&65535|F<<16,d[2]=g=$&65535|q<<16,C=U,A=P,$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=u[3],A=d[3],$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,u[3]=U=z&65535|F<<16,d[3]=P=$&65535|q<<16,C=v,A=k,$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=u[4],A=d[4],$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,u[4]=v=z&65535|F<<16,d[4]=k=$&65535|q<<16,C=O,A=M,$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=u[5],A=d[5],$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,u[5]=O=z&65535|F<<16,d[5]=M=$&65535|q<<16,C=w,A=G,$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=u[6],A=d[6],$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,u[6]=w=z&65535|F<<16,d[6]=G=$&65535|q<<16,C=x,A=Y,$=A&65535,q=A>>>16,z=C&65535,F=C>>>16,C=u[7],A=d[7],$+=A&65535,q+=A>>>16,z+=C&65535,F+=C>>>16,q+=$>>>16,z+=q>>>16,F+=z>>>16,u[7]=x=z&65535|F<<16,d[7]=Y=$&65535|q<<16,p+=128,m-=128}return p}function a(o){var c=new n;c.update(o);var u=c.digest();return c.clean(),u}t.hash=a})(Th);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=qs,r=Th,n=vr;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function s(L){const j=new Float64Array(16);if(L)for(let N=0;N<L.length;N++)j[N]=L[N];return j}const i=new Uint8Array(32);i[0]=9;const a=s(),o=s([1]),c=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function m(L,j){for(let N=0;N<16;N++)L[N]=j[N]|0}function b(L){let j=1;for(let N=0;N<16;N++){let h=L[N]+j+65535;j=Math.floor(h/65536),L[N]=h-j*65536}L[0]+=j-1+37*(j-1)}function E(L,j,N){const h=~(N-1);for(let I=0;I<16;I++){const W=h&(L[I]^j[I]);L[I]^=W,j[I]^=W}}function T(L,j){const N=s(),h=s();for(let I=0;I<16;I++)h[I]=j[I];b(h),b(h),b(h);for(let I=0;I<2;I++){N[0]=h[0]-65517;for(let ee=1;ee<15;ee++)N[ee]=h[ee]-65535-(N[ee-1]>>16&1),N[ee-1]&=65535;N[15]=h[15]-32767-(N[14]>>16&1);const W=N[15]>>16&1;N[14]&=65535,E(h,N,1-W)}for(let I=0;I<16;I++)L[2*I]=h[I]&255,L[2*I+1]=h[I]>>8}function U(L,j){let N=0;for(let h=0;h<32;h++)N|=L[h]^j[h];return(1&N-1>>>8)-1}function v(L,j){const N=new Uint8Array(32),h=new Uint8Array(32);return T(N,L),T(h,j),U(N,h)}function O(L){const j=new Uint8Array(32);return T(j,L),j[0]&1}function w(L,j){for(let N=0;N<16;N++)L[N]=j[2*N]+(j[2*N+1]<<8);L[15]&=32767}function x(L,j,N){for(let h=0;h<16;h++)L[h]=j[h]+N[h]}function y(L,j,N){for(let h=0;h<16;h++)L[h]=j[h]-N[h]}function l(L,j,N){let h,I,W=0,ee=0,je=0,Le=0,Oe=0,Ze=0,at=0,tt=0,Ve=0,De=0,Te=0,Pe=0,Ce=0,we=0,_e=0,he=0,ke=0,Ue=0,me=0,ze=0,Fe=0,We=0,Ge=0,Ke=0,fr=0,_r=0,$r=0,Mt=0,Vr=0,br=0,yn=0,ct=N[0],st=N[1],gt=N[2],lt=N[3],yt=N[4],it=N[5],bt=N[6],St=N[7],xt=N[8],wt=N[9],It=N[10],Et=N[11],mt=N[12],rt=N[13],S=N[14],D=N[15];h=j[0],W+=h*ct,ee+=h*st,je+=h*gt,Le+=h*lt,Oe+=h*yt,Ze+=h*it,at+=h*bt,tt+=h*St,Ve+=h*xt,De+=h*wt,Te+=h*It,Pe+=h*Et,Ce+=h*mt,we+=h*rt,_e+=h*S,he+=h*D,h=j[1],ee+=h*ct,je+=h*st,Le+=h*gt,Oe+=h*lt,Ze+=h*yt,at+=h*it,tt+=h*bt,Ve+=h*St,De+=h*xt,Te+=h*wt,Pe+=h*It,Ce+=h*Et,we+=h*mt,_e+=h*rt,he+=h*S,ke+=h*D,h=j[2],je+=h*ct,Le+=h*st,Oe+=h*gt,Ze+=h*lt,at+=h*yt,tt+=h*it,Ve+=h*bt,De+=h*St,Te+=h*xt,Pe+=h*wt,Ce+=h*It,we+=h*Et,_e+=h*mt,he+=h*rt,ke+=h*S,Ue+=h*D,h=j[3],Le+=h*ct,Oe+=h*st,Ze+=h*gt,at+=h*lt,tt+=h*yt,Ve+=h*it,De+=h*bt,Te+=h*St,Pe+=h*xt,Ce+=h*wt,we+=h*It,_e+=h*Et,he+=h*mt,ke+=h*rt,Ue+=h*S,me+=h*D,h=j[4],Oe+=h*ct,Ze+=h*st,at+=h*gt,tt+=h*lt,Ve+=h*yt,De+=h*it,Te+=h*bt,Pe+=h*St,Ce+=h*xt,we+=h*wt,_e+=h*It,he+=h*Et,ke+=h*mt,Ue+=h*rt,me+=h*S,ze+=h*D,h=j[5],Ze+=h*ct,at+=h*st,tt+=h*gt,Ve+=h*lt,De+=h*yt,Te+=h*it,Pe+=h*bt,Ce+=h*St,we+=h*xt,_e+=h*wt,he+=h*It,ke+=h*Et,Ue+=h*mt,me+=h*rt,ze+=h*S,Fe+=h*D,h=j[6],at+=h*ct,tt+=h*st,Ve+=h*gt,De+=h*lt,Te+=h*yt,Pe+=h*it,Ce+=h*bt,we+=h*St,_e+=h*xt,he+=h*wt,ke+=h*It,Ue+=h*Et,me+=h*mt,ze+=h*rt,Fe+=h*S,We+=h*D,h=j[7],tt+=h*ct,Ve+=h*st,De+=h*gt,Te+=h*lt,Pe+=h*yt,Ce+=h*it,we+=h*bt,_e+=h*St,he+=h*xt,ke+=h*wt,Ue+=h*It,me+=h*Et,ze+=h*mt,Fe+=h*rt,We+=h*S,Ge+=h*D,h=j[8],Ve+=h*ct,De+=h*st,Te+=h*gt,Pe+=h*lt,Ce+=h*yt,we+=h*it,_e+=h*bt,he+=h*St,ke+=h*xt,Ue+=h*wt,me+=h*It,ze+=h*Et,Fe+=h*mt,We+=h*rt,Ge+=h*S,Ke+=h*D,h=j[9],De+=h*ct,Te+=h*st,Pe+=h*gt,Ce+=h*lt,we+=h*yt,_e+=h*it,he+=h*bt,ke+=h*St,Ue+=h*xt,me+=h*wt,ze+=h*It,Fe+=h*Et,We+=h*mt,Ge+=h*rt,Ke+=h*S,fr+=h*D,h=j[10],Te+=h*ct,Pe+=h*st,Ce+=h*gt,we+=h*lt,_e+=h*yt,he+=h*it,ke+=h*bt,Ue+=h*St,me+=h*xt,ze+=h*wt,Fe+=h*It,We+=h*Et,Ge+=h*mt,Ke+=h*rt,fr+=h*S,_r+=h*D,h=j[11],Pe+=h*ct,Ce+=h*st,we+=h*gt,_e+=h*lt,he+=h*yt,ke+=h*it,Ue+=h*bt,me+=h*St,ze+=h*xt,Fe+=h*wt,We+=h*It,Ge+=h*Et,Ke+=h*mt,fr+=h*rt,_r+=h*S,$r+=h*D,h=j[12],Ce+=h*ct,we+=h*st,_e+=h*gt,he+=h*lt,ke+=h*yt,Ue+=h*it,me+=h*bt,ze+=h*St,Fe+=h*xt,We+=h*wt,Ge+=h*It,Ke+=h*Et,fr+=h*mt,_r+=h*rt,$r+=h*S,Mt+=h*D,h=j[13],we+=h*ct,_e+=h*st,he+=h*gt,ke+=h*lt,Ue+=h*yt,me+=h*it,ze+=h*bt,Fe+=h*St,We+=h*xt,Ge+=h*wt,Ke+=h*It,fr+=h*Et,_r+=h*mt,$r+=h*rt,Mt+=h*S,Vr+=h*D,h=j[14],_e+=h*ct,he+=h*st,ke+=h*gt,Ue+=h*lt,me+=h*yt,ze+=h*it,Fe+=h*bt,We+=h*St,Ge+=h*xt,Ke+=h*wt,fr+=h*It,_r+=h*Et,$r+=h*mt,Mt+=h*rt,Vr+=h*S,br+=h*D,h=j[15],he+=h*ct,ke+=h*st,Ue+=h*gt,me+=h*lt,ze+=h*yt,Fe+=h*it,We+=h*bt,Ge+=h*St,Ke+=h*xt,fr+=h*wt,_r+=h*It,$r+=h*Et,Mt+=h*mt,Vr+=h*rt,br+=h*S,yn+=h*D,W+=38*ke,ee+=38*Ue,je+=38*me,Le+=38*ze,Oe+=38*Fe,Ze+=38*We,at+=38*Ge,tt+=38*Ke,Ve+=38*fr,De+=38*_r,Te+=38*$r,Pe+=38*Mt,Ce+=38*Vr,we+=38*br,_e+=38*yn,I=1,h=W+I+65535,I=Math.floor(h/65536),W=h-I*65536,h=ee+I+65535,I=Math.floor(h/65536),ee=h-I*65536,h=je+I+65535,I=Math.floor(h/65536),je=h-I*65536,h=Le+I+65535,I=Math.floor(h/65536),Le=h-I*65536,h=Oe+I+65535,I=Math.floor(h/65536),Oe=h-I*65536,h=Ze+I+65535,I=Math.floor(h/65536),Ze=h-I*65536,h=at+I+65535,I=Math.floor(h/65536),at=h-I*65536,h=tt+I+65535,I=Math.floor(h/65536),tt=h-I*65536,h=Ve+I+65535,I=Math.floor(h/65536),Ve=h-I*65536,h=De+I+65535,I=Math.floor(h/65536),De=h-I*65536,h=Te+I+65535,I=Math.floor(h/65536),Te=h-I*65536,h=Pe+I+65535,I=Math.floor(h/65536),Pe=h-I*65536,h=Ce+I+65535,I=Math.floor(h/65536),Ce=h-I*65536,h=we+I+65535,I=Math.floor(h/65536),we=h-I*65536,h=_e+I+65535,I=Math.floor(h/65536),_e=h-I*65536,h=he+I+65535,I=Math.floor(h/65536),he=h-I*65536,W+=I-1+37*(I-1),I=1,h=W+I+65535,I=Math.floor(h/65536),W=h-I*65536,h=ee+I+65535,I=Math.floor(h/65536),ee=h-I*65536,h=je+I+65535,I=Math.floor(h/65536),je=h-I*65536,h=Le+I+65535,I=Math.floor(h/65536),Le=h-I*65536,h=Oe+I+65535,I=Math.floor(h/65536),Oe=h-I*65536,h=Ze+I+65535,I=Math.floor(h/65536),Ze=h-I*65536,h=at+I+65535,I=Math.floor(h/65536),at=h-I*65536,h=tt+I+65535,I=Math.floor(h/65536),tt=h-I*65536,h=Ve+I+65535,I=Math.floor(h/65536),Ve=h-I*65536,h=De+I+65535,I=Math.floor(h/65536),De=h-I*65536,h=Te+I+65535,I=Math.floor(h/65536),Te=h-I*65536,h=Pe+I+65535,I=Math.floor(h/65536),Pe=h-I*65536,h=Ce+I+65535,I=Math.floor(h/65536),Ce=h-I*65536,h=we+I+65535,I=Math.floor(h/65536),we=h-I*65536,h=_e+I+65535,I=Math.floor(h/65536),_e=h-I*65536,h=he+I+65535,I=Math.floor(h/65536),he=h-I*65536,W+=I-1+37*(I-1),L[0]=W,L[1]=ee,L[2]=je,L[3]=Le,L[4]=Oe,L[5]=Ze,L[6]=at,L[7]=tt,L[8]=Ve,L[9]=De,L[10]=Te,L[11]=Pe,L[12]=Ce,L[13]=we,L[14]=_e,L[15]=he}function g(L,j){l(L,j,j)}function P(L,j){const N=s();let h;for(h=0;h<16;h++)N[h]=j[h];for(h=253;h>=0;h--)g(N,N),h!==2&&h!==4&&l(N,N,j);for(h=0;h<16;h++)L[h]=N[h]}function k(L,j){const N=s();let h;for(h=0;h<16;h++)N[h]=j[h];for(h=250;h>=0;h--)g(N,N),h!==1&&l(N,N,j);for(h=0;h<16;h++)L[h]=N[h]}function M(L,j){const N=s(),h=s(),I=s(),W=s(),ee=s(),je=s(),Le=s(),Oe=s(),Ze=s();y(N,L[1],L[0]),y(Ze,j[1],j[0]),l(N,N,Ze),x(h,L[0],L[1]),x(Ze,j[0],j[1]),l(h,h,Ze),l(I,L[3],j[3]),l(I,I,u),l(W,L[2],j[2]),x(W,W,W),y(ee,h,N),y(je,W,I),x(Le,W,I),x(Oe,h,N),l(L[0],ee,je),l(L[1],Oe,Le),l(L[2],Le,je),l(L[3],ee,Oe)}function G(L,j,N){for(let h=0;h<4;h++)E(L[h],j[h],N)}function Y(L,j){const N=s(),h=s(),I=s();P(I,j[2]),l(N,j[0],I),l(h,j[1],I),T(L,h),L[31]^=O(N)<<7}function C(L,j,N){m(L[0],a),m(L[1],o),m(L[2],o),m(L[3],a);for(let h=255;h>=0;--h){const I=N[h/8|0]>>(h&7)&1;G(L,j,I),M(j,L),M(L,L),G(L,j,I)}}function A(L,j){const N=[s(),s(),s(),s()];m(N[0],d),m(N[1],f),m(N[2],o),l(N[3],d,f),C(L,N,j)}function X(L){if(L.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const j=(0,r.hash)(L);j[0]&=248,j[31]&=127,j[31]|=64;const N=new Uint8Array(32),h=[s(),s(),s(),s()];A(h,j),Y(N,h);const I=new Uint8Array(64);return I.set(L),I.set(N,32),{publicKey:N,secretKey:I}}t.generateKeyPairFromSeed=X;function Z(L){const j=(0,e.randomBytes)(32,L),N=X(j);return(0,n.wipe)(j),N}t.generateKeyPair=Z;function $(L){if(L.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(L.subarray(32))}t.extractPublicKeyFromSecretKey=$;const q=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function z(L,j){let N,h,I,W;for(h=63;h>=32;--h){for(N=0,I=h-32,W=h-12;I<W;++I)j[I]+=N-16*j[h]*q[I-(h-32)],N=Math.floor((j[I]+128)/256),j[I]-=N*256;j[I]+=N,j[h]=0}for(N=0,I=0;I<32;I++)j[I]+=N-(j[31]>>4)*q[I],N=j[I]>>8,j[I]&=255;for(I=0;I<32;I++)j[I]-=N*q[I];for(h=0;h<32;h++)j[h+1]+=j[h]>>8,L[h]=j[h]&255}function F(L){const j=new Float64Array(64);for(let N=0;N<64;N++)j[N]=L[N];for(let N=0;N<64;N++)L[N]=0;z(L,j)}function ye(L,j){const N=new Float64Array(64),h=[s(),s(),s(),s()],I=(0,r.hash)(L.subarray(0,32));I[0]&=248,I[31]&=127,I[31]|=64;const W=new Uint8Array(64);W.set(I.subarray(32),32);const ee=new r.SHA512;ee.update(W.subarray(32)),ee.update(j);const je=ee.digest();ee.clean(),F(je),A(h,je),Y(W,h),ee.reset(),ee.update(W.subarray(0,32)),ee.update(L.subarray(32)),ee.update(j);const Le=ee.digest();F(Le);for(let Oe=0;Oe<32;Oe++)N[Oe]=je[Oe];for(let Oe=0;Oe<32;Oe++)for(let Ze=0;Ze<32;Ze++)N[Oe+Ze]+=Le[Oe]*I[Ze];return z(W.subarray(32),N),W}t.sign=ye;function K(L,j){const N=s(),h=s(),I=s(),W=s(),ee=s(),je=s(),Le=s();return m(L[2],o),w(L[1],j),g(I,L[1]),l(W,I,c),y(I,I,L[2]),x(W,L[2],W),g(ee,W),g(je,ee),l(Le,je,ee),l(N,Le,I),l(N,N,W),k(N,N),l(N,N,I),l(N,N,W),l(N,N,W),l(L[0],N,W),g(h,L[0]),l(h,h,W),v(h,I)&&l(L[0],L[0],p),g(h,L[0]),l(h,h,W),v(h,I)?-1:(O(L[0])===j[31]>>7&&y(L[0],a,L[0]),l(L[3],L[0],L[1]),0)}function de(L,j,N){const h=new Uint8Array(32),I=[s(),s(),s(),s()],W=[s(),s(),s(),s()];if(N.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(K(W,L))return!1;const ee=new r.SHA512;ee.update(N.subarray(0,32)),ee.update(L),ee.update(j);const je=ee.digest();return F(je),C(I,W,je),A(W,N.subarray(32)),M(I,W),Y(h,I),!U(N,h)}t.verify=de;function ne(L){let j=[s(),s(),s(),s()];if(K(j,L))throw new Error("Ed25519: invalid public key");let N=s(),h=s(),I=j[1];x(N,o,I),y(h,o,I),P(h,h),l(N,N,h);let W=new Uint8Array(32);return T(W,N),W}t.convertPublicKeyToX25519=ne;function le(L){const j=(0,r.hash)(L.subarray(0,32));j[0]&=248,j[31]&=127,j[31]|=64;const N=new Uint8Array(j.subarray(0,32));return(0,n.wipe)(j),N}t.convertSecretKeyToX25519=le})(uu);const Xm="EdDSA",ev="JWT",Ch=".",Nh="base64url",tv="utf8",rv="utf8",nv=":",sv="did",iv="key",jl="base58btc",ov="z",av="K36",cv=32;function lu(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Ph(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?lu(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function mc(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=Ph(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return lu(r)}function uv(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),a=i.charCodeAt(0);if(r[a]!==255)throw new TypeError(i+" is ambiguous");r[a]=s}var o=t.length,c=t.charAt(0),u=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function f(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var E=0,T=0,U=0,v=b.length;U!==v&&b[U]===0;)U++,E++;for(var O=(v-U)*d+1>>>0,w=new Uint8Array(O);U!==v;){for(var x=b[U],y=0,l=O-1;(x!==0||y<T)&&l!==-1;l--,y++)x+=256*w[l]>>>0,w[l]=x%o>>>0,x=x/o>>>0;if(x!==0)throw new Error("Non-zero carry");T=y,U++}for(var g=O-T;g!==O&&w[g]===0;)g++;for(var P=c.repeat(E);g<O;++g)P+=t.charAt(w[g]);return P}function p(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var E=0;if(b[E]!==" "){for(var T=0,U=0;b[E]===c;)T++,E++;for(var v=(b.length-E)*u+1>>>0,O=new Uint8Array(v);b[E];){var w=r[b.charCodeAt(E)];if(w===255)return;for(var x=0,y=v-1;(w!==0||x<U)&&y!==-1;y--,x++)w+=o*O[y]>>>0,O[y]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");U=x,E++}if(b[E]!==" "){for(var l=v-U;l!==v&&O[l]===0;)l++;for(var g=new Uint8Array(T+(v-l)),P=T;l!==v;)g[P++]=O[l++];return g}}}function m(b){var E=p(b);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:m}}var lv=uv,dv=lv;const hv=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fv=t=>new TextEncoder().encode(t),pv=t=>new TextDecoder().decode(t);class gv{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class yv{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return kh(this,e)}}class mv{constructor(e){this.decoders=e}or(e){return kh(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const kh=(t,e)=>new mv({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class vv{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new gv(e,r,n),this.decoder=new yv(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ia=({name:t,prefix:e,encode:r,decode:n})=>new vv(t,e,r,n),eo=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=dv(r,e);return Ia({prefix:t,name:e,encode:n,decode:i=>hv(s(i))})},_v=(t,e,r,n)=>{const s={};for(let d=0;d<e.length;++d)s[e[d]]=d;let i=t.length;for(;t[i-1]==="=";)--i;const a=new Uint8Array(i*r/8|0);let o=0,c=0,u=0;for(let d=0;d<i;++d){const f=s[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,o+=r,o>=8&&(o-=8,a[u++]=255&c>>o)}if(o>=r||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},bv=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>r;)a-=r,i+=e[s&o>>a];if(a&&(i+=e[s&o<<r-a]),n)for(;i.length*r&7;)i+="=";return i},Vt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Ia({prefix:e,name:t,encode(s){return bv(s,n,r)},decode(s){return _v(s,n,r,t)}}),wv=Ia({prefix:"\0",name:"identity",encode:t=>pv(t),decode:t=>fv(t)}),Ev=Object.freeze(Object.defineProperty({__proto__:null,identity:wv},Symbol.toStringTag,{value:"Module"})),Sv=Vt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),xv=Object.freeze(Object.defineProperty({__proto__:null,base2:Sv},Symbol.toStringTag,{value:"Module"})),Iv=Vt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Ov=Object.freeze(Object.defineProperty({__proto__:null,base8:Iv},Symbol.toStringTag,{value:"Module"})),Tv=eo({prefix:"9",name:"base10",alphabet:"0123456789"}),Cv=Object.freeze(Object.defineProperty({__proto__:null,base10:Tv},Symbol.toStringTag,{value:"Module"})),Nv=Vt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Pv=Vt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),kv=Object.freeze(Object.defineProperty({__proto__:null,base16:Nv,base16upper:Pv},Symbol.toStringTag,{value:"Module"})),Rv=Vt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Av=Vt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jv=Vt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Lv=Vt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Uv=Vt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Mv=Vt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Dv=Vt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zv=Vt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$v=Vt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Vv=Object.freeze(Object.defineProperty({__proto__:null,base32:Rv,base32hex:Uv,base32hexpad:Dv,base32hexpadupper:zv,base32hexupper:Mv,base32pad:jv,base32padupper:Lv,base32upper:Av,base32z:$v},Symbol.toStringTag,{value:"Module"})),qv=eo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Zv=eo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Fv=Object.freeze(Object.defineProperty({__proto__:null,base36:qv,base36upper:Zv},Symbol.toStringTag,{value:"Module"})),Kv=eo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Bv=eo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Hv=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Kv,base58flickr:Bv},Symbol.toStringTag,{value:"Module"})),Wv=Vt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Gv=Vt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Yv=Vt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Qv=Vt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Jv=Object.freeze(Object.defineProperty({__proto__:null,base64:Wv,base64pad:Gv,base64url:Yv,base64urlpad:Qv},Symbol.toStringTag,{value:"Module"})),Rh=Array.from(""),Xv=Rh.reduce((t,e,r)=>(t[r]=e,t),[]),e_=Rh.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function t_(t){return t.reduce((e,r)=>(e+=Xv[r],e),"")}function r_(t){const e=[];for(const r of t){const n=e_[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const n_=Ia({prefix:"",name:"base256emoji",encode:t_,decode:r_}),s_=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:n_},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Ll={...Ev,...xv,...Ov,...Cv,...kv,...Vv,...Fv,...Hv,...Jv,...s_};function Ah(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Ul=Ah("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ba=Ah("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Ph(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),jh={utf8:Ul,"utf-8":Ul,hex:Ll.base16,latin1:Ba,ascii:Ba,binary:Ba,...Ll};function nr(t,e="utf8"){const r=jh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function hr(t,e="utf8"){const r=jh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?lu(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Fo(t){return nr(hr(Xi(t),tv),Nh)}function Lh(t){const e=hr(av,jl),r=ov+nr(mc([e,t]),jl);return[sv,iv,r].join(nv)}function i_(t){return nr(t,Nh)}function o_(t){return hr([Fo(t.header),Fo(t.payload)].join(Ch),rv)}function a_(t){return[Fo(t.header),Fo(t.payload),i_(t.signature)].join(Ch)}function Ml(t=qs.randomBytes(cv)){return uu.generateKeyPairFromSeed(t)}async function c_(t,e,r,n,s=ae.fromMiliseconds(Date.now())){const i={alg:Xm,typ:ev},a=Lh(n.publicKey),o=s+r,c={iss:a,sub:t,aud:e,iat:s,exp:o},u=o_({header:i,payload:c}),d=uu.sign(n.secretKey,u);return a_({header:i,payload:c,signature:d})}var du={},Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});var Kt=Se,vc=vr,u_=20;function l_(t,e,r){for(var n=1634760805,s=857760878,i=2036477234,a=1797285236,o=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],m=r[27]<<24|r[26]<<16|r[25]<<8|r[24],b=r[31]<<24|r[30]<<16|r[29]<<8|r[28],E=e[3]<<24|e[2]<<16|e[1]<<8|e[0],T=e[7]<<24|e[6]<<16|e[5]<<8|e[4],U=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],O=n,w=s,x=i,y=a,l=o,g=c,P=u,k=d,M=f,G=p,Y=m,C=b,A=E,X=T,Z=U,$=v,q=0;q<u_;q+=2)O=O+l|0,A^=O,A=A>>>16|A<<16,M=M+A|0,l^=M,l=l>>>20|l<<12,w=w+g|0,X^=w,X=X>>>16|X<<16,G=G+X|0,g^=G,g=g>>>20|g<<12,x=x+P|0,Z^=x,Z=Z>>>16|Z<<16,Y=Y+Z|0,P^=Y,P=P>>>20|P<<12,y=y+k|0,$^=y,$=$>>>16|$<<16,C=C+$|0,k^=C,k=k>>>20|k<<12,x=x+P|0,Z^=x,Z=Z>>>24|Z<<8,Y=Y+Z|0,P^=Y,P=P>>>25|P<<7,y=y+k|0,$^=y,$=$>>>24|$<<8,C=C+$|0,k^=C,k=k>>>25|k<<7,w=w+g|0,X^=w,X=X>>>24|X<<8,G=G+X|0,g^=G,g=g>>>25|g<<7,O=O+l|0,A^=O,A=A>>>24|A<<8,M=M+A|0,l^=M,l=l>>>25|l<<7,O=O+g|0,$^=O,$=$>>>16|$<<16,Y=Y+$|0,g^=Y,g=g>>>20|g<<12,w=w+P|0,A^=w,A=A>>>16|A<<16,C=C+A|0,P^=C,P=P>>>20|P<<12,x=x+k|0,X^=x,X=X>>>16|X<<16,M=M+X|0,k^=M,k=k>>>20|k<<12,y=y+l|0,Z^=y,Z=Z>>>16|Z<<16,G=G+Z|0,l^=G,l=l>>>20|l<<12,x=x+k|0,X^=x,X=X>>>24|X<<8,M=M+X|0,k^=M,k=k>>>25|k<<7,y=y+l|0,Z^=y,Z=Z>>>24|Z<<8,G=G+Z|0,l^=G,l=l>>>25|l<<7,w=w+P|0,A^=w,A=A>>>24|A<<8,C=C+A|0,P^=C,P=P>>>25|P<<7,O=O+g|0,$^=O,$=$>>>24|$<<8,Y=Y+$|0,g^=Y,g=g>>>25|g<<7;Kt.writeUint32LE(O+n|0,t,0),Kt.writeUint32LE(w+s|0,t,4),Kt.writeUint32LE(x+i|0,t,8),Kt.writeUint32LE(y+a|0,t,12),Kt.writeUint32LE(l+o|0,t,16),Kt.writeUint32LE(g+c|0,t,20),Kt.writeUint32LE(P+u|0,t,24),Kt.writeUint32LE(k+d|0,t,28),Kt.writeUint32LE(M+f|0,t,32),Kt.writeUint32LE(G+p|0,t,36),Kt.writeUint32LE(Y+m|0,t,40),Kt.writeUint32LE(C+b|0,t,44),Kt.writeUint32LE(A+E|0,t,48),Kt.writeUint32LE(X+T|0,t,52),Kt.writeUint32LE(Z+U|0,t,56),Kt.writeUint32LE($+v|0,t,60)}function Uh(t,e,r,n,s){if(s===void 0&&(s=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var i,a;if(s===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");i=new Uint8Array(16),a=i.length-e.length,i.set(e,a)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");i=e,a=s}for(var o=new Uint8Array(64),c=0;c<r.length;c+=64){l_(o,i,t);for(var u=c;u<c+64&&u<r.length;u++)n[u]=r[u]^o[u-c];h_(i,0,a)}return vc.wipe(o),s===0&&vc.wipe(i),n}Oa.streamXOR=Uh;function d_(t,e,r,n){return n===void 0&&(n=0),vc.wipe(r),Uh(t,e,r,r,n)}Oa.stream=d_;function h_(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Mh={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});function f_(t,e,r){return~(t-1)&e|t-1&r}zn.select=f_;function p_(t,e){return(t|0)-(e|0)-1>>>31&1}zn.lessOrEqual=p_;function Dh(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}zn.compare=Dh;function g_(t,e){return t.length===0||e.length===0?!1:Dh(t,e)!==0}zn.equal=g_;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=zn,r=vr;t.DIGEST_LENGTH=16;var n=function(){function a(o){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=o[0]|o[1]<<8;this._r[0]=c&8191;var u=o[2]|o[3]<<8;this._r[1]=(c>>>13|u<<3)&8191;var d=o[4]|o[5]<<8;this._r[2]=(u>>>10|d<<6)&7939;var f=o[6]|o[7]<<8;this._r[3]=(d>>>7|f<<9)&8191;var p=o[8]|o[9]<<8;this._r[4]=(f>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var m=o[10]|o[11]<<8;this._r[6]=(p>>>14|m<<2)&8191;var b=o[12]|o[13]<<8;this._r[7]=(m>>>11|b<<5)&8065;var E=o[14]|o[15]<<8;this._r[8]=(b>>>8|E<<8)&8191,this._r[9]=E>>>5&127,this._pad[0]=o[16]|o[17]<<8,this._pad[1]=o[18]|o[19]<<8,this._pad[2]=o[20]|o[21]<<8,this._pad[3]=o[22]|o[23]<<8,this._pad[4]=o[24]|o[25]<<8,this._pad[5]=o[26]|o[27]<<8,this._pad[6]=o[28]|o[29]<<8,this._pad[7]=o[30]|o[31]<<8}return a.prototype._blocks=function(o,c,u){for(var d=this._fin?0:2048,f=this._h[0],p=this._h[1],m=this._h[2],b=this._h[3],E=this._h[4],T=this._h[5],U=this._h[6],v=this._h[7],O=this._h[8],w=this._h[9],x=this._r[0],y=this._r[1],l=this._r[2],g=this._r[3],P=this._r[4],k=this._r[5],M=this._r[6],G=this._r[7],Y=this._r[8],C=this._r[9];u>=16;){var A=o[c+0]|o[c+1]<<8;f+=A&8191;var X=o[c+2]|o[c+3]<<8;p+=(A>>>13|X<<3)&8191;var Z=o[c+4]|o[c+5]<<8;m+=(X>>>10|Z<<6)&8191;var $=o[c+6]|o[c+7]<<8;b+=(Z>>>7|$<<9)&8191;var q=o[c+8]|o[c+9]<<8;E+=($>>>4|q<<12)&8191,T+=q>>>1&8191;var z=o[c+10]|o[c+11]<<8;U+=(q>>>14|z<<2)&8191;var F=o[c+12]|o[c+13]<<8;v+=(z>>>11|F<<5)&8191;var ye=o[c+14]|o[c+15]<<8;O+=(F>>>8|ye<<8)&8191,w+=ye>>>5|d;var K=0,de=K;de+=f*x,de+=p*(5*C),de+=m*(5*Y),de+=b*(5*G),de+=E*(5*M),K=de>>>13,de&=8191,de+=T*(5*k),de+=U*(5*P),de+=v*(5*g),de+=O*(5*l),de+=w*(5*y),K+=de>>>13,de&=8191;var ne=K;ne+=f*y,ne+=p*x,ne+=m*(5*C),ne+=b*(5*Y),ne+=E*(5*G),K=ne>>>13,ne&=8191,ne+=T*(5*M),ne+=U*(5*k),ne+=v*(5*P),ne+=O*(5*g),ne+=w*(5*l),K+=ne>>>13,ne&=8191;var le=K;le+=f*l,le+=p*y,le+=m*x,le+=b*(5*C),le+=E*(5*Y),K=le>>>13,le&=8191,le+=T*(5*G),le+=U*(5*M),le+=v*(5*k),le+=O*(5*P),le+=w*(5*g),K+=le>>>13,le&=8191;var L=K;L+=f*g,L+=p*l,L+=m*y,L+=b*x,L+=E*(5*C),K=L>>>13,L&=8191,L+=T*(5*Y),L+=U*(5*G),L+=v*(5*M),L+=O*(5*k),L+=w*(5*P),K+=L>>>13,L&=8191;var j=K;j+=f*P,j+=p*g,j+=m*l,j+=b*y,j+=E*x,K=j>>>13,j&=8191,j+=T*(5*C),j+=U*(5*Y),j+=v*(5*G),j+=O*(5*M),j+=w*(5*k),K+=j>>>13,j&=8191;var N=K;N+=f*k,N+=p*P,N+=m*g,N+=b*l,N+=E*y,K=N>>>13,N&=8191,N+=T*x,N+=U*(5*C),N+=v*(5*Y),N+=O*(5*G),N+=w*(5*M),K+=N>>>13,N&=8191;var h=K;h+=f*M,h+=p*k,h+=m*P,h+=b*g,h+=E*l,K=h>>>13,h&=8191,h+=T*y,h+=U*x,h+=v*(5*C),h+=O*(5*Y),h+=w*(5*G),K+=h>>>13,h&=8191;var I=K;I+=f*G,I+=p*M,I+=m*k,I+=b*P,I+=E*g,K=I>>>13,I&=8191,I+=T*l,I+=U*y,I+=v*x,I+=O*(5*C),I+=w*(5*Y),K+=I>>>13,I&=8191;var W=K;W+=f*Y,W+=p*G,W+=m*M,W+=b*k,W+=E*P,K=W>>>13,W&=8191,W+=T*g,W+=U*l,W+=v*y,W+=O*x,W+=w*(5*C),K+=W>>>13,W&=8191;var ee=K;ee+=f*C,ee+=p*Y,ee+=m*G,ee+=b*M,ee+=E*k,K=ee>>>13,ee&=8191,ee+=T*P,ee+=U*g,ee+=v*l,ee+=O*y,ee+=w*x,K+=ee>>>13,ee&=8191,K=(K<<2)+K|0,K=K+de|0,de=K&8191,K=K>>>13,ne+=K,f=de,p=ne,m=le,b=L,E=j,T=N,U=h,v=I,O=W,w=ee,c+=16,u-=16}this._h[0]=f,this._h[1]=p,this._h[2]=m,this._h[3]=b,this._h[4]=E,this._h[5]=T,this._h[6]=U,this._h[7]=v,this._h[8]=O,this._h[9]=w},a.prototype.finish=function(o,c){c===void 0&&(c=0);var u=new Uint16Array(10),d,f,p,m;if(this._leftover){for(m=this._leftover,this._buffer[m++]=1;m<16;m++)this._buffer[m]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,m=2;m<10;m++)this._h[m]+=d,d=this._h[m]>>>13,this._h[m]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,u[0]=this._h[0]+5,d=u[0]>>>13,u[0]&=8191,m=1;m<10;m++)u[m]=this._h[m]+d,d=u[m]>>>13,u[m]&=8191;for(u[9]-=8192,f=(d^1)-1,m=0;m<10;m++)u[m]&=f;for(f=~f,m=0;m<10;m++)this._h[m]=this._h[m]&f|u[m];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,p=this._h[0]+this._pad[0],this._h[0]=p&65535,m=1;m<8;m++)p=(this._h[m]+this._pad[m]|0)+(p>>>16)|0,this._h[m]=p&65535;return o[c+0]=this._h[0]>>>0,o[c+1]=this._h[0]>>>8,o[c+2]=this._h[1]>>>0,o[c+3]=this._h[1]>>>8,o[c+4]=this._h[2]>>>0,o[c+5]=this._h[2]>>>8,o[c+6]=this._h[3]>>>0,o[c+7]=this._h[3]>>>8,o[c+8]=this._h[4]>>>0,o[c+9]=this._h[4]>>>8,o[c+10]=this._h[5]>>>0,o[c+11]=this._h[5]>>>8,o[c+12]=this._h[6]>>>0,o[c+13]=this._h[6]>>>8,o[c+14]=this._h[7]>>>0,o[c+15]=this._h[7]>>>8,this._finished=!0,this},a.prototype.update=function(o){var c=0,u=o.length,d;if(this._leftover){d=16-this._leftover,d>u&&(d=u);for(var f=0;f<d;f++)this._buffer[this._leftover+f]=o[c+f];if(u-=d,c+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(d=u-u%16,this._blocks(o,c,d),c+=d,u-=d),u){for(var f=0;f<u;f++)this._buffer[this._leftover+f]=o[c+f];this._leftover+=u}return this},a.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var o=new Uint8Array(16);return this.finish(o),o},a.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},a}();t.Poly1305=n;function s(a,o){var c=new n(a);c.update(o);var u=c.digest();return c.clean(),u}t.oneTimeAuth=s;function i(a,o){return a.length!==t.DIGEST_LENGTH||o.length!==t.DIGEST_LENGTH?!1:e.equal(a,o)}t.equal=i})(Mh);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Oa,r=Mh,n=vr,s=Se,i=zn;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var a=new Uint8Array(16),o=function(){function c(u){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,u.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return c.prototype.seal=function(u,d,f,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var m=new Uint8Array(16);m.set(u,m.length-u.length);var b=new Uint8Array(32);e.stream(this._key,m,b,4);var E=d.length+this.tagLength,T;if(p){if(p.length!==E)throw new Error("ChaCha20Poly1305: incorrect destination length");T=p}else T=new Uint8Array(E);return e.streamXOR(this._key,m,d,T,4),this._authenticate(T.subarray(T.length-this.tagLength,T.length),b,T.subarray(0,T.length-this.tagLength),f),n.wipe(m),T},c.prototype.open=function(u,d,f,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var m=new Uint8Array(16);m.set(u,m.length-u.length);var b=new Uint8Array(32);e.stream(this._key,m,b,4);var E=new Uint8Array(this.tagLength);if(this._authenticate(E,b,d.subarray(0,d.length-this.tagLength),f),!i.equal(E,d.subarray(d.length-this.tagLength,d.length)))return null;var T=d.length-this.tagLength,U;if(p){if(p.length!==T)throw new Error("ChaCha20Poly1305: incorrect destination length");U=p}else U=new Uint8Array(T);return e.streamXOR(this._key,m,d.subarray(0,d.length-this.tagLength),U,4),n.wipe(m),U},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(u,d,f,p){var m=new r.Poly1305(d);p&&(m.update(p),p.length%16>0&&m.update(a.subarray(p.length%16))),m.update(f),f.length%16>0&&m.update(a.subarray(f.length%16));var b=new Uint8Array(8);p&&s.writeUint64LE(p.length,b),m.update(b),s.writeUint64LE(f.length,b),m.update(b);for(var E=m.digest(),T=0;T<E.length;T++)u[T]=E[T];m.clean(),n.wipe(E),n.wipe(b)},c}();t.ChaCha20Poly1305=o})(du);var zh={},to={},hu={};Object.defineProperty(hu,"__esModule",{value:!0});function y_(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}hu.isSerializableHash=y_;Object.defineProperty(to,"__esModule",{value:!0});var Fr=hu,m_=zn,v_=vr,$h=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var s=0;s<n.length;s++)n[s]^=54;this._inner.update(n);for(var s=0;s<n.length;s++)n[s]^=106;this._outer.update(n),Fr.isSerializableHash(this._inner)&&Fr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),v_.wipe(n)}return t.prototype.reset=function(){if(!Fr.isSerializableHash(this._inner)||!Fr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Fr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Fr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Fr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Fr.isSerializableHash(this._inner)||!Fr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Fr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();to.HMAC=$h;function __(t,e,r){var n=new $h(t,e);n.update(r);var s=n.digest();return n.clean(),s}to.hmac=__;to.equal=m_.equal;Object.defineProperty(zh,"__esModule",{value:!0});var Dl=to,zl=vr,b_=function(){function t(e,r,n,s){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=s;var i=Dl.hmac(this._hash,n,r);this._hmac=new Dl.HMAC(e,i),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),zl.wipe(this._buffer),zl.wipe(this._counter),this._bufpos=0},t}(),w_=zh.HKDF=b_,Ta={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Se,r=vr;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function o(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},o.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(i(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=i(this._temp,this._state,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},o.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,p=u<<3,m=u%64<56?64:128;this._buffer[d]=128;for(var b=d+1;b<m-8;b++)this._buffer[b]=0;e.writeUint32BE(f,this._buffer,m-8),e.writeUint32BE(p,this._buffer,m-4),i(this._temp,this._state,this._buffer,0,m),this._finished=!0}for(var b=0;b<this.digestLength/4;b++)e.writeUint32BE(this._state[b],c,b*4);return this},o.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},o}();t.SHA256=n;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function i(o,c,u,d,f){for(;f>=64;){for(var p=c[0],m=c[1],b=c[2],E=c[3],T=c[4],U=c[5],v=c[6],O=c[7],w=0;w<16;w++){var x=d+w*4;o[w]=e.readUint32BE(u,x)}for(var w=16;w<64;w++){var y=o[w-2],l=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=o[w-15];var g=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;o[w]=(l+o[w-7]|0)+(g+o[w-16]|0)}for(var w=0;w<64;w++){var l=(((T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7))+(T&U^~T&v)|0)+(O+(s[w]+o[w]|0)|0)|0,g=((p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10))+(p&m^p&b^m&b)|0;O=v,v=U,U=T,T=E+l|0,E=b,b=m,m=p,p=l+g|0}c[0]+=p,c[1]+=m,c[2]+=b,c[3]+=E,c[4]+=T,c[5]+=U,c[6]+=v,c[7]+=O,d+=64,f-=64}return d}function a(o){var c=new n;c.update(o);var u=c.digest();return c.clean(),u}t.hash=a})(Ta);var fu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=qs,r=vr;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(w){const x=new Float64Array(16);if(w)for(let y=0;y<w.length;y++)x[y]=w[y];return x}const s=new Uint8Array(32);s[0]=9;const i=n([56129,1]);function a(w){let x=1;for(let y=0;y<16;y++){let l=w[y]+x+65535;x=Math.floor(l/65536),w[y]=l-x*65536}w[0]+=x-1+37*(x-1)}function o(w,x,y){const l=~(y-1);for(let g=0;g<16;g++){const P=l&(w[g]^x[g]);w[g]^=P,x[g]^=P}}function c(w,x){const y=n(),l=n();for(let g=0;g<16;g++)l[g]=x[g];a(l),a(l),a(l);for(let g=0;g<2;g++){y[0]=l[0]-65517;for(let k=1;k<15;k++)y[k]=l[k]-65535-(y[k-1]>>16&1),y[k-1]&=65535;y[15]=l[15]-32767-(y[14]>>16&1);const P=y[15]>>16&1;y[14]&=65535,o(l,y,1-P)}for(let g=0;g<16;g++)w[2*g]=l[g]&255,w[2*g+1]=l[g]>>8}function u(w,x){for(let y=0;y<16;y++)w[y]=x[2*y]+(x[2*y+1]<<8);w[15]&=32767}function d(w,x,y){for(let l=0;l<16;l++)w[l]=x[l]+y[l]}function f(w,x,y){for(let l=0;l<16;l++)w[l]=x[l]-y[l]}function p(w,x,y){let l,g,P=0,k=0,M=0,G=0,Y=0,C=0,A=0,X=0,Z=0,$=0,q=0,z=0,F=0,ye=0,K=0,de=0,ne=0,le=0,L=0,j=0,N=0,h=0,I=0,W=0,ee=0,je=0,Le=0,Oe=0,Ze=0,at=0,tt=0,Ve=y[0],De=y[1],Te=y[2],Pe=y[3],Ce=y[4],we=y[5],_e=y[6],he=y[7],ke=y[8],Ue=y[9],me=y[10],ze=y[11],Fe=y[12],We=y[13],Ge=y[14],Ke=y[15];l=x[0],P+=l*Ve,k+=l*De,M+=l*Te,G+=l*Pe,Y+=l*Ce,C+=l*we,A+=l*_e,X+=l*he,Z+=l*ke,$+=l*Ue,q+=l*me,z+=l*ze,F+=l*Fe,ye+=l*We,K+=l*Ge,de+=l*Ke,l=x[1],k+=l*Ve,M+=l*De,G+=l*Te,Y+=l*Pe,C+=l*Ce,A+=l*we,X+=l*_e,Z+=l*he,$+=l*ke,q+=l*Ue,z+=l*me,F+=l*ze,ye+=l*Fe,K+=l*We,de+=l*Ge,ne+=l*Ke,l=x[2],M+=l*Ve,G+=l*De,Y+=l*Te,C+=l*Pe,A+=l*Ce,X+=l*we,Z+=l*_e,$+=l*he,q+=l*ke,z+=l*Ue,F+=l*me,ye+=l*ze,K+=l*Fe,de+=l*We,ne+=l*Ge,le+=l*Ke,l=x[3],G+=l*Ve,Y+=l*De,C+=l*Te,A+=l*Pe,X+=l*Ce,Z+=l*we,$+=l*_e,q+=l*he,z+=l*ke,F+=l*Ue,ye+=l*me,K+=l*ze,de+=l*Fe,ne+=l*We,le+=l*Ge,L+=l*Ke,l=x[4],Y+=l*Ve,C+=l*De,A+=l*Te,X+=l*Pe,Z+=l*Ce,$+=l*we,q+=l*_e,z+=l*he,F+=l*ke,ye+=l*Ue,K+=l*me,de+=l*ze,ne+=l*Fe,le+=l*We,L+=l*Ge,j+=l*Ke,l=x[5],C+=l*Ve,A+=l*De,X+=l*Te,Z+=l*Pe,$+=l*Ce,q+=l*we,z+=l*_e,F+=l*he,ye+=l*ke,K+=l*Ue,de+=l*me,ne+=l*ze,le+=l*Fe,L+=l*We,j+=l*Ge,N+=l*Ke,l=x[6],A+=l*Ve,X+=l*De,Z+=l*Te,$+=l*Pe,q+=l*Ce,z+=l*we,F+=l*_e,ye+=l*he,K+=l*ke,de+=l*Ue,ne+=l*me,le+=l*ze,L+=l*Fe,j+=l*We,N+=l*Ge,h+=l*Ke,l=x[7],X+=l*Ve,Z+=l*De,$+=l*Te,q+=l*Pe,z+=l*Ce,F+=l*we,ye+=l*_e,K+=l*he,de+=l*ke,ne+=l*Ue,le+=l*me,L+=l*ze,j+=l*Fe,N+=l*We,h+=l*Ge,I+=l*Ke,l=x[8],Z+=l*Ve,$+=l*De,q+=l*Te,z+=l*Pe,F+=l*Ce,ye+=l*we,K+=l*_e,de+=l*he,ne+=l*ke,le+=l*Ue,L+=l*me,j+=l*ze,N+=l*Fe,h+=l*We,I+=l*Ge,W+=l*Ke,l=x[9],$+=l*Ve,q+=l*De,z+=l*Te,F+=l*Pe,ye+=l*Ce,K+=l*we,de+=l*_e,ne+=l*he,le+=l*ke,L+=l*Ue,j+=l*me,N+=l*ze,h+=l*Fe,I+=l*We,W+=l*Ge,ee+=l*Ke,l=x[10],q+=l*Ve,z+=l*De,F+=l*Te,ye+=l*Pe,K+=l*Ce,de+=l*we,ne+=l*_e,le+=l*he,L+=l*ke,j+=l*Ue,N+=l*me,h+=l*ze,I+=l*Fe,W+=l*We,ee+=l*Ge,je+=l*Ke,l=x[11],z+=l*Ve,F+=l*De,ye+=l*Te,K+=l*Pe,de+=l*Ce,ne+=l*we,le+=l*_e,L+=l*he,j+=l*ke,N+=l*Ue,h+=l*me,I+=l*ze,W+=l*Fe,ee+=l*We,je+=l*Ge,Le+=l*Ke,l=x[12],F+=l*Ve,ye+=l*De,K+=l*Te,de+=l*Pe,ne+=l*Ce,le+=l*we,L+=l*_e,j+=l*he,N+=l*ke,h+=l*Ue,I+=l*me,W+=l*ze,ee+=l*Fe,je+=l*We,Le+=l*Ge,Oe+=l*Ke,l=x[13],ye+=l*Ve,K+=l*De,de+=l*Te,ne+=l*Pe,le+=l*Ce,L+=l*we,j+=l*_e,N+=l*he,h+=l*ke,I+=l*Ue,W+=l*me,ee+=l*ze,je+=l*Fe,Le+=l*We,Oe+=l*Ge,Ze+=l*Ke,l=x[14],K+=l*Ve,de+=l*De,ne+=l*Te,le+=l*Pe,L+=l*Ce,j+=l*we,N+=l*_e,h+=l*he,I+=l*ke,W+=l*Ue,ee+=l*me,je+=l*ze,Le+=l*Fe,Oe+=l*We,Ze+=l*Ge,at+=l*Ke,l=x[15],de+=l*Ve,ne+=l*De,le+=l*Te,L+=l*Pe,j+=l*Ce,N+=l*we,h+=l*_e,I+=l*he,W+=l*ke,ee+=l*Ue,je+=l*me,Le+=l*ze,Oe+=l*Fe,Ze+=l*We,at+=l*Ge,tt+=l*Ke,P+=38*ne,k+=38*le,M+=38*L,G+=38*j,Y+=38*N,C+=38*h,A+=38*I,X+=38*W,Z+=38*ee,$+=38*je,q+=38*Le,z+=38*Oe,F+=38*Ze,ye+=38*at,K+=38*tt,g=1,l=P+g+65535,g=Math.floor(l/65536),P=l-g*65536,l=k+g+65535,g=Math.floor(l/65536),k=l-g*65536,l=M+g+65535,g=Math.floor(l/65536),M=l-g*65536,l=G+g+65535,g=Math.floor(l/65536),G=l-g*65536,l=Y+g+65535,g=Math.floor(l/65536),Y=l-g*65536,l=C+g+65535,g=Math.floor(l/65536),C=l-g*65536,l=A+g+65535,g=Math.floor(l/65536),A=l-g*65536,l=X+g+65535,g=Math.floor(l/65536),X=l-g*65536,l=Z+g+65535,g=Math.floor(l/65536),Z=l-g*65536,l=$+g+65535,g=Math.floor(l/65536),$=l-g*65536,l=q+g+65535,g=Math.floor(l/65536),q=l-g*65536,l=z+g+65535,g=Math.floor(l/65536),z=l-g*65536,l=F+g+65535,g=Math.floor(l/65536),F=l-g*65536,l=ye+g+65535,g=Math.floor(l/65536),ye=l-g*65536,l=K+g+65535,g=Math.floor(l/65536),K=l-g*65536,l=de+g+65535,g=Math.floor(l/65536),de=l-g*65536,P+=g-1+37*(g-1),g=1,l=P+g+65535,g=Math.floor(l/65536),P=l-g*65536,l=k+g+65535,g=Math.floor(l/65536),k=l-g*65536,l=M+g+65535,g=Math.floor(l/65536),M=l-g*65536,l=G+g+65535,g=Math.floor(l/65536),G=l-g*65536,l=Y+g+65535,g=Math.floor(l/65536),Y=l-g*65536,l=C+g+65535,g=Math.floor(l/65536),C=l-g*65536,l=A+g+65535,g=Math.floor(l/65536),A=l-g*65536,l=X+g+65535,g=Math.floor(l/65536),X=l-g*65536,l=Z+g+65535,g=Math.floor(l/65536),Z=l-g*65536,l=$+g+65535,g=Math.floor(l/65536),$=l-g*65536,l=q+g+65535,g=Math.floor(l/65536),q=l-g*65536,l=z+g+65535,g=Math.floor(l/65536),z=l-g*65536,l=F+g+65535,g=Math.floor(l/65536),F=l-g*65536,l=ye+g+65535,g=Math.floor(l/65536),ye=l-g*65536,l=K+g+65535,g=Math.floor(l/65536),K=l-g*65536,l=de+g+65535,g=Math.floor(l/65536),de=l-g*65536,P+=g-1+37*(g-1),w[0]=P,w[1]=k,w[2]=M,w[3]=G,w[4]=Y,w[5]=C,w[6]=A,w[7]=X,w[8]=Z,w[9]=$,w[10]=q,w[11]=z,w[12]=F,w[13]=ye,w[14]=K,w[15]=de}function m(w,x){p(w,x,x)}function b(w,x){const y=n();for(let l=0;l<16;l++)y[l]=x[l];for(let l=253;l>=0;l--)m(y,y),l!==2&&l!==4&&p(y,y,x);for(let l=0;l<16;l++)w[l]=y[l]}function E(w,x){const y=new Uint8Array(32),l=new Float64Array(80),g=n(),P=n(),k=n(),M=n(),G=n(),Y=n();for(let Z=0;Z<31;Z++)y[Z]=w[Z];y[31]=w[31]&127|64,y[0]&=248,u(l,x);for(let Z=0;Z<16;Z++)P[Z]=l[Z];g[0]=M[0]=1;for(let Z=254;Z>=0;--Z){const $=y[Z>>>3]>>>(Z&7)&1;o(g,P,$),o(k,M,$),d(G,g,k),f(g,g,k),d(k,P,M),f(P,P,M),m(M,G),m(Y,g),p(g,k,g),p(k,P,G),d(G,g,k),f(g,g,k),m(P,g),f(k,M,Y),p(g,k,i),d(g,g,M),p(k,k,g),p(g,M,Y),p(M,P,l),m(P,G),o(g,P,$),o(k,M,$)}for(let Z=0;Z<16;Z++)l[Z+16]=g[Z],l[Z+32]=k[Z],l[Z+48]=P[Z],l[Z+64]=M[Z];const C=l.subarray(32),A=l.subarray(16);b(C,C),p(A,A,C);const X=new Uint8Array(32);return c(X,A),X}t.scalarMult=E;function T(w){return E(w,s)}t.scalarMultBase=T;function U(w){if(w.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const x=new Uint8Array(w);return{publicKey:T(x),secretKey:x}}t.generateKeyPairFromSeed=U;function v(w){const x=(0,e.randomBytes)(32,w),y=U(x);return(0,r.wipe)(x),y}t.generateKeyPair=v;function O(w,x,y=!1){if(w.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(x.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const l=E(w,x);if(y){let g=0;for(let P=0;P<l.length;P++)g|=l[P];if(g===0)throw new Error("X25519: invalid shared key")}return l}t.sharedKey=O})(fu);var $l=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},E_=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),S_=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),x_=function(){function t(e,r,n,s){this.name=e,this.version=r,this.os=n,this.bot=s,this.type="bot-device"}return t}(),I_=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),O_=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),T_=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,C_=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Vl=3,N_=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",T_]],ql=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function P_(t){return t?Zl(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new O_:typeof navigator<"u"?Zl(navigator.userAgent):A_()}function k_(t){return t!==""&&N_.reduce(function(e,r){var n=r[0],s=r[1];if(e)return e;var i=s.exec(t);return!!i&&[n,i]},!1)}function Zl(t){var e=k_(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new I_;var s=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);s?s.length<Vl&&(s=$l($l([],s,!0),j_(Vl-s.length),!0)):s=[];var i=s.join("."),a=R_(t),o=C_.exec(t);return o&&o[1]?new x_(r,i,a,o[1]):new E_(r,i,a)}function R_(t){for(var e=0,r=ql.length;e<r;e++){var n=ql[e],s=n[0],i=n[1],a=i.exec(t);if(a)return s}return null}function A_(){var t=typeof process<"u"&&process.version;return t?new S_(process.version.slice(1)):null}function j_(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.getLocalStorage=nt.getLocalStorageOrThrow=nt.getCrypto=nt.getCryptoOrThrow=qh=nt.getLocation=nt.getLocationOrThrow=pu=nt.getNavigator=nt.getNavigatorOrThrow=Vh=nt.getDocument=nt.getDocumentOrThrow=nt.getFromWindowOrThrow=nt.getFromWindow=void 0;function us(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}nt.getFromWindow=us;function Zs(t){const e=us(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}nt.getFromWindowOrThrow=Zs;function L_(){return Zs("document")}nt.getDocumentOrThrow=L_;function U_(){return us("document")}var Vh=nt.getDocument=U_;function M_(){return Zs("navigator")}nt.getNavigatorOrThrow=M_;function D_(){return us("navigator")}var pu=nt.getNavigator=D_;function z_(){return Zs("location")}nt.getLocationOrThrow=z_;function $_(){return us("location")}var qh=nt.getLocation=$_;function V_(){return Zs("crypto")}nt.getCryptoOrThrow=V_;function q_(){return us("crypto")}nt.getCrypto=q_;function Z_(){return Zs("localStorage")}nt.getLocalStorageOrThrow=Z_;function F_(){return us("localStorage")}nt.getLocalStorage=F_;var gu={};Object.defineProperty(gu,"__esModule",{value:!0});var Zh=gu.getWindowMetadata=void 0;const Fl=nt;function K_(){let t,e;try{t=Fl.getDocumentOrThrow(),e=Fl.getLocationOrThrow()}catch{return null}function r(){const d=t.getElementsByTagName("link"),f=[];for(let p=0;p<d.length;p++){const m=d[p],b=m.getAttribute("rel");if(b&&b.toLowerCase().indexOf("icon")>-1){const E=m.getAttribute("href");if(E)if(E.toLowerCase().indexOf("https:")===-1&&E.toLowerCase().indexOf("http:")===-1&&E.indexOf("//")!==0){let T=e.protocol+"//"+e.host;if(E.indexOf("/")===0)T+=E;else{const U=e.pathname.split("/");U.pop();const v=U.join("/");T+=v+"/"+E}f.push(T)}else if(E.indexOf("//")===0){const T=e.protocol+E;f.push(T)}else f.push(E)}}return f}function n(...d){const f=t.getElementsByTagName("meta");for(let p=0;p<f.length;p++){const m=f[p],b=["itemprop","property","name"].map(E=>m.getAttribute(E)).filter(E=>E?d.includes(E):!1);if(b.length&&b){const E=m.getAttribute("content");if(E)return E}}return""}function s(){let d=n("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return n("description","og:description","twitter:description","keywords")}const a=s(),o=i(),c=e.origin,u=r();return{description:o,url:c,icons:u,name:a}}Zh=gu.getWindowMetadata=K_;var yi={},B_=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Fh="%[a-f0-9]{2}",Kl=new RegExp("("+Fh+")|([^%]+?)","gi"),Bl=new RegExp("("+Fh+")+","gi");function _c(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],_c(r),_c(n))}function H_(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Kl)||[],r=1;r<e.length;r++)t=_c(e,r).join(""),e=t.match(Kl)||[];return t}}function W_(t){for(var e={"%FE%FF":"","%FF%FE":""},r=Bl.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=H_(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Bl.exec(t)}e["%C2"]="";for(var s=Object.keys(e),i=0;i<s.length;i++){var a=s[i];t=t.replace(new RegExp(a,"g"),e[a])}return t}var G_=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return W_(t)}},Y_=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Q_=function(t,e){for(var r={},n=Object.keys(t),s=Array.isArray(e),i=0;i<n.length;i++){var a=n[i],o=t[a];(s?e.indexOf(a)!==-1:e(a,o,t))&&(r[a]=o)}return r};(function(t){const e=B_,r=G_,n=Y_,s=Q_,i=v=>v==null,a=Symbol("encodeFragmentIdentifier");function o(v){switch(v.arrayFormat){case"index":return O=>(w,x)=>{const y=w.length;return x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,[d(O,v),"[",y,"]"].join("")]:[...w,[d(O,v),"[",d(y,v),"]=",d(x,v)].join("")]};case"bracket":return O=>(w,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,[d(O,v),"[]"].join("")]:[...w,[d(O,v),"[]=",d(x,v)].join("")];case"colon-list-separator":return O=>(w,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,[d(O,v),":list="].join("")]:[...w,[d(O,v),":list=",d(x,v)].join("")];case"comma":case"separator":case"bracket-separator":{const O=v.arrayFormat==="bracket-separator"?"[]=":"=";return w=>(x,y)=>y===void 0||v.skipNull&&y===null||v.skipEmptyString&&y===""?x:(y=y===null?"":y,x.length===0?[[d(w,v),O,d(y,v)].join("")]:[[x,d(y,v)].join(v.arrayFormatSeparator)])}default:return O=>(w,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,d(O,v)]:[...w,[d(O,v),"=",d(x,v)].join("")]}}function c(v){let O;switch(v.arrayFormat){case"index":return(w,x,y)=>{if(O=/\[(\d*)\]$/.exec(w),w=w.replace(/\[\d*\]$/,""),!O){y[w]=x;return}y[w]===void 0&&(y[w]={}),y[w][O[1]]=x};case"bracket":return(w,x,y)=>{if(O=/(\[\])$/.exec(w),w=w.replace(/\[\]$/,""),!O){y[w]=x;return}if(y[w]===void 0){y[w]=[x];return}y[w]=[].concat(y[w],x)};case"colon-list-separator":return(w,x,y)=>{if(O=/(:list)$/.exec(w),w=w.replace(/:list$/,""),!O){y[w]=x;return}if(y[w]===void 0){y[w]=[x];return}y[w]=[].concat(y[w],x)};case"comma":case"separator":return(w,x,y)=>{const l=typeof x=="string"&&x.includes(v.arrayFormatSeparator),g=typeof x=="string"&&!l&&f(x,v).includes(v.arrayFormatSeparator);x=g?f(x,v):x;const P=l||g?x.split(v.arrayFormatSeparator).map(k=>f(k,v)):x===null?x:f(x,v);y[w]=P};case"bracket-separator":return(w,x,y)=>{const l=/(\[\])$/.test(w);if(w=w.replace(/\[\]$/,""),!l){y[w]=x&&f(x,v);return}const g=x===null?[]:x.split(v.arrayFormatSeparator).map(P=>f(P,v));if(y[w]===void 0){y[w]=g;return}y[w]=[].concat(y[w],g)};default:return(w,x,y)=>{if(y[w]===void 0){y[w]=x;return}y[w]=[].concat(y[w],x)}}}function u(v){if(typeof v!="string"||v.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(v,O){return O.encode?O.strict?e(v):encodeURIComponent(v):v}function f(v,O){return O.decode?r(v):v}function p(v){return Array.isArray(v)?v.sort():typeof v=="object"?p(Object.keys(v)).sort((O,w)=>Number(O)-Number(w)).map(O=>v[O]):v}function m(v){const O=v.indexOf("#");return O!==-1&&(v=v.slice(0,O)),v}function b(v){let O="";const w=v.indexOf("#");return w!==-1&&(O=v.slice(w)),O}function E(v){v=m(v);const O=v.indexOf("?");return O===-1?"":v.slice(O+1)}function T(v,O){return O.parseNumbers&&!Number.isNaN(Number(v))&&typeof v=="string"&&v.trim()!==""?v=Number(v):O.parseBooleans&&v!==null&&(v.toLowerCase()==="true"||v.toLowerCase()==="false")&&(v=v.toLowerCase()==="true"),v}function U(v,O){O=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},O),u(O.arrayFormatSeparator);const w=c(O),x=Object.create(null);if(typeof v!="string"||(v=v.trim().replace(/^[?#&]/,""),!v))return x;for(const y of v.split("&")){if(y==="")continue;let[l,g]=n(O.decode?y.replace(/\+/g," "):y,"=");g=g===void 0?null:["comma","separator","bracket-separator"].includes(O.arrayFormat)?g:f(g,O),w(f(l,O),g,x)}for(const y of Object.keys(x)){const l=x[y];if(typeof l=="object"&&l!==null)for(const g of Object.keys(l))l[g]=T(l[g],O);else x[y]=T(l,O)}return O.sort===!1?x:(O.sort===!0?Object.keys(x).sort():Object.keys(x).sort(O.sort)).reduce((y,l)=>{const g=x[l];return g&&typeof g=="object"&&!Array.isArray(g)?y[l]=p(g):y[l]=g,y},Object.create(null))}t.extract=E,t.parse=U,t.stringify=(v,O)=>{if(!v)return"";O=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},O),u(O.arrayFormatSeparator);const w=g=>O.skipNull&&i(v[g])||O.skipEmptyString&&v[g]==="",x=o(O),y={};for(const g of Object.keys(v))w(g)||(y[g]=v[g]);const l=Object.keys(y);return O.sort!==!1&&l.sort(O.sort),l.map(g=>{const P=v[g];return P===void 0?"":P===null?d(g,O):Array.isArray(P)?P.length===0&&O.arrayFormat==="bracket-separator"?d(g,O)+"[]":P.reduce(x(g),[]).join("&"):d(g,O)+"="+d(P,O)}).filter(g=>g.length>0).join("&")},t.parseUrl=(v,O)=>{O=Object.assign({decode:!0},O);const[w,x]=n(v,"#");return Object.assign({url:w.split("?")[0]||"",query:U(E(v),O)},O&&O.parseFragmentIdentifier&&x?{fragmentIdentifier:f(x,O)}:{})},t.stringifyUrl=(v,O)=>{O=Object.assign({encode:!0,strict:!0,[a]:!0},O);const w=m(v.url).split("?")[0]||"",x=t.extract(v.url),y=t.parse(x,{sort:!1}),l=Object.assign(y,v.query);let g=t.stringify(l,O);g&&(g=`?${g}`);let P=b(v.url);return v.fragmentIdentifier&&(P=`#${O[a]?d(v.fragmentIdentifier,O):v.fragmentIdentifier}`),`${w}${g}${P}`},t.pick=(v,O,w)=>{w=Object.assign({parseFragmentIdentifier:!0,[a]:!1},w);const{url:x,query:y,fragmentIdentifier:l}=t.parseUrl(v,w);return t.stringifyUrl({url:x,query:s(y,O),fragmentIdentifier:l},w)},t.exclude=(v,O,w)=>{const x=Array.isArray(O)?y=>!O.includes(y):(y,l)=>!O(y,l);return t.pick(v,x,w)}})(yi);const J_={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Kh(t,e){return t.includes(":")?[t]:e.chains||[]}const Bh="base10",rr="base16",bc="base64pad",yu="utf8",Hh=0,ls=1,X_=0,Hl=1,wc=12,mu=32;function e0(){const t=fu.generateKeyPair();return{privateKey:nr(t.secretKey,rr),publicKey:nr(t.publicKey,rr)}}function Ec(){const t=qs.randomBytes(mu);return nr(t,rr)}function t0(t,e){const r=fu.sharedKey(hr(t,rr),hr(e,rr)),n=new w_(Ta.SHA256,r).expand(mu);return nr(n,rr)}function r0(t){const e=Ta.hash(hr(t,rr));return nr(e,rr)}function xs(t){const e=Ta.hash(hr(t,yu));return nr(e,rr)}function n0(t){return hr(`${t}`,Bh)}function ro(t){return Number(nr(t,Bh))}function s0(t){const e=n0(typeof t.type<"u"?t.type:Hh);if(ro(e)===ls&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?hr(t.senderPublicKey,rr):void 0,n=typeof t.iv<"u"?hr(t.iv,rr):qs.randomBytes(wc),s=new du.ChaCha20Poly1305(hr(t.symKey,rr)).seal(n,hr(t.message,yu));return o0({type:e,sealed:s,iv:n,senderPublicKey:r})}function i0(t){const e=new du.ChaCha20Poly1305(hr(t.symKey,rr)),{sealed:r,iv:n}=Ko(t.encoded),s=e.open(n,r);if(s===null)throw new Error("Failed to decrypt");return nr(s,yu)}function o0(t){if(ro(t.type)===ls){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return nr(mc([t.type,t.senderPublicKey,t.iv,t.sealed]),bc)}return nr(mc([t.type,t.iv,t.sealed]),bc)}function Ko(t){const e=hr(t,bc),r=e.slice(X_,Hl),n=Hl;if(ro(r)===ls){const o=n+mu,c=o+wc,u=e.slice(n,o),d=e.slice(o,c),f=e.slice(c);return{type:r,sealed:f,iv:d,senderPublicKey:u}}const s=n+wc,i=e.slice(n,s),a=e.slice(s);return{type:r,sealed:a,iv:i}}function a0(t,e){const r=Ko(t);return Wh({type:ro(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?nr(r.senderPublicKey,rr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Wh(t){const e=(t==null?void 0:t.type)||Hh;if(e===ls){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Wl(t){return t.type===ls&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var c0=Object.defineProperty,Gl=Object.getOwnPropertySymbols,u0=Object.prototype.hasOwnProperty,l0=Object.prototype.propertyIsEnumerable,Yl=(t,e,r)=>e in t?c0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ql=(t,e)=>{for(var r in e||(e={}))u0.call(e,r)&&Yl(t,r,e[r]);if(Gl)for(var r of Gl(e))l0.call(e,r)&&Yl(t,r,e[r]);return t};const d0="ReactNative",yr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},h0="js";function vu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ca(){return!Vh()&&!!pu()&&navigator.product===d0}function no(){return!vu()&&!!pu()}function so(){return Ca()?yr.reactNative:vu()?yr.node:no()?yr.browser:yr.unknown}function f0(t,e){let r=yi.parse(t);return r=Ql(Ql({},r),e),t=yi.stringify(r),t}function p0(){return Zh()||{name:"",description:"",url:"",icons:[""]}}function g0(){if(so()===yr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=P_();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function y0(){var t;const e=so();return e===yr.browser?[e,((t=qh())==null?void 0:t.host)||"unknown"].join(":"):e}function m0(t,e,r){const n=g0(),s=y0();return[[t,e].join("-"),[h0,r].join("-"),n,s].join("/")}function v0({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:a}){const o=r.split("?"),c=m0(t,e,n),u={auth:s,ua:c,projectId:i,useOnCloseEvent:a||void 0},d=f0(o[1]||"",u);return o[0]+"?"+d}function Gn(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Gh(t){return Object.fromEntries(t.entries())}function Yh(t){return new Map(Object.entries(t))}function ms(t=ae.FIVE_MINUTES,e){const r=ae.toMiliseconds(t||ae.FIVE_MINUTES);let n,s,i;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,o)=>{i=setTimeout(()=>{o(new Error(e))},r),n=a,s=o})}}function mi(t,e,r){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(r)),e);try{const a=await t;n(a)}catch(a){s(a)}clearTimeout(i)})}function Qh(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function _0(t){return Qh("topic",t)}function b0(t){return Qh("id",t)}function Jh(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Tr(t,e){return ae.fromMiliseconds((e||Date.now())+ae.toMiliseconds(t))}function Sn(t){return Date.now()>=ae.toMiliseconds(t)}function Ct(t,e){return`${t}${e?`:${e}`:""}`}async function w0({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let s=n==null?void 0:n.href;if(typeof s!="string")return;s.endsWith("/")&&(s=s.slice(0,-1));const i=`${s}/wc?requestId=${t}&sessionTopic=${e}`,a=so();a===yr.browser?i.startsWith("https://")?window.open(i,"_blank","noreferrer noopener"):window.open(i,"_self","noreferrer noopener"):a===yr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(i)}catch(n){console.error(n)}}const E0="irn";function Sc(t){return(t==null?void 0:t.relay)||{protocol:E0}}function jo(t){const e=J_[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var S0=Object.defineProperty,Jl=Object.getOwnPropertySymbols,x0=Object.prototype.hasOwnProperty,I0=Object.prototype.propertyIsEnumerable,Xl=(t,e,r)=>e in t?S0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,O0=(t,e)=>{for(var r in e||(e={}))x0.call(e,r)&&Xl(t,r,e[r]);if(Jl)for(var r of Jl(e))I0.call(e,r)&&Xl(t,r,e[r]);return t};function T0(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),a=t[s];r[i]=a}}),r}function C0(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r).split("@"),i=typeof r<"u"?t.substring(r):"",a=yi.parse(i);return{protocol:n,topic:N0(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:T0(a)}}function N0(t){return t.startsWith("//")?t.substring(2):t}function P0(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(s=>{const i=r+e+s;t[s]&&(n[i]=t[s])}),n}function k0(t){return`${t.protocol}:${t.topic}@${t.version}?`+yi.stringify(O0({symKey:t.symKey},P0(t.relay)))}function Fs(t){const e=[];return t.forEach(r=>{const[n,s]=r.split(":");e.push(`${n}:${s}`)}),e}function R0(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Fs(r.accounts))}),e}function A0(t,e){const r=[];return Object.values(t).forEach(n=>{Fs(n.accounts).includes(e)&&r.push(...n.methods)}),r}function j0(t,e){const r=[];return Object.values(t).forEach(n=>{Fs(n.accounts).includes(e)&&r.push(...n.events)}),r}function L0(t,e){const r=Lo(t,e);if(r)throw new Error(r.message);const n={};for(const[s,i]of Object.entries(t))n[s]={methods:i.methods,events:i.events,chains:i.accounts.map(a=>`${a.split(":")[0]}:${a.split(":")[1]}`)};return n}const U0={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},M0={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function J(t,e){const{message:r,code:n}=M0[t];return{message:e?`${r} ${e}`:r,code:n}}function jt(t,e){const{message:r,code:n}=U0[t];return{message:e?`${r} ${e}`:r,code:n}}function io(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function ui(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function tr(t){return typeof t>"u"}function Lt(t,e){return e&&tr(t)?!0:typeof t=="string"&&!!t.trim().length}function _u(t,e){return e&&tr(t)?!0:typeof t=="number"&&!isNaN(t)}function D0(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),s=Object.keys(r);let i=!0;return Gn(s,n)?(n.forEach(a=>{const{accounts:o,methods:c,events:u}=t.namespaces[a],d=Fs(o),f=r[a];(!Gn(Kh(a,f),d)||!Gn(f.methods,c)||!Gn(f.events,u))&&(i=!1)}),i):!1}function Bo(t){return Lt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function z0(t){if(Lt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Bo(r)}}return!1}function $0(t){if(Lt(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function V0(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function q0(t){return t==null?void 0:t.topic}function Z0(t,e){let r=null;return Lt(t==null?void 0:t.publicKey,!1)||(r=J("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function ed(t){let e=!0;return io(t)?t.length&&(e=t.every(r=>Lt(r,!1))):e=!1,e}function F0(t,e,r){let n=null;return io(e)&&e.length?e.forEach(s=>{n||Bo(s)||(n=jt("UNSUPPORTED_CHAINS",`${r}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Bo(t)||(n=jt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function K0(t,e,r){let n=null;return Object.entries(t).forEach(([s,i])=>{if(n)return;const a=F0(s,Kh(s,i),`${e} ${r}`);a&&(n=a)}),n}function B0(t,e){let r=null;return io(t)?t.forEach(n=>{r||z0(n)||(r=jt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=jt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function H0(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=B0(n==null?void 0:n.accounts,`${e} namespace`);s&&(r=s)}),r}function W0(t,e){let r=null;return ed(t==null?void 0:t.methods)?ed(t==null?void 0:t.events)||(r=jt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=jt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Xh(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=W0(n,`${e}, namespace`);s&&(r=s)}),r}function G0(t,e,r){let n=null;if(t&&ui(t)){const s=Xh(t,e);s&&(n=s);const i=K0(t,e,r);i&&(n=i)}else n=J("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Lo(t,e){let r=null;if(t&&ui(t)){const n=Xh(t,e);n&&(r=n);const s=H0(t,e);s&&(r=s)}else r=J("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function ef(t){return Lt(t.protocol,!0)}function Y0(t,e){let r=!1;return e&&!t?r=!0:t&&io(t)&&t.length&&t.forEach(n=>{r=ef(n)}),r}function Q0(t){return typeof t=="number"}function dr(t){return typeof t<"u"&&typeof t!==null}function J0(t){return!(!t||typeof t!="object"||!t.code||!_u(t.code,!1)||!t.message||!Lt(t.message,!1))}function X0(t){return!(tr(t)||!Lt(t.method,!1))}function eb(t){return!(tr(t)||tr(t.result)&&tr(t.error)||!_u(t.id,!1)||!Lt(t.jsonrpc,!1))}function tb(t){return!(tr(t)||!Lt(t.name,!1))}function td(t,e){return!(!Bo(e)||!R0(t).includes(e))}function rb(t,e,r){return Lt(r,!1)?A0(t,e).includes(r):!1}function nb(t,e,r){return Lt(r,!1)?j0(t,e).includes(r):!1}function rd(t,e,r){let n=null;const s=sb(t),i=ib(e),a=Object.keys(s),o=Object.keys(i),c=nd(Object.keys(t)),u=nd(Object.keys(e)),d=c.filter(f=>!u.includes(f));return d.length&&(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),Gn(a,o)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${a.toString()}
      Approved: ${o.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const p=Fs(e[f].accounts);p.includes(f)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${p.toString()}`))}),a.forEach(f=>{n||(Gn(s[f].methods,i[f].methods)?Gn(s[f].events,i[f].events)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function sb(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(s=>{e[s]={methods:t[r].methods,events:t[r].events}})}),e}function nd(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function ib(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Fs(t[r].accounts);n==null||n.forEach(s=>{e[s]={accounts:t[r].accounts.filter(i=>i.includes(`${s}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function ob(t,e){return _u(t,!1)&&t<=e.max&&t>=e.min}function sd(){const t=so();return new Promise(e=>{switch(t){case yr.browser:e(ab());break;case yr.reactNative:e(cb());break;case yr.node:e(ub());break;default:e(!0)}})}function ab(){return no()&&(navigator==null?void 0:navigator.onLine)}async function cb(){if(Ca()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function ub(){return!0}function lb(t){switch(so()){case yr.browser:db(t);break;case yr.reactNative:hb(t);break}}function db(t){no()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function hb(t){Ca()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const Ha={};let Io=class{static get(t){return Ha[t]}static set(t,e){Ha[t]=e}static delete(t){delete Ha[t]}};const fb="PARSE_ERROR",pb="INVALID_REQUEST",gb="METHOD_NOT_FOUND",yb="INVALID_PARAMS",tf="INTERNAL_ERROR",bu="SERVER_ERROR",mb=[-32700,-32600,-32601,-32602,-32603],li={[fb]:{code:-32700,message:"Parse error"},[pb]:{code:-32600,message:"Invalid Request"},[gb]:{code:-32601,message:"Method not found"},[yb]:{code:-32602,message:"Invalid params"},[tf]:{code:-32603,message:"Internal error"},[bu]:{code:-32e3,message:"Server error"}},rf=bu;function vb(t){return mb.includes(t)}function id(t){return Object.keys(li).includes(t)?li[t]:li[rf]}function _b(t){return Object.values(li).find(r=>r.code===t)||li[rf]}function bb(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var nf={},rn={},od;function wb(){if(od)return rn;od=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.isBrowserCryptoAvailable=rn.getSubtleCrypto=rn.getBrowerCrypto=void 0;function t(){return(On==null?void 0:On.crypto)||(On==null?void 0:On.msCrypto)||{}}rn.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}rn.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return rn.isBrowserCryptoAvailable=r,rn}var nn={},ad;function Eb(){if(ad)return nn;ad=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.isBrowser=nn.isNode=nn.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}nn.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}nn.isNode=e;function r(){return!t()&&!e()}return nn.isBrowser=r,nn}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=en;e.__exportStar(wb(),t),e.__exportStar(Eb(),t)})(nf);function wu(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function sf(t=6){return BigInt(wu(t))}function vi(t,e,r){return{id:r||wu(),jsonrpc:"2.0",method:t,params:e}}function Eu(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Su(t,e,r){return{id:t,jsonrpc:"2.0",error:Sb(e,r)}}function Sb(t,e){return typeof t>"u"?id(tf):(typeof t=="string"&&(t=Object.assign(Object.assign({},id(bu)),{message:t})),typeof e<"u"&&(t.data=e),vb(t.code)&&(t=_b(t.code)),t)}class xb{}class Ib extends xb{constructor(){super()}}class Ob extends Ib{constructor(e){super()}}const Tb="^wss?:";function Cb(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Nb(t,e){const r=Cb(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function cd(t){return Nb(t,Tb)}function Pb(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function of(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function xu(t){return of(t)&&"method"in t}function Na(t){return of(t)&&(an(t)||Cr(t))}function an(t){return"result"in t}function Cr(t){return"error"in t}class kb extends Ob{constructor(e){super(e),this.events=new Mr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(vi(e.method,e.params||[],e.id||sf().toString()),r)}async requestStrict(e,r){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Cr(i)?s(i.error):n(i.result)});try{await this.connection.send(e,r)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Na(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Rb=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:(()=>{try{return (() => {try { return require("ws") } catch (e) { } })()}catch{}})(),Ab=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",ud=t=>t.split("?")[0],ld=10,jb=Rb();class Lb{constructor(e){if(this.url=e,this.events=new Mr.EventEmitter,this.registering=!1,!cd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Xi(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!cd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const s=nf.isReactNative()?void 0:{rejectUnauthorized:!Pb(e)},i=new jb(e,[],s);Ab()?i.onerror=a=>{const o=a;n(this.emitError(o.error))}:i.on("error",a=>{n(this.emitError(a))}),i.onopen=()=>{this.onOpen(i),r(i)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?wa(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=Su(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return bb(e,ud(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>ld&&this.events.setMaxListeners(ld)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${ud(this.url)}`));return this.events.emit("register_error",r),r}}var Ho={exports:{}};Ho.exports;(function(t,e){var r=200,n="__lodash_hash_undefined__",s=1,i=2,a=9007199254740991,o="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",p="[object Error]",m="[object Function]",b="[object GeneratorFunction]",E="[object Map]",T="[object Number]",U="[object Null]",v="[object Object]",O="[object Promise]",w="[object Proxy]",x="[object RegExp]",y="[object Set]",l="[object String]",g="[object Symbol]",P="[object Undefined]",k="[object WeakMap]",M="[object ArrayBuffer]",G="[object DataView]",Y="[object Float32Array]",C="[object Float64Array]",A="[object Int8Array]",X="[object Int16Array]",Z="[object Int32Array]",$="[object Uint8Array]",q="[object Uint8ClampedArray]",z="[object Uint16Array]",F="[object Uint32Array]",ye=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,de=/^(?:0|[1-9]\d*)$/,ne={};ne[Y]=ne[C]=ne[A]=ne[X]=ne[Z]=ne[$]=ne[q]=ne[z]=ne[F]=!0,ne[o]=ne[c]=ne[M]=ne[d]=ne[G]=ne[f]=ne[p]=ne[m]=ne[E]=ne[T]=ne[v]=ne[x]=ne[y]=ne[l]=ne[k]=!1;var le=typeof On=="object"&&On&&On.Object===Object&&On,L=typeof self=="object"&&self&&self.Object===Object&&self,j=le||L||Function("return this")(),N=e&&!e.nodeType&&e,h=N&&!0&&t&&!t.nodeType&&t,I=h&&h.exports===N,W=I&&le.process,ee=function(){try{return W&&W.binding&&W.binding("util")}catch{}}(),je=ee&&ee.isTypedArray;function Le(_,R){for(var V=-1,oe=_==null?0:_.length,ot=0,Ne=[];++V<oe;){var _t=_[V];R(_t,V,_)&&(Ne[ot++]=_t)}return Ne}function Oe(_,R){for(var V=-1,oe=R.length,ot=_.length;++V<oe;)_[ot+V]=R[V];return _}function Ze(_,R){for(var V=-1,oe=_==null?0:_.length;++V<oe;)if(R(_[V],V,_))return!0;return!1}function at(_,R){for(var V=-1,oe=Array(_);++V<_;)oe[V]=R(V);return oe}function tt(_){return function(R){return _(R)}}function Ve(_,R){return _.has(R)}function De(_,R){return _==null?void 0:_[R]}function Te(_){var R=-1,V=Array(_.size);return _.forEach(function(oe,ot){V[++R]=[ot,oe]}),V}function Pe(_,R){return function(V){return _(R(V))}}function Ce(_){var R=-1,V=Array(_.size);return _.forEach(function(oe){V[++R]=oe}),V}var we=Array.prototype,_e=Function.prototype,he=Object.prototype,ke=j["__core-js_shared__"],Ue=_e.toString,me=he.hasOwnProperty,ze=function(){var _=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),Fe=he.toString,We=RegExp("^"+Ue.call(me).replace(ye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=I?j.Buffer:void 0,Ke=j.Symbol,fr=j.Uint8Array,_r=he.propertyIsEnumerable,$r=we.splice,Mt=Ke?Ke.toStringTag:void 0,Vr=Object.getOwnPropertySymbols,br=Ge?Ge.isBuffer:void 0,yn=Pe(Object.keys,Object),ct=ds(j,"DataView"),st=ds(j,"Map"),gt=ds(j,"Promise"),lt=ds(j,"Set"),yt=ds(j,"WeakMap"),it=ds(Object,"create"),bt=$n(ct),St=$n(st),xt=$n(gt),wt=$n(lt),It=$n(yt),Et=Ke?Ke.prototype:void 0,mt=Et?Et.valueOf:void 0;function rt(_){var R=-1,V=_==null?0:_.length;for(this.clear();++R<V;){var oe=_[R];this.set(oe[0],oe[1])}}function S(){this.__data__=it?it(null):{},this.size=0}function D(_){var R=this.has(_)&&delete this.__data__[_];return this.size-=R?1:0,R}function Q(_){var R=this.__data__;if(it){var V=R[_];return V===n?void 0:V}return me.call(R,_)?R[_]:void 0}function fe(_){var R=this.__data__;return it?R[_]!==void 0:me.call(R,_)}function Be(_,R){var V=this.__data__;return this.size+=this.has(_)?0:1,V[_]=it&&R===void 0?n:R,this}rt.prototype.clear=S,rt.prototype.delete=D,rt.prototype.get=Q,rt.prototype.has=fe,rt.prototype.set=Be;function $e(_){var R=-1,V=_==null?0:_.length;for(this.clear();++R<V;){var oe=_[R];this.set(oe[0],oe[1])}}function qe(){this.__data__=[],this.size=0}function Me(_){var R=this.__data__,V=go(R,_);if(V<0)return!1;var oe=R.length-1;return V==oe?R.pop():$r.call(R,V,1),--this.size,!0}function Dt(_){var R=this.__data__,V=go(R,_);return V<0?void 0:R[V][1]}function dt(_){return go(this.__data__,_)>-1}function vt(_,R){var V=this.__data__,oe=go(V,_);return oe<0?(++this.size,V.push([_,R])):V[oe][1]=R,this}$e.prototype.clear=qe,$e.prototype.delete=Me,$e.prototype.get=Dt,$e.prototype.has=dt,$e.prototype.set=vt;function Ot(_){var R=-1,V=_==null?0:_.length;for(this.clear();++R<V;){var oe=_[R];this.set(oe[0],oe[1])}}function mn(){this.size=0,this.__data__={hash:new rt,map:new(st||$e),string:new rt}}function fo(_){var R=yo(this,_).delete(_);return this.size-=R?1:0,R}function Ir(_){return yo(this,_).get(_)}function jp(_){return yo(this,_).has(_)}function Lp(_,R){var V=yo(this,_),oe=V.size;return V.set(_,R),this.size+=V.size==oe?0:1,this}Ot.prototype.clear=mn,Ot.prototype.delete=fo,Ot.prototype.get=Ir,Ot.prototype.has=jp,Ot.prototype.set=Lp;function po(_){var R=-1,V=_==null?0:_.length;for(this.__data__=new Ot;++R<V;)this.add(_[R])}function Up(_){return this.__data__.set(_,n),this}function Mp(_){return this.__data__.has(_)}po.prototype.add=po.prototype.push=Up,po.prototype.has=Mp;function vn(_){var R=this.__data__=new $e(_);this.size=R.size}function Dp(){this.__data__=new $e,this.size=0}function zp(_){var R=this.__data__,V=R.delete(_);return this.size=R.size,V}function $p(_){return this.__data__.get(_)}function Vp(_){return this.__data__.has(_)}function qp(_,R){var V=this.__data__;if(V instanceof $e){var oe=V.__data__;if(!st||oe.length<r-1)return oe.push([_,R]),this.size=++V.size,this;V=this.__data__=new Ot(oe)}return V.set(_,R),this.size=V.size,this}vn.prototype.clear=Dp,vn.prototype.delete=zp,vn.prototype.get=$p,vn.prototype.has=Vp,vn.prototype.set=qp;function Zp(_,R){var V=mo(_),oe=!V&&sg(_),ot=!V&&!oe&&$a(_),Ne=!V&&!oe&&!ot&&Fu(_),_t=V||oe||ot||Ne,Pt=_t?at(_.length,String):[],zt=Pt.length;for(var ht in _)(R||me.call(_,ht))&&!(_t&&(ht=="length"||ot&&(ht=="offset"||ht=="parent")||Ne&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||Xp(ht,zt)))&&Pt.push(ht);return Pt}function go(_,R){for(var V=_.length;V--;)if($u(_[V][0],R))return V;return-1}function Fp(_,R,V){var oe=R(_);return mo(_)?oe:Oe(oe,V(_))}function Bs(_){return _==null?_===void 0?P:U:Mt&&Mt in Object(_)?Qp(_):ng(_)}function Uu(_){return Hs(_)&&Bs(_)==o}function Mu(_,R,V,oe,ot){return _===R?!0:_==null||R==null||!Hs(_)&&!Hs(R)?_!==_&&R!==R:Kp(_,R,V,oe,Mu,ot)}function Kp(_,R,V,oe,ot,Ne){var _t=mo(_),Pt=mo(R),zt=_t?c:_n(_),ht=Pt?c:_n(R);zt=zt==o?v:zt,ht=ht==o?v:ht;var pr=zt==v,Or=ht==v,Zt=zt==ht;if(Zt&&$a(_)){if(!$a(R))return!1;_t=!0,pr=!1}if(Zt&&!pr)return Ne||(Ne=new vn),_t||Fu(_)?Du(_,R,V,oe,ot,Ne):Gp(_,R,zt,V,oe,ot,Ne);if(!(V&s)){var wr=pr&&me.call(_,"__wrapped__"),Er=Or&&me.call(R,"__wrapped__");if(wr||Er){var bn=wr?_.value():_,tn=Er?R.value():R;return Ne||(Ne=new vn),ot(bn,tn,V,oe,Ne)}}return Zt?(Ne||(Ne=new vn),Yp(_,R,V,oe,ot,Ne)):!1}function Bp(_){if(!Zu(_)||tg(_))return!1;var R=Vu(_)?We:K;return R.test($n(_))}function Hp(_){return Hs(_)&&qu(_.length)&&!!ne[Bs(_)]}function Wp(_){if(!rg(_))return yn(_);var R=[];for(var V in Object(_))me.call(_,V)&&V!="constructor"&&R.push(V);return R}function Du(_,R,V,oe,ot,Ne){var _t=V&s,Pt=_.length,zt=R.length;if(Pt!=zt&&!(_t&&zt>Pt))return!1;var ht=Ne.get(_);if(ht&&Ne.get(R))return ht==R;var pr=-1,Or=!0,Zt=V&i?new po:void 0;for(Ne.set(_,R),Ne.set(R,_);++pr<Pt;){var wr=_[pr],Er=R[pr];if(oe)var bn=_t?oe(Er,wr,pr,R,_,Ne):oe(wr,Er,pr,_,R,Ne);if(bn!==void 0){if(bn)continue;Or=!1;break}if(Zt){if(!Ze(R,function(tn,Vn){if(!Ve(Zt,Vn)&&(wr===tn||ot(wr,tn,V,oe,Ne)))return Zt.push(Vn)})){Or=!1;break}}else if(!(wr===Er||ot(wr,Er,V,oe,Ne))){Or=!1;break}}return Ne.delete(_),Ne.delete(R),Or}function Gp(_,R,V,oe,ot,Ne,_t){switch(V){case G:if(_.byteLength!=R.byteLength||_.byteOffset!=R.byteOffset)return!1;_=_.buffer,R=R.buffer;case M:return!(_.byteLength!=R.byteLength||!Ne(new fr(_),new fr(R)));case d:case f:case T:return $u(+_,+R);case p:return _.name==R.name&&_.message==R.message;case x:case l:return _==R+"";case E:var Pt=Te;case y:var zt=oe&s;if(Pt||(Pt=Ce),_.size!=R.size&&!zt)return!1;var ht=_t.get(_);if(ht)return ht==R;oe|=i,_t.set(_,R);var pr=Du(Pt(_),Pt(R),oe,ot,Ne,_t);return _t.delete(_),pr;case g:if(mt)return mt.call(_)==mt.call(R)}return!1}function Yp(_,R,V,oe,ot,Ne){var _t=V&s,Pt=zu(_),zt=Pt.length,ht=zu(R),pr=ht.length;if(zt!=pr&&!_t)return!1;for(var Or=zt;Or--;){var Zt=Pt[Or];if(!(_t?Zt in R:me.call(R,Zt)))return!1}var wr=Ne.get(_);if(wr&&Ne.get(R))return wr==R;var Er=!0;Ne.set(_,R),Ne.set(R,_);for(var bn=_t;++Or<zt;){Zt=Pt[Or];var tn=_[Zt],Vn=R[Zt];if(oe)var Ku=_t?oe(Vn,tn,Zt,R,_,Ne):oe(tn,Vn,Zt,_,R,Ne);if(!(Ku===void 0?tn===Vn||ot(tn,Vn,V,oe,Ne):Ku)){Er=!1;break}bn||(bn=Zt=="constructor")}if(Er&&!bn){var vo=_.constructor,_o=R.constructor;vo!=_o&&"constructor"in _&&"constructor"in R&&!(typeof vo=="function"&&vo instanceof vo&&typeof _o=="function"&&_o instanceof _o)&&(Er=!1)}return Ne.delete(_),Ne.delete(R),Er}function zu(_){return Fp(_,ag,Jp)}function yo(_,R){var V=_.__data__;return eg(R)?V[typeof R=="string"?"string":"hash"]:V.map}function ds(_,R){var V=De(_,R);return Bp(V)?V:void 0}function Qp(_){var R=me.call(_,Mt),V=_[Mt];try{_[Mt]=void 0;var oe=!0}catch{}var ot=Fe.call(_);return oe&&(R?_[Mt]=V:delete _[Mt]),ot}var Jp=Vr?function(_){return _==null?[]:(_=Object(_),Le(Vr(_),function(R){return _r.call(_,R)}))}:cg,_n=Bs;(ct&&_n(new ct(new ArrayBuffer(1)))!=G||st&&_n(new st)!=E||gt&&_n(gt.resolve())!=O||lt&&_n(new lt)!=y||yt&&_n(new yt)!=k)&&(_n=function(_){var R=Bs(_),V=R==v?_.constructor:void 0,oe=V?$n(V):"";if(oe)switch(oe){case bt:return G;case St:return E;case xt:return O;case wt:return y;case It:return k}return R});function Xp(_,R){return R=R??a,!!R&&(typeof _=="number"||de.test(_))&&_>-1&&_%1==0&&_<R}function eg(_){var R=typeof _;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?_!=="__proto__":_===null}function tg(_){return!!ze&&ze in _}function rg(_){var R=_&&_.constructor,V=typeof R=="function"&&R.prototype||he;return _===V}function ng(_){return Fe.call(_)}function $n(_){if(_!=null){try{return Ue.call(_)}catch{}try{return _+""}catch{}}return""}function $u(_,R){return _===R||_!==_&&R!==R}var sg=Uu(function(){return arguments}())?Uu:function(_){return Hs(_)&&me.call(_,"callee")&&!_r.call(_,"callee")},mo=Array.isArray;function ig(_){return _!=null&&qu(_.length)&&!Vu(_)}var $a=br||ug;function og(_,R){return Mu(_,R)}function Vu(_){if(!Zu(_))return!1;var R=Bs(_);return R==m||R==b||R==u||R==w}function qu(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=a}function Zu(_){var R=typeof _;return _!=null&&(R=="object"||R=="function")}function Hs(_){return _!=null&&typeof _=="object"}var Fu=je?tt(je):Hp;function ag(_){return ig(_)?Zp(_):Wp(_)}function cg(){return[]}function ug(){return!1}t.exports=og})(Ho,Ho.exports);var Ub=Ho.exports;const Mb=iu(Ub);function Db(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),a=i.charCodeAt(0);if(r[a]!==255)throw new TypeError(i+" is ambiguous");r[a]=s}var o=t.length,c=t.charAt(0),u=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function f(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var E=0,T=0,U=0,v=b.length;U!==v&&b[U]===0;)U++,E++;for(var O=(v-U)*d+1>>>0,w=new Uint8Array(O);U!==v;){for(var x=b[U],y=0,l=O-1;(x!==0||y<T)&&l!==-1;l--,y++)x+=256*w[l]>>>0,w[l]=x%o>>>0,x=x/o>>>0;if(x!==0)throw new Error("Non-zero carry");T=y,U++}for(var g=O-T;g!==O&&w[g]===0;)g++;for(var P=c.repeat(E);g<O;++g)P+=t.charAt(w[g]);return P}function p(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var E=0;if(b[E]!==" "){for(var T=0,U=0;b[E]===c;)T++,E++;for(var v=(b.length-E)*u+1>>>0,O=new Uint8Array(v);b[E];){var w=r[b.charCodeAt(E)];if(w===255)return;for(var x=0,y=v-1;(w!==0||x<U)&&y!==-1;y--,x++)w+=o*O[y]>>>0,O[y]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");U=x,E++}if(b[E]!==" "){for(var l=v-U;l!==v&&O[l]===0;)l++;for(var g=new Uint8Array(T+(v-l)),P=T;l!==v;)g[P++]=O[l++];return g}}}function m(b){var E=p(b);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:m}}var zb=Db,$b=zb;const af=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Vb=t=>new TextEncoder().encode(t),qb=t=>new TextDecoder().decode(t);class Zb{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Fb{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cf(this,e)}}class Kb{constructor(e){this.decoders=e}or(e){return cf(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const cf=(t,e)=>new Kb({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Bb{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Zb(e,r,n),this.decoder=new Fb(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Pa=({name:t,prefix:e,encode:r,decode:n})=>new Bb(t,e,r,n),oo=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=$b(r,e);return Pa({prefix:t,name:e,encode:n,decode:i=>af(s(i))})},Hb=(t,e,r,n)=>{const s={};for(let d=0;d<e.length;++d)s[e[d]]=d;let i=t.length;for(;t[i-1]==="=";)--i;const a=new Uint8Array(i*r/8|0);let o=0,c=0,u=0;for(let d=0;d<i;++d){const f=s[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,o+=r,o>=8&&(o-=8,a[u++]=255&c>>o)}if(o>=r||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},Wb=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>r;)a-=r,i+=e[s&o>>a];if(a&&(i+=e[s&o<<r-a]),n)for(;i.length*r&7;)i+="=";return i},qt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Pa({prefix:e,name:t,encode(s){return Wb(s,n,r)},decode(s){return Hb(s,n,r,t)}}),Gb=Pa({prefix:"\0",name:"identity",encode:t=>qb(t),decode:t=>Vb(t)});var Yb=Object.freeze({__proto__:null,identity:Gb});const Qb=qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Jb=Object.freeze({__proto__:null,base2:Qb});const Xb=qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ew=Object.freeze({__proto__:null,base8:Xb});const tw=oo({prefix:"9",name:"base10",alphabet:"0123456789"});var rw=Object.freeze({__proto__:null,base10:tw});const nw=qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sw=qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var iw=Object.freeze({__proto__:null,base16:nw,base16upper:sw});const ow=qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),aw=qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cw=qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),uw=qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lw=qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dw=qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hw=qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fw=qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pw=qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gw=Object.freeze({__proto__:null,base32:ow,base32upper:aw,base32pad:cw,base32padupper:uw,base32hex:lw,base32hexupper:dw,base32hexpad:hw,base32hexpadupper:fw,base32z:pw});const yw=oo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mw=oo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var vw=Object.freeze({__proto__:null,base36:yw,base36upper:mw});const _w=oo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bw=oo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ww=Object.freeze({__proto__:null,base58btc:_w,base58flickr:bw});const Ew=qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Sw=qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xw=qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Iw=qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ow=Object.freeze({__proto__:null,base64:Ew,base64pad:Sw,base64url:xw,base64urlpad:Iw});const uf=Array.from(""),Tw=uf.reduce((t,e,r)=>(t[r]=e,t),[]),Cw=uf.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Nw(t){return t.reduce((e,r)=>(e+=Tw[r],e),"")}function Pw(t){const e=[];for(const r of t){const n=Cw[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const kw=Pa({prefix:"",name:"base256emoji",encode:Nw,decode:Pw});var Rw=Object.freeze({__proto__:null,base256emoji:kw}),Aw=lf,dd=128,jw=127,Lw=~jw,Uw=Math.pow(2,31);function lf(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Uw;)e[r++]=t&255|dd,t/=128;for(;t&Lw;)e[r++]=t&255|dd,t>>>=7;return e[r]=t|0,lf.bytes=r-n+1,e}var Mw=xc,Dw=128,hd=127;function xc(t,n){var r=0,n=n||0,s=0,i=n,a,o=t.length;do{if(i>=o)throw xc.bytes=0,new RangeError("Could not decode varint");a=t[i++],r+=s<28?(a&hd)<<s:(a&hd)*Math.pow(2,s),s+=7}while(a>=Dw);return xc.bytes=i-n,r}var zw=Math.pow(2,7),$w=Math.pow(2,14),Vw=Math.pow(2,21),qw=Math.pow(2,28),Zw=Math.pow(2,35),Fw=Math.pow(2,42),Kw=Math.pow(2,49),Bw=Math.pow(2,56),Hw=Math.pow(2,63),Ww=function(t){return t<zw?1:t<$w?2:t<Vw?3:t<qw?4:t<Zw?5:t<Fw?6:t<Kw?7:t<Bw?8:t<Hw?9:10},Gw={encode:Aw,decode:Mw,encodingLength:Ww},df=Gw;const fd=(t,e,r=0)=>(df.encode(t,e,r),e),pd=t=>df.encodingLength(t),Ic=(t,e)=>{const r=e.byteLength,n=pd(t),s=n+pd(r),i=new Uint8Array(s+r);return fd(t,i,0),fd(r,i,n),i.set(e,s),new Yw(t,r,e,i)};class Yw{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}const hf=({name:t,code:e,encode:r})=>new Qw(t,e,r);class Qw{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Ic(this.code,r):r.then(n=>Ic(this.code,n))}else throw Error("Unknown type, must be binary type")}}const ff=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Jw=hf({name:"sha2-256",code:18,encode:ff("SHA-256")}),Xw=hf({name:"sha2-512",code:19,encode:ff("SHA-512")});var e1=Object.freeze({__proto__:null,sha256:Jw,sha512:Xw});const pf=0,t1="identity",gf=af,r1=t=>Ic(pf,gf(t)),n1={code:pf,name:t1,encode:gf,digest:r1};var s1=Object.freeze({__proto__:null,identity:n1});new TextEncoder,new TextDecoder;const gd={...Yb,...Jb,...ew,...rw,...iw,...gw,...vw,...ww,...Ow,...Rw};({...e1,...s1});function yf(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function i1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?yf(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function mf(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const yd=mf("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Wa=mf("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=i1(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),o1={utf8:yd,"utf-8":yd,hex:gd.base16,latin1:Wa,ascii:Wa,binary:Wa,...gd};function a1(t,e="utf8"){const r=o1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?yf(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const vf="wc",c1=2,Iu="core",Pn=`${vf}@2:${Iu}:`,u1={name:Iu,logger:"error"},l1={database:":memory:"},d1="crypto",md="client_ed25519_seed",h1=ae.ONE_DAY,f1="keychain",p1="0.3",g1="messages",y1="0.3",m1=ae.SIX_HOURS,v1="publisher",_f="irn",_1="error",bf="wss://relay.walletconnect.com",vd="wss://relay.walletconnect.org",b1="relayer",Wt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},w1="_subscription",sn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},E1=ae.ONE_SECOND,S1="2.10.0",x1=1e4,I1="0.3",O1="WALLETCONNECT_CLIENT_ID",Hr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},T1="subscription",C1="0.3",N1=ae.FIVE_SECONDS*1e3,P1="pairing",k1="0.3",Xs={wc_pairingDelete:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:0},res:{ttl:ae.ONE_DAY,prompt:!1,tag:0}}},Kr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},R1="history",A1="0.3",j1="expirer",Sr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},L1="0.3",Ga="verify-api",Uo="https://verify.walletconnect.com",_d="https://verify.walletconnect.org";class U1{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=f1,this.version=p1,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()},this.get=n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=J("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=He.generateChildLogger(r,this.name)}get context(){return He.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Gh(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Yh(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}class M1{constructor(e,r,n){this.core=e,this.logger=r,this.name=d1,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),i=Ml(s);return Lh(i.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=e0();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const i=await this.getClientSeed(),a=Ml(i),o=Ec();return await c_(o,s,h1,a)},this.generateSharedKey=(s,i,a)=>{this.isInitialized();const o=this.getPrivateKey(s),c=t0(o,i);return this.setSymKey(c,a)},this.setSymKey=async(s,i)=>{this.isInitialized();const a=i||r0(s);return await this.keychain.set(a,s),a},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,i,a)=>{this.isInitialized();const o=Wh(a),c=Xi(i);if(Wl(o)){const p=o.senderPublicKey,m=o.receiverPublicKey;s=await this.generateSharedKey(p,m)}const u=this.getSymKey(s),{type:d,senderPublicKey:f}=o;return s0({type:d,symKey:u,message:c,senderPublicKey:f})},this.decode=async(s,i,a)=>{this.isInitialized();const o=a0(i,a);if(Wl(o)){const c=o.receiverPublicKey,u=o.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=i0({symKey:c,encoded:i});return wa(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=s=>{const i=Ko(s);return ro(i.type)},this.getPayloadSenderPublicKey=s=>{const i=Ko(s);return i.senderPublicKey?nr(i.senderPublicKey,rr):void 0},this.core=e,this.logger=He.generateChildLogger(r,this.name),this.keychain=n||new U1(this.core,this.logger)}get context(){return He.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(md)}catch{e=Ec(),await this.keychain.set(md,e)}return a1(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}class D1 extends fm{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=g1,this.version=y1,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,s)=>{this.isInitialized();const i=xs(s);let a=this.messages.get(n);return typeof a>"u"&&(a={}),typeof a[i]<"u"||(a[i]=s,this.messages.set(n,a),await this.persist()),i},this.get=n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s},this.has=(n,s)=>{this.isInitialized();const i=this.get(n),a=xs(s);return typeof i[a]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=He.generateChildLogger(e,this.name),this.core=r}get context(){return He.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Gh(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Yh(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}class z1 extends pm{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Mr.EventEmitter,this.name=v1,this.queue=new Map,this.publishTimeout=ae.toMiliseconds(ae.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,s,i)=>{var a;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});try{const o=(i==null?void 0:i.ttl)||m1,c=Sc(i),u=(i==null?void 0:i.prompt)||!1,d=(i==null?void 0:i.tag)||0,f=(i==null?void 0:i.id)||sf().toString(),p={topic:n,message:s,opts:{ttl:o,relay:c,prompt:u,tag:d,id:f}},m=setTimeout(()=>this.queue.set(f,p),this.publishTimeout);try{await await mi(this.rpcPublish(n,s,o,c,u,d,f),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(f),this.relayer.events.emit(Wt.publish,p)}catch(b){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(a=i==null?void 0:i.internal)!=null&&a.throwOnFailedPublish)throw this.removeRequestFromQueue(f),b;return}finally{clearTimeout(m)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}})}catch(o){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(o),o}},this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.relayer=e,this.logger=He.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return He.getLoggerContext(this.logger)}rpcPublish(e,r,n,s,i,a,o){var c,u,d,f;const p={method:jo(s.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:i,tag:a},id:o};return tr((c=p.params)==null?void 0:c.prompt)&&((u=p.params)==null||delete u.prompt),tr((d=p.params)==null?void 0:d.tag)&&((f=p.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:s}=e;await this.publish(r,n,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(Vs.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Wt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Wt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class $1{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const s=n.filter(i=>i!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var V1=Object.defineProperty,q1=Object.defineProperties,Z1=Object.getOwnPropertyDescriptors,bd=Object.getOwnPropertySymbols,F1=Object.prototype.hasOwnProperty,K1=Object.prototype.propertyIsEnumerable,wd=(t,e,r)=>e in t?V1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ei=(t,e)=>{for(var r in e||(e={}))F1.call(e,r)&&wd(t,r,e[r]);if(bd)for(var r of bd(e))K1.call(e,r)&&wd(t,r,e[r]);return t},Ya=(t,e)=>q1(t,Z1(e));class B1 extends mm{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new $1,this.events=new Mr.EventEmitter,this.name=T1,this.version=C1,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Pn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const i=Sc(s),a={topic:n,relay:i};this.pending.set(n,a);const o=await this.rpcSubscribe(n,i);return this.onSubscribe(o,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}}),o}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}},this.unsubscribe=async(n,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((s,i)=>{const a=new ae.Watch;a.start(this.pendingSubscriptionWatchLabel);const o=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(o),a.stop(this.pendingSubscriptionWatchLabel),s(!0)),a.elapsed(this.pendingSubscriptionWatchLabel)>=N1&&(clearInterval(o),a.stop(this.pendingSubscriptionWatchLabel),i(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=He.generateChildLogger(r,this.name),this.clientId=""}get context(){return He.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const s=Sc(n);await this.rpcUnsubscribe(e,r,s);const i=jt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r){const n={method:jo(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await mi(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Wt.connection_stalled)}return xs(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:jo(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await mi(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Wt.connection_stalled)}}rpcUnsubscribe(e,r,n){const s={method:jo(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,Ya(ei({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,ei({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,ei({},r)),this.topicMap.set(r.topic,e),this.events.emit(Hr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Hr.deleted,Ya(ei({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Hr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(Hr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);io(r)&&this.onBatchSubscribe(r.map((n,s)=>Ya(ei({},e[s]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Vs.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Wt.connect,async()=>{await this.onConnect()}),this.relayer.on(Wt.disconnect,()=>{this.onDisconnect()}),this.events.on(Hr.created,async e=>{const r=Hr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Hr.deleted,async e=>{const r=Hr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var H1=Object.defineProperty,Ed=Object.getOwnPropertySymbols,W1=Object.prototype.hasOwnProperty,G1=Object.prototype.propertyIsEnumerable,Sd=(t,e,r)=>e in t?H1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Y1=(t,e)=>{for(var r in e||(e={}))W1.call(e,r)&&Sd(t,r,e[r]);if(Ed)for(var r of Ed(e))G1.call(e,r)&&Sd(t,r,e[r]);return t};class Q1 extends gm{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Mr.EventEmitter,this.name=b1,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Wt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Wt.error,r)},this.registerProviderListeners=()=>{this.provider.on(sn.payload,this.onPayloadHandler),this.provider.on(sn.connect,this.onConnectHandler),this.provider.on(sn.disconnect,this.onDisconnectHandler),this.provider.on(sn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?He.generateChildLogger(e.logger,this.name):He.pino(He.getDefaultLoggerOptions({level:e.logger||_1})),this.messages=new D1(this.logger,e.core),this.subscriber=new B1(this,this.logger),this.publisher=new z1(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||bf,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${vd}...`),await this.restartTransport(vd)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},x1)}get context(){return He.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let s=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return s||(await Promise.all([new Promise(i=>{this.subscriber.once(Hr.created,a=>{a.topic===e&&i()})}),new Promise(async i=>{s=await this.subscriber.subscribe(e,r),i()})]),s)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await mi(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(Hr.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await mi(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(s){n(s);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(sn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await sd())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new kb(new Lb(v0({sdkVersion:S1,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const s=this.messages.has(r,n);return s&&this.logger.debug(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),xu(e)){if(!e.method.endsWith(w1))return;const r=e.params,{topic:n,message:s,publishedAt:i}=r.data,a={topic:n,message:s,publishedAt:i};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Y1({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Na(e)&&this.events.emit(Wt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Wt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Eu(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(sn.payload,this.onPayloadHandler),this.provider.off(sn.connect,this.onConnectHandler),this.provider.off(sn.disconnect,this.onDisconnectHandler),this.provider.off(sn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Wt.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await sd();lb(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Wt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ae.toMiliseconds(E1)))}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var J1=Object.defineProperty,xd=Object.getOwnPropertySymbols,X1=Object.prototype.hasOwnProperty,eE=Object.prototype.propertyIsEnumerable,Id=(t,e,r)=>e in t?J1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Od=(t,e)=>{for(var r in e||(e={}))X1.call(e,r)&&Id(t,r,e[r]);if(xd)for(var r of xd(e))eE.call(e,r)&&Id(t,r,e[r]);return t};class ka extends ym{constructor(e,r,n,s=Pn,i=void 0){super(e,r,n,s),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=I1,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(a=>{this.getKey&&a!==null&&!tr(a)?this.map.set(this.getKey(a),a):V0(a)?this.map.set(a.id,a):q0(a)&&this.map.set(a.topic,a)}),this.cached=[],this.initialized=!0)},this.set=async(a,o)=>{this.isInitialized(),this.map.has(a)?await this.update(a,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:o}),this.map.set(a,o),await this.persist())},this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(o=>Object.keys(a).every(c=>Mb(o[c],a[c]))):this.values),this.update=async(a,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:o});const c=Od(Od({},this.getData(a)),o);this.map.set(a,c),await this.persist()},this.delete=async(a,o)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:o}),this.map.delete(a),await this.persist())},this.logger=He.generateChildLogger(r,this.name),this.storagePrefix=s,this.getKey=i}get context(){return He.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}class tE{constructor(e,r){this.core=e,this.logger=r,this.name=P1,this.version=k1,this.events=new cu,this.initialized=!1,this.storagePrefix=Pn,this.ignoredPayloadTypes=[ls],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Ec(),s=await this.core.crypto.setSymKey(n),i=Tr(ae.FIVE_MINUTES),a={protocol:_f},o={topic:s,expiry:i,relay:a,active:!1},c=k0({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:n,relay:a});return await this.pairings.set(s,o),await this.core.relayer.subscribe(s),this.core.expirer.set(s,i),{topic:s,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:s,symKey:i,relay:a}=C0(n.uri);if(this.pairings.keys.includes(s))throw new Error(`Pairing already exists: ${s}`);if(this.core.crypto.hasKeys(s))throw new Error(`Keychain already exists: ${s}`);const o=Tr(ae.FIVE_MINUTES),c={topic:s,relay:a,expiry:o,active:!1};return await this.pairings.set(s,c),await this.core.crypto.setSymKey(i,s),await this.core.relayer.subscribe(s,{relay:a}),this.core.expirer.set(s,o),n.activatePairing&&await this.activate({topic:s}),c},this.activate=async({topic:n})=>{this.isInitialized();const s=Tr(ae.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:s}),this.core.expirer.set(n,s)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:a,resolve:o,reject:c}=ms();this.events.once(Ct("pairing_ping",i),({error:u})=>{u?c(u):o()}),await a()}},this.updateExpiry=async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})},this.updateMetadata=async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",jt("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(n,s,i)=>{const a=vi(s,i),o=await this.core.crypto.encode(n,a),c=Xs[s].req;return this.core.history.set(n,a),this.core.relayer.publish(n,o,c),a.id},this.sendResult=async(n,s,i)=>{const a=Eu(n,i),o=await this.core.crypto.encode(s,a),c=await this.core.history.get(s,n),u=Xs[c.request.method].res;await this.core.relayer.publish(s,o,u),await this.core.history.resolve(a)},this.sendError=async(n,s,i)=>{const a=Su(n,i),o=await this.core.crypto.encode(s,a),c=await this.core.history.get(s,n),u=Xs[c.request.method]?Xs[c.request.method].res:Xs.unregistered_method.res;await this.core.relayer.publish(s,o,u),await this.core.history.resolve(a)},this.deletePairing=async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,jt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(s=>Sn(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return this.onPairingPingRequest(s,i);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,i);default:return this.onUnknownRpcMethodRequest(s,i)}},this.onRelayEventResponse=async n=>{const{topic:s,payload:i}=n,a=(await this.core.history.get(s,i.id)).request.method;switch(a){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(a)}},this.onPairingPingRequest=async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit("pairing_ping",{id:i,topic:n})}catch(a){await this.sendError(i,n,a),this.logger.error(a)}},this.onPairingPingResponse=(n,s)=>{const{id:i}=s;setTimeout(()=>{an(s)?this.events.emit(Ct("pairing_ping",i),{}):Cr(s)&&this.events.emit(Ct("pairing_ping",i),{error:s.error})},500)},this.onPairingDeleteRequest=async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:i,topic:n})}catch(a){await this.sendError(i,n,a),this.logger.error(a)}},this.onUnknownRpcMethodRequest=async(n,s)=>{const{id:i,method:a}=s;try{if(this.registeredMethods.includes(a))return;const o=jt("WC_METHOD_UNSUPPORTED",a);await this.sendError(i,n,o),this.logger.error(o)}catch(o){await this.sendError(i,n,o),this.logger.error(o)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(jt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!dr(n)){const{message:s}=J("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(s)}if(!$0(n.uri)){const{message:s}=J("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(s)}},this.isValidPing=async n=>{if(!dr(n)){const{message:i}=J("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)},this.isValidDisconnect=async n=>{if(!dr(n)){const{message:i}=J("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async n=>{if(!Lt(n,!1)){const{message:s}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(Sn(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=J("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}},this.core=e,this.logger=He.generateChildLogger(r,this.name),this.pairings=new ka(this.core,this.logger,this.name,this.storagePrefix)}get context(){return He.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Wt.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const s=await this.core.crypto.decode(r,n);try{xu(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):Na(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Sr.expired,async e=>{const{topic:r}=Jh(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class rE extends hm{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Mr.EventEmitter,this.name=R1,this.version=A1,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const a={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:Tr(ae.THIRTY_DAYS)};this.records.set(a.id,a),this.events.emit(Kr.created,a)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=Cr(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.events.emit(Kr.updated,s))},this.get=async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s)),this.delete=(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Kr.deleted,i)}})},this.exists=async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1),this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.logger=He.generateChildLogger(r,this.name)}get context(){return He.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:vi(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Kr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Kr.created,e=>{const r=Kr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Kr.updated,e=>{const r=Kr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Kr.deleted,e=>{const r=Kr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Vs.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ae.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}class nE extends vm{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Mr.EventEmitter,this.name=j1,this.version=L1,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(n,s)=>{this.isInitialized();const i=this.formatTarget(n),a={target:i,expiry:s};this.expirations.set(i,a),this.checkExpiry(i,a),this.events.emit(Sr.created,{target:i,expiration:a})},this.get=n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)},this.del=n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Sr.deleted,{target:s,expiration:i})}},this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.logger=He.generateChildLogger(r,this.name)}get context(){return He.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return _0(e);if(typeof e=="number")return b0(e);const{message:r}=J("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Sr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ae.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Sr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Vs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Sr.created,e=>{const r=Sr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Sr.expired,e=>{const r=Sr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Sr.deleted,e=>{const r=Sr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}class sE extends _m{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Ga,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||Ca()||!no())return;const s=(n==null?void 0:n.verifyUrl)||Uo;this.verifyUrl!==s&&this.removeIframe(),this.verifyUrl=s;try{await this.createIframe()}catch(i){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(i)}if(!this.initialized){this.removeIframe(),this.verifyUrl=_d;try{await this.createIframe()}catch(i){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(i),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const s=(n==null?void 0:n.verifyUrl)||Uo;let i="";try{i=await this.fetchAttestation(n.attestationId,s)}catch(a){this.logger.warn(`failed to resolve attestation: ${n.attestationId} from url: ${s}`),this.logger.warn(a),i=await this.fetchAttestation(n.attestationId,_d)}return i},this.fetchAttestation=async(n,s)=>{var i;this.logger.info(`resolving attestation: ${n} from url: ${s}`);const a=this.startAbortTimer(ae.ONE_SECOND*2),o=await fetch(`${s}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(a),o.status===200?(i=await o.json())==null?void 0:i.origin:""},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var s;try{if(!this.iframe)return;(s=this.iframe.contentWindow)==null||s.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const s=i=>{i.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",s),n())};await Promise.race([new Promise(i=>{if(document.getElementById(Ga))return i();window.addEventListener("message",s);const a=document.createElement("iframe");a.id=Ga,a.src=`${this.verifyUrl}/${this.projectId}`,a.style.display="none",document.body.append(a),this.iframe=a,n=i}),new Promise((i,a)=>setTimeout(()=>{window.removeEventListener("message",s),a("verify iframe load timeout")},ae.toMiliseconds(ae.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=He.generateChildLogger(r,this.name),this.verifyUrl=Uo,this.abortController=new AbortController,this.isDevEnv=vu()&&process.env.IS_VITEST}get context(){return He.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ae.toMiliseconds(e))}}var iE=Object.defineProperty,Td=Object.getOwnPropertySymbols,oE=Object.prototype.hasOwnProperty,aE=Object.prototype.propertyIsEnumerable,Cd=(t,e,r)=>e in t?iE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nd=(t,e)=>{for(var r in e||(e={}))oE.call(e,r)&&Cd(t,r,e[r]);if(Td)for(var r of Td(e))aE.call(e,r)&&Cd(t,r,e[r]);return t};class Ou extends dm{constructor(e){super(e),this.protocol=vf,this.version=c1,this.name=Iu,this.events=new Mr.EventEmitter,this.initialized=!1,this.on=(n,s)=>this.events.on(n,s),this.once=(n,s)=>this.events.once(n,s),this.off=(n,s)=>this.events.off(n,s),this.removeListener=(n,s)=>this.events.removeListener(n,s),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||bf;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:He.pino(He.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||u1.logger}));this.logger=He.generateChildLogger(r,this.name),this.heartbeat=new Vs.HeartBeat,this.crypto=new M1(this,this.logger,e==null?void 0:e.keychain),this.history=new rE(this,this.logger),this.expirer=new nE(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Cy(Nd(Nd({},l1),e==null?void 0:e.storageOptions)),this.relayer=new Q1({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new tE(this,this.logger),this.verify=new sE(this.projectId||"",this.logger)}static async init(e){const r=new Ou(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(O1,n),r}get context(){return He.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const cE=Ou,wf="wc",Ef=2,Sf="client",Tu=`${wf}@${Ef}:${Sf}:`,Qa={name:Sf,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Pd="WALLETCONNECT_DEEPLINK_CHOICE",uE="proposal",lE="Proposal expired",dE="session",Oo=ae.SEVEN_DAYS,hE="engine",ti={wc_sessionPropose:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ae.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ae.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ae.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ae.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ae.THIRTY_SECONDS,prompt:!1,tag:1115}}},Ja={min:ae.FIVE_MINUTES,max:ae.SEVEN_DAYS},on={idle:"IDLE",active:"ACTIVE"},fE="request",pE=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var gE=Object.defineProperty,yE=Object.defineProperties,mE=Object.getOwnPropertyDescriptors,kd=Object.getOwnPropertySymbols,vE=Object.prototype.hasOwnProperty,_E=Object.prototype.propertyIsEnumerable,Rd=(t,e,r)=>e in t?gE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ur=(t,e)=>{for(var r in e||(e={}))vE.call(e,r)&&Rd(t,r,e[r]);if(kd)for(var r of kd(e))_E.call(e,r)&&Rd(t,r,e[r]);return t},ri=(t,e)=>yE(t,mE(e));class bE extends wm{constructor(e){super(e),this.name=hE,this.events=new cu,this.initialized=!1,this.ignoredPayloadTypes=[ls],this.requestQueue={state:on.idle,queue:[]},this.sessionRequestQueue={state:on.idle,queue:[]},this.requestQueueDelay=ae.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ti)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ae.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=ri(ur({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:a,sessionProperties:o,relays:c}=n;let u=s,d,f=!1;if(u&&(f=this.client.core.pairing.pairings.get(u).active),!u||!f){const{topic:O,uri:w}=await this.client.core.pairing.create();u=O,d=w}const p=await this.client.core.crypto.generateKeyPair(),m=ur({requiredNamespaces:i,optionalNamespaces:a,relays:c??[{protocol:_f}],proposer:{publicKey:p,metadata:this.client.metadata}},o&&{sessionProperties:o}),{reject:b,resolve:E,done:T}=ms(ae.FIVE_MINUTES,lE);if(this.events.once(Ct("session_connect"),async({error:O,session:w})=>{if(O)b(O);else if(w){w.self.publicKey=p;const x=ri(ur({},w),{requiredNamespaces:w.requiredNamespaces,optionalNamespaces:w.optionalNamespaces});await this.client.session.set(w.topic,x),await this.setExpiry(w.topic,w.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:w.peer.metadata}),E(x)}}),!u){const{message:O}=J("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(O)}const U=await this.sendRequest({topic:u,method:"wc_sessionPropose",params:m}),v=Tr(ae.FIVE_MINUTES);return await this.setProposal(U,ur({id:U,expiry:v},m)),{uri:d,approval:T}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:s,namespaces:i,sessionProperties:a}=r,o=this.client.proposal.get(n);let{pairingTopic:c,proposer:u,requiredNamespaces:d,optionalNamespaces:f}=o;c=c||"",ui(d)||(d=L0(i,"approve()"));const p=await this.client.core.crypto.generateKeyPair(),m=u.publicKey,b=await this.client.core.crypto.generateSharedKey(p,m);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:u.metadata}),await this.sendResult({id:n,topic:c,result:{relay:{protocol:s??"irn"},responderPublicKey:p}}),await this.client.proposal.delete(n,jt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const E=ur({relay:{protocol:s??"irn"},namespaces:i,requiredNamespaces:d,optionalNamespaces:f,pairingTopic:c,controller:{publicKey:p,metadata:this.client.metadata},expiry:Tr(Oo)},a&&{sessionProperties:a});await this.client.core.relayer.subscribe(b),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:E,throwOnFailedPublish:!0});const T=ri(ur({},E),{topic:b,pairingTopic:c,acknowledged:!1,self:E.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:p});return await this.client.session.set(b,T),await this.setExpiry(b,Tr(Oo)),{topic:b,acknowledged:()=>new Promise(U=>setTimeout(()=>U(this.client.session.get(b)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:s}=r,{pairingTopic:i}=this.client.proposal.get(n);i&&(await this.sendError(n,i,s),await this.client.proposal.delete(n,jt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:s}=r,i=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s}}),{done:a,resolve:o,reject:c}=ms();return this.events.once(Ct("session_update",i),({error:u})=>{u?c(u):o()}),await this.client.session.update(n,{namespaces:s}),{acknowledged:a}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,s=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:i,resolve:a,reject:o}=ms();return this.events.once(Ct("session_extend",s),({error:c})=>{c?o(c):a()}),await this.setExpiry(n,Tr(Oo)),{acknowledged:i}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:s,topic:i,expiry:a}=r,o=wu(),{done:c,resolve:u,reject:d}=ms(a);return this.events.once(Ct("session_request",o),({error:f,result:p})=>{f?d(f):u(p)}),await Promise.all([new Promise(async f=>{await this.sendRequest({clientRpcId:o,topic:i,method:"wc_sessionRequest",params:{request:s,chainId:n},expiry:a,throwOnFailedPublish:!0}).catch(p=>d(p)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:o}),f()}),new Promise(async f=>{const p=await this.client.core.storage.getItem(Pd);w0({id:o,topic:i,wcDeepLink:p}),f()}),c()]).then(f=>f[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:s}=r,{id:i}=s;an(s)?await this.sendResult({id:i,topic:n,result:s.result,throwOnFailedPublish:!0}):Cr(s)&&await this.sendError(i,n,s.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const s=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:i,resolve:a,reject:o}=ms();this.events.once(Ct("session_ping",s),({error:c})=>{c?o(c):a()}),await i()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:s,chainId:i}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:jt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>D0(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var a,o;return((a=i.peerMetadata)==null?void 0:a.url)&&((o=i.peerMetadata)==null?void 0:o.url)===r.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:s}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,jt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(s.publicKey)&&await this.client.core.crypto.deleteKeyPair(s.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Pd).catch(i=>this.client.logger.warn(i))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,jt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),s&&(this.sessionRequestQueue.state=on.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=ti.wc_sessionRequest.req.ttl,{id:s,topic:i,params:a}=r;await this.client.pendingRequest.set(s,{id:s,topic:i,params:a}),n&&this.client.core.expirer.set(s,Tr(n))},this.sendRequest=async r=>{const{topic:n,method:s,params:i,expiry:a,relayRpcId:o,clientRpcId:c,throwOnFailedPublish:u}=r,d=vi(s,i,c);if(no()&&pE.includes(s)){const m=xs(JSON.stringify(d));this.client.core.verify.register({attestationId:m})}const f=await this.client.core.crypto.encode(n,d),p=ti[s].req;return a&&(p.ttl=a),o&&(p.id=o),this.client.core.history.set(n,d),u?(p.internal=ri(ur({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,p)):this.client.core.relayer.publish(n,f,p).catch(m=>this.client.logger.error(m)),d.id},this.sendResult=async r=>{const{id:n,topic:s,result:i,throwOnFailedPublish:a}=r,o=Eu(n,i),c=await this.client.core.crypto.encode(s,o),u=await this.client.core.history.get(s,n),d=ti[u.request.method].res;a?(d.internal=ri(ur({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,c,d)):this.client.core.relayer.publish(s,c,d).catch(f=>this.client.logger.error(f)),await this.client.core.history.resolve(o)},this.sendError=async(r,n,s)=>{const i=Su(r,s),a=await this.client.core.crypto.encode(n,i),o=await this.client.core.history.get(n,r),c=ti[o.request.method].res;this.client.core.relayer.publish(n,a,c),await this.client.core.history.resolve(i)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(s=>{Sn(s.expiry)&&r.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Sn(s.expiry)&&n.push(s.id)}),await Promise.all([...r.map(s=>this.deleteSession(s)),...n.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===on.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=on.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=on.idle},this.processRequest=r=>{const{topic:n,payload:s}=r,i=s.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeRequest(n,s);case"wc_sessionSettle":return this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return this.onSessionExtendRequest(n,s);case"wc_sessionPing":return this.onSessionPingRequest(n,s);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return this.onSessionRequest(n,s);case"wc_sessionEvent":return this.onSessionEventRequest(n,s);default:return this.client.logger.info(`Unsupported request method ${i}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:s}=r,i=(await this.client.core.history.get(n,s.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${i}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:s}=J("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.onSessionProposeRequest=async(r,n)=>{const{params:s,id:i}=n;try{this.isValidConnect(ur({},n.params));const a=Tr(ae.FIVE_MINUTES),o=ur({id:i,pairingTopic:r,expiry:a},s);await this.setProposal(i,o);const c=xs(JSON.stringify(n)),u=await this.getVerifyContext(c,o.proposer.metadata);this.client.events.emit("session_proposal",{id:i,params:o,verifyContext:u})}catch(a){await this.sendError(i,r,a),this.client.logger.error(a)}},this.onSessionProposeResponse=async(r,n)=>{const{id:s}=n;if(an(n)){const{result:i}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const o=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const c=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const u=await this.client.core.crypto.generateSharedKey(o,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const d=await this.client.core.relayer.subscribe(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else Cr(n)&&(await this.client.proposal.delete(s,jt("USER_DISCONNECTED")),this.events.emit(Ct("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:a,controller:o,expiry:c,namespaces:u,requiredNamespaces:d,optionalNamespaces:f,sessionProperties:p,pairingTopic:m}=n.params,b=ur({topic:r,relay:a,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:m,requiredNamespaces:d,optionalNamespaces:f,controller:o.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},p&&{sessionProperties:p});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(Ct("session_connect"),{session:b}),this.cleanupDuplicatePairings(b)}catch(a){await this.sendError(s,r,a),this.client.logger.error(a)}},this.onSessionSettleResponse=async(r,n)=>{const{id:s}=n;an(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ct("session_approve",s),{})):Cr(n)&&(await this.client.session.delete(r,jt("USER_DISCONNECTED")),this.events.emit(Ct("session_approve",s),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:s,id:i}=n;try{const a=`${r}_session_update`,o=Io.get(a);if(o&&this.isRequestOutOfSync(o,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidUpdate(ur({topic:r},s)),await this.client.session.update(r,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_update",{id:i,topic:r,params:s}),Io.set(a,i)}catch(a){await this.sendError(i,r,a),this.client.logger.error(a)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:s}=n;an(n)?this.events.emit(Ct("session_update",s),{}):Cr(n)&&this.events.emit(Ct("session_update",s),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:s}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Tr(Oo)),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_extend",{id:s,topic:r})}catch(i){await this.sendError(s,r,i),this.client.logger.error(i)}},this.onSessionExtendResponse=(r,n)=>{const{id:s}=n;an(n)?this.events.emit(Ct("session_extend",s),{}):Cr(n)&&this.events.emit(Ct("session_extend",s),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:s}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_ping",{id:s,topic:r})}catch(i){await this.sendError(s,r,i),this.client.logger.error(i)}},this.onSessionPingResponse=(r,n)=>{const{id:s}=n;setTimeout(()=>{an(n)?this.events.emit(Ct("session_ping",s),{}):Cr(n)&&this.events.emit(Ct("session_ping",s),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(Wt.publish,async()=>{i(await this.deleteSession(r))})}),this.sendResult({id:s,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:s,topic:r})}catch(i){this.client.logger.error(i)}},this.onSessionRequest=async(r,n)=>{const{id:s,params:i}=n;try{this.isValidRequest(ur({topic:r},i)),await this.setPendingSessionRequest({id:s,topic:r,params:i}),this.addSessionRequestToSessionRequestQueue({id:s,topic:r,params:i}),await this.processSessionRequestQueue()}catch(a){await this.sendError(s,r,a),this.client.logger.error(a)}},this.onSessionRequestResponse=(r,n)=>{const{id:s}=n;an(n)?this.events.emit(Ct("session_request",s),{result:n.result}):Cr(n)&&this.events.emit(Ct("session_request",s),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:s,params:i}=n;try{const a=`${r}_session_event_${i.event.name}`,o=Io.get(a);if(o&&this.isRequestOutOfSync(o,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(ur({topic:r},i)),this.client.events.emit("session_event",{id:s,topic:r,params:i}),Io.set(a,s)}catch(a){await this.sendError(s,r,a),this.client.logger.error(a)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=on.idle,this.processSessionRequestQueue()},ae.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===on.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:s,params:i}=r,a=xs(JSON.stringify(vi("wc_sessionRequest",i,n))),o=this.client.session.get(s),c=await this.getVerifyContext(a,o.peer.metadata);this.sessionRequestQueue.state=on.active,this.client.events.emit("session_request",{id:n,topic:s,params:i,verifyContext:c})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!dr(r)){const{message:c}=J("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:a,relays:o}=r;if(tr(n)||await this.isValidPairingTopic(n),!Y0(o,!0)){const{message:c}=J("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(c)}!tr(s)&&ui(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!tr(i)&&ui(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),tr(a)||this.validateSessionProps(a,"sessionProperties")},this.validateNamespaces=(r,n)=>{const s=G0(r,"connect()",n);if(s)throw new Error(s.message)},this.isValidApprove=async r=>{if(!dr(r))throw new Error(J("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:a}=r;await this.isValidProposalId(n);const o=this.client.proposal.get(n),c=Lo(s,"approve()");if(c)throw new Error(c.message);const u=rd(o.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Lt(i,!0)){const{message:d}=J("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}tr(a)||this.validateSessionProps(a,"sessionProperties")},this.isValidReject=async r=>{if(!dr(r)){const{message:i}=J("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(i)}const{id:n,reason:s}=r;if(await this.isValidProposalId(n),!J0(s)){const{message:i}=J("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}},this.isValidSessionSettleRequest=r=>{if(!dr(r)){const{message:u}=J("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:s,namespaces:i,expiry:a}=r;if(!ef(n)){const{message:u}=J("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const o=Z0(s,"onSessionSettleRequest()");if(o)throw new Error(o.message);const c=Lo(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Sn(a)){const{message:u}=J("EXPIRED","onSessionSettleRequest()");throw new Error(u)}},this.isValidUpdate=async r=>{if(!dr(r)){const{message:c}=J("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:s}=r;await this.isValidSessionTopic(n);const i=this.client.session.get(n),a=Lo(s,"update()");if(a)throw new Error(a.message);const o=rd(i.requiredNamespaces,s,"update()");if(o)throw new Error(o.message)},this.isValidExtend=async r=>{if(!dr(r)){const{message:s}=J("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!dr(r)){const{message:c}=J("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:s,chainId:i,expiry:a}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!td(o,i)){const{message:c}=J("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!X0(s)){const{message:c}=J("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!rb(o,i,s.method)){const{message:c}=J("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(a&&!ob(a,Ja)){const{message:c}=J("MISSING_OR_INVALID",`request() expiry: ${a}. Expiry must be a number (in seconds) between ${Ja.min} and ${Ja.max}`);throw new Error(c)}},this.isValidRespond=async r=>{if(!dr(r)){const{message:i}=J("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(i)}const{topic:n,response:s}=r;if(await this.isValidSessionTopic(n),!eb(s)){const{message:i}=J("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(i)}},this.isValidPing=async r=>{if(!dr(r)){const{message:s}=J("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!dr(r)){const{message:o}=J("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(o)}const{topic:n,event:s,chainId:i}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!td(a,i)){const{message:o}=J("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(o)}if(!tb(s)){const{message:o}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}if(!nb(a,i,s.name)){const{message:o}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidDisconnect=async r=>{if(!dr(r)){const{message:s}=J("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const s={verified:{verifyUrl:n.verifyUrl||Uo,validation:"UNKNOWN",origin:n.url||""}};try{const i=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});i&&(s.verified.origin=i,s.verified.validation=i===new URL(n.url).origin?"VALID":"INVALID")}catch(i){this.client.logger.error(i)}return this.client.logger.info(`Verify context: ${JSON.stringify(s)}`),s},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(s=>{if(!Lt(s,!1)){const{message:i}=J("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(i)}})}}async isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Wt.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const s=await this.client.core.crypto.decode(r,n);try{xu(s)?(this.client.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):Na(s)?(await this.client.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.client.core.history.delete(r,s.id)):this.onRelayEventUnknownPayload({topic:r,payload:s})}catch(i){this.client.logger.error(i)}})}registerExpirerEvents(){this.client.core.expirer.on(Sr.expired,async e=>{const{topic:r,id:n}=Jh(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,J("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!Lt(e,!1)){const{message:r}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Sn(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=J("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Lt(e,!1)){const{message:r}=J("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=J("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Sn(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=J("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Lt(e,!1)){const{message:r}=J("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=J("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Q0(e)){const{message:r}=J("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=J("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Sn(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=J("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class wE extends ka{constructor(e,r){super(e,r,uE,Tu),this.core=e,this.logger=r}}class EE extends ka{constructor(e,r){super(e,r,dE,Tu),this.core=e,this.logger=r}}class SE extends ka{constructor(e,r){super(e,r,fE,Tu,n=>n.id),this.core=e,this.logger=r}}class Cu extends bm{constructor(e){super(e),this.protocol=wf,this.version=Ef,this.name=Qa.name,this.events=new Mr.EventEmitter,this.on=(n,s)=>this.events.on(n,s),this.once=(n,s)=>this.events.once(n,s),this.off=(n,s)=>this.events.off(n,s),this.removeListener=(n,s)=>this.events.removeListener(n,s),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}},this.update=async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}},this.request=async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}},this.find=n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||Qa.name,this.metadata=(e==null?void 0:e.metadata)||p0();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:He.pino(He.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Qa.logger}));this.core=(e==null?void 0:e.core)||new cE(e),this.logger=He.generateChildLogger(r,this.name),this.session=new EE(this.core,this.logger),this.proposal=new wE(this.core,this.logger),this.pendingRequest=new SE(this.core,this.logger),this.engine=new bE(this)}static async init(e){const r=new Cu(e);return await r.initialize(),r}get context(){return He.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var xE=Object.defineProperty,IE=Object.defineProperties,OE=Object.getOwnPropertyDescriptors,Ad=Object.getOwnPropertySymbols,TE=Object.prototype.hasOwnProperty,CE=Object.prototype.propertyIsEnumerable,jd=(t,e,r)=>e in t?xE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,NE=(t,e)=>{for(var r in e||(e={}))TE.call(e,r)&&jd(t,r,e[r]);if(Ad)for(var r of Ad(e))CE.call(e,r)&&jd(t,r,e[r]);return t},PE=(t,e)=>IE(t,OE(e)),Nu=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ut=(t,e,r)=>(Nu(t,e,"read from private field"),r?r.call(t):e.get(t)),Bn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Wo=(t,e,r,n)=>(Nu(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Bt=(t,e,r)=>(Nu(t,e,"access private method"),r),Hn,vs,ii,At,Oc,xf,Ht,er,Tc,Ld;let kE=class{constructor(t){Bn(this,Oc),Bn(this,Ht),Bn(this,Tc),Bn(this,Hn,void 0),Bn(this,vs,void 0),Bn(this,ii,void 0),Bn(this,At,void 0),Wo(this,Hn,t),Wo(this,vs,Bt(this,Oc,xf).call(this)),Bt(this,Ht,er).call(this)}async connect(t){const{requiredNamespaces:e,optionalNamespaces:r}=t;return new Promise(async(n,s)=>{await Bt(this,Ht,er).call(this);const i=ut(this,vs).subscribeModal(c=>{c.open||(i(),s(new Error("Modal closed")))}),{uri:a,approval:o}=await ut(this,At).connect(t);if(a){const c=new Set;e&&Object.values(e).forEach(({chains:u})=>{u&&u.forEach(d=>c.add(d))}),r&&Object.values(r).forEach(({chains:u})=>{u&&u.forEach(d=>c.add(d))}),await ut(this,vs).openModal({uri:a,chains:Array.from(c)})}try{const c=await o();n(c)}catch(c){s(c)}finally{i(),ut(this,vs).closeModal()}})}async disconnect(t){await Bt(this,Ht,er).call(this),await ut(this,At).disconnect(t)}async request(t){return await Bt(this,Ht,er).call(this),await ut(this,At).request(t)}async getSessions(){return await Bt(this,Ht,er).call(this),ut(this,At).session.getAll()}async getSession(){return await Bt(this,Ht,er).call(this),ut(this,At).session.getAll().at(-1)}async onSessionEvent(t){await Bt(this,Ht,er).call(this),ut(this,At).on("session_event",t)}async offSessionEvent(t){await Bt(this,Ht,er).call(this),ut(this,At).off("session_event",t)}async onSessionUpdate(t){await Bt(this,Ht,er).call(this),ut(this,At).on("session_update",t)}async offSessionUpdate(t){await Bt(this,Ht,er).call(this),ut(this,At).off("session_update",t)}async onSessionDelete(t){await Bt(this,Ht,er).call(this),ut(this,At).on("session_delete",t)}async offSessionDelete(t){await Bt(this,Ht,er).call(this),ut(this,At).off("session_delete",t)}async onSessionExpire(t){await Bt(this,Ht,er).call(this),ut(this,At).on("session_expire",t)}async offSessionExpire(t){await Bt(this,Ht,er).call(this),ut(this,At).off("session_expire",t)}};Hn=new WeakMap,vs=new WeakMap,ii=new WeakMap,At=new WeakMap,Oc=new WeakSet,xf=function(){const{modalOptions:t,projectId:e}=ut(this,Hn);return new Fg(PE(NE({},t),{projectId:e}))},Ht=new WeakSet,er=async function(){return ut(this,At)?!0:(!ut(this,ii)&&typeof window<"u"&&Wo(this,ii,Bt(this,Tc,Ld).call(this)),ut(this,ii))},Tc=new WeakSet,Ld=async function(){Wo(this,At,await Cu.init({metadata:ut(this,Hn).metadata,projectId:ut(this,Hn).projectId,relayUrl:ut(this,Hn).relayUrl}));const t=await ut(this,At).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};const Ra=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent","getEvent","getEvents","createSharedState","importSharedState","requestSignature"],ao=["aleo:1"],Aa=["chainChanged","accountSelected","selectedAccountSynced","sharedAccountSynced"],If="f0aaeffe71b636da453fce042d79d723",Of={standaloneChains:ao,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"puzzleapp://",universal:""}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:"https://walletconnect.puzzle.online/"}},{id:"avail",name:"Avail Wallet",links:{native:"avail://",universal:"https://avail.global"}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png",avail:"https://i.imgur.com/GxNn8BO.png"}},RE={requiredNamespaces:{aleo:{methods:Ra,chains:ao,events:Aa}}},AE="@puzzlehq/sdk-core",jE="Puzzle SDK",LE="0.2.18",UE="Your portal to privacy",ME="./dist/puzzle.cjs.js",DE="./dist/puzzle.es.js",zE="./dist/puzzle.umd.js",$E="./dist/types/index.d.ts",VE={".":{import:"./dist/puzzle.es.js",require:"./dist/puzzle.cjs.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/index.d.ts"}},qE="module",ZE={"fetch-fix":"find dist -type f \\( -name '*.js' -o -name '*.cjs' \\) -exec sed -i '' 's/self.fetch[[:space:]]*||/fetch ||/g' {} \\;","ws-fix":`find ./dist -type f -name 'index*' -exec sed -i '' -e 's/require(\\"ws\\")/(() => {try { return require(\\"ws\\") } catch (e) { } })()/g' {} +;`,build:"vite build && tsc --declaration --emitDeclarationOnly --outDir dist/types && pnpm fetch-fix && pnpm ws-fix","type-check":"tsc --noEmit"},FE={type:"git",url:"git+https://github.com/puzzlehq/puzzle-sdk.git"},KE={"@puzzlehq/types":"1.0.11","@walletconnect/modal-sign-html":"^2.6.2","@walletconnect/types":"^2.11.2","@walletconnect/utils":"^2.11.2",debug:"^4.3.4",events:"^3.3.0"},BE={buffer:"^6.0.3"},HE=["puzzle","html","aleo","web3","crypto"],WE="Puzzle",GE="ISC",YE={url:"https://github.com/puzzlehq/puzzle-sdk/issues"},QE="https://github.com/puzzlehq/puzzle-sdk#readme",Ud={name:AE,displayName:jE,version:LE,description:UE,main:ME,module:DE,browser:zE,types:$E,private:!1,exports:VE,type:qE,scripts:ZE,repository:FE,dependencies:KE,peerDependencies:BE,keywords:HE,author:WE,license:GE,bugs:YE,homepage:QE},JE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Tf(t,e){const{message:r,code:n}=JE[t];return{message:e?`${r} ${e}`:r,code:n}}const co=new cu;let ws;async function Cf(t){let e=!1;const r=Ud.version,n=localStorage.getItem("puzzle_sdk_version");if(r!==n&&(console.log(`${Ud.name}: Updated from `+n+" to "+r+"!"),localStorage.setItem("puzzle_sdk_version",r),e=!0),ws=new kE({projectId:If,metadata:{name:t.dAppName,description:t.dAppDescription,url:t.dAppUrl,icons:[t.dAppIconURL]},modalOptions:{...Of}}),e)try{XE(ws,t.onDisconnect)}catch(s){console.error(s)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")}async function XE(t,e){const r=await(t==null?void 0:t.getSession());r&&(console.log("Disconnecting session",r),e&&e(),t.disconnect({topic:r.topic,reason:Tf("USER_DISCONNECTED")}))}async function ar(){return new Promise(t=>{if(ws)t(ws);else{const e=setInterval(()=>{ws&&(clearInterval(e),t(ws))},200)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}const eS=async()=>{const t=await ar(),e=await t.getSession();if(!e||!t)return{error:"no session or connection"};try{return await t.request({topic:e.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getSelectedAccount"}})}catch(r){const n=r.message;return console.error("getAccount error",n),{error:n}}},tS=async({address:t})=>{const e=await ar(),r=await e.getSession();if(!r||!e)return{error:"no session or connection"};try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}})}catch(n){const s=n.message;return console.error("getBalance error",s),{error:s}}},rS=async()=>{const t=await ar();if(!t)throw new Error("call setConnection() first!");const e=await t.getSession();if(e)return console.log("Already connected!",e),e;try{const r=await t.connect({requiredNamespaces:{aleo:{methods:Ra,chains:ao,events:Aa}}});return co.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),r}catch(r){console.error("connect error",r.message)}},nS=async t=>{const e=await ar(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{error:"no session or connection"};const n=t==null?void 0:t.inputs.map(s=>typeof s=="string"?s:s.plaintext);try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:n}}})}catch(s){const i=s.message;return console.error("createEvent error",i),{error:i}}},sS=async()=>{const t=await ar(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session or connection"};try{return await t.request({topic:e.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"createSharedState",params:{}}})}catch(r){const n=r.message;return console.error("createSharedState error",n),{error:n}}},iS=async t=>{const e=await ar(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{error:"no session or connection"};try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}})}catch(n){return console.error("decrypt error",n.message),{error:n.message}}},oS=async()=>{const t=await ar(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session or connection"};try{try{await t.disconnect({reason:Tf("USER_DISCONNECTED"),topic:e.topic}),co.emit("session_change")}catch(r){console.warn(r)}return{}}catch(r){const n=r.message;return console.error("error disconnecting",n),{error:n}}},aS=async({id:t,address:e})=>{const r=await ar(),n=await(r==null?void 0:r.getSession());if(!n||!r)return{event:void 0,error:"no session or connection"};const s=async()=>await r.request({topic:n.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}});try{return await s()}catch(i){const a=i.message;return console.error("getEvents error",a),{error:a}}},cS=async t=>{const e=await ar(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{events:void 0,error:"no session or connection"};(t==null?void 0:t.programId)===""&&(t.programId=void 0);const n=async(s=0)=>await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:s}}});try{return await n()}catch(s){const i=s.message;return console.error("getEvents error",i),{error:i}}},uS=async t=>{const e=await ar(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{error:"no session or connection"};try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}})}catch(n){const s=n.message;return console.error("importSharedState error",s),{error:s}}},lS=async({address:t,filter:e,page:r=0})=>{const n=await ar(),s=await(n==null?void 0:n.getSession());if(!s||!n)return{error:"no session or connection"};const i=async(a=0)=>await n.request({topic:s.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:a}}});try{return await i()}catch(a){const o=a.message;return console.error("getRecords error",o),{error:o}}};var Qe;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Qe||(Qe={}));var Cc;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Cc||(Cc={}));const te=Qe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xn=t=>{switch(typeof t){case"undefined":return te.undefined;case"string":return te.string;case"number":return isNaN(t)?te.nan:te.number;case"boolean":return te.boolean;case"function":return te.function;case"bigint":return te.bigint;case"symbol":return te.symbol;case"object":return Array.isArray(t)?te.array:t===null?te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?te.promise:typeof Map<"u"&&t instanceof Map?te.map:typeof Set<"u"&&t instanceof Set?te.set:typeof Date<"u"&&t instanceof Date?te.date:te.object;default:return te.unknown}},B=Qe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),dS=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class kr extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(r(a))):o[u]=o[u]||{_errors:[]},o=o[u],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Qe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}kr.create=t=>new kr(t);const _i=(t,e)=>{let r;switch(t.code){case B.invalid_type:t.received===te.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case B.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Qe.jsonStringifyReplacer)}`;break;case B.unrecognized_keys:r=`Unrecognized key(s) in object: ${Qe.joinValues(t.keys,", ")}`;break;case B.invalid_union:r="Invalid input";break;case B.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Qe.joinValues(t.options)}`;break;case B.invalid_enum_value:r=`Invalid enum value. Expected ${Qe.joinValues(t.options)}, received '${t.received}'`;break;case B.invalid_arguments:r="Invalid function arguments";break;case B.invalid_return_type:r="Invalid function return type";break;case B.invalid_date:r="Invalid date";break;case B.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Qe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case B.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case B.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case B.custom:r="Invalid input";break;case B.invalid_intersection_types:r="Intersection results could not be merged";break;case B.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case B.not_finite:r="Number must be finite";break;default:r=e.defaultError,Qe.assertNever(t)}return{message:r}};let Nf=_i;function hS(t){Nf=t}function Go(){return Nf}const Yo=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],a={...s,path:i};let o="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)o=u(a,{data:e,defaultError:o}).message;return{...s,path:i,message:s.message||o}},fS=[];function se(t,e){const r=Yo({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Go(),_i].filter(n=>!!n)});t.common.issues.push(r)}class Qt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return be;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return Qt.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return be;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}}const be=Object.freeze({status:"aborted"}),Pf=t=>({status:"dirty",value:t}),sr=t=>({status:"valid",value:t}),Nc=t=>t.status==="aborted",Pc=t=>t.status==="dirty",Qo=t=>t.status==="valid",Jo=t=>typeof Promise<"u"&&t instanceof Promise;var ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ce||(ce={}));class Gr{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Md=(t,e)=>{if(Qo(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new kr(t.common.issues);return this._error=r,this._error}}};function xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,a)=>i.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}class Re{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return xn(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:xn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qt,ctx:{common:e.parent.common,data:e.data,parsedType:xn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Jo(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xn(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Md(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xn(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Jo(s)?s:Promise.resolve(s));return Md(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const a=e(s),o=()=>i.addIssue({code:B.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Lr({schema:this,typeName:pe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return un.create(this,this._def)}nullable(){return rs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Rr.create(this,this._def)}promise(){return js.create(this,this._def)}or(e){return Si.create([this,e],this._def)}and(e){return xi.create(this,e,this._def)}transform(e){return new Lr({...xe(this._def),schema:this,typeName:pe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Ni({...xe(this._def),innerType:this,defaultValue:r,typeName:pe.ZodDefault})}brand(){return new Rf({typeName:pe.ZodBranded,type:this,...xe(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new ra({...xe(this._def),innerType:this,catchValue:r,typeName:pe.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return uo.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const pS=/^c[^\s-]{8,}$/i,gS=/^[a-z][a-z0-9]*$/,yS=/[0-9A-HJKMNP-TV-Z]{26}/,mS=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,vS=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,_S=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u"),bS=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,wS=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ES=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function SS(t,e){return!!((e==="v4"||!e)&&bS.test(t)||(e==="v6"||!e)&&wS.test(t))}class Nr extends Re{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(s=>e.test(s),{validation:r,code:B.invalid_string,...ce.errToObj(n)}),this.nonempty=e=>this.min(1,ce.errToObj(e)),this.trim=()=>new Nr({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Nr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Nr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==te.string){const s=this._getOrReturnCtx(e);return se(s,{code:B.invalid_type,expected:te.string,received:s.parsedType}),be}const r=new Qt;let n;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(n=this._getOrReturnCtx(e,n),se(n,{code:B.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(n=this._getOrReturnCtx(e,n),se(n,{code:B.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const i=e.data.length>s.value,a=e.data.length<s.value;(i||a)&&(n=this._getOrReturnCtx(e,n),i?se(n,{code:B.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&se(n,{code:B.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")vS.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"email",code:B.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")_S.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"emoji",code:B.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")mS.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"uuid",code:B.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")pS.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"cuid",code:B.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")gS.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"cuid2",code:B.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")yS.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"ulid",code:B.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),se(n,{validation:"url",code:B.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"regex",code:B.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(e,n),se(n,{code:B.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(n=this._getOrReturnCtx(e,n),se(n,{code:B.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(n=this._getOrReturnCtx(e,n),se(n,{code:B.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?ES(s).test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{code:B.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?SS(e.data,s.version)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"ip",code:B.invalid_string,message:s.message}),r.dirty()):Qe.assertNever(s);return{status:r.value,value:e.data}}_addCheck(e){return new Nr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...ce.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...ce.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Nr.create=t=>{var e;return new Nr({checks:[],typeName:pe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...xe(t)})};function xS(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class kn extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==te.number){const s=this._getOrReturnCtx(e);return se(s,{code:B.invalid_type,expected:te.number,received:s.parsedType}),be}let r;const n=new Qt;for(const s of this._def.checks)s.kind==="int"?Qe.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),se(r,{code:B.invalid_type,expected:"integer",received:"float",message:s.message}),n.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:B.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:B.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="multipleOf"?xS(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),se(r,{code:B.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),se(r,{code:B.not_finite,message:s.message}),n.dirty()):Qe.assertNever(s);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,s){return new kn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(s)}]})}_addCheck(e){return new kn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Qe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}kn.create=t=>new kn({checks:[],typeName:pe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class Rn extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==te.bigint){const s=this._getOrReturnCtx(e);return se(s,{code:B.invalid_type,expected:te.bigint,received:s.parsedType}),be}let r;const n=new Qt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:B.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:B.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),se(r,{code:B.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):Qe.assertNever(s);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,s){return new Rn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(s)}]})}_addCheck(e){return new Rn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Rn.create=t=>{var e;return new Rn({checks:[],typeName:pe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...xe(t)})};class bi extends Re{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==te.boolean){const r=this._getOrReturnCtx(e);return se(r,{code:B.invalid_type,expected:te.boolean,received:r.parsedType}),be}return sr(e.data)}}bi.create=t=>new bi({typeName:pe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class es extends Re{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==te.date){const s=this._getOrReturnCtx(e);return se(s,{code:B.invalid_type,expected:te.date,received:s.parsedType}),be}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return se(s,{code:B.invalid_date}),be}const r=new Qt;let n;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(n=this._getOrReturnCtx(e,n),se(n,{code:B.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(n=this._getOrReturnCtx(e,n),se(n,{code:B.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Qe.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new es({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}es.create=t=>new es({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:pe.ZodDate,...xe(t)});class Xo extends Re{_parse(e){if(this._getType(e)!==te.symbol){const r=this._getOrReturnCtx(e);return se(r,{code:B.invalid_type,expected:te.symbol,received:r.parsedType}),be}return sr(e.data)}}Xo.create=t=>new Xo({typeName:pe.ZodSymbol,...xe(t)});class wi extends Re{_parse(e){if(this._getType(e)!==te.undefined){const r=this._getOrReturnCtx(e);return se(r,{code:B.invalid_type,expected:te.undefined,received:r.parsedType}),be}return sr(e.data)}}wi.create=t=>new wi({typeName:pe.ZodUndefined,...xe(t)});class Ei extends Re{_parse(e){if(this._getType(e)!==te.null){const r=this._getOrReturnCtx(e);return se(r,{code:B.invalid_type,expected:te.null,received:r.parsedType}),be}return sr(e.data)}}Ei.create=t=>new Ei({typeName:pe.ZodNull,...xe(t)});class As extends Re{constructor(){super(...arguments),this._any=!0}_parse(e){return sr(e.data)}}As.create=t=>new As({typeName:pe.ZodAny,...xe(t)});class Qn extends Re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return sr(e.data)}}Qn.create=t=>new Qn({typeName:pe.ZodUnknown,...xe(t)});class fn extends Re{_parse(e){const r=this._getOrReturnCtx(e);return se(r,{code:B.invalid_type,expected:te.never,received:r.parsedType}),be}}fn.create=t=>new fn({typeName:pe.ZodNever,...xe(t)});class ea extends Re{_parse(e){if(this._getType(e)!==te.undefined){const r=this._getOrReturnCtx(e);return se(r,{code:B.invalid_type,expected:te.void,received:r.parsedType}),be}return sr(e.data)}}ea.create=t=>new ea({typeName:pe.ZodVoid,...xe(t)});class Rr extends Re{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==te.array)return se(r,{code:B.invalid_type,expected:te.array,received:r.parsedType}),be;if(s.exactLength!==null){const a=r.data.length>s.exactLength.value,o=r.data.length<s.exactLength.value;(a||o)&&(se(r,{code:a?B.too_big:B.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(se(r,{code:B.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(se(r,{code:B.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>s.type._parseAsync(new Gr(r,a,r.path,o)))).then(a=>Qt.mergeArray(n,a));const i=[...r.data].map((a,o)=>s.type._parseSync(new Gr(r,a,r.path,o)));return Qt.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new Rr({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new Rr({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new Rr({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}}Rr.create=(t,e)=>new Rr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:pe.ZodArray,...xe(e)});function _s(t){if(t instanceof ft){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=un.create(_s(n))}return new ft({...t._def,shape:()=>e})}else return t instanceof Rr?new Rr({...t._def,type:_s(t.element)}):t instanceof un?un.create(_s(t.unwrap())):t instanceof rs?rs.create(_s(t.unwrap())):t instanceof Yr?Yr.create(t.items.map(e=>_s(e))):t}class ft extends Re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Qe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==te.object){const c=this._getOrReturnCtx(e);return se(c,{code:B.invalid_type,expected:te.object,received:c.parsedType}),be}const{status:r,ctx:n}=this._processInputParams(e),{shape:s,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof fn&&this._def.unknownKeys==="strip"))for(const c in n.data)i.includes(c)||a.push(c);const o=[];for(const c of i){const u=s[c],d=n.data[c];o.push({key:{status:"valid",value:c},value:u._parse(new Gr(n,d,n.path,c)),alwaysSet:c in n.data})}if(this._def.catchall instanceof fn){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)o.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(c==="strict")a.length>0&&(se(n,{code:B.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=n.data[u];o.push({key:{status:"valid",value:u},value:c._parse(new Gr(n,d,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of o){const d=await u.key;c.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>Qt.mergeObjectSync(r,c)):Qt.mergeObjectSync(r,o)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new ft({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,a,o;const c=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=ce.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new ft({...this._def,unknownKeys:"strip"})}passthrough(){return new ft({...this._def,unknownKeys:"passthrough"})}extend(e){return new ft({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ft({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:pe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new ft({...this._def,catchall:e})}pick(e){const r={};return Qe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new ft({...this._def,shape:()=>r})}omit(e){const r={};return Qe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new ft({...this._def,shape:()=>r})}deepPartial(){return _s(this)}partial(e){const r={};return Qe.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new ft({...this._def,shape:()=>r})}required(e){const r={};return Qe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof un;)s=s._def.innerType;r[n]=s}}),new ft({...this._def,shape:()=>r})}keyof(){return kf(Qe.objectKeys(this.shape))}}ft.create=(t,e)=>new ft({shape:()=>t,unknownKeys:"strip",catchall:fn.create(),typeName:pe.ZodObject,...xe(e)});ft.strictCreate=(t,e)=>new ft({shape:()=>t,unknownKeys:"strict",catchall:fn.create(),typeName:pe.ZodObject,...xe(e)});ft.lazycreate=(t,e)=>new ft({shape:t,unknownKeys:"strip",catchall:fn.create(),typeName:pe.ZodObject,...xe(e)});class Si extends Re{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new kr(o.ctx.common.issues));return se(r,{code:B.invalid_union,unionErrors:a}),be}if(r.common.async)return Promise.all(n.map(async i=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(c=>new kr(c));return se(r,{code:B.invalid_union,unionErrors:o}),be}}get options(){return this._def.options}}Si.create=(t,e)=>new Si({options:t,typeName:pe.ZodUnion,...xe(e)});const Mo=t=>t instanceof Oi?Mo(t.schema):t instanceof Lr?Mo(t.innerType()):t instanceof Ti?[t.value]:t instanceof An?t.options:t instanceof Ci?Object.keys(t.enum):t instanceof Ni?Mo(t._def.innerType):t instanceof wi?[void 0]:t instanceof Ei?[null]:null;class ja extends Re{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.object)return se(r,{code:B.invalid_type,expected:te.object,received:r.parsedType}),be;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(se(r,{code:B.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const a=Mo(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,i)}}return new ja({typeName:pe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...xe(n)})}}function kc(t,e){const r=xn(t),n=xn(e);if(t===e)return{valid:!0,data:t};if(r===te.object&&n===te.object){const s=Qe.objectKeys(e),i=Qe.objectKeys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(const o of i){const c=kc(t[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(r===te.array&&n===te.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],o=e[i],c=kc(a,o);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===te.date&&n===te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class xi extends Re{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,a)=>{if(Nc(i)||Nc(a))return be;const o=kc(i.value,a.value);return o.valid?((Pc(i)||Pc(a))&&r.dirty(),{status:r.value,value:o.data}):(se(n,{code:B.invalid_intersection_types}),be)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}xi.create=(t,e,r)=>new xi({left:t,right:e,typeName:pe.ZodIntersection,...xe(r)});class Yr extends Re{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.array)return se(n,{code:B.invalid_type,expected:te.array,received:n.parsedType}),be;if(n.data.length<this._def.items.length)return se(n,{code:B.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),be;!this._def.rest&&n.data.length>this._def.items.length&&(se(n,{code:B.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((i,a)=>{const o=this._def.items[a]||this._def.rest;return o?o._parse(new Gr(n,i,n.path,a)):null}).filter(i=>!!i);return n.common.async?Promise.all(s).then(i=>Qt.mergeArray(r,i)):Qt.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new Yr({...this._def,rest:e})}}Yr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Yr({items:t,typeName:pe.ZodTuple,rest:null,...xe(e)})};class Ii extends Re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.object)return se(n,{code:B.invalid_type,expected:te.object,received:n.parsedType}),be;const s=[],i=this._def.keyType,a=this._def.valueType;for(const o in n.data)s.push({key:i._parse(new Gr(n,o,n.path,o)),value:a._parse(new Gr(n,n.data[o],n.path,o))});return n.common.async?Qt.mergeObjectAsync(r,s):Qt.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Re?new Ii({keyType:e,valueType:r,typeName:pe.ZodRecord,...xe(n)}):new Ii({keyType:Nr.create(),valueType:e,typeName:pe.ZodRecord,...xe(r)})}}class ta extends Re{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.map)return se(n,{code:B.invalid_type,expected:te.map,received:n.parsedType}),be;const s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([o,c],u)=>({key:s._parse(new Gr(n,o,n.path,[u,"key"])),value:i._parse(new Gr(n,c,n.path,[u,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return be;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(u.value,d.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const c of a){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return be;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(u.value,d.value)}return{status:r.value,value:o}}}}ta.create=(t,e,r)=>new ta({valueType:e,keyType:t,typeName:pe.ZodMap,...xe(r)});class ts extends Re{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.set)return se(n,{code:B.invalid_type,expected:te.set,received:n.parsedType}),be;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(se(n,{code:B.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(se(n,{code:B.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function a(c){const u=new Set;for(const d of c){if(d.status==="aborted")return be;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const o=[...n.data.values()].map((c,u)=>i._parse(new Gr(n,c,n.path,u)));return n.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,r){return new ts({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new ts({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}ts.create=(t,e)=>new ts({valueType:t,minSize:null,maxSize:null,typeName:pe.ZodSet,...xe(e)});class Is extends Re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.function)return se(r,{code:B.invalid_type,expected:te.function,received:r.parsedType}),be;function n(o,c){return Yo({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Go(),_i].filter(u=>!!u),issueData:{code:B.invalid_arguments,argumentsError:c}})}function s(o,c){return Yo({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Go(),_i].filter(u=>!!u),issueData:{code:B.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},a=r.data;return this._def.returns instanceof js?sr(async(...o)=>{const c=new kr([]),u=await this._def.args.parseAsync(o,i).catch(f=>{throw c.addIssue(n(o,f)),c}),d=await a(...u);return await this._def.returns._def.type.parseAsync(d,i).catch(f=>{throw c.addIssue(s(d,f)),c})}):sr((...o)=>{const c=this._def.args.safeParse(o,i);if(!c.success)throw new kr([n(o,c.error)]);const u=a(...c.data),d=this._def.returns.safeParse(u,i);if(!d.success)throw new kr([s(u,d.error)]);return d.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Is({...this._def,args:Yr.create(e).rest(Qn.create())})}returns(e){return new Is({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new Is({args:e||Yr.create([]).rest(Qn.create()),returns:r||Qn.create(),typeName:pe.ZodFunction,...xe(n)})}}class Oi extends Re{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Oi.create=(t,e)=>new Oi({getter:t,typeName:pe.ZodLazy,...xe(e)});class Ti extends Re{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return se(r,{received:r.data,code:B.invalid_literal,expected:this._def.value}),be}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ti.create=(t,e)=>new Ti({value:t,typeName:pe.ZodLiteral,...xe(e)});function kf(t,e){return new An({values:t,typeName:pe.ZodEnum,...xe(e)})}class An extends Re{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return se(r,{expected:Qe.joinValues(n),received:r.parsedType,code:B.invalid_type}),be}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return se(r,{received:r.data,code:B.invalid_enum_value,options:n}),be}return sr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return An.create(e)}exclude(e){return An.create(this.options.filter(r=>!e.includes(r)))}}An.create=kf;class Ci extends Re{_parse(e){const r=Qe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==te.string&&n.parsedType!==te.number){const s=Qe.objectValues(r);return se(n,{expected:Qe.joinValues(s),received:n.parsedType,code:B.invalid_type}),be}if(r.indexOf(e.data)===-1){const s=Qe.objectValues(r);return se(n,{received:n.data,code:B.invalid_enum_value,options:s}),be}return sr(e.data)}get enum(){return this._def.values}}Ci.create=(t,e)=>new Ci({values:t,typeName:pe.ZodNativeEnum,...xe(e)});class js extends Re{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.promise&&r.common.async===!1)return se(r,{code:B.invalid_type,expected:te.promise,received:r.parsedType}),be;const n=r.parsedType===te.promise?r.data:Promise.resolve(r.data);return sr(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}js.create=(t,e)=>new js({type:t,typeName:pe.ZodPromise,...xe(e)});class Lr extends Re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){const a=s.transform(n.data);return n.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}const i={addIssue:a=>{se(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="refinement"){const a=o=>{const c=s.refinement(o,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?be:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?be:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(s.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Qo(a))return a;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Qo(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:r.value,value:o})):a);Qe.assertNever(s)}}Lr.create=(t,e,r)=>new Lr({schema:t,typeName:pe.ZodEffects,effect:e,...xe(r)});Lr.createWithPreprocess=(t,e,r)=>new Lr({schema:e,effect:{type:"preprocess",transform:t},typeName:pe.ZodEffects,...xe(r)});class un extends Re{_parse(e){return this._getType(e)===te.undefined?sr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}un.create=(t,e)=>new un({innerType:t,typeName:pe.ZodOptional,...xe(e)});class rs extends Re{_parse(e){return this._getType(e)===te.null?sr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rs.create=(t,e)=>new rs({innerType:t,typeName:pe.ZodNullable,...xe(e)});class Ni extends Re{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===te.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Ni.create=(t,e)=>new Ni({innerType:t,typeName:pe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xe(e)});class ra extends Re{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Jo(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new kr(n.common.issues)}})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new kr(n.common.issues)}})}}removeCatch(){return this._def.innerType}}ra.create=(t,e)=>new ra({innerType:t,typeName:pe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xe(e)});class na extends Re{_parse(e){if(this._getType(e)!==te.nan){const r=this._getOrReturnCtx(e);return se(r,{code:B.invalid_type,expected:te.nan,received:r.parsedType}),be}return{status:"valid",value:e.data}}}na.create=t=>new na({typeName:pe.ZodNaN,...xe(t)});const IS=Symbol("zod_brand");class Rf extends Re{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class uo extends Re{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?be:s.status==="dirty"?(r.dirty(),Pf(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?be:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new uo({in:e,out:r,typeName:pe.ZodPipeline})}}const Af=(t,e={},r)=>t?As.create().superRefine((n,s)=>{var i,a;if(!t(n)){const o=typeof e=="function"?e(n):e,c=(a=(i=o.fatal)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:!0,u=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...u,fatal:c})}}):As.create(),OS={object:ft.lazycreate};var pe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(pe||(pe={}));const TS=(t,e={message:`Input not instance of ${t.name}`})=>Af(r=>r instanceof t,e),jf=Nr.create,Lf=kn.create,CS=na.create,NS=Rn.create,Uf=bi.create,PS=es.create,kS=Xo.create,RS=wi.create,AS=Ei.create,jS=As.create,LS=Qn.create,US=fn.create,MS=ea.create,DS=Rr.create,zS=ft.create,$S=ft.strictCreate,VS=Si.create,qS=ja.create,ZS=xi.create,FS=Yr.create,KS=Ii.create,BS=ta.create,HS=ts.create,WS=Is.create,GS=Oi.create,YS=Ti.create,QS=An.create,JS=Ci.create,XS=js.create,Dd=Lr.create,e5=un.create,t5=rs.create,r5=Lr.createWithPreprocess,n5=uo.create,s5=()=>jf().optional(),i5=()=>Lf().optional(),o5=()=>Uf().optional(),a5={string:t=>Nr.create({...t,coerce:!0}),number:t=>kn.create({...t,coerce:!0}),boolean:t=>bi.create({...t,coerce:!0}),bigint:t=>Rn.create({...t,coerce:!0}),date:t=>es.create({...t,coerce:!0})},c5=be;var Dr=Object.freeze({__proto__:null,defaultErrorMap:_i,setErrorMap:hS,getErrorMap:Go,makeIssue:Yo,EMPTY_PATH:fS,addIssueToContext:se,ParseStatus:Qt,INVALID:be,DIRTY:Pf,OK:sr,isAborted:Nc,isDirty:Pc,isValid:Qo,isAsync:Jo,get util(){return Qe},get objectUtil(){return Cc},ZodParsedType:te,getParsedType:xn,ZodType:Re,ZodString:Nr,ZodNumber:kn,ZodBigInt:Rn,ZodBoolean:bi,ZodDate:es,ZodSymbol:Xo,ZodUndefined:wi,ZodNull:Ei,ZodAny:As,ZodUnknown:Qn,ZodNever:fn,ZodVoid:ea,ZodArray:Rr,ZodObject:ft,ZodUnion:Si,ZodDiscriminatedUnion:ja,ZodIntersection:xi,ZodTuple:Yr,ZodRecord:Ii,ZodMap:ta,ZodSet:ts,ZodFunction:Is,ZodLazy:Oi,ZodLiteral:Ti,ZodEnum:An,ZodNativeEnum:Ci,ZodPromise:js,ZodEffects:Lr,ZodTransformer:Lr,ZodOptional:un,ZodNullable:rs,ZodDefault:Ni,ZodCatch:ra,ZodNaN:na,BRAND:IS,ZodBranded:Rf,ZodPipeline:uo,custom:Af,Schema:Re,ZodSchema:Re,late:OS,get ZodFirstPartyTypeKind(){return pe},coerce:a5,any:jS,array:DS,bigint:NS,boolean:Uf,date:PS,discriminatedUnion:qS,effect:Dd,enum:QS,function:WS,instanceof:TS,intersection:ZS,lazy:GS,literal:YS,map:BS,nan:CS,nativeEnum:JS,never:US,null:AS,nullable:t5,number:Lf,object:zS,oboolean:o5,onumber:i5,optional:e5,ostring:s5,pipeline:n5,preprocess:r5,promise:XS,record:KS,set:HS,strictObject:$S,string:jf,symbol:kS,transformer:Dd,tuple:FS,undefined:RS,union:VS,unknown:LS,void:MS,NEVER:c5,ZodIssueCode:B,quotelessJson:dS,ZodError:kr});const Pu=/^aleo1[a-z0-9]{58}$/i,Mf=/^AViewKey1[a-z0-9]{44}$/i,Df=/^APrivateKey1[a-z0-9]{47}$/i,zf=/^at1[a-z0-9]{58}$/i,$f=/^\d+field$/,Vf=/^\d+u32$/,qf=/^\d+u64$/,u5=Dr.string().regex(Pu),l5=Dr.string().regex(Mf),d5=Dr.string().regex(Df),h5=Dr.string().regex(zf),f5=Dr.string().regex($f),p5=Dr.string().regex(Vf),g5=Dr.string().regex(qf);var zd;(function(t){t.Record="record",t.OutputRecord="outputRecord",t.Public="public",t.Private="private",t.Constant="constant",t.Future="future",t.ExternalRecord="external_record"})(zd||(zd={}));exports.Wn=void 0;(function(t){t.Deploy="Deploy",t.Execute="Execute",t.Send="Send",t.Receive="Receive",t.Join="Join",t.Split="Split",t.Shield="Shield",t.Unshield="Unshield"})(exports.Wn||(exports.Wn={}));exports.Zn=void 0;(function(t){t.Creating="Creating",t.Pending="Pending",t.Settled="Settled",t.Failed="Failed"})(exports.Zn||(exports.Zn={}));exports.Gn=void 0;(function(t){t.Private="Private",t.Public="Public"})(exports.Gn||(exports.Gn={}));exports.Yn=void 0;(function(t){t.AleoTestnet="AleoTestnet",t.AleoMainnet="AleoMainnet"})(exports.Yn||(exports.Yn={}));exports.Ec=void 0;(function(t){t[t.ALEO=0]="ALEO"})(exports.Ec||(exports.Ec={}));const y5=Dr.nativeEnum(exports.Wn),m5=Dr.nativeEnum(exports.Zn),v5=Dr.nativeEnum(exports.Yn),_5=Dr.nativeEnum(exports.Gn),b5=async({message:t,address:e})=>{const r=await ar(),n=await(r==null?void 0:r.getSession());if(!n||!r)return{error:"no session or connection"};try{return await r.request({topic:n.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:Pu.test(e??"")?e:void 0}}})}catch(s){const i=s.message;return console.error("signature error",i),{error:i}}},w5=20;var Rc={exports:{}},Xa,$d;function E5(){if($d)return Xa;$d=1;var t=1e3,e=t*60,r=e*60,n=r*24,s=n*7,i=n*365.25;Xa=function(d,f){f=f||{};var p=typeof d;if(p==="string"&&d.length>0)return a(d);if(p==="number"&&isFinite(d))return f.long?c(d):o(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function a(d){if(d=String(d),!(d.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(f){var p=parseFloat(f[1]),m=(f[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return p*i;case"weeks":case"week":case"w":return p*s;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function o(d){var f=Math.abs(d);return f>=n?Math.round(d/n)+"d":f>=r?Math.round(d/r)+"h":f>=e?Math.round(d/e)+"m":f>=t?Math.round(d/t)+"s":d+"ms"}function c(d){var f=Math.abs(d);return f>=n?u(d,f,n,"day"):f>=r?u(d,f,r,"hour"):f>=e?u(d,f,e,"minute"):f>=t?u(d,f,t,"second"):d+" ms"}function u(d,f,p,m){var b=f>=p*1.5;return Math.round(d/p)+" "+m+(b?"s":"")}return Xa}function S5(t){r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=s,r.enabled=a,r.humanize=E5(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(d){let f,p=null,m,b;function E(...T){if(!E.enabled)return;const U=E,v=Number(new Date),O=v-(f||v);U.diff=O,U.prev=f,U.curr=v,f=v,T[0]=r.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let w=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(x,y)=>{if(x==="%%")return"%";w++;const l=r.formatters[y];if(typeof l=="function"){const g=T[w];x=l.call(U,g),T.splice(w,1),w--}return x}),r.formatArgs.call(U,T),(U.log||r.log).apply(U,T)}return E.namespace=d,E.useColors=r.useColors(),E.color=r.selectColor(d),E.extend=n,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==r.namespaces&&(m=r.namespaces,b=r.enabled(d)),b),set:T=>{p=T}}),typeof r.init=="function"&&r.init(E),E}function n(d,f){const p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function s(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const p=(typeof d=="string"?d:"").split(/[\s,]+/),m=p.length;for(f=0;f<m;f++)p[f]&&(d=p[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function i(){const d=[...r.names.map(o),...r.skips.map(o).map(f=>"-"+f)].join(",");return r.enable(""),d}function a(d){if(d[d.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(d))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(d))return!0;return!1}function o(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var x5=S5;(function(t,e){e.formatArgs=n,e.save=s,e.load=i,e.useColors=r,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let d=0,f=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(d++,p==="%c"&&(f=d))}),c.splice(f,0,u)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function i(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=x5(e);const{formatters:o}=t.exports;o.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Rc,Rc.exports);var I5=Rc.exports;const O5=iu(I5),lo=O5("wallet:sdk");lo.enabled=!0;function T5(){const e=!!mr(),{data:r,error:n,loading:s,setData:i,setError:a,setLoading:o}=nu(),[c]=hn(d=>[d.setAccount]);async function u(){try{o(!0),a(void 0);const f=await(await ar()).connect({requiredNamespaces:{aleo:{methods:Ra,chains:ao,events:Aa}}});i(f);const p=f.namespaces.aleo.accounts[0].split(":");return c({network:p[0],chainId:p[1],address:p[2],shortenedAddress:$o(p[2])}),co.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),f}catch(d){throw a(d),d}finally{o(!1)}}return{data:r,error:n,loading:s,isConnected:e,connect:u}}const C5=()=>{const t=mr(),{request:e,data:r,error:n,loading:s}=Qi({topic:(t==null?void 0:t.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"createSharedState",params:{}}}),i=n?n.message:r&&r.error,a=r;return{createSharedState:()=>{t&&!s&&e()},data:a==null?void 0:a.data,loading:s,error:i}},N5=t=>{lo("useDecrypt",t);const e=mr(),{request:r,data:n,error:s,loading:i}=Qi({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}}),a=s?s.message:n&&n.error,o=n;return{decrypt:()=>{t&&e&&!i&&r()},plaintexts:o==null?void 0:o.plaintexts,loading:i,error:a}};function P5(){const t=mr(),[e]=hn(o=>[o.onDisconnect]),{error:r,loading:n,setError:s,setLoading:i}=nu();async function a(){if(!t||n){t||e();return}try{i(!0),s(void 0);try{await(await ar()).disconnect({topic:t.topic,reason:lg.getSdkError("USER_DISCONNECTED")}),co.emit("session_change")}catch(o){console.warn(o)}hn.getState().onDisconnect()}catch(o){throw s(o),o}finally{i(!1)}}return{error:r,loading:n,disconnect:a}}const k5=({id:t,address:e,multisig:r=!1})=>{const n=mr(),[s]=hn(E=>[E.account]),i=t!==void 0&&t!==""&&!!n&&!!s&&(r?!!e:!0),{refetch:a,data:o,error:c,isLoading:u}=Yi({queryKey:["useEvent",s==null?void 0:s.address,e,r,t,n==null?void 0:n.topic],enabled:i,wcParams:{topic:n==null?void 0:n.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvent",params:{id:t??"",address:e}}}});$s(({params:E,topic:T})=>{const U=E.event.name,v=E.event.address??E.event.data.address;(t&&U==="selectedAccountSynced"&&!r||U==="sharedAccountSynced"&&r&&v===e)&&a()});const d=!!n&&!!s&&!!t&&(r?!!e:!0);Ut.useEffect(()=>{d&&!u&&a()},[d]);const f=()=>{d&&!u&&a()},p=c?c.message:o&&o.error,m=o,b=m==null?void 0:m.event;return{fetchEvent:f,event:b,error:p,loading:u}},R5=({filter:t,page:e})=>{const r=mr(),[n]=hn(b=>[b.account]);(t==null?void 0:t.programId)===""&&(t.programId=void 0);const{refetch:s,data:i,error:a,isLoading:o}=Yi({queryKey:["useEvents",n==null?void 0:n.address,t,e,r==null?void 0:r.topic],enabled:!!r&&!!n,wcParams:{topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:e}}}});$s(({id:b,params:E,topic:T})=>{E.event.name==="selectedAccountSynced"&&s()});const c=!!r&&!!n;Ut.useEffect(()=>{c&&!o&&s()},[c]);const u=()=>{c&&!o&&s()},d=a?a.message:i&&i.error,f=i,p=f==null?void 0:f.events,m=(f==null?void 0:f.pageCount)??0;return{fetchPage:u,events:p,error:d,loading:o,page:e,pageCount:m}},A5=t=>{const e=mr(),{request:r,data:n,error:s,loading:i}=Qi({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}}),a=s?s.message:n&&n.error,o=n;return{importSharedState:()=>{e&&!i&&r()},data:o==null?void 0:o.data,loading:i,error:a}},j5=t=>{try{return JSON.stringify(t,null,2).replaceAll('"',"")??""}catch{return""}},L5=({address:t,multisig:e=!1,filter:r,page:n})=>{const s=mr(),[i]=hn(T=>[T.account]),{refetch:a,data:o,error:c,isLoading:u}=Yi({queryKey:["useRecords",i==null?void 0:i.address,t,e,r,n,s==null?void 0:s.topic],enabled:(e?!!t:!0)&&!!s&&!!i,wcParams:{topic:s==null?void 0:s.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:r,page:n}}}}),d=!!s&&!!i&&(e?!!t:!0);$s(({params:T})=>{const U=T.event.name,v=T.event.address??T.event.data.address;(U==="selectedAccountSynced"&&!e||U==="sharedAccountSynced"&&e&&v===t)&&a()});const f=()=>{d&&!u&&(lo("useRecords refetching...",[t,e,r,n]),a())},p=c?c.message:o&&o.error,m=o,b=m==null?void 0:m.records,E=(m==null?void 0:m.pageCount)??0;return{fetchPage:f,records:b,error:p,loading:u,page:n,pageCount:E}},U5=t=>{const e=mr(),r=t==null?void 0:t.inputs.map(d=>typeof d=="string"?d:d.plaintext),{request:n,data:s,error:i,loading:a}=Qi({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:r}}}),o=i?i.message:s&&s.error,c=s;return{createEvent:()=>{t&&e&&!a&&(lo("useCreateEvent requesting...",t),n())},eventId:c==null?void 0:c.eventId,loading:a,error:o}};var Je;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Je||(Je={}));var Ac;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Ac||(Ac={}));const re=Je.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),In=t=>{switch(typeof t){case"undefined":return re.undefined;case"string":return re.string;case"number":return isNaN(t)?re.nan:re.number;case"boolean":return re.boolean;case"function":return re.function;case"bigint":return re.bigint;case"symbol":return re.symbol;case"object":return Array.isArray(t)?re.array:t===null?re.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?re.promise:typeof Map<"u"&&t instanceof Map?re.map:typeof Set<"u"&&t instanceof Set?re.set:typeof Date<"u"&&t instanceof Date?re.date:re.object;default:return re.unknown}},H=Je.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),M5=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ar extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(r(a))):o[u]=o[u]||{_errors:[]},o=o[u],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Je.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Ar.create=t=>new Ar(t);const Pi=(t,e)=>{let r;switch(t.code){case H.invalid_type:t.received===re.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case H.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Je.jsonStringifyReplacer)}`;break;case H.unrecognized_keys:r=`Unrecognized key(s) in object: ${Je.joinValues(t.keys,", ")}`;break;case H.invalid_union:r="Invalid input";break;case H.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Je.joinValues(t.options)}`;break;case H.invalid_enum_value:r=`Invalid enum value. Expected ${Je.joinValues(t.options)}, received '${t.received}'`;break;case H.invalid_arguments:r="Invalid function arguments";break;case H.invalid_return_type:r="Invalid function return type";break;case H.invalid_date:r="Invalid date";break;case H.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Je.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case H.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case H.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case H.custom:r="Invalid input";break;case H.invalid_intersection_types:r="Intersection results could not be merged";break;case H.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case H.not_finite:r="Number must be finite";break;default:r=e.defaultError,Je.assertNever(t)}return{message:r}};let Zf=Pi;function D5(t){Zf=t}function sa(){return Zf}const ia=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],a={...s,path:i};let o="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)o=u(a,{data:e,defaultError:o}).message;return{...s,path:i,message:s.message||o}},z5=[];function ie(t,e){const r=ia({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,sa(),Pi].filter(n=>!!n)});t.common.issues.push(r)}class Jt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return ve;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return Jt.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return ve;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}}const ve=Object.freeze({status:"aborted"}),Ff=t=>({status:"dirty",value:t}),ir=t=>({status:"valid",value:t}),jc=t=>t.status==="aborted",Lc=t=>t.status==="dirty",oa=t=>t.status==="valid",aa=t=>typeof Promise<"u"&&t instanceof Promise;var ue;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ue||(ue={}));class Qr{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Vd=(t,e)=>{if(oa(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ar(t.common.issues);return this._error=r,this._error}}};function Ie(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:n??o.defaultError}:{message:r??o.defaultError},description:s}}class Ae{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return In(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:In(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Jt,ctx:{common:e.parent.common,data:e.data,parsedType:In(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(aa(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:In(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Vd(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:In(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(aa(s)?s:Promise.resolve(s));return Vd(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const a=e(s),o=()=>i.addIssue({code:H.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Ur({schema:this,typeName:ge.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ln.create(this,this._def)}nullable(){return is.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return jr.create(this,this._def)}promise(){return Us.create(this,this._def)}or(e){return ji.create([this,e],this._def)}and(e){return Li.create(this,e,this._def)}transform(e){return new Ur({...Ie(this._def),schema:this,typeName:ge.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new $i({...Ie(this._def),innerType:this,defaultValue:r,typeName:ge.ZodDefault})}brand(){return new Bf({typeName:ge.ZodBranded,type:this,...Ie(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new da({...Ie(this._def),innerType:this,catchValue:r,typeName:ge.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ho.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $5=/^c[^\s-]{8,}$/i,V5=/^[a-z][a-z0-9]*$/,q5=/[0-9A-HJKMNP-TV-Z]{26}/,Z5=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,F5=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,K5=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u"),B5=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,H5=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,W5=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function G5(t,e){return!!((e==="v4"||!e)&&B5.test(t)||(e==="v6"||!e)&&H5.test(t))}class Pr extends Ae{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(s=>e.test(s),{validation:r,code:H.invalid_string,...ue.errToObj(n)}),this.nonempty=e=>this.min(1,ue.errToObj(e)),this.trim=()=>new Pr({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Pr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Pr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==re.string){const i=this._getOrReturnCtx(e);return ie(i,{code:H.invalid_type,expected:re.string,received:i.parsedType}),ve}const n=new Jt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?ie(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&ie(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")F5.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"email",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")K5.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"emoji",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Z5.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"uuid",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")$5.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"cuid",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")V5.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"cuid2",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")q5.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"ulid",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ie(s,{validation:"url",code:H.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"regex",code:H.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ie(s,{code:H.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ie(s,{code:H.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ie(s,{code:H.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?W5(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{code:H.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?G5(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"ip",code:H.invalid_string,message:i.message}),n.dirty()):Je.assertNever(i);return{status:n.value,value:e.data}}_addCheck(e){return new Pr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ue.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ue.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ue.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ue.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ue.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ue.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ue.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ue.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...ue.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ue.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...ue.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ue.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ue.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ue.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ue.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ue.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Pr.create=t=>{var e;return new Pr({checks:[],typeName:ge.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ie(t)})};function Y5(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class jn extends Ae{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==re.number){const i=this._getOrReturnCtx(e);return ie(i,{code:H.invalid_type,expected:re.number,received:i.parsedType}),ve}let n;const s=new Jt;for(const i of this._def.checks)i.kind==="int"?Je.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ie(n,{code:H.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:H.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:H.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Y5(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),ie(n,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ie(n,{code:H.not_finite,message:i.message}),s.dirty()):Je.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ue.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ue.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ue.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ue.toString(r))}setLimit(e,r,n,s){return new jn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ue.toString(s)}]})}_addCheck(e){return new jn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ue.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ue.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ue.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ue.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ue.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ue.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Je.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}jn.create=t=>new jn({checks:[],typeName:ge.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ie(t)});class Ln extends Ae{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==re.bigint){const i=this._getOrReturnCtx(e);return ie(i,{code:H.invalid_type,expected:re.bigint,received:i.parsedType}),ve}let n;const s=new Jt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:H.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:H.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Je.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ue.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ue.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ue.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ue.toString(r))}setLimit(e,r,n,s){return new Ln({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ue.toString(s)}]})}_addCheck(e){return new Ln({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ue.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ue.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ln.create=t=>{var e;return new Ln({checks:[],typeName:ge.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ie(t)})};class ki extends Ae{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==re.boolean){const n=this._getOrReturnCtx(e);return ie(n,{code:H.invalid_type,expected:re.boolean,received:n.parsedType}),ve}return ir(e.data)}}ki.create=t=>new ki({typeName:ge.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ie(t)});class ns extends Ae{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==re.date){const i=this._getOrReturnCtx(e);return ie(i,{code:H.invalid_type,expected:re.date,received:i.parsedType}),ve}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ie(i,{code:H.invalid_date}),ve}const n=new Jt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:H.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:H.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Je.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ns({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ue.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ue.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}ns.create=t=>new ns({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ge.ZodDate,...Ie(t)});class ca extends Ae{_parse(e){if(this._getType(e)!==re.symbol){const n=this._getOrReturnCtx(e);return ie(n,{code:H.invalid_type,expected:re.symbol,received:n.parsedType}),ve}return ir(e.data)}}ca.create=t=>new ca({typeName:ge.ZodSymbol,...Ie(t)});class Ri extends Ae{_parse(e){if(this._getType(e)!==re.undefined){const n=this._getOrReturnCtx(e);return ie(n,{code:H.invalid_type,expected:re.undefined,received:n.parsedType}),ve}return ir(e.data)}}Ri.create=t=>new Ri({typeName:ge.ZodUndefined,...Ie(t)});class Ai extends Ae{_parse(e){if(this._getType(e)!==re.null){const n=this._getOrReturnCtx(e);return ie(n,{code:H.invalid_type,expected:re.null,received:n.parsedType}),ve}return ir(e.data)}}Ai.create=t=>new Ai({typeName:ge.ZodNull,...Ie(t)});class Ls extends Ae{constructor(){super(...arguments),this._any=!0}_parse(e){return ir(e.data)}}Ls.create=t=>new Ls({typeName:ge.ZodAny,...Ie(t)});class Jn extends Ae{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ir(e.data)}}Jn.create=t=>new Jn({typeName:ge.ZodUnknown,...Ie(t)});class pn extends Ae{_parse(e){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:re.never,received:r.parsedType}),ve}}pn.create=t=>new pn({typeName:ge.ZodNever,...Ie(t)});class ua extends Ae{_parse(e){if(this._getType(e)!==re.undefined){const n=this._getOrReturnCtx(e);return ie(n,{code:H.invalid_type,expected:re.void,received:n.parsedType}),ve}return ir(e.data)}}ua.create=t=>new ua({typeName:ge.ZodVoid,...Ie(t)});class jr extends Ae{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==re.array)return ie(r,{code:H.invalid_type,expected:re.array,received:r.parsedType}),ve;if(s.exactLength!==null){const a=r.data.length>s.exactLength.value,o=r.data.length<s.exactLength.value;(a||o)&&(ie(r,{code:a?H.too_big:H.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(ie(r,{code:H.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(ie(r,{code:H.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>s.type._parseAsync(new Qr(r,a,r.path,o)))).then(a=>Jt.mergeArray(n,a));const i=[...r.data].map((a,o)=>s.type._parseSync(new Qr(r,a,r.path,o)));return Jt.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new jr({...this._def,minLength:{value:e,message:ue.toString(r)}})}max(e,r){return new jr({...this._def,maxLength:{value:e,message:ue.toString(r)}})}length(e,r){return new jr({...this._def,exactLength:{value:e,message:ue.toString(r)}})}nonempty(e){return this.min(1,e)}}jr.create=(t,e)=>new jr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ge.ZodArray,...Ie(e)});function bs(t){if(t instanceof pt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=ln.create(bs(n))}return new pt({...t._def,shape:()=>e})}else return t instanceof jr?new jr({...t._def,type:bs(t.element)}):t instanceof ln?ln.create(bs(t.unwrap())):t instanceof is?is.create(bs(t.unwrap())):t instanceof Jr?Jr.create(t.items.map(e=>bs(e))):t}class pt extends Ae{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Je.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==re.object){const u=this._getOrReturnCtx(e);return ie(u,{code:H.invalid_type,expected:re.object,received:u.parsedType}),ve}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof pn&&this._def.unknownKeys==="strip"))for(const u in s.data)a.includes(u)||o.push(u);const c=[];for(const u of a){const d=i[u],f=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Qr(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof pn){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")o.length>0&&(ie(s,{code:H.unrecognized_keys,keys:o}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const f=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Qr(s,f,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key;u.push({key:f,value:await d.value,alwaysSet:d.alwaysSet})}return u}).then(u=>Jt.mergeObjectSync(n,u)):Jt.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return ue.errToObj,new pt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,a,o;const c=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=ue.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new pt({...this._def,unknownKeys:"strip"})}passthrough(){return new pt({...this._def,unknownKeys:"passthrough"})}extend(e){return new pt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new pt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ge.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new pt({...this._def,catchall:e})}pick(e){const r={};return Je.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new pt({...this._def,shape:()=>r})}omit(e){const r={};return Je.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new pt({...this._def,shape:()=>r})}deepPartial(){return bs(this)}partial(e){const r={};return Je.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new pt({...this._def,shape:()=>r})}required(e){const r={};return Je.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof ln;)i=i._def.innerType;r[n]=i}}),new pt({...this._def,shape:()=>r})}keyof(){return Kf(Je.objectKeys(this.shape))}}pt.create=(t,e)=>new pt({shape:()=>t,unknownKeys:"strip",catchall:pn.create(),typeName:ge.ZodObject,...Ie(e)});pt.strictCreate=(t,e)=>new pt({shape:()=>t,unknownKeys:"strict",catchall:pn.create(),typeName:ge.ZodObject,...Ie(e)});pt.lazycreate=(t,e)=>new pt({shape:t,unknownKeys:"strip",catchall:pn.create(),typeName:ge.ZodObject,...Ie(e)});class ji extends Ae{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new Ar(o.ctx.common.issues));return ie(r,{code:H.invalid_union,unionErrors:a}),ve}if(r.common.async)return Promise.all(n.map(async i=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(c=>new Ar(c));return ie(r,{code:H.invalid_union,unionErrors:o}),ve}}get options(){return this._def.options}}ji.create=(t,e)=>new ji({options:t,typeName:ge.ZodUnion,...Ie(e)});const Do=t=>t instanceof Mi?Do(t.schema):t instanceof Ur?Do(t.innerType()):t instanceof Di?[t.value]:t instanceof Un?t.options:t instanceof zi?Object.keys(t.enum):t instanceof $i?Do(t._def.innerType):t instanceof Ri?[void 0]:t instanceof Ai?[null]:null;class La extends Ae{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==re.object)return ie(r,{code:H.invalid_type,expected:re.object,received:r.parsedType}),ve;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(ie(r,{code:H.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ve)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const a=Do(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,i)}}return new La({typeName:ge.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Ie(n)})}}function Uc(t,e){const r=In(t),n=In(e);if(t===e)return{valid:!0,data:t};if(r===re.object&&n===re.object){const s=Je.objectKeys(e),i=Je.objectKeys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(const o of i){const c=Uc(t[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(r===re.array&&n===re.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],o=e[i],c=Uc(a,o);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===re.date&&n===re.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Li extends Ae{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,a)=>{if(jc(i)||jc(a))return ve;const o=Uc(i.value,a.value);return o.valid?((Lc(i)||Lc(a))&&r.dirty(),{status:r.value,value:o.data}):(ie(n,{code:H.invalid_intersection_types}),ve)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Li.create=(t,e,r)=>new Li({left:t,right:e,typeName:ge.ZodIntersection,...Ie(r)});class Jr extends Ae{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==re.array)return ie(n,{code:H.invalid_type,expected:re.array,received:n.parsedType}),ve;if(n.data.length<this._def.items.length)return ie(n,{code:H.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ve;!this._def.rest&&n.data.length>this._def.items.length&&(ie(n,{code:H.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Qr(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>Jt.mergeArray(r,a)):Jt.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new Jr({...this._def,rest:e})}}Jr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jr({items:t,typeName:ge.ZodTuple,rest:null,...Ie(e)})};class Ui extends Ae{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==re.object)return ie(n,{code:H.invalid_type,expected:re.object,received:n.parsedType}),ve;const s=[],i=this._def.keyType,a=this._def.valueType;for(const o in n.data)s.push({key:i._parse(new Qr(n,o,n.path,o)),value:a._parse(new Qr(n,n.data[o],n.path,o))});return n.common.async?Jt.mergeObjectAsync(r,s):Jt.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ae?new Ui({keyType:e,valueType:r,typeName:ge.ZodRecord,...Ie(n)}):new Ui({keyType:Pr.create(),valueType:e,typeName:ge.ZodRecord,...Ie(r)})}}class la extends Ae{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==re.map)return ie(n,{code:H.invalid_type,expected:re.map,received:n.parsedType}),ve;const s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([o,c],u)=>({key:s._parse(new Qr(n,o,n.path,[u,"key"])),value:i._parse(new Qr(n,c,n.path,[u,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return ve;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(u.value,d.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const c of a){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return ve;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(u.value,d.value)}return{status:r.value,value:o}}}}la.create=(t,e,r)=>new la({valueType:e,keyType:t,typeName:ge.ZodMap,...Ie(r)});class ss extends Ae{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==re.set)return ie(n,{code:H.invalid_type,expected:re.set,received:n.parsedType}),ve;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(ie(n,{code:H.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(ie(n,{code:H.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function a(c){const u=new Set;for(const d of c){if(d.status==="aborted")return ve;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const o=[...n.data.values()].map((c,u)=>i._parse(new Qr(n,c,n.path,u)));return n.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,r){return new ss({...this._def,minSize:{value:e,message:ue.toString(r)}})}max(e,r){return new ss({...this._def,maxSize:{value:e,message:ue.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}ss.create=(t,e)=>new ss({valueType:t,minSize:null,maxSize:null,typeName:ge.ZodSet,...Ie(e)});class Os extends Ae{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==re.function)return ie(r,{code:H.invalid_type,expected:re.function,received:r.parsedType}),ve;function n(o,c){return ia({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,sa(),Pi].filter(u=>!!u),issueData:{code:H.invalid_arguments,argumentsError:c}})}function s(o,c){return ia({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,sa(),Pi].filter(u=>!!u),issueData:{code:H.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},a=r.data;return this._def.returns instanceof Us?ir(async(...o)=>{const c=new Ar([]),u=await this._def.args.parseAsync(o,i).catch(p=>{throw c.addIssue(n(o,p)),c}),d=await a(...u);return await this._def.returns._def.type.parseAsync(d,i).catch(p=>{throw c.addIssue(s(d,p)),c})}):ir((...o)=>{const c=this._def.args.safeParse(o,i);if(!c.success)throw new Ar([n(o,c.error)]);const u=a(...c.data),d=this._def.returns.safeParse(u,i);if(!d.success)throw new Ar([s(u,d.error)]);return d.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Os({...this._def,args:Jr.create(e).rest(Jn.create())})}returns(e){return new Os({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new Os({args:e||Jr.create([]).rest(Jn.create()),returns:r||Jn.create(),typeName:ge.ZodFunction,...Ie(n)})}}class Mi extends Ae{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Mi.create=(t,e)=>new Mi({getter:t,typeName:ge.ZodLazy,...Ie(e)});class Di extends Ae{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return ie(r,{received:r.data,code:H.invalid_literal,expected:this._def.value}),ve}return{status:"valid",value:e.data}}get value(){return this._def.value}}Di.create=(t,e)=>new Di({value:t,typeName:ge.ZodLiteral,...Ie(e)});function Kf(t,e){return new Un({values:t,typeName:ge.ZodEnum,...Ie(e)})}class Un extends Ae{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return ie(r,{expected:Je.joinValues(n),received:r.parsedType,code:H.invalid_type}),ve}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return ie(r,{received:r.data,code:H.invalid_enum_value,options:n}),ve}return ir(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return Un.create(e)}exclude(e){return Un.create(this.options.filter(r=>!e.includes(r)))}}Un.create=Kf;class zi extends Ae{_parse(e){const r=Je.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==re.string&&n.parsedType!==re.number){const s=Je.objectValues(r);return ie(n,{expected:Je.joinValues(s),received:n.parsedType,code:H.invalid_type}),ve}if(r.indexOf(e.data)===-1){const s=Je.objectValues(r);return ie(n,{received:n.data,code:H.invalid_enum_value,options:s}),ve}return ir(e.data)}get enum(){return this._def.values}}zi.create=(t,e)=>new zi({values:t,typeName:ge.ZodNativeEnum,...Ie(e)});class Us extends Ae{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==re.promise&&r.common.async===!1)return ie(r,{code:H.invalid_type,expected:re.promise,received:r.parsedType}),ve;const n=r.parsedType===re.promise?r.data:Promise.resolve(r.data);return ir(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Us.create=(t,e)=>new Us({type:t,typeName:ge.ZodPromise,...Ie(e)});class Ur extends Ae{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ge.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){const a=s.transform(n.data);return n.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}const i={addIssue:a=>{ie(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="refinement"){const a=o=>{const c=s.refinement(o,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ve:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?ve:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(s.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!oa(a))return a;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>oa(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:r.value,value:o})):a);Je.assertNever(s)}}Ur.create=(t,e,r)=>new Ur({schema:t,typeName:ge.ZodEffects,effect:e,...Ie(r)});Ur.createWithPreprocess=(t,e,r)=>new Ur({schema:e,effect:{type:"preprocess",transform:t},typeName:ge.ZodEffects,...Ie(r)});class ln extends Ae{_parse(e){return this._getType(e)===re.undefined?ir(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ln.create=(t,e)=>new ln({innerType:t,typeName:ge.ZodOptional,...Ie(e)});class is extends Ae{_parse(e){return this._getType(e)===re.null?ir(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}is.create=(t,e)=>new is({innerType:t,typeName:ge.ZodNullable,...Ie(e)});class $i extends Ae{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===re.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}$i.create=(t,e)=>new $i({innerType:t,typeName:ge.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ie(e)});class da extends Ae{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return aa(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ar(n.common.issues)}})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ar(n.common.issues)}})}}removeCatch(){return this._def.innerType}}da.create=(t,e)=>new da({innerType:t,typeName:ge.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ie(e)});class ha extends Ae{_parse(e){if(this._getType(e)!==re.nan){const n=this._getOrReturnCtx(e);return ie(n,{code:H.invalid_type,expected:re.nan,received:n.parsedType}),ve}return{status:"valid",value:e.data}}}ha.create=t=>new ha({typeName:ge.ZodNaN,...Ie(t)});const Q5=Symbol("zod_brand");class Bf extends Ae{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ho extends Ae{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ve:i.status==="dirty"?(r.dirty(),Ff(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?ve:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new ho({in:e,out:r,typeName:ge.ZodPipeline})}}const Hf=(t,e={},r)=>t?Ls.create().superRefine((n,s)=>{var i,a;if(!t(n)){const o=typeof e=="function"?e(n):e,c=(a=(i=o.fatal)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:!0,u=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...u,fatal:c})}}):Ls.create(),J5={object:pt.lazycreate};var ge;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(ge||(ge={}));const X5=(t,e={message:`Input not instance of ${t.name}`})=>Hf(r=>r instanceof t,e),Wf=Pr.create,Gf=jn.create,ex=ha.create,tx=Ln.create,Yf=ki.create,rx=ns.create,nx=ca.create,sx=Ri.create,ix=Ai.create,ox=Ls.create,ax=Jn.create,cx=pn.create,ux=ua.create,lx=jr.create,dx=pt.create,hx=pt.strictCreate,fx=ji.create,px=La.create,gx=Li.create,yx=Jr.create,mx=Ui.create,vx=la.create,_x=ss.create,bx=Os.create,wx=Mi.create,Ex=Di.create,Sx=Un.create,xx=zi.create,Ix=Us.create,qd=Ur.create,Ox=ln.create,Tx=is.create,Cx=Ur.createWithPreprocess,Nx=ho.create,Px=()=>Wf().optional(),kx=()=>Gf().optional(),Rx=()=>Yf().optional(),Ax={string:t=>Pr.create({...t,coerce:!0}),number:t=>jn.create({...t,coerce:!0}),boolean:t=>ki.create({...t,coerce:!0}),bigint:t=>Ln.create({...t,coerce:!0}),date:t=>ns.create({...t,coerce:!0})},jx=ve;var zr=Object.freeze({__proto__:null,defaultErrorMap:Pi,setErrorMap:D5,getErrorMap:sa,makeIssue:ia,EMPTY_PATH:z5,addIssueToContext:ie,ParseStatus:Jt,INVALID:ve,DIRTY:Ff,OK:ir,isAborted:jc,isDirty:Lc,isValid:oa,isAsync:aa,get util(){return Je},get objectUtil(){return Ac},ZodParsedType:re,getParsedType:In,ZodType:Ae,ZodString:Pr,ZodNumber:jn,ZodBigInt:Ln,ZodBoolean:ki,ZodDate:ns,ZodSymbol:ca,ZodUndefined:Ri,ZodNull:Ai,ZodAny:Ls,ZodUnknown:Jn,ZodNever:pn,ZodVoid:ua,ZodArray:jr,ZodObject:pt,ZodUnion:ji,ZodDiscriminatedUnion:La,ZodIntersection:Li,ZodTuple:Jr,ZodRecord:Ui,ZodMap:la,ZodSet:ss,ZodFunction:Os,ZodLazy:Mi,ZodLiteral:Di,ZodEnum:Un,ZodNativeEnum:zi,ZodPromise:Us,ZodEffects:Ur,ZodTransformer:Ur,ZodOptional:ln,ZodNullable:is,ZodDefault:$i,ZodCatch:da,ZodNaN:ha,BRAND:Q5,ZodBranded:Bf,ZodPipeline:ho,custom:Hf,Schema:Ae,ZodSchema:Ae,late:J5,get ZodFirstPartyTypeKind(){return ge},coerce:Ax,any:ox,array:lx,bigint:tx,boolean:Yf,date:rx,discriminatedUnion:px,effect:qd,enum:Sx,function:bx,instanceof:X5,intersection:gx,lazy:wx,literal:Ex,map:vx,nan:ex,nativeEnum:xx,never:cx,null:ix,nullable:Tx,number:Gf,object:dx,oboolean:Rx,onumber:kx,optional:Ox,ostring:Px,pipeline:Nx,preprocess:Cx,promise:Ix,record:mx,set:_x,strictObject:hx,string:Wf,symbol:nx,transformer:qd,tuple:yx,undefined:sx,union:fx,unknown:ax,void:ux,NEVER:jx,ZodIssueCode:H,quotelessJson:M5,ZodError:Ar});const Qf=/^aleo1[a-z0-9]{58}$/i,Lx=/^AViewKey1[a-z0-9]{44}$/i,Ux=/^APrivateKey1[a-z0-9]{47}$/i,Mx=/^at1[a-z0-9]{58}$/i,Dx=/^\d+field$/,zx=/^\d+u32$/,$x=/^\d+u64$/;zr.string().regex(Qf);zr.string().regex(Lx);zr.string().regex(Ux);zr.string().regex(Mx);zr.string().regex(Dx);zr.string().regex(zx);zr.string().regex($x);var Zd;(function(t){t.Record="record",t.OutputRecord="outputRecord",t.Public="public",t.Private="private",t.Constant="constant",t.Future="future",t.ExternalRecord="external_record"})(Zd||(Zd={}));var Mc;(function(t){t.Deploy="Deploy",t.Execute="Execute",t.Send="Send",t.Receive="Receive",t.Join="Join",t.Split="Split",t.Shield="Shield",t.Unshield="Unshield"})(Mc||(Mc={}));var Dc;(function(t){t.Creating="Creating",t.Pending="Pending",t.Settled="Settled",t.Failed="Failed"})(Dc||(Dc={}));var zc;(function(t){t.Private="Private",t.Public="Public"})(zc||(zc={}));var $c;(function(t){t.AleoTestnet="AleoTestnet",t.AleoMainnet="AleoMainnet"})($c||($c={}));var Fd;(function(t){t[t.ALEO=0]="ALEO"})(Fd||(Fd={}));zr.nativeEnum(Mc);zr.nativeEnum(Dc);zr.nativeEnum($c);zr.nativeEnum(zc);const Jf=hg("wallet:sdk");Jf.enabled=!0;const Vx=(t,e)=>{const r=mr(),{request:n,data:s,error:i,loading:a}=Qi({topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:Qf.test(e??"")?e:void 0}}}),o=i?i.message:s&&s.error;return{requestSignature:()=>{r&&!a&&(Jf("useRequestSignature requesting...",[t,e]),n())},response:s,loading:a,error:o}};var Vc={exports:{}},ni={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd;function qx(){if(Kd)return ni;Kd=1;var t=Ut,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(o,c,u){var d,f={},p=null,m=null;u!==void 0&&(p=""+u),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(m=c.ref);for(d in c)n.call(c,d)&&!i.hasOwnProperty(d)&&(f[d]=c[d]);if(o&&o.defaultProps)for(d in c=o.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:e,type:o,key:p,ref:m,props:f,_owner:s.current}}return ni.Fragment=r,ni.jsx=a,ni.jsxs=a,ni}var si={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bd;function Zx(){return Bd||(Bd=1,process.env.NODE_ENV!=="production"&&function(){var t=Ut,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),b=Symbol.iterator,E="@@iterator";function T(S){if(S===null||typeof S!="object")return null;var D=b&&S[b]||S[E];return typeof D=="function"?D:null}var U=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function v(S){{for(var D=arguments.length,Q=new Array(D>1?D-1:0),fe=1;fe<D;fe++)Q[fe-1]=arguments[fe];O("error",S,Q)}}function O(S,D,Q){{var fe=U.ReactDebugCurrentFrame,Be=fe.getStackAddendum();Be!==""&&(D+="%s",Q=Q.concat([Be]));var $e=Q.map(function(qe){return String(qe)});$e.unshift("Warning: "+D),Function.prototype.apply.call(console[S],console,$e)}}var w=!1,x=!1,y=!1,l=!1,g=!1,P;P=Symbol.for("react.module.reference");function k(S){return!!(typeof S=="string"||typeof S=="function"||S===n||S===i||g||S===s||S===u||S===d||l||S===m||w||x||y||typeof S=="object"&&S!==null&&(S.$$typeof===p||S.$$typeof===f||S.$$typeof===a||S.$$typeof===o||S.$$typeof===c||S.$$typeof===P||S.getModuleId!==void 0))}function M(S,D,Q){var fe=S.displayName;if(fe)return fe;var Be=D.displayName||D.name||"";return Be!==""?Q+"("+Be+")":Q}function G(S){return S.displayName||"Context"}function Y(S){if(S==null)return null;if(typeof S.tag=="number"&&v("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S;switch(S){case n:return"Fragment";case r:return"Portal";case i:return"Profiler";case s:return"StrictMode";case u:return"Suspense";case d:return"SuspenseList"}if(typeof S=="object")switch(S.$$typeof){case o:var D=S;return G(D)+".Consumer";case a:var Q=S;return G(Q._context)+".Provider";case c:return M(S,S.render,"ForwardRef");case f:var fe=S.displayName||null;return fe!==null?fe:Y(S.type)||"Memo";case p:{var Be=S,$e=Be._payload,qe=Be._init;try{return Y(qe($e))}catch{return null}}}return null}var C=Object.assign,A=0,X,Z,$,q,z,F,ye;function K(){}K.__reactDisabledLog=!0;function de(){{if(A===0){X=console.log,Z=console.info,$=console.warn,q=console.error,z=console.group,F=console.groupCollapsed,ye=console.groupEnd;var S={configurable:!0,enumerable:!0,value:K,writable:!0};Object.defineProperties(console,{info:S,log:S,warn:S,error:S,group:S,groupCollapsed:S,groupEnd:S})}A++}}function ne(){{if(A--,A===0){var S={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:C({},S,{value:X}),info:C({},S,{value:Z}),warn:C({},S,{value:$}),error:C({},S,{value:q}),group:C({},S,{value:z}),groupCollapsed:C({},S,{value:F}),groupEnd:C({},S,{value:ye})})}A<0&&v("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var le=U.ReactCurrentDispatcher,L;function j(S,D,Q){{if(L===void 0)try{throw Error()}catch(Be){var fe=Be.stack.trim().match(/\n( *(at )?)/);L=fe&&fe[1]||""}return`
`+L+S}}var N=!1,h;{var I=typeof WeakMap=="function"?WeakMap:Map;h=new I}function W(S,D){if(!S||N)return"";{var Q=h.get(S);if(Q!==void 0)return Q}var fe;N=!0;var Be=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var $e;$e=le.current,le.current=null,de();try{if(D){var qe=function(){throw Error()};if(Object.defineProperty(qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qe,[])}catch(Ir){fe=Ir}Reflect.construct(S,[],qe)}else{try{qe.call()}catch(Ir){fe=Ir}S.call(qe.prototype)}}else{try{throw Error()}catch(Ir){fe=Ir}S()}}catch(Ir){if(Ir&&fe&&typeof Ir.stack=="string"){for(var Me=Ir.stack.split(`
`),Dt=fe.stack.split(`
`),dt=Me.length-1,vt=Dt.length-1;dt>=1&&vt>=0&&Me[dt]!==Dt[vt];)vt--;for(;dt>=1&&vt>=0;dt--,vt--)if(Me[dt]!==Dt[vt]){if(dt!==1||vt!==1)do if(dt--,vt--,vt<0||Me[dt]!==Dt[vt]){var Ot=`
`+Me[dt].replace(" at new "," at ");return S.displayName&&Ot.includes("<anonymous>")&&(Ot=Ot.replace("<anonymous>",S.displayName)),typeof S=="function"&&h.set(S,Ot),Ot}while(dt>=1&&vt>=0);break}}}finally{N=!1,le.current=$e,ne(),Error.prepareStackTrace=Be}var mn=S?S.displayName||S.name:"",fo=mn?j(mn):"";return typeof S=="function"&&h.set(S,fo),fo}function ee(S,D,Q){return W(S,!1)}function je(S){var D=S.prototype;return!!(D&&D.isReactComponent)}function Le(S,D,Q){if(S==null)return"";if(typeof S=="function")return W(S,je(S));if(typeof S=="string")return j(S);switch(S){case u:return j("Suspense");case d:return j("SuspenseList")}if(typeof S=="object")switch(S.$$typeof){case c:return ee(S.render);case f:return Le(S.type,D,Q);case p:{var fe=S,Be=fe._payload,$e=fe._init;try{return Le($e(Be),D,Q)}catch{}}}return""}var Oe=Object.prototype.hasOwnProperty,Ze={},at=U.ReactDebugCurrentFrame;function tt(S){if(S){var D=S._owner,Q=Le(S.type,S._source,D?D.type:null);at.setExtraStackFrame(Q)}else at.setExtraStackFrame(null)}function Ve(S,D,Q,fe,Be){{var $e=Function.call.bind(Oe);for(var qe in S)if($e(S,qe)){var Me=void 0;try{if(typeof S[qe]!="function"){var Dt=Error((fe||"React class")+": "+Q+" type `"+qe+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof S[qe]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Dt.name="Invariant Violation",Dt}Me=S[qe](D,qe,fe,Q,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(dt){Me=dt}Me&&!(Me instanceof Error)&&(tt(Be),v("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",fe||"React class",Q,qe,typeof Me),tt(null)),Me instanceof Error&&!(Me.message in Ze)&&(Ze[Me.message]=!0,tt(Be),v("Failed %s type: %s",Q,Me.message),tt(null))}}}var De=Array.isArray;function Te(S){return De(S)}function Pe(S){{var D=typeof Symbol=="function"&&Symbol.toStringTag,Q=D&&S[Symbol.toStringTag]||S.constructor.name||"Object";return Q}}function Ce(S){try{return we(S),!1}catch{return!0}}function we(S){return""+S}function _e(S){if(Ce(S))return v("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Pe(S)),we(S)}var he=U.ReactCurrentOwner,ke={key:!0,ref:!0,__self:!0,__source:!0},Ue,me,ze;ze={};function Fe(S){if(Oe.call(S,"ref")){var D=Object.getOwnPropertyDescriptor(S,"ref").get;if(D&&D.isReactWarning)return!1}return S.ref!==void 0}function We(S){if(Oe.call(S,"key")){var D=Object.getOwnPropertyDescriptor(S,"key").get;if(D&&D.isReactWarning)return!1}return S.key!==void 0}function Ge(S,D){if(typeof S.ref=="string"&&he.current&&D&&he.current.stateNode!==D){var Q=Y(he.current.type);ze[Q]||(v('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',Y(he.current.type),S.ref),ze[Q]=!0)}}function Ke(S,D){{var Q=function(){Ue||(Ue=!0,v("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",D))};Q.isReactWarning=!0,Object.defineProperty(S,"key",{get:Q,configurable:!0})}}function fr(S,D){{var Q=function(){me||(me=!0,v("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",D))};Q.isReactWarning=!0,Object.defineProperty(S,"ref",{get:Q,configurable:!0})}}var _r=function(S,D,Q,fe,Be,$e,qe){var Me={$$typeof:e,type:S,key:D,ref:Q,props:qe,_owner:$e};return Me._store={},Object.defineProperty(Me._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Me,"_self",{configurable:!1,enumerable:!1,writable:!1,value:fe}),Object.defineProperty(Me,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Be}),Object.freeze&&(Object.freeze(Me.props),Object.freeze(Me)),Me};function $r(S,D,Q,fe,Be){{var $e,qe={},Me=null,Dt=null;Q!==void 0&&(_e(Q),Me=""+Q),We(D)&&(_e(D.key),Me=""+D.key),Fe(D)&&(Dt=D.ref,Ge(D,Be));for($e in D)Oe.call(D,$e)&&!ke.hasOwnProperty($e)&&(qe[$e]=D[$e]);if(S&&S.defaultProps){var dt=S.defaultProps;for($e in dt)qe[$e]===void 0&&(qe[$e]=dt[$e])}if(Me||Dt){var vt=typeof S=="function"?S.displayName||S.name||"Unknown":S;Me&&Ke(qe,vt),Dt&&fr(qe,vt)}return _r(S,Me,Dt,Be,fe,he.current,qe)}}var Mt=U.ReactCurrentOwner,Vr=U.ReactDebugCurrentFrame;function br(S){if(S){var D=S._owner,Q=Le(S.type,S._source,D?D.type:null);Vr.setExtraStackFrame(Q)}else Vr.setExtraStackFrame(null)}var yn;yn=!1;function ct(S){return typeof S=="object"&&S!==null&&S.$$typeof===e}function st(){{if(Mt.current){var S=Y(Mt.current.type);if(S)return`

Check the render method of \``+S+"`."}return""}}function gt(S){{if(S!==void 0){var D=S.fileName.replace(/^.*[\\\/]/,""),Q=S.lineNumber;return`

Check your code at `+D+":"+Q+"."}return""}}var lt={};function yt(S){{var D=st();if(!D){var Q=typeof S=="string"?S:S.displayName||S.name;Q&&(D=`

Check the top-level render call using <`+Q+">.")}return D}}function it(S,D){{if(!S._store||S._store.validated||S.key!=null)return;S._store.validated=!0;var Q=yt(D);if(lt[Q])return;lt[Q]=!0;var fe="";S&&S._owner&&S._owner!==Mt.current&&(fe=" It was passed a child from "+Y(S._owner.type)+"."),br(S),v('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Q,fe),br(null)}}function bt(S,D){{if(typeof S!="object")return;if(Te(S))for(var Q=0;Q<S.length;Q++){var fe=S[Q];ct(fe)&&it(fe,D)}else if(ct(S))S._store&&(S._store.validated=!0);else if(S){var Be=T(S);if(typeof Be=="function"&&Be!==S.entries)for(var $e=Be.call(S),qe;!(qe=$e.next()).done;)ct(qe.value)&&it(qe.value,D)}}}function St(S){{var D=S.type;if(D==null||typeof D=="string")return;var Q;if(typeof D=="function")Q=D.propTypes;else if(typeof D=="object"&&(D.$$typeof===c||D.$$typeof===f))Q=D.propTypes;else return;if(Q){var fe=Y(D);Ve(Q,S.props,"prop",fe,S)}else if(D.PropTypes!==void 0&&!yn){yn=!0;var Be=Y(D);v("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Be||"Unknown")}typeof D.getDefaultProps=="function"&&!D.getDefaultProps.isReactClassApproved&&v("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function xt(S){{for(var D=Object.keys(S.props),Q=0;Q<D.length;Q++){var fe=D[Q];if(fe!=="children"&&fe!=="key"){br(S),v("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",fe),br(null);break}}S.ref!==null&&(br(S),v("Invalid attribute `ref` supplied to `React.Fragment`."),br(null))}}function wt(S,D,Q,fe,Be,$e){{var qe=k(S);if(!qe){var Me="";(S===void 0||typeof S=="object"&&S!==null&&Object.keys(S).length===0)&&(Me+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Dt=gt(Be);Dt?Me+=Dt:Me+=st();var dt;S===null?dt="null":Te(S)?dt="array":S!==void 0&&S.$$typeof===e?(dt="<"+(Y(S.type)||"Unknown")+" />",Me=" Did you accidentally export a JSX literal instead of a component?"):dt=typeof S,v("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",dt,Me)}var vt=$r(S,D,Q,Be,$e);if(vt==null)return vt;if(qe){var Ot=D.children;if(Ot!==void 0)if(fe)if(Te(Ot)){for(var mn=0;mn<Ot.length;mn++)bt(Ot[mn],S);Object.freeze&&Object.freeze(Ot)}else v("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else bt(Ot,S)}return S===n?xt(vt):St(vt),vt}}function It(S,D,Q){return wt(S,D,Q,!0)}function Et(S,D,Q){return wt(S,D,Q,!1)}var mt=Et,rt=It;si.Fragment=n,si.jsx=mt,si.jsxs=rt}()),si}process.env.NODE_ENV==="production"?Vc.exports=qx():Vc.exports=Zx();var qc=Vc.exports,Ee={context:void 0,registry:void 0};function oi(t){Ee.context=t}var Fx=(t,e)=>t===e,Vi=Symbol("solid-proxy"),ku=Symbol("solid-track"),fa={equals:Fx},Xf=sp,gn=1,pa=2,ep={owned:null,cleanups:null,context:null,owner:null},ec={},Ye=null,tc=null,Kx=null,Xe=null,Yt=null,dn=null,Ua=0;function Cn(t,e){const r=Xe,n=Ye,s=t.length===0,i=e===void 0?n:e,a=s?ep:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=s?t:()=>t(()=>Nt(()=>Da(a)));Ye=a,Xe=null;try{return Xr(o,!0)}finally{Xe=r,Ye=n}}function Gt(t,e){e=e?Object.assign({},fa,e):fa;const r={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},n=s=>(typeof s=="function"&&(s=s(r.value)),np(r,s));return[rp.bind(r),n]}function Zc(t,e,r){const n=Ma(t,e,!0,gn);Ks(n)}function Nn(t,e,r){const n=Ma(t,e,!1,gn);Ks(n)}function Ru(t,e,r){Xf=o6;const n=Ma(t,e,!1,gn);(!r||!r.render)&&(n.user=!0),dn?dn.push(n):Ks(n)}function or(t,e,r){r=r?Object.assign({},fa,r):fa;const n=Ma(t,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,Ks(n),rp.bind(n)}function Bx(t){return t&&typeof t=="object"&&"then"in t}function Hx(t,e,r){let n,s,i;arguments.length===2&&typeof e=="object"||arguments.length===1?(n=!0,s=t,i=e||{}):(n=t,s=e,i=r||{});let a=null,o=ec,c=null,u=!1,d="initialValue"in i,f=typeof n=="function"&&or(n);const p=new Set,[m,b]=(i.storage||Gt)(i.initialValue),[E,T]=Gt(void 0),[U,v]=Gt(void 0,{equals:!1}),[O,w]=Gt(d?"ready":"unresolved");if(Ee.context){c=`${Ee.context.id}${Ee.context.count++}`;let P;i.ssrLoadFrom==="initial"?o=i.initialValue:Ee.load&&(P=Ee.load(c))&&(o=P)}function x(P,k,M,G){return a===P&&(a=null,G!==void 0&&(d=!0),(P===o||k===o)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(G,{value:k})),o=ec,y(k,M)),k}function y(P,k){Xr(()=>{k===void 0&&b(()=>P),w(k!==void 0?"errored":d?"ready":"unresolved"),T(k);for(const M of p.keys())M.decrement();p.clear()},!1)}function l(){const P=n6,k=m(),M=E();if(M!==void 0&&!a)throw M;return Xe&&!Xe.user&&P&&Zc(()=>{U(),a&&(P.resolved||p.has(P)||(P.increment(),p.add(P)))}),k}function g(P=!0){if(P!==!1&&u)return;u=!1;const k=f?f():n;if(k==null||k===!1){x(a,Nt(m));return}const M=o!==ec?o:Nt(()=>s(k,{value:m(),refetching:P}));return Bx(M)?(a=M,"value"in M?(M.status==="success"?x(a,M.value,void 0,k):x(a,void 0,void 0,k),M):(u=!0,queueMicrotask(()=>u=!1),Xr(()=>{w(d?"refreshing":"pending"),v()},!1),M.then(G=>x(M,G,void 0,k),G=>x(M,void 0,op(G),k)))):(x(a,M,void 0,k),M)}return Object.defineProperties(l,{state:{get:()=>O()},error:{get:()=>E()},loading:{get(){const P=O();return P==="pending"||P==="refreshing"}},latest:{get(){if(!d)return l();const P=E();if(P&&!a)throw P;return m()}}}),f?Zc(()=>g(!1)):g(!1),[l,{refetch:g,mutate:b}]}function Wx(t){return Xr(t,!1)}function Nt(t){if(Xe===null)return t();const e=Xe;Xe=null;try{return t()}finally{Xe=e}}function Gx(t,e,r){const n=Array.isArray(t);let s,i=r&&r.defer;return a=>{let o;if(n){o=Array(t.length);for(let u=0;u<t.length;u++)o[u]=t[u]()}else o=t();if(i){i=!1;return}const c=Nt(()=>e(o,s,a));return s=o,c}}function tp(t){Ru(()=>Nt(t))}function Ms(t){return Ye===null||(Ye.cleanups===null?Ye.cleanups=[t]:Ye.cleanups.push(t)),t}function Yx(){return Xe}function Hd(){return Ye}function Qx(t,e){const r=Ye,n=Xe;Ye=t,Xe=null;try{return Xr(e,!0)}catch(s){ju(s)}finally{Ye=r,Xe=n}}function Jx(t){const e=Xe,r=Ye;return Promise.resolve().then(()=>{Xe=e,Ye=r;let n;return Xr(t,!1),Xe=Ye=null,n?n.done:void 0})}var[Xx,ZI]=Gt(!1);function e6(){return[Xx,Jx]}function t6(t,e){const r=Symbol("context");return{id:r,Provider:a6(r),defaultValue:t}}function r6(t){return Ye&&Ye.context&&Ye.context[t.id]!==void 0?Ye.context[t.id]:t.defaultValue}function Au(t){const e=or(t),r=or(()=>Fc(e()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}var n6;function rp(){if(this.sources&&this.state)if(this.state===gn)Ks(this);else{const t=Yt;Yt=null,Xr(()=>ya(this),!1),Yt=t}if(Xe){const t=this.observers?this.observers.length:0;Xe.sources?(Xe.sources.push(this),Xe.sourceSlots.push(t)):(Xe.sources=[this],Xe.sourceSlots=[t]),this.observers?(this.observers.push(Xe),this.observerSlots.push(Xe.sources.length-1)):(this.observers=[Xe],this.observerSlots=[Xe.sources.length-1])}return this.value}function np(t,e,r){let n=t.value;return(!t.comparator||!t.comparator(n,e))&&(t.value=e,t.observers&&t.observers.length&&Xr(()=>{for(let s=0;s<t.observers.length;s+=1){const i=t.observers[s],a=tc&&tc.running;a&&tc.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?Yt.push(i):dn.push(i),i.observers&&ip(i)),a||(i.state=gn)}if(Yt.length>1e6)throw Yt=[],new Error},!1)),e}function Ks(t){if(!t.fn)return;Da(t);const e=Ua;s6(t,t.value,e)}function s6(t,e,r){let n;const s=Ye,i=Xe;Xe=Ye=t;try{n=t.fn(e)}catch(a){return t.pure&&(t.state=gn,t.owned&&t.owned.forEach(Da),t.owned=null),t.updatedAt=r+1,ju(a)}finally{Xe=i,Ye=s}(!t.updatedAt||t.updatedAt<=r)&&(t.updatedAt!=null&&"observers"in t?np(t,n):t.value=n,t.updatedAt=r)}function Ma(t,e,r,n=gn,s){const i={fn:t,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Ye,context:Ye?Ye.context:null,pure:r};return Ye===null||Ye!==ep&&(Ye.owned?Ye.owned.push(i):Ye.owned=[i]),i}function ga(t){if(t.state===0)return;if(t.state===pa)return ya(t);if(t.suspense&&Nt(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Ua);)t.state&&e.push(t);for(let r=e.length-1;r>=0;r--)if(t=e[r],t.state===gn)Ks(t);else if(t.state===pa){const n=Yt;Yt=null,Xr(()=>ya(t,e[0]),!1),Yt=n}}function Xr(t,e){if(Yt)return t();let r=!1;e||(Yt=[]),dn?r=!0:dn=[],Ua++;try{const n=t();return i6(r),n}catch(n){r||(dn=null),Yt=null,ju(n)}}function i6(t){if(Yt&&(sp(Yt),Yt=null),t)return;const e=dn;dn=null,e.length&&Xr(()=>Xf(e),!1)}function sp(t){for(let e=0;e<t.length;e++)ga(t[e])}function o6(t){let e,r=0;for(e=0;e<t.length;e++){const n=t[e];n.user?t[r++]=n:ga(n)}if(Ee.context){if(Ee.count){Ee.effects||(Ee.effects=[]),Ee.effects.push(...t.slice(0,r));return}else Ee.effects&&(t=[...Ee.effects,...t],r+=Ee.effects.length,delete Ee.effects);oi()}for(e=0;e<r;e++)ga(t[e])}function ya(t,e){t.state=0;for(let r=0;r<t.sources.length;r+=1){const n=t.sources[r];if(n.sources){const s=n.state;s===gn?n!==e&&(!n.updatedAt||n.updatedAt<Ua)&&ga(n):s===pa&&ya(n,e)}}}function ip(t){for(let e=0;e<t.observers.length;e+=1){const r=t.observers[e];r.state||(r.state=pa,r.pure?Yt.push(r):dn.push(r),r.observers&&ip(r))}}function Da(t){let e;if(t.sources)for(;t.sources.length;){const r=t.sources.pop(),n=t.sourceSlots.pop(),s=r.observers;if(s&&s.length){const i=s.pop(),a=r.observerSlots.pop();n<s.length&&(i.sourceSlots[a]=n,s[n]=i,r.observerSlots[n]=a)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Da(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function op(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function ju(t,e=Ye){throw op(t)}function Fc(t){if(typeof t=="function"&&!t.length)return Fc(t());if(Array.isArray(t)){const e=[];for(let r=0;r<t.length;r++){const n=Fc(t[r]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return t}function a6(t,e){return function(n){let s;return Nn(()=>s=Nt(()=>(Ye.context={...Ye.context,[t]:n.value},Au(()=>n.children))),void 0),s}}var Kc=Symbol("fallback");function ma(t){for(let e=0;e<t.length;e++)t[e]()}function c6(t,e,r={}){let n=[],s=[],i=[],a=0,o=e.length>1?[]:null;return Ms(()=>ma(i)),()=>{let c=t()||[],u,d;return c[ku],Nt(()=>{let p=c.length,m,b,E,T,U,v,O,w,x;if(p===0)a!==0&&(ma(i),i=[],n=[],s=[],a=0,o&&(o=[])),r.fallback&&(n=[Kc],s[0]=Cn(y=>(i[0]=y,r.fallback())),a=1);else if(a===0){for(s=new Array(p),d=0;d<p;d++)n[d]=c[d],s[d]=Cn(f);a=p}else{for(E=new Array(p),T=new Array(p),o&&(U=new Array(p)),v=0,O=Math.min(a,p);v<O&&n[v]===c[v];v++);for(O=a-1,w=p-1;O>=v&&w>=v&&n[O]===c[w];O--,w--)E[w]=s[O],T[w]=i[O],o&&(U[w]=o[O]);for(m=new Map,b=new Array(w+1),d=w;d>=v;d--)x=c[d],u=m.get(x),b[d]=u===void 0?-1:u,m.set(x,d);for(u=v;u<=O;u++)x=n[u],d=m.get(x),d!==void 0&&d!==-1?(E[d]=s[u],T[d]=i[u],o&&(U[d]=o[u]),d=b[d],m.set(x,d)):i[u]();for(d=v;d<p;d++)d in E?(s[d]=E[d],i[d]=T[d],o&&(o[d]=U[d],o[d](d))):s[d]=Cn(f);s=s.slice(0,a=p),n=c.slice(0)}return s});function f(p){if(i[d]=p,o){const[m,b]=Gt(d);return o[d]=b,e(c[d],m)}return e(c[d])}}}function u6(t,e,r={}){let n=[],s=[],i=[],a=[],o=0,c;return Ms(()=>ma(i)),()=>{const u=t()||[];return u[ku],Nt(()=>{if(u.length===0)return o!==0&&(ma(i),i=[],n=[],s=[],o=0,a=[]),r.fallback&&(n=[Kc],s[0]=Cn(f=>(i[0]=f,r.fallback())),o=1),s;for(n[0]===Kc&&(i[0](),i=[],n=[],s=[],o=0),c=0;c<u.length;c++)c<n.length&&n[c]!==u[c]?a[c](()=>u[c]):c>=n.length&&(s[c]=Cn(d));for(;c<n.length;c++)i[c]();return o=a.length=i.length=u.length,n=u.slice(0),s=s.slice(0,o)});function d(f){i[c]=f;const[p,m]=Gt(u[c]);return a[c]=m,e(p,c)}}}function ap(t,e){return Nt(()=>t(e||{}))}function To(){return!0}var Bc={get(t,e,r){return e===Vi?r:t.get(e)},has(t,e){return e===Vi?!0:t.has(e)},set:To,deleteProperty:To,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:To,deleteProperty:To}},ownKeys(t){return t.keys()}};function rc(t){return(t=typeof t=="function"?t():t)?t:{}}function l6(){for(let t=0,e=this.length;t<e;++t){const r=this[t]();if(r!==void 0)return r}}function cp(...t){let e=!1;for(let a=0;a<t.length;a++){const o=t[a];e=e||!!o&&Vi in o,t[a]=typeof o=="function"?(e=!0,or(o)):o}if(e)return new Proxy({get(a){for(let o=t.length-1;o>=0;o--){const c=rc(t[o])[a];if(c!==void 0)return c}},has(a){for(let o=t.length-1;o>=0;o--)if(a in rc(t[o]))return!0;return!1},keys(){const a=[];for(let o=0;o<t.length;o++)a.push(...Object.keys(rc(t[o])));return[...new Set(a)]}},Bc);const r={},n=Object.create(null);for(let a=t.length-1;a>=0;a--){const o=t[a];if(!o)continue;const c=Object.getOwnPropertyNames(o);for(let u=c.length-1;u>=0;u--){const d=c[u];if(d==="__proto__"||d==="constructor")continue;const f=Object.getOwnPropertyDescriptor(o,d);if(!n[d])n[d]=f.get?{enumerable:!0,configurable:!0,get:l6.bind(r[d]=[f.get.bind(o)])}:f.value!==void 0?f:void 0;else{const p=r[d];p&&(f.get?p.push(f.get.bind(o)):f.value!==void 0&&p.push(()=>f.value))}}}const s={},i=Object.keys(n);for(let a=i.length-1;a>=0;a--){const o=i[a],c=n[o];c&&c.get?Object.defineProperty(s,o,c):s[o]=c?c.value:void 0}return s}function up(t,...e){if(Vi in t){const s=new Set(e.length>1?e.flat():e[0]),i=e.map(a=>new Proxy({get(o){return a.includes(o)?t[o]:void 0},has(o){return a.includes(o)&&o in t},keys(){return a.filter(o=>o in t)}},Bc));return i.push(new Proxy({get(a){return s.has(a)?void 0:t[a]},has(a){return s.has(a)?!1:a in t},keys(){return Object.keys(t).filter(a=>!s.has(a))}},Bc)),i}const r={},n=e.map(()=>({}));for(const s of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,s),a=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let o=!1,c=0;for(const u of e)u.includes(s)&&(o=!0,a?n[c][s]=i.value:Object.defineProperty(n[c],s,i)),++c;o||(a?r[s]=i.value:Object.defineProperty(r,s,i))}return[...n,r]}function d6(t){let e,r;const n=s=>{const i=Ee.context;if(i){const[o,c]=Gt();Ee.count||(Ee.count=0),Ee.count++,(r||(r=t())).then(u=>{oi(i),Ee.count--,c(()=>u.default),oi()}),e=o}else if(!e){const[o]=Hx(()=>(r||(r=t())).then(c=>c.default));e=o}let a;return or(()=>(a=e())&&Nt(()=>{if(!i)return a(s);const o=Ee.context;oi(i);const c=a(s);return oi(o),c}))};return n.preload=()=>r||((r=t()).then(s=>e=()=>s.default),r),n}var h6=0;function f6(){const t=Ee.context;return t?`${t.id}${t.count++}`:`cl-${h6++}`}var lp=t=>`Stale read from <${t}>.`;function p6(t){const e="fallback"in t&&{fallback:()=>t.fallback};return or(c6(()=>t.each,t.children,e||void 0))}function g6(t){const e="fallback"in t&&{fallback:()=>t.fallback};return or(u6(()=>t.each,t.children,e||void 0))}function y6(t){const e=t.keyed,r=or(()=>t.when,void 0,{equals:(n,s)=>e?n===s:!n==!s});return or(()=>{const n=r();if(n){const s=t.children;return typeof s=="function"&&s.length>0?Nt(()=>s(e?n:()=>{if(!Nt(r))throw lp("Show");return t.when})):s}return t.fallback},void 0,void 0)}function m6(t){let e=!1;const r=(i,a)=>(e?i[1]===a[1]:!i[1]==!a[1])&&i[2]===a[2],n=Au(()=>t.children),s=or(()=>{let i=n();Array.isArray(i)||(i=[i]);for(let a=0;a<i.length;a++){const o=i[a].when;if(o)return e=!!i[a].keyed,[a,o,i[a]]}return[-1]},void 0,{equals:r});return or(()=>{const[i,a,o]=s();if(i<0)return t.fallback;const c=o.children;return typeof c=="function"&&c.length>0?Nt(()=>c(e?a:()=>{if(Nt(s)[0]!==i)throw lp("Match");return o.when})):c},void 0,void 0)}function v6(t){return t}var _6=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],b6=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",..._6]),w6=new Set(["innerHTML","textContent","innerText","children"]),E6=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),S6=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function x6(t,e){const r=S6[t];return typeof r=="object"?r[e]?r.$:void 0:r}var I6=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),O6=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),T6={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function C6(t,e,r){let n=r.length,s=e.length,i=n,a=0,o=0,c=e[s-1].nextSibling,u=null;for(;a<s||o<i;){if(e[a]===r[o]){a++,o++;continue}for(;e[s-1]===r[i-1];)s--,i--;if(s===a){const d=i<n?o?r[o-1].nextSibling:r[i-o]:c;for(;o<i;)t.insertBefore(r[o++],d)}else if(i===o)for(;a<s;)(!u||!u.has(e[a]))&&e[a].remove(),a++;else if(e[a]===r[i-1]&&r[o]===e[s-1]){const d=e[--s].nextSibling;t.insertBefore(r[o++],e[a++].nextSibling),t.insertBefore(r[--i],d),e[s]=r[i]}else{if(!u){u=new Map;let f=o;for(;f<i;)u.set(r[f],f++)}const d=u.get(e[a]);if(d!=null)if(o<d&&d<i){let f=a,p=1,m;for(;++f<s&&f<i&&!((m=u.get(e[f]))==null||m!==d+p);)p++;if(p>d-o){const b=e[a];for(;o<d;)t.insertBefore(r[o++],b)}else t.replaceChild(r[o++],e[a++])}else a++;else e[a++].remove()}}}var di="_$DX_DELEGATE";function N6(t,e,r,n={}){let s;return Cn(i=>{s=i,e===document?t():_a(e,t(),e.firstChild?null:void 0,r)},n.owner),()=>{s(),e.textContent=""}}function P6(t,e,r){let n;const s=()=>{const a=document.createElement("template");return a.innerHTML=t,r?a.content.firstChild.firstChild:a.content.firstChild},i=e?()=>Nt(()=>document.importNode(n||(n=s()),!0)):()=>(n||(n=s())).cloneNode(!0);return i.cloneNode=i,i}function dp(t,e=window.document){const r=e[di]||(e[di]=new Set);for(let n=0,s=t.length;n<s;n++){const i=t[n];r.has(i)||(r.add(i),e.addEventListener(i,gp))}}function k6(t=window.document){if(t[di]){for(let e of t[di].keys())t.removeEventListener(e,gp);delete t[di]}}function va(t,e,r){Ee.context||(r==null?t.removeAttribute(e):t.setAttribute(e,r))}function R6(t,e,r,n){Ee.context||(n==null?t.removeAttributeNS(e,r):t.setAttributeNS(e,r,n))}function hp(t,e){Ee.context||(e==null?t.removeAttribute("class"):t.className=e)}function fp(t,e,r,n){if(n)Array.isArray(r)?(t[`$$${e}`]=r[0],t[`$$${e}Data`]=r[1]):t[`$$${e}`]=r;else if(Array.isArray(r)){const s=r[0];t.addEventListener(e,r[0]=i=>s.call(t,r[1],i))}else t.addEventListener(e,r)}function A6(t,e,r={}){const n=Object.keys(e||{}),s=Object.keys(r);let i,a;for(i=0,a=s.length;i<a;i++){const o=s[i];!o||o==="undefined"||e[o]||(Wd(t,o,!1),delete r[o])}for(i=0,a=n.length;i<a;i++){const o=n[i],c=!!e[o];!o||o==="undefined"||r[o]===c||!c||(Wd(t,o,!0),r[o]=c)}return r}function j6(t,e,r){if(!e)return r?va(t,"style"):e;const n=t.style;if(typeof e=="string")return n.cssText=e;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),e||(e={});let s,i;for(i in r)e[i]==null&&n.removeProperty(i),delete r[i];for(i in e)s=e[i],s!==r[i]&&(n.setProperty(i,s),r[i]=s);return r}function pp(t,e={},r,n){const s={};return n||Nn(()=>s.children=Ds(t,e.children,s.children)),Nn(()=>e.ref&&e.ref(t)),Nn(()=>U6(t,e,r,!0,s,!0)),s}function L6(t,e,r){return Nt(()=>t(e,r))}function _a(t,e,r,n){if(r!==void 0&&!n&&(n=[]),typeof e!="function")return Ds(t,e,n,r);Nn(s=>Ds(t,e(),s,r),n)}function U6(t,e,r,n,s={},i=!1){e||(e={});for(const a in s)if(!(a in e)){if(a==="children")continue;s[a]=Gd(t,a,null,s[a],r,i)}for(const a in e){if(a==="children"){n||Ds(t,e.children);continue}const o=e[a];s[a]=Gd(t,a,o,s[a],r,i)}}function M6(t){let e,r;return!Ee.context||!(e=Ee.registry.get(r=z6()))?t():(Ee.completed&&Ee.completed.add(e),Ee.registry.delete(r),e)}function D6(t){return t.toLowerCase().replace(/-([a-z])/g,(e,r)=>r.toUpperCase())}function Wd(t,e,r){const n=e.trim().split(/\s+/);for(let s=0,i=n.length;s<i;s++)t.classList.toggle(n[s],r)}function Gd(t,e,r,n,s,i){let a,o,c,u,d;if(e==="style")return j6(t,r,n);if(e==="classList")return A6(t,r,n);if(r===n)return n;if(e==="ref")i||r(t);else if(e.slice(0,3)==="on:"){const f=e.slice(3);n&&t.removeEventListener(f,n),r&&t.addEventListener(f,r)}else if(e.slice(0,10)==="oncapture:"){const f=e.slice(10);n&&t.removeEventListener(f,n,!0),r&&t.addEventListener(f,r,!0)}else if(e.slice(0,2)==="on"){const f=e.slice(2).toLowerCase(),p=I6.has(f);if(!p&&n){const m=Array.isArray(n)?n[0]:n;t.removeEventListener(f,m)}(p||r)&&(fp(t,f,r,p),p&&dp([f]))}else if(e.slice(0,5)==="attr:")va(t,e.slice(5),r);else if((d=e.slice(0,5)==="prop:")||(c=w6.has(e))||!s&&((u=x6(e,t.tagName))||(o=b6.has(e)))||(a=t.nodeName.includes("-"))){if(d)e=e.slice(5),o=!0;else if(Ee.context)return r;e==="class"||e==="className"?hp(t,r):a&&!o&&!c?t[D6(e)]=r:t[u||e]=r}else{const f=s&&e.indexOf(":")>-1&&T6[e.split(":")[0]];f?R6(t,f,e,r):va(t,E6[e]||e,r)}return r}function gp(t){const e=`$$${t.type}`;let r=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==r&&Object.defineProperty(t,"target",{configurable:!0,value:r}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return r||document}}),Ee.registry&&!Ee.done&&(Ee.done=_$HY.done=!0);r;){const n=r[e];if(n&&!r.disabled){const s=r[`${e}Data`];if(s!==void 0?n.call(r,s,t):n.call(r,t),t.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function Ds(t,e,r,n,s){if(Ee.context){!r&&(r=[...t.childNodes]);let o=[];for(let c=0;c<r.length;c++){const u=r[c];u.nodeType===8&&u.data.slice(0,2)==="!$"?u.remove():o.push(u)}r=o}for(;typeof r=="function";)r=r();if(e===r)return r;const i=typeof e,a=n!==void 0;if(t=a&&r[0]&&r[0].parentNode||t,i==="string"||i==="number"){if(Ee.context)return r;if(i==="number"&&(e=e.toString()),a){let o=r[0];o&&o.nodeType===3?o.data!==e&&(o.data=e):o=document.createTextNode(e),r=ys(t,r,n,o)}else r!==""&&typeof r=="string"?r=t.firstChild.data=e:r=t.textContent=e}else if(e==null||i==="boolean"){if(Ee.context)return r;r=ys(t,r,n)}else{if(i==="function")return Nn(()=>{let o=e();for(;typeof o=="function";)o=o();r=Ds(t,o,r,n)}),()=>r;if(Array.isArray(e)){const o=[],c=r&&Array.isArray(r);if(Hc(o,e,r,s))return Nn(()=>r=Ds(t,o,r,n,!0)),()=>r;if(Ee.context){if(!o.length)return r;if(n===void 0)return[...t.childNodes];let u=o[0],d=[u];for(;(u=u.nextSibling)!==n;)d.push(u);return r=d}if(o.length===0){if(r=ys(t,r,n),a)return r}else c?r.length===0?Yd(t,o,n):C6(t,r,o):(r&&ys(t),Yd(t,o));r=o}else if(e.nodeType){if(Ee.context&&e.parentNode)return r=a?[e]:e;if(Array.isArray(r)){if(a)return r=ys(t,r,n,e);ys(t,r,null,e)}else r==null||r===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);r=e}}return r}function Hc(t,e,r,n){let s=!1;for(let i=0,a=e.length;i<a;i++){let o=e[i],c=r&&r[i],u;if(!(o==null||o===!0||o===!1))if((u=typeof o)=="object"&&o.nodeType)t.push(o);else if(Array.isArray(o))s=Hc(t,o,c)||s;else if(u==="function")if(n){for(;typeof o=="function";)o=o();s=Hc(t,Array.isArray(o)?o:[o],Array.isArray(c)?c:[c])||s}else t.push(o),s=!0;else{const d=String(o);c&&c.nodeType===3&&c.data===d?t.push(c):t.push(document.createTextNode(d))}}return s}function Yd(t,e,r=null){for(let n=0,s=e.length;n<s;n++)t.insertBefore(e[n],r)}function ys(t,e,r,n){if(r===void 0)return t.textContent="";const s=n||document.createTextNode("");if(e.length){let i=!1;for(let a=e.length-1;a>=0;a--){const o=e[a];if(s!==o){const c=o.parentNode===t;!i&&!a?c?t.replaceChild(s,o):t.insertBefore(s,r):c&&o.remove()}else i=!0}}else t.insertBefore(s,r);return[s]}function z6(){const t=Ee.context;return`${t.id}${t.count++}`}var $6="http://www.w3.org/2000/svg";function yp(t,e=!1){return e?document.createElementNS($6,t):document.createElement(t)}function V6(t){const{useShadow:e}=t,r=document.createTextNode(""),n=()=>t.mount||document.body,s=Hd();let i,a=!!Ee.context;return Ru(()=>{a&&(Hd().user=a=!1),i||(i=Qx(s,()=>or(()=>t.children)));const o=n();if(o instanceof HTMLHeadElement){const[c,u]=Gt(!1),d=()=>u(!0);Cn(f=>_a(o,()=>c()?f():i(),null)),Ms(d)}else{const c=yp(t.isSVG?"g":"div",t.isSVG),u=e&&c.attachShadow?c.attachShadow({mode:"open"}):c;Object.defineProperty(c,"_$host",{get(){return r.parentNode},configurable:!0}),_a(u,i),o.appendChild(c),t.ref&&t.ref(c),Ms(()=>o.removeChild(c))}},void 0,{render:!a}),r}function q6(t){const[e,r]=up(t,["component"]),n=or(()=>e.component);return or(()=>{const s=n();switch(typeof s){case"function":return Nt(()=>s(r));case"string":const i=O6.has(s),a=Ee.context?M6():yp(s,i);return pp(a,r,i),a}})}var Z6=function(){function t(){this.keyToValue=new Map,this.valueToKey=new Map}return t.prototype.set=function(e,r){this.keyToValue.set(e,r),this.valueToKey.set(r,e)},t.prototype.getByKey=function(e){return this.keyToValue.get(e)},t.prototype.getByValue=function(e){return this.valueToKey.get(e)},t.prototype.clear=function(){this.keyToValue.clear(),this.valueToKey.clear()},t}(),mp=function(){function t(e){this.generateIdentifier=e,this.kv=new Z6}return t.prototype.register=function(e,r){this.kv.getByValue(e)||(r||(r=this.generateIdentifier(e)),this.kv.set(r,e))},t.prototype.clear=function(){this.kv.clear()},t.prototype.getIdentifier=function(e){return this.kv.getByValue(e)},t.prototype.getValue=function(e){return this.kv.getByKey(e)},t}(),F6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K6=function(t){F6(e,t);function e(){var r=t.call(this,function(n){return n.name})||this;return r.classToAllowedProps=new Map,r}return e.prototype.register=function(r,n){typeof n=="object"?(n.allowProps&&this.classToAllowedProps.set(r,n.allowProps),t.prototype.register.call(this,r,n.identifier)):t.prototype.register.call(this,r,n)},e.prototype.getAllowedProps=function(r){return this.classToAllowedProps.get(r)},e}(mp),B6=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function H6(t){if("values"in Object)return Object.values(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(t[r]);return e}function W6(t,e){var r=H6(t);if("find"in r)return r.find(e);for(var n=r,s=0;s<n.length;s++){var i=n[s];if(e(i))return i}}function zs(t,e){Object.entries(t).forEach(function(r){var n=B6(r,2),s=n[0],i=n[1];return e(i,s)})}function zo(t,e){return t.indexOf(e)!==-1}function Qd(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(e(n))return n}}var G6=function(){function t(){this.transfomers={}}return t.prototype.register=function(e){this.transfomers[e.name]=e},t.prototype.findApplicable=function(e){return W6(this.transfomers,function(r){return r.isApplicable(e)})},t.prototype.findByName=function(e){return this.transfomers[e]},t}(),Y6=function(t){return Object.prototype.toString.call(t).slice(8,-1)},vp=function(t){return typeof t>"u"},Q6=function(t){return t===null},qi=function(t){return typeof t!="object"||t===null||t===Object.prototype?!1:Object.getPrototypeOf(t)===null?!0:Object.getPrototypeOf(t)===Object.prototype},Wc=function(t){return qi(t)&&Object.keys(t).length===0},Mn=function(t){return Array.isArray(t)},J6=function(t){return typeof t=="string"},X6=function(t){return typeof t=="number"&&!isNaN(t)},eI=function(t){return typeof t=="boolean"},tI=function(t){return t instanceof RegExp},Zi=function(t){return t instanceof Map},Fi=function(t){return t instanceof Set},_p=function(t){return Y6(t)==="Symbol"},rI=function(t){return t instanceof Date&&!isNaN(t.valueOf())},nI=function(t){return t instanceof Error},Jd=function(t){return typeof t=="number"&&isNaN(t)},sI=function(t){return eI(t)||Q6(t)||vp(t)||X6(t)||J6(t)||_p(t)},iI=function(t){return typeof t=="bigint"},oI=function(t){return t===1/0||t===-1/0},aI=function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},cI=function(t){return t instanceof URL},bp=function(t){return t.replace(/\./g,"\\.")},nc=function(t){return t.map(String).map(bp).join(".")},hi=function(t){for(var e=[],r="",n=0;n<t.length;n++){var s=t.charAt(n),i=s==="\\"&&t.charAt(n+1)===".";if(i){r+=".",n++;continue}var a=s===".";if(a){e.push(r),r="";continue}r+=s}var o=r;return e.push(o),e},Gc=function(){return Gc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Gc.apply(this,arguments)},Yc=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Qc=function(t,e){for(var r=0,n=e.length,s=t.length;r<n;r++,s++)t[s]=e[r];return t};function Br(t,e,r,n){return{isApplicable:t,annotation:e,transform:r,untransform:n}}var wp=[Br(vp,"undefined",function(){return null},function(){}),Br(iI,"bigint",function(t){return t.toString()},function(t){return typeof BigInt<"u"?BigInt(t):t}),Br(rI,"Date",function(t){return t.toISOString()},function(t){return new Date(t)}),Br(nI,"Error",function(t,e){var r={name:t.name,message:t.message};return e.allowedErrorProps.forEach(function(n){r[n]=t[n]}),r},function(t,e){var r=new Error(t.message);return r.name=t.name,r.stack=t.stack,e.allowedErrorProps.forEach(function(n){r[n]=t[n]}),r}),Br(tI,"regexp",function(t){return""+t},function(t){var e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}),Br(Fi,"set",function(t){return Qc([],Yc(t.values()))},function(t){return new Set(t)}),Br(Zi,"map",function(t){return Qc([],Yc(t.entries()))},function(t){return new Map(t)}),Br(function(t){return Jd(t)||oI(t)},"number",function(t){return Jd(t)?"NaN":t>0?"Infinity":"-Infinity"},Number),Br(function(t){return t===0&&1/t===-1/0},"number",function(){return"-0"},Number),Br(cI,"URL",function(t){return t.toString()},function(t){return new URL(t)})];function za(t,e,r,n){return{isApplicable:t,annotation:e,transform:r,untransform:n}}var Ep=za(function(t,e){if(_p(t)){var r=!!e.symbolRegistry.getIdentifier(t);return r}return!1},function(t,e){var r=e.symbolRegistry.getIdentifier(t);return["symbol",r]},function(t){return t.description},function(t,e,r){var n=r.symbolRegistry.getValue(e[1]);if(!n)throw new Error("Trying to deserialize unknown symbol");return n}),uI=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce(function(t,e){return t[e.name]=e,t},{}),Sp=za(aI,function(t){return["typed-array",t.constructor.name]},function(t){return Qc([],Yc(t))},function(t,e){var r=uI[e[1]];if(!r)throw new Error("Trying to deserialize unknown typed array");return new r(t)});function xp(t,e){if(t!=null&&t.constructor){var r=!!e.classRegistry.getIdentifier(t.constructor);return r}return!1}var Ip=za(xp,function(t,e){var r=e.classRegistry.getIdentifier(t.constructor);return["class",r]},function(t,e){var r=e.classRegistry.getAllowedProps(t.constructor);if(!r)return Gc({},t);var n={};return r.forEach(function(s){n[s]=t[s]}),n},function(t,e,r){var n=r.classRegistry.getValue(e[1]);if(!n)throw new Error("Trying to deserialize unknown class - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564");return Object.assign(Object.create(n.prototype),t)}),Op=za(function(t,e){return!!e.customTransformerRegistry.findApplicable(t)},function(t,e){var r=e.customTransformerRegistry.findApplicable(t);return["custom",r.name]},function(t,e){var r=e.customTransformerRegistry.findApplicable(t);return r.serialize(t)},function(t,e,r){var n=r.customTransformerRegistry.findByName(e[1]);if(!n)throw new Error("Trying to deserialize unknown custom value");return n.deserialize(t)}),lI=[Ip,Ep,Op,Sp],Xd=function(t,e){var r=Qd(lI,function(s){return s.isApplicable(t,e)});if(r)return{value:r.transform(t,e),type:r.annotation(t,e)};var n=Qd(wp,function(s){return s.isApplicable(t,e)});if(n)return{value:n.transform(t,e),type:n.annotation}},Tp={};wp.forEach(function(t){Tp[t.annotation]=t});var dI=function(t,e,r){if(Mn(e))switch(e[0]){case"symbol":return Ep.untransform(t,e,r);case"class":return Ip.untransform(t,e,r);case"custom":return Op.untransform(t,e,r);case"typed-array":return Sp.untransform(t,e,r);default:throw new Error("Unknown transformation: "+e)}else{var n=Tp[e];if(!n)throw new Error("Unknown transformation: "+e);return n.untransform(t,r)}},Es=function(t,e){for(var r=t.keys();e>0;)r.next(),e--;return r.next().value};function Cp(t){if(zo(t,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(zo(t,"prototype"))throw new Error("prototype is not allowed as a property");if(zo(t,"constructor"))throw new Error("constructor is not allowed as a property")}var hI=function(t,e){Cp(e);for(var r=0;r<e.length;r++){var n=e[r];if(Fi(t))t=Es(t,+n);else if(Zi(t)){var s=+n,i=+e[++r]==0?"key":"value",a=Es(t,s);switch(i){case"key":t=a;break;case"value":t=t.get(a);break}}else t=t[n]}return t},Jc=function(t,e,r){if(Cp(e),e.length===0)return r(t);for(var n=t,s=0;s<e.length-1;s++){var i=e[s];if(Mn(n)){var a=+i;n=n[a]}else if(qi(n))n=n[i];else if(Fi(n)){var o=+i;n=Es(n,o)}else if(Zi(n)){var c=s===e.length-2;if(c)break;var o=+i,u=+e[++s]==0?"key":"value",d=Es(n,o);switch(u){case"key":n=d;break;case"value":n=n.get(d);break}}}var f=e[e.length-1];if(Mn(n)?n[+f]=r(n[+f]):qi(n)&&(n[f]=r(n[f])),Fi(n)){var p=Es(n,+f),m=r(p);p!==m&&(n.delete(p),n.add(m))}if(Zi(n)){var o=+e[e.length-2],b=Es(n,o),u=+f==0?"key":"value";switch(u){case"key":{var E=r(b);n.set(E,n.get(b)),E!==b&&n.delete(b);break}case"value":{n.set(b,r(n.get(b)));break}}}return t},cn=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Tn=function(t,e){for(var r=0,n=e.length,s=t.length;r<n;r++,s++)t[s]=e[r];return t};function Xc(t,e,r){if(r===void 0&&(r=[]),!!t){if(!Mn(t)){zs(t,function(a,o){return Xc(a,e,Tn(Tn([],cn(r)),cn(hi(o))))});return}var n=cn(t,2),s=n[0],i=n[1];i&&zs(i,function(a,o){Xc(a,e,Tn(Tn([],cn(r)),cn(hi(o))))}),e(s,r)}}function fI(t,e,r){return Xc(e,function(n,s){t=Jc(t,s,function(i){return dI(i,n,r)})}),t}function pI(t,e){function r(a,o){var c=hI(t,hi(o));a.map(hi).forEach(function(u){t=Jc(t,u,function(){return c})})}if(Mn(e)){var n=cn(e,2),s=n[0],i=n[1];s.forEach(function(a){t=Jc(t,hi(a),function(){return t})}),i&&zs(i,r)}else zs(e,r);return t}var gI=function(t,e){return qi(t)||Mn(t)||Zi(t)||Fi(t)||xp(t,e)};function yI(t,e,r){var n=r.get(t);n?n.push(e):r.set(t,[e])}function mI(t,e){var r={},n=void 0;return t.forEach(function(s){if(!(s.length<=1)){e||(s=s.map(function(c){return c.map(String)}).sort(function(c,u){return c.length-u.length}));var i=cn(s),a=i[0],o=i.slice(1);a.length===0?n=o.map(nc):r[nc(a)]=o.map(nc)}}),n?Wc(r)?[n]:[n,r]:Wc(r)?void 0:r}var Np=function(t,e,r,n,s,i,a){var o;s===void 0&&(s=[]),i===void 0&&(i=[]),a===void 0&&(a=new Map);var c=sI(t);if(!c){yI(t,s,e);var u=a.get(t);if(u)return n?{transformedValue:null}:u}if(!gI(t,r)){var d=Xd(t,r),f=d?{transformedValue:d.value,annotations:[d.type]}:{transformedValue:t};return c||a.set(t,f),f}if(zo(i,t))return{transformedValue:null};var p=Xd(t,r),m=(o=p==null?void 0:p.value)!==null&&o!==void 0?o:t,b=Mn(m)?[]:{},E={};zs(m,function(U,v){var O=Np(U,e,r,n,Tn(Tn([],cn(s)),[v]),Tn(Tn([],cn(i)),[t]),a);b[v]=O.transformedValue,Mn(O.annotations)?E[v]=O.annotations:qi(O.annotations)&&zs(O.annotations,function(w,x){E[bp(v)+"."+x]=w})});var T=Wc(E)?{transformedValue:b,annotations:p?[p.type]:void 0}:{transformedValue:b,annotations:p?[p.type,E]:E};return c||a.set(t,T),T};function Pp(t){return Object.prototype.toString.call(t).slice(8,-1)}function vI(t){if(Pp(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return!!e&&e.constructor===Object&&e===Object.prototype}function eh(t){return Pp(t)==="Array"}function _I(t,e,r,n,s){const i={}.propertyIsEnumerable.call(n,e)?"enumerable":"nonenumerable";i==="enumerable"&&(t[e]=r),s&&i==="nonenumerable"&&Object.defineProperty(t,e,{value:r,enumerable:!1,writable:!0,configurable:!0})}function eu(t,e={}){if(eh(t))return t.map(s=>eu(s,e));if(!vI(t))return t;const r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols(t);return[...r,...n].reduce((s,i)=>{if(eh(e.props)&&!e.props.includes(i))return s;const a=t[i],o=eu(a,e);return _I(s,i,o,t,e.nonenumerable),s},{})}var Wn=function(){return Wn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Wn.apply(this,arguments)},bI=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},wI=function(t,e){for(var r=0,n=e.length,s=t.length;r<n;r++,s++)t[s]=e[r];return t},kp=function(){function t(e){var r=e===void 0?{}:e,n=r.dedupe,s=n===void 0?!1:n;this.classRegistry=new K6,this.symbolRegistry=new mp(function(i){var a;return(a=i.description)!==null&&a!==void 0?a:""}),this.customTransformerRegistry=new G6,this.allowedErrorProps=[],this.dedupe=s}return t.prototype.serialize=function(e){var r=new Map,n=Np(e,r,this,this.dedupe),s={json:n.transformedValue};n.annotations&&(s.meta=Wn(Wn({},s.meta),{values:n.annotations}));var i=mI(r,this.dedupe);return i&&(s.meta=Wn(Wn({},s.meta),{referentialEqualities:i})),s},t.prototype.deserialize=function(e){var r=e.json,n=e.meta,s=eu(r);return n!=null&&n.values&&(s=fI(s,n.values,this)),n!=null&&n.referentialEqualities&&(s=pI(s,n.referentialEqualities)),s},t.prototype.stringify=function(e){return JSON.stringify(this.serialize(e))},t.prototype.parse=function(e){return this.deserialize(JSON.parse(e))},t.prototype.registerClass=function(e,r){this.classRegistry.register(e,r)},t.prototype.registerSymbol=function(e,r){this.symbolRegistry.register(e,r)},t.prototype.registerCustom=function(e,r){this.customTransformerRegistry.register(Wn({name:r},e))},t.prototype.allowErrorProps=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];(e=this.allowedErrorProps).push.apply(e,wI([],bI(r)))},t.defaultInstance=new t,t.serialize=t.defaultInstance.serialize.bind(t.defaultInstance),t.deserialize=t.defaultInstance.deserialize.bind(t.defaultInstance),t.stringify=t.defaultInstance.stringify.bind(t.defaultInstance),t.parse=t.defaultInstance.parse.bind(t.defaultInstance),t.registerClass=t.defaultInstance.registerClass.bind(t.defaultInstance),t.registerSymbol=t.defaultInstance.registerSymbol.bind(t.defaultInstance),t.registerCustom=t.defaultInstance.registerCustom.bind(t.defaultInstance),t.allowErrorProps=t.defaultInstance.allowErrorProps.bind(t.defaultInstance),t}(),EI=kp.serialize,SI=kp.stringify;function xI(t){return t.state.fetchStatus==="fetching"?"fetching":t.getObserversCount()?t.state.fetchStatus==="paused"?"paused":t.isStale()?"stale":"fresh":"inactive"}function II(t,e){return`${t}${e.charAt(0).toUpperCase()+e.slice(1)}`}function OI({queryState:t,observerCount:e,isStale:r}){return t.fetchStatus==="fetching"?"blue":e?t.fetchStatus==="paused"?"purple":r?"yellow":"green":"gray"}function TI({status:t,isPaused:e}){return e?"purple":t==="error"?"red":t==="pending"?"yellow":t==="success"?"green":"gray"}function CI(t){return t==="fresh"?"green":t==="stale"?"yellow":t==="paused"?"purple":t==="inactive"?"gray":"blue"}var NI=(t,e=!1)=>{const{json:r}=EI(t);return JSON.stringify(r,null,e?2:void 0)},Co=t=>t.state.fetchStatus!=="idle"?0:t.getObserversCount()?t.isStale()?2:1:3,PI=(t,e)=>t.queryHash.localeCompare(e.queryHash),Rp=(t,e)=>t.state.dataUpdatedAt<e.state.dataUpdatedAt?1:-1,kI=(t,e)=>Co(t)===Co(e)?Rp(t,e):Co(t)>Co(e)?1:-1,RI={status:kI,"query hash":PI,"last updated":Rp},No=t=>t.state.isPaused?0:t.state.status==="error"?2:t.state.status==="pending"?1:3,Ap=(t,e)=>t.state.submittedAt<e.state.submittedAt?1:-1,AI=(t,e)=>No(t)===No(e)?Ap(t,e):No(t)>No(e)?1:-1,jI={status:AI,"last updated":Ap},LI=t=>t*parseFloat(getComputedStyle(document.documentElement).fontSize),UI=()=>{const[t,e]=Gt("dark");return tp(()=>{const r=window.matchMedia("(prefers-color-scheme: dark)");e(r.matches?"dark":"light");const n=s=>{e(s.matches?"dark":"light")};r.addEventListener("change",n),Ms(()=>r.removeEventListener("change",n))}),t},ai=(t,e,r)=>{if(e.length===0)return r;if(t instanceof Map){const n=new Map(t);if(e.length===1)return n.set(e[0],r),n;const[s,...i]=e;return n.set(s,ai(n.get(s),i,r)),n}if(t instanceof Set){const n=ai(Array.from(t),e,r);return new Set(n)}if(Array.isArray(t)){const n=[...t];if(e.length===1)return n[e[0]]=r,n;const[s,...i]=e;return n[s]=ai(n[s],i,r),n}if(t instanceof Object){const n={...t};if(e.length===1)return n[e[0]]=r,n;const[s,...i]=e;return n[s]=ai(n[s],i,r),n}return t},ci=(t,e)=>{if(t instanceof Map){const r=new Map(t);if(e.length===1)return r.delete(e[0]),r;const[n,...s]=e;return r.set(n,ci(r.get(n),s)),r}if(t instanceof Set){const r=ci(Array.from(t),e);return new Set(r)}if(Array.isArray(t)){const r=[...t];if(e.length===1)return r.filter((i,a)=>a.toString()!==e[0]);const[n,...s]=e;return r[n]=ci(r[n],s),r}if(t instanceof Object){const r={...t};if(e.length===1)return delete r[e[0]],r;const[n,...s]=e;return r[n]=ci(r[n],s),r}return t},MI=t=>{if(!t||document.querySelector("#_goober"))return;const r=document.createElement("style"),n=document.createTextNode("");r.appendChild(n),r.id="_goober",r.setAttribute("nonce",t),document.head.appendChild(r)},Ts,Ki,Bi,Hi,Yn,Wi,Cs,Ns,Ps,ks,Rs,Gi,th,DI=(th=class{constructor(t){gr(this,Ts,void 0);gr(this,Ki,void 0);gr(this,Bi,void 0);gr(this,Hi,void 0);gr(this,Yn,!1);gr(this,Wi,void 0);gr(this,Cs,void 0);gr(this,Ns,void 0);gr(this,Ps,void 0);gr(this,ks,void 0);gr(this,Rs,void 0);gr(this,Gi,void 0);const{client:e,queryFlavor:r,version:n,onlineManager:s,buttonPosition:i,position:a,initialIsOpen:o,errorTypes:c,styleNonce:u}=t;cr(this,Ts,Gt(e)),cr(this,Bi,r),cr(this,Hi,n),cr(this,Ki,s),cr(this,Wi,u),cr(this,Cs,Gt(i)),cr(this,Ns,Gt(a)),cr(this,Ps,Gt(o)),cr(this,ks,Gt(c))}setButtonPosition(t){Tt(this,Cs)[1](t)}setPosition(t){Tt(this,Ns)[1](t)}setInitialIsOpen(t){Tt(this,Ps)[1](t)}setErrorTypes(t){Tt(this,ks)[1](t)}setClient(t){Tt(this,Ts)[1](t)}mount(t){if(Tt(this,Yn))throw new Error("Devtools is already mounted");const e=N6(()=>{const r=this,[n]=Tt(this,Cs),[s]=Tt(this,Ns),[i]=Tt(this,Ps),[a]=Tt(this,ks),[o]=Tt(this,Ts);let c;return Tt(this,Rs)?c=Tt(this,Rs):(c=d6(()=>Promise.resolve().then(()=>require("./335X72D7-Cc2ZtqV8.cjs"))),cr(this,Rs,c)),MI(Tt(this,Wi)),ap(c,cp({get queryFlavor(){return Tt(r,Bi)},get version(){return Tt(r,Hi)},get onlineManager(){return Tt(r,Ki)}},{get client(){return o()},get buttonPosition(){return n()},get position(){return s()},get initialIsOpen(){return i()},get errorTypes(){return a()}}))},t);cr(this,Yn,!0),cr(this,Gi,e)}unmount(){var t;if(!Tt(this,Yn))throw new Error("Devtools is not mounted");(t=Tt(this,Gi))==null||t.call(this),cr(this,Yn,!1)}},Ts=new WeakMap,Ki=new WeakMap,Bi=new WeakMap,Hi=new WeakMap,Yn=new WeakMap,Wi=new WeakMap,Cs=new WeakMap,Ns=new WeakMap,Ps=new WeakMap,ks=new WeakMap,Rs=new WeakMap,Gi=new WeakMap,th);function zI(t){const e=fi.useQueryClient(t.client),r=wn.useRef(null),{buttonPosition:n,position:s,initialIsOpen:i,errorTypes:a,styleNonce:o}=t,[c]=wn.useState(new DI({client:e,queryFlavor:"React Query",version:"5",onlineManager:fi.onlineManager,buttonPosition:n,position:s,initialIsOpen:i,errorTypes:a,styleNonce:o}));return wn.useEffect(()=>{c.setClient(e)},[e,c]),wn.useEffect(()=>{n&&c.setButtonPosition(n)},[n,c]),wn.useEffect(()=>{s&&c.setPosition(s)},[s,c]),wn.useEffect(()=>{c.setInitialIsOpen(i||!1)},[i,c]),wn.useEffect(()=>{c.setErrorTypes(a||[])},[a,c]),wn.useEffect(()=>(r.current&&c.mount(r.current),()=>{c.unmount()}),[c]),qc.jsx("div",{className:"tsqd-parent-container",ref:r})}var $I=process.env.NODE_ENV!=="development"?function(){return null}:zI;const Lu=new fi.QueryClient,VI=({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n,children:s,debugQuery:i=!1})=>(Ut.useEffect(()=>{Cf({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n,onDisconnect:hn.getState().onDisconnect()}),rh.defaultMaxListeners=100},[]),qc.jsxs(fi.QueryClientProvider,{client:Lu,children:[i&&qc.jsx($I,{initialIsOpen:!1}),s]}));exports.$PROXY=Vi;exports.$TRACK=ku;exports.A_=lo;exports.Bu=Ra;exports.D_=Vf;exports.Dc=su;exports.Do=ao;exports.Dynamic=q6;exports.E_=zf;exports.Ew=w5;exports.For=p6;exports.Hu=co;exports.Index=g6;exports.J_=RE;exports.Ko=cc;exports.Ku=Aa;exports.Match=v6;exports.P_=Zg;exports.Portal=V6;exports.PuzzleWalletProvider=VI;exports.Q_=Cf;exports.R_=Mg;exports.S_=$f;exports.Show=y6;exports.Switch=m6;exports.Vt=xr;exports.X_=eS;exports.Xv=If;exports.Yl=ih;exports.__=Mf;exports._t=$t;exports._w=_5;exports.addEventListener=fp;exports.aw=cS;exports.batch=Wx;exports.bw=v5;exports.children=Au;exports.className=hp;exports.clearDelegatedEvents=k6;exports.convertRemToPixels=LI;exports.createComponent=ap;exports.createComputed=Zc;exports.createContext=t6;exports.createEffect=Ru;exports.createMemo=or;exports.createRenderEffect=Nn;exports.createRoot=Cn;exports.createSignal=Gt;exports.createUniqueId=f6;exports.cs=Xn;exports.cw=uS;exports.delegateEvents=dp;exports.deleteNestedDataByPath=ci;exports.displayValue=NI;exports.dw=d5;exports.eb=Of;exports.en=Po;exports.ew=tS;exports.fw=h5;exports.getFormattedRecordPlaintext=j5;exports.getListener=Yx;exports.getMutationStatusColor=TI;exports.getPreferredColorScheme=UI;exports.getQueryStatusColor=OI;exports.getQueryStatusColorByLabel=CI;exports.getQueryStatusLabel=xI;exports.getSidedProp=II;exports.gw=p5;exports.hw=l5;exports.insert=_a;exports.iw=iS;exports.kt=ar;exports.lw=u5;exports.mergeProps=cp;exports.mutationSortFns=jI;exports.mw=y5;exports.nw=oS;exports.on=Gx;exports.onCleanup=Ms;exports.onMount=tp;exports.ow=aS;exports.pw=f5;exports.queryClient=Lu;exports.rw=nS;exports.setAttribute=va;exports.shortenAddress=$o;exports.sortFns=RI;exports.splitProps=up;exports.spread=pp;exports.stringify=SI;exports.sw=sS;exports.template=P6;exports.tl=Pu;exports.tw=rS;exports.untrack=Nt;exports.updateNestedDataByPath=ai;exports.use=L6;exports.useAccount=bg;exports.useBalance=wg;exports.useConnect=T5;exports.useContext=r6;exports.useCreateSharedState=C5;exports.useDecrypt=N5;exports.useDisconnect=P5;exports.useEvent=k5;exports.useEvents=R5;exports.useImportSharedState=A5;exports.useOnSessionDelete=tu;exports.useOnSessionEvent=$s;exports.useOnSessionExpire=nh;exports.useOnSessionUpdate=ru;exports.useRecords=L5;exports.useRequestCreateEvent=U5;exports.useRequestSignature=Vx;exports.useSession=mr;exports.useTransition=e6;exports.uw=lS;exports.vw=m5;exports.w_=Df;exports.ww=b5;exports.x_=qf;exports.yw=g5;
