(function(z,Xe){typeof exports=="object"&&typeof module<"u"?Xe(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],Xe):(z=typeof globalThis<"u"?globalThis:z||self,Xe(z["@puzzlehq/sdk"]=z["@puzzlehq/sdk"]||{},z.React))})(this,function(z,Xe){"use strict";function eg(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const Qt=eg(Xe),tg={name:"@puzzlehq/sdk",displayName:"Puzzle SDK",version:"0.1.44",description:"Your portal to privacy",main:"./dist/puzzle.cjs.js",module:"./dist/puzzle.es.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts",exports:{".":{import:"./dist/puzzle.es.js",require:"./dist/puzzle.cjs.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts"}},type:"module",scripts:{build:"vite build && tsc --declaration --emitDeclarationOnly --outDir dist/types","type-check":"tsc --noEmit"},dependencies:{"@puzzlehq/types":"1.0.8","@tanstack/react-query":"^4.29.5","@tanstack/react-query-devtools":"^5.13.5","@trpc/client":"^10.9.0","@trpc/react-query":"^10.9.0","@trpc/server":"^10.8.1","@types/debug":"^4.1.7","@walletconnect/core":"^2.10.6","@walletconnect/keyvaluestorage":"1.0.2","@walletconnect/modal-sign-html":"^2.6.2","@walletconnect/sign-client":"^2.10.6","@walletconnect/types":"^2.9.0","@walletconnect/utils":"^2.9.0",debug:"^4.3.4",eventemitter3:"^5.0.1",events:"^3.3.0",immer:"^9.0.19",react:"^18.2.0",ws:"^8.13.0",zustand:"^4.3.9"},devDependencies:{"@types/chrome":"^0.0.228","@types/node":"^18.11.18","@types/react":"^18.0.27","@types/react-dom":"^18.0.10",typescript:"^4.9.4",vite:"^4.4.7"},repository:{type:"git",url:"git+https://github.com/puzzlehq/puzzle-sdk.git"},keywords:["puzzle","aleo","aztec","web3","crypto\\"],author:"Puzzle",license:"ISC",bugs:{url:"https://github.com/puzzlehq/puzzle-sdk/issues"},homepage:"https://github.com/puzzlehq/puzzle-sdk#readme",pnpm:{patchedDependencies:{"@walletconnect/keyvaluestorage@1.0.2":"patches/@walletconnect__keyvaluestorage@1.0.2.patch","@walletconnect/core@2.10.6":"patches/@walletconnect__core@2.10.6.patch"},overrides:{"@walletconnect/core":"^2.10.6","@walletconnect/sign-client":"^2.10.6"}}},rg=Symbol(),yu=Object.getPrototypeOf,Pa=new WeakMap,ng=t=>t&&(Pa.has(t)?Pa.get(t):yu(t)===Object.prototype||yu(t)===Array.prototype),ig=t=>ng(t)&&t[rg]||null,vu=(t,e=!0)=>{Pa.set(t,e)},$a=t=>typeof t=="object"&&t!==null,sn=new WeakMap,so=new WeakSet,sg=(t=Object.is,e=(l,h)=>new Proxy(l,h),r=l=>$a(l)&&!so.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),n=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},i=new WeakMap,s=(l,h,f=n)=>{const p=i.get(l);if((p==null?void 0:p[0])===h)return p[1];const g=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return vu(g,!0),i.set(l,[h,g]),Reflect.ownKeys(l).forEach(v=>{if(Object.getOwnPropertyDescriptor(g,v))return;const _=Reflect.get(l,v),S={value:_,enumerable:!0,configurable:!0};if(so.has(_))vu(_,!1);else if(_ instanceof Promise)delete S.value,S.get=()=>f(_);else if(sn.has(_)){const[O,b]=sn.get(_);S.value=s(O,b(),f)}Object.defineProperty(g,v,S)}),Object.preventExtensions(g)},o=new WeakMap,a=[1,1],c=l=>{if(!$a(l))throw new Error("object required");const h=o.get(l);if(h)return h;let f=a[0];const p=new Set,g=(T,A=++a[0])=>{f!==A&&(f=A,p.forEach(k=>k(T,A)))};let v=a[1];const _=(T=++a[1])=>(v!==T&&!p.size&&(v=T,O.forEach(([A])=>{const k=A[1](T);k>f&&(f=k)})),f),S=T=>(A,k)=>{const B=[...A];B[1]=[T,...B[1]],g(B,k)},O=new Map,b=(T,A)=>{if(p.size){const k=A[3](S(T));O.set(T,[A,k])}else O.set(T,[A])},E=T=>{var A;const k=O.get(T);k&&(O.delete(T),(A=k[1])==null||A.call(k))},w=T=>(p.add(T),p.size===1&&O.forEach(([k,B],V)=>{const R=k[3](S(V));O.set(V,[k,R])}),()=>{p.delete(T),p.size===0&&O.forEach(([k,B],V)=>{B&&(B(),O.set(V,[k]))})}),x=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),u=e(x,{deleteProperty(T,A){const k=Reflect.get(T,A);E(A);const B=Reflect.deleteProperty(T,A);return B&&g(["delete",[A],k]),B},set(T,A,k,B){const V=Reflect.has(T,A),R=Reflect.get(T,A,B);if(V&&(t(R,k)||o.has(k)&&t(R,o.get(k))))return!0;E(A),$a(k)&&(k=ig(k)||k);let N=k;if(k instanceof Promise)k.then(Q=>{k.status="fulfilled",k.value=Q,g(["resolve",[A],Q])}).catch(Q=>{k.status="rejected",k.reason=Q,g(["reject",[A],Q])});else{!sn.has(k)&&r(k)&&(N=c(k));const Q=!so.has(N)&&sn.get(N);Q&&b(A,Q)}return Reflect.set(T,A,N,B),g(["set",[A],k,R]),!0}});o.set(l,u);const y=[x,_,s,w];return sn.set(u,y),Reflect.ownKeys(l).forEach(T=>{const A=Object.getOwnPropertyDescriptor(l,T);"value"in A&&(u[T]=l[T],delete A.value,delete A.writable),Object.defineProperty(x,T,A)}),u})=>[c,sn,so,t,e,r,n,i,s,o,a],[og]=sg();function on(t={}){return og(t)}function Rn(t,e,r){const n=sn.get(t);let i;const s=[],o=n[3];let a=!1;const l=o(h=>{if(s.push(h),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function ag(t,e){const r=sn.get(t),[n,i,s]=r;return s(n,i(),e)}const $t=on({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),ut={state:$t,subscribe(t){return Rn($t,()=>t($t))},push(t,e){t!==$t.view&&($t.view=t,e&&($t.data=e),$t.history.push(t))},reset(t){$t.view=t,$t.history=[t]},replace(t){$t.history.length>1&&($t.history[$t.history.length-1]=t,$t.view=t)},goBack(){if($t.history.length>1){$t.history.pop();const[t]=$t.history.slice(-1);$t.view=t}},setData(t){$t.data=t}},ae={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return ae.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return ae.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(ae.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!ae.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(ae.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(ae.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(ae.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(ae.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=ut.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},cg=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),zt=on({enabled:cg,userSessionId:"",events:[],connectedWalletId:void 0}),wu={state:zt,subscribe(t){return Rn(zt.events,()=>t(ag(zt.events[zt.events.length-1])))},initialize(){zt.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(zt.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){zt.connectedWalletId=t},click(t){if(zt.enabled){const e={type:"CLICK",name:t.name,userSessionId:zt.userSessionId,timestamp:Date.now(),data:t};zt.events.push(e)}},track(t){if(zt.enabled){const e={type:"TRACK",name:t.name,userSessionId:zt.userSessionId,timestamp:Date.now(),data:t};zt.events.push(e)}},view(t){if(zt.enabled){const e={type:"VIEW",name:t.name,userSessionId:zt.userSessionId,timestamp:Date.now(),data:t};zt.events.push(e)}}},Lr=on({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),_t={state:Lr,subscribe(t){return Rn(Lr,()=>t(Lr))},setChains(t){Lr.chains=t},setWalletConnectUri(t){Lr.walletConnectUri=t},setIsCustomDesktop(t){Lr.isCustomDesktop=t},setIsCustomMobile(t){Lr.isCustomMobile=t},setIsDataLoaded(t){Lr.isDataLoaded=t},setIsUiLoaded(t){Lr.isUiLoaded=t},setIsAuth(t){Lr.isAuth=t}},oo=on({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),ur={state:oo,subscribe(t){return Rn(oo,()=>t(oo))},setConfig(t){var e,r;wu.initialize(),_t.setChains(t.chains),_t.setIsAuth(!!t.enableAuthMode),_t.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),_t.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),ae.setModalVersionInStorage(),Object.assign(oo,t)}};var lg=Object.defineProperty,bu=Object.getOwnPropertySymbols,ug=Object.prototype.hasOwnProperty,hg=Object.prototype.propertyIsEnumerable,_u=(t,e,r)=>e in t?lg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dg=(t,e)=>{for(var r in e||(e={}))ug.call(e,r)&&_u(t,r,e[r]);if(bu)for(var r of bu(e))hg.call(e,r)&&_u(t,r,e[r]);return t};const Na="https://explorer-api.walletconnect.com",La="wcm",Ma="js-2.6.2";async function ao(t,e){const r=dg({sdkType:La,sdkVersion:Ma},e),n=new URL(t,Na);return n.searchParams.append("projectId",ur.state.projectId),Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,String(s))}),(await fetch(n)).json()}const Pn={async getDesktopListings(t){return ao("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return ao("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return ao("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return ao("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${Na}/w3m/v1/getWalletImage/${t}?projectId=${ur.state.projectId}&sdkType=${La}&sdkVersion=${Ma}`},getAssetImageUrl(t){return`${Na}/w3m/v1/getAssetImage/${t}?projectId=${ur.state.projectId}&sdkType=${La}&sdkVersion=${Ma}`}};var fg=Object.defineProperty,Eu=Object.getOwnPropertySymbols,pg=Object.prototype.hasOwnProperty,gg=Object.prototype.propertyIsEnumerable,Su=(t,e,r)=>e in t?fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mg=(t,e)=>{for(var r in e||(e={}))pg.call(e,r)&&Su(t,r,e[r]);if(Eu)for(var r of Eu(e))gg.call(e,r)&&Su(t,r,e[r]);return t};const xu=ae.isMobile(),Mr=on({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),ir={state:Mr,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=ur.state;if(t==="NONE"||e==="ALL"&&!t)return Mr.recomendedWallets;if(ae.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await Pn.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),c=t.indexOf(o.id);return a-c}),Mr.recomendedWallets=i}else{const{chains:r,isAuth:n}=_t.state,i=r==null?void 0:r.join(","),s=ae.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:ae.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=xu?await Pn.getMobileListings(o):await Pn.getDesktopListings(o);Mr.recomendedWallets=Object.values(a)}return Mr.recomendedWallets},async getWallets(t){const e=mg({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=ur.state,{recomendedWallets:i}=Mr;if(n==="ALL")return Mr.wallets;i.length?e.excludedIds=i.map(f=>f.id).join(","):ae.isArray(r)&&(e.excludedIds=r.join(",")),ae.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),_t.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=xu?await Pn.getMobileListings(e):await Pn.getDesktopListings(e),l=Object.values(a),h=o?"search":"wallets";return Mr[h]={listings:[...Mr[h].listings,...l],total:c,page:s??1},{listings:l,total:c}},getWalletImageUrl(t){return Pn.getWalletImageUrl(t)},getAssetImageUrl(t){return Pn.getAssetImageUrl(t)},resetSearch(){Mr.search={listings:[],total:0,page:1}}},ci=on({open:!1}),$n={state:ci,subscribe(t){return Rn(ci,()=>t(ci))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=_t.state;if(ae.removeWalletConnectDeepLink(),_t.setWalletConnectUri(t==null?void 0:t.uri),_t.setChains(t==null?void 0:t.chains),ut.reset("ConnectWallet"),r&&n)ci.open=!0,e();else{const i=setInterval(()=>{const s=_t.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),ci.open=!0,e())},200)}})},close(){ci.open=!1}};var yg=Object.defineProperty,Cu=Object.getOwnPropertySymbols,vg=Object.prototype.hasOwnProperty,wg=Object.prototype.propertyIsEnumerable,Ou=(t,e,r)=>e in t?yg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bg=(t,e)=>{for(var r in e||(e={}))vg.call(e,r)&&Ou(t,r,e[r]);if(Cu)for(var r of Cu(e))wg.call(e,r)&&Ou(t,r,e[r]);return t};function _g(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Hi=on({themeMode:_g()?"dark":"light"}),an={state:Hi,subscribe(t){return Rn(Hi,()=>t(Hi))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(Hi.themeMode=e),r&&(Hi.themeVariables=bg({},r))}},Nn=on({open:!1,message:"",variant:"success"}),cn={state:Nn,subscribe(t){return Rn(Nn,()=>t(Nn))},openToast(t,e){Nn.open=!0,Nn.message=t,Nn.variant=e},closeToast(){Nn.open=!1}};let Eg=class{constructor(e){this.openModal=$n.open,this.closeModal=$n.close,this.subscribeModal=$n.subscribe,this.setTheme=an.setThemeConfig,an.setThemeConfig(e),ur.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>Wx);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),_t.setIsUiLoaded(!0)}}};var kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function co(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ka(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Fa={exports:{}},li=typeof Reflect=="object"?Reflect:null,Du=li&&typeof li.apply=="function"?li.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},lo;li&&typeof li.ownKeys=="function"?lo=li.ownKeys:Object.getOwnPropertySymbols?lo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:lo=function(e){return Object.getOwnPropertyNames(e)};function Sg(t){console&&console.warn&&console.warn(t)}var Iu=Number.isNaN||function(e){return e!==e};function Je(){Je.init.call(this)}Fa.exports=Je,Fa.exports.once=Dg,Je.EventEmitter=Je,Je.prototype._events=void 0,Je.prototype._eventsCount=0,Je.prototype._maxListeners=void 0;var Au=10;function uo(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Je,"defaultMaxListeners",{enumerable:!0,get:function(){return Au},set:function(t){if(typeof t!="number"||t<0||Iu(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Au=t}}),Je.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Je.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Iu(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Tu(t){return t._maxListeners===void 0?Je.defaultMaxListeners:t._maxListeners}Je.prototype.getMaxListeners=function(){return Tu(this)},Je.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")Du(c,this,r);else for(var l=c.length,h=Lu(c,l),n=0;n<l;++n)Du(h[n],this,r);return!0};function Ru(t,e,r,n){var i,s,o;if(uo(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Tu(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Sg(a)}return t}Je.prototype.addListener=function(e,r){return Ru(this,e,r,!1)},Je.prototype.on=Je.prototype.addListener,Je.prototype.prependListener=function(e,r){return Ru(this,e,r,!0)};function xg(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Pu(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=xg.bind(n);return i.listener=r,n.wrapFn=i,i}Je.prototype.once=function(e,r){return uo(r),this.on(e,Pu(this,e,r)),this},Je.prototype.prependOnceListener=function(e,r){return uo(r),this.prependListener(e,Pu(this,e,r)),this},Je.prototype.removeListener=function(e,r){var n,i,s,o,a;if(uo(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():Cg(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},Je.prototype.off=Je.prototype.removeListener,Je.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function $u(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Og(i):Lu(i,i.length)}Je.prototype.listeners=function(e){return $u(this,e,!0)},Je.prototype.rawListeners=function(e){return $u(this,e,!1)},Je.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Nu.call(t,e)},Je.prototype.listenerCount=Nu;function Nu(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Je.prototype.eventNames=function(){return this._eventsCount>0?lo(this._events):[]};function Lu(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Cg(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Og(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Dg(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Mu(t,e,s,{once:!0}),e!=="error"&&Ig(t,i,{once:!0})})}function Ig(t,e,r){typeof t.on=="function"&&Mu(t,"error",e,r)}function Mu(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var mr=Fa.exports;const Ki=co(mr),Ag=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Tg=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Rg=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Pg(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){$g(t);return}return e}function $g(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function ho(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.at(-1)==='"'&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!Rg.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Ag.test(t)||Tg.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Pg)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function Ng(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Nt(t,...e){try{return Ng(t(...e))}catch(r){return Promise.reject(r)}}function Lg(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Mg(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function fo(t){if(Lg(t))return String(t);if(Mg(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return fo(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function ku(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Ua="base64:";function kg(t){if(typeof t=="string")return t;ku();const e=Buffer.from(t).toString("base64");return Ua+e}function Fg(t){return typeof t!="string"||!t.startsWith(Ua)?t:(ku(),Buffer.from(t.slice(Ua.length),"base64"))}function sr(t){return t?t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Ug(...t){return sr(t.join(":"))}function po(t){return t=sr(t),t?t+":":""}function B8(t){return t}const jg="memory",Bg=()=>{const t=new Map;return{name:jg,options:{},hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return Array.from(t.keys())},clear(){t.clear()},dispose(){t.clear()}}};function qg(t={}){const e={mounts:{"":t.driver||Bg()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const h of e.mountpoints)if(l.startsWith(h))return{base:h,relativeKey:l.slice(h.length),driver:e.mounts[h]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,h)=>e.mountpoints.filter(f=>f.startsWith(l)||h&&l.startsWith(f)).map(f=>({relativeBase:l.length>f.length?l.slice(f.length):void 0,mountpoint:f,driver:e.mounts[f]})),i=(l,h)=>{if(e.watching){h=sr(h);for(const f of e.watchListeners)f(l,h)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await Fu(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,h,f)=>{const p=new Map,g=v=>{let _=p.get(v.base);return _||(_={driver:v.driver,base:v.base,items:[]},p.set(v.base,_)),_};for(const v of l){const _=typeof v=="string",S=sr(_?v:v.key),O=_?void 0:v.value,b=_||!v.options?h:{...h,...v.options},E=r(S);g(E).items.push({key:S,value:O,relativeKey:E.relativeKey,options:b})}return Promise.all([...p.values()].map(v=>f(v))).then(v=>v.flat())},c={hasItem(l,h={}){l=sr(l);const{relativeKey:f,driver:p}=r(l);return Nt(p.hasItem,f,h)},getItem(l,h={}){l=sr(l);const{relativeKey:f,driver:p}=r(l);return Nt(p.getItem,f,h).then(g=>ho(g))},getItems(l,h){return a(l,h,f=>f.driver.getItems?Nt(f.driver.getItems,f.items.map(p=>({key:p.relativeKey,options:p.options})),h).then(p=>p.map(g=>({key:Ug(f.base,g.key),value:ho(g.value)}))):Promise.all(f.items.map(p=>Nt(f.driver.getItem,p.relativeKey,p.options).then(g=>({key:p.key,value:ho(g)})))))},getItemRaw(l,h={}){l=sr(l);const{relativeKey:f,driver:p}=r(l);return p.getItemRaw?Nt(p.getItemRaw,f,h):Nt(p.getItem,f,h).then(g=>Fg(g))},async setItem(l,h,f={}){if(h===void 0)return c.removeItem(l);l=sr(l);const{relativeKey:p,driver:g}=r(l);g.setItem&&(await Nt(g.setItem,p,fo(h),f),g.watch||i("update",l))},async setItems(l,h){await a(l,h,async f=>{f.driver.setItems&&await Nt(f.driver.setItems,f.items.map(p=>({key:p.relativeKey,value:fo(p.value),options:p.options})),h),f.driver.setItem&&await Promise.all(f.items.map(p=>Nt(f.driver.setItem,p.relativeKey,fo(p.value),p.options)))})},async setItemRaw(l,h,f={}){if(h===void 0)return c.removeItem(l,f);l=sr(l);const{relativeKey:p,driver:g}=r(l);if(g.setItemRaw)await Nt(g.setItemRaw,p,h,f);else if(g.setItem)await Nt(g.setItem,p,kg(h),f);else return;g.watch||i("update",l)},async removeItem(l,h={}){typeof h=="boolean"&&(h={removeMeta:h}),l=sr(l);const{relativeKey:f,driver:p}=r(l);p.removeItem&&(await Nt(p.removeItem,f,h),(h.removeMeta||h.removeMata)&&await Nt(p.removeItem,f+"$",h),p.watch||i("remove",l))},async getMeta(l,h={}){typeof h=="boolean"&&(h={nativeOnly:h}),l=sr(l);const{relativeKey:f,driver:p}=r(l),g=Object.create(null);if(p.getMeta&&Object.assign(g,await Nt(p.getMeta,f,h)),!h.nativeOnly){const v=await Nt(p.getItem,f+"$",h).then(_=>ho(_));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(g,v))}return g},setMeta(l,h,f={}){return this.setItem(l+"$",h,f)},removeMeta(l,h={}){return this.removeItem(l+"$",h)},async getKeys(l,h={}){l=po(l);const f=n(l,!0);let p=[];const g=[];for(const v of f){const S=(await Nt(v.driver.getKeys,v.relativeBase,h)).map(O=>v.mountpoint+sr(O)).filter(O=>!p.some(b=>O.startsWith(b)));g.push(...S),p=[v.mountpoint,...p.filter(O=>!O.startsWith(v.mountpoint))]}return l?g.filter(v=>v.startsWith(l)&&!v.endsWith("$")):g.filter(v=>!v.endsWith("$"))},async clear(l,h={}){l=po(l),await Promise.all(n(l,!1).map(async f=>{if(f.driver.clear)return Nt(f.driver.clear,f.relativeBase,h);if(f.driver.removeItem){const p=await f.driver.getKeys(f.relativeBase||"",h);return Promise.all(p.map(g=>f.driver.removeItem(g,h)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>Uu(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(h=>h!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,h){if(l=po(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((f,p)=>p.length-f.length)),e.mounts[l]=h,e.watching&&Promise.resolve(Fu(h,i,l)).then(f=>{e.unwatch[l]=f}).catch(console.error),c},async unmount(l,h=!0){l=po(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l](),delete e.unwatch[l]),h&&await Uu(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=sr(l)+":";const h=r(l);return{driver:h.driver,base:h.base}},getMounts(l="",h={}){return l=sr(l),n(l,h.parents).map(p=>({driver:p.driver,base:p.mountpoint}))}};return c}function Fu(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function Uu(t){typeof t.dispose=="function"&&await Nt(t.dispose)}function Ln(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function ju(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=Ln(r);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}let ja;function Zi(){return ja||(ja=ju("keyval-store","keyval")),ja}function Bu(t,e=Zi()){return e("readonly",r=>Ln(r.get(t)))}function zg(t,e,r=Zi()){return r("readwrite",n=>(n.put(e,t),Ln(n.transaction)))}function Wg(t,e=Zi()){return e("readwrite",r=>(r.delete(t),Ln(r.transaction)))}function Vg(t=Zi()){return t("readwrite",e=>(e.clear(),Ln(e.transaction)))}function Hg(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Ln(t.transaction)}function Kg(t=Zi()){return t("readonly",e=>{if(e.getAllKeys)return Ln(e.getAllKeys());const r=[];return Hg(e,n=>r.push(n.key)).then(()=>r)})}const Zg=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),Gg=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function go(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Gg(t)}catch{return t}}function Gi(t){return typeof t=="string"?t:Zg(t)||""}const Qg="idb-keyval";var Yg=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=ju(t.dbName,t.storeName)),{name:Qg,options:t,async hasItem(i){return!(typeof await Bu(r(i),n)>"u")},async getItem(i){return await Bu(r(i),n)??null},setItem(i,s){return zg(r(i),s,n)},removeItem(i){return Wg(r(i),n)},getKeys(){return Kg(n)},clear(){return Vg(n)}}};const Jg="WALLET_CONNECT_V2_INDEXED_DB",Xg="keyvaluestorage";let em=class{constructor(){this.indexedDb=qg({driver:Yg({dbName:Jg,storeName:Xg})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Gi(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mo={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ba<"u"&&Ba.localStorage?mo.exports=Ba.localStorage:typeof window<"u"&&window.localStorage?mo.exports=window.localStorage:mo.exports=new e})();function tm(t){var e;return[t[0],go((e=t[1])!=null?e:"")]}let rm=class{constructor(){this.localStorage=mo.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(tm)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return go(r)}async setItem(e,r){this.localStorage.setItem(e,Gi(r))}async removeItem(e){this.localStorage.removeItem(e)}};const nm="wc_storage_version",qu=1,im=async(t,e,r)=>{const n=nm,i=await e.getItem(n);if(i&&i>=qu){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,qu),r(e),sm(t,o)},sm=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let om=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new rm;this.storage=e;try{const r=new em;im(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var ui={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var qa=function(t,e){return qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},qa(t,e)};function am(t,e){qa(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var za=function(){return za=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},za.apply(this,arguments)};function cm(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function lm(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function um(t,e){return function(r,n){e(r,n,t)}}function hm(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function dm(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(h){try{l(n.next(h))}catch(f){o(f)}}function c(h){try{l(n.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function fm(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(h){return c([l,h])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(h){l=[6,h],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function pm(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function gm(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Wa(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zu(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function mm(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(zu(arguments[e]));return t}function ym(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Qi(t){return this instanceof Qi?(this.v=t,this):new Qi(t)}function vm(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(g){return new Promise(function(v,_){s.push([p,g,v,_])>1||a(p,g)})})}function a(p,g){try{c(n[p](g))}catch(v){f(s[0][3],v)}}function c(p){p.value instanceof Qi?Promise.resolve(p.value.v).then(l,h):f(s[0][2],p)}function l(p){a("next",p)}function h(p){a("throw",p)}function f(p,g){p(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function wm(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Qi(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function bm(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Wa=="function"?Wa(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function _m(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Em(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Sm(t){return t&&t.__esModule?t:{default:t}}function xm(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Cm(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const Fr=ka(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return za},__asyncDelegator:wm,__asyncGenerator:vm,__asyncValues:bm,__await:Qi,__awaiter:dm,__classPrivateFieldGet:xm,__classPrivateFieldSet:Cm,__createBinding:pm,__decorate:lm,__exportStar:gm,__extends:am,__generator:fm,__importDefault:Sm,__importStar:Em,__makeTemplateObject:_m,__metadata:hm,__param:um,__read:zu,__rest:cm,__spread:mm,__spreadArrays:ym,__values:Wa},Symbol.toStringTag,{value:"Module"})));var Yi={},oe={},Va={},Ji={},Wu;function Om(){if(Wu)return Ji;Wu=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Ji.delay=t,Ji}var Mn={},Ha={},kn={},Vu;function Dm(){return Vu||(Vu=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.ONE_THOUSAND=kn.ONE_HUNDRED=void 0,kn.ONE_HUNDRED=100,kn.ONE_THOUSAND=1e3),kn}var Ka={},Hu;function Im(){return Hu||(Hu=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Ka)),Ka}var Ku;function Zu(){return Ku||(Ku=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Fr;e.__exportStar(Dm(),t),e.__exportStar(Im(),t)}(Ha)),Ha}var Gu;function Am(){if(Gu)return Mn;Gu=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.fromMiliseconds=Mn.toMiliseconds=void 0;const t=Zu();function e(n){return n*t.ONE_THOUSAND}Mn.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Mn.fromMiliseconds=r,Mn}var Qu;function Tm(){return Qu||(Qu=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Fr;e.__exportStar(Om(),t),e.__exportStar(Am(),t)}(Va)),Va}var hi={},Yu;function Rm(){if(Yu)return hi;Yu=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return hi.Watch=t,hi.default=t,hi}var Za={},Xi={},Ju;function Pm(){if(Ju)return Xi;Ju=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.IWatch=void 0;class t{}return Xi.IWatch=t,Xi}var Xu;function $m(){return Xu||(Xu=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Fr.__exportStar(Pm(),t)}(Za)),Za}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Fr;e.__exportStar(Tm(),t),e.__exportStar(Rm(),t),e.__exportStar($m(),t),e.__exportStar(Zu(),t)})(oe);var Ga={},es={};let Fn=class{};const Nm=ka(Object.freeze(Object.defineProperty({__proto__:null,IEvents:Fn},Symbol.toStringTag,{value:"Module"})));var eh;function Lm(){if(eh)return es;eh=1,Object.defineProperty(es,"__esModule",{value:!0}),es.IHeartBeat=void 0;const t=Nm;class e extends t.IEvents{constructor(n){super()}}return es.IHeartBeat=e,es}var th;function rh(){return th||(th=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Fr.__exportStar(Lm(),t)}(Ga)),Ga}var Qa={},Un={},nh;function Mm(){if(nh)return Un;nh=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.HEARTBEAT_EVENTS=Un.HEARTBEAT_INTERVAL=void 0;const t=oe;return Un.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,Un.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Un}var ih;function sh(){return ih||(ih=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Fr.__exportStar(Mm(),t)}(Qa)),Qa}var oh;function km(){if(oh)return Yi;oh=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.HeartBeat=void 0;const t=Fr,e=mr,r=oe,n=rh(),i=sh();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const c=new s(a);return yield c.init(),c})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,c){this.events.on(a,c)}once(a,c){this.events.once(a,c)}off(a,c){this.events.off(a,c)}removeListener(a,c){this.events.removeListener(a,c)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Yi.HeartBeat=s,Yi}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Fr;e.__exportStar(km(),t),e.__exportStar(rh(),t),e.__exportStar(sh(),t)})(ui);var We={},Ya,ah;function Fm(){if(ah)return Ya;ah=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Ya=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var l=1;l<a;l++)c[l]=s(n[l]);return c.join(" ")}if(typeof r!="string")return r;var h=n.length;if(h===0)return r;for(var f="",p=1-o,g=-1,v=r&&r.length||0,_=0;_<v;){if(r.charCodeAt(_)===37&&_+1<v){switch(g=g>-1?g:0,r.charCodeAt(_+1)){case 100:case 102:if(p>=h||n[p]==null)break;g<_&&(f+=r.slice(g,_)),f+=Number(n[p]),g=_+2,_++;break;case 105:if(p>=h||n[p]==null)break;g<_&&(f+=r.slice(g,_)),f+=Math.floor(Number(n[p])),g=_+2,_++;break;case 79:case 111:case 106:if(p>=h||n[p]===void 0)break;g<_&&(f+=r.slice(g,_));var S=typeof n[p];if(S==="string"){f+="'"+n[p]+"'",g=_+2,_++;break}if(S==="function"){f+=n[p].name||"<anonymous>",g=_+2,_++;break}f+=s(n[p]),g=_+2,_++;break;case 115:if(p>=h)break;g<_&&(f+=r.slice(g,_)),f+=String(n[p]),g=_+2,_++;break;case 37:g<_&&(f+=r.slice(g,_)),f+="%",g=_+2,_++,p--;break}++p}++_}return g===-1?r:(g<v&&(f+=r.slice(g)),f)}return Ya}var Ja,ch;function Um(){if(ch)return Ja;ch=1;const t=Fm();Ja=i;const e=x().console||{},r={mapHttpRequest:v,mapHttpResponse:v,wrapRequestSerializer:_,wrapResponseSerializer:_,wrapErrorSerializer:_,req:v,res:v,err:p};function n(m,u){return Array.isArray(m)?m.filter(function(T){return T!=="!stdSerializers.err"}):m===!0?Object.keys(u):!1}function i(m){m=m||{},m.browser=m.browser||{};const u=m.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const y=m.browser.write||e;m.browser.write&&(m.browser.asObject=!0);const T=m.serializers||{},A=n(m.browser.serialize,T);let k=m.browser.serialize;Array.isArray(m.browser.serialize)&&m.browser.serialize.indexOf("!stdSerializers.err")>-1&&(k=!1);const B=["error","fatal","warn","info","debug","trace"];typeof y=="function"&&(y.error=y.fatal=y.warn=y.info=y.debug=y.trace=y),m.enabled===!1&&(m.level="silent");const V=m.level||"info",R=Object.create(y);R.log||(R.log=S),Object.defineProperty(R,"levelVal",{get:Q}),Object.defineProperty(R,"level",{get:H,set:j});const N={transmit:u,serialize:A,asObject:m.browser.asObject,levels:B,timestamp:g(m)};R.levels=i.levels,R.level=V,R.setMaxListeners=R.getMaxListeners=R.emit=R.addListener=R.on=R.prependListener=R.once=R.prependOnceListener=R.removeListener=R.removeAllListeners=R.listeners=R.listenerCount=R.eventNames=R.write=R.flush=S,R.serializers=T,R._serialize=A,R._stdErrSerialize=k,R.child=W,u&&(R._logEvent=f());function Q(){return this.level==="silent"?1/0:this.levels.values[this.level]}function H(){return this._level}function j(U){if(U!=="silent"&&!this.levels.values[U])throw Error("unknown level "+U);this._level=U,s(N,R,"error","log"),s(N,R,"fatal","error"),s(N,R,"warn","error"),s(N,R,"info","log"),s(N,R,"debug","log"),s(N,R,"trace","log")}function W(U,K){if(!U)throw new Error("missing bindings for child Pino");K=K||{},A&&U.serializers&&(K.serializers=U.serializers);const pe=K.serializers;if(A&&pe){var Z=Object.assign({},T,pe),ue=m.browser.serialize===!0?Object.keys(Z):A;delete U.serializers,c([U],ue,Z,this._stdErrSerialize)}function ne(le){this._childLevel=(le._childLevel|0)+1,this.error=l(le,U,"error"),this.fatal=l(le,U,"fatal"),this.warn=l(le,U,"warn"),this.info=l(le,U,"info"),this.debug=l(le,U,"debug"),this.trace=l(le,U,"trace"),Z&&(this.serializers=Z,this._serialize=ue),u&&(this._logEvent=f([].concat(le._logEvent.bindings,U)))}return ne.prototype=this,new ne(this)}return R}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:O,epochTime:b,unixTime:E,isoTime:w});function s(m,u,y,T){const A=Object.getPrototypeOf(u);u[y]=u.levelVal>u.levels.values[y]?S:A[y]?A[y]:e[y]||e[T]||S,o(m,u,y)}function o(m,u,y){!m.transmit&&u[y]===S||(u[y]=function(T){return function(){const k=m.timestamp(),B=new Array(arguments.length),V=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var R=0;R<B.length;R++)B[R]=arguments[R];if(m.serialize&&!m.asObject&&c(B,this._serialize,this.serializers,this._stdErrSerialize),m.asObject?T.call(V,a(this,y,B,k)):T.apply(V,B),m.transmit){const N=m.transmit.level||u.level,Q=i.levels.values[N],H=i.levels.values[y];if(H<Q)return;h(this,{ts:k,methodLevel:y,methodValue:H,transmitLevel:N,transmitValue:i.levels.values[m.transmit.level||u.level],send:m.transmit.send,val:u.levelVal},B)}}}(u[y]))}function a(m,u,y,T){m._serialize&&c(y,m._serialize,m.serializers,m._stdErrSerialize);const A=y.slice();let k=A[0];const B={};T&&(B.time=T),B.level=i.levels.values[u];let V=(m._childLevel|0)+1;if(V<1&&(V=1),k!==null&&typeof k=="object"){for(;V--&&typeof A[0]=="object";)Object.assign(B,A.shift());k=A.length?t(A.shift(),A):void 0}else typeof k=="string"&&(k=t(A.shift(),A));return k!==void 0&&(B.msg=k),B}function c(m,u,y,T){for(const A in m)if(T&&m[A]instanceof Error)m[A]=i.stdSerializers.err(m[A]);else if(typeof m[A]=="object"&&!Array.isArray(m[A]))for(const k in m[A])u&&u.indexOf(k)>-1&&k in y&&(m[A][k]=y[k](m[A][k]))}function l(m,u,y){return function(){const T=new Array(1+arguments.length);T[0]=u;for(var A=1;A<T.length;A++)T[A]=arguments[A-1];return m[y].apply(this,T)}}function h(m,u,y){const T=u.send,A=u.ts,k=u.methodLevel,B=u.methodValue,V=u.val,R=m._logEvent.bindings;c(y,m._serialize||Object.keys(m.serializers),m.serializers,m._stdErrSerialize===void 0?!0:m._stdErrSerialize),m._logEvent.ts=A,m._logEvent.messages=y.filter(function(N){return R.indexOf(N)===-1}),m._logEvent.level.label=k,m._logEvent.level.value=B,T(k,m._logEvent,V),m._logEvent=f(R)}function f(m){return{ts:0,messages:[],bindings:m||[],level:{label:"",value:0}}}function p(m){const u={type:m.constructor.name,msg:m.message,stack:m.stack};for(const y in m)u[y]===void 0&&(u[y]=m[y]);return u}function g(m){return typeof m.timestamp=="function"?m.timestamp:m.timestamp===!1?O:b}function v(){return{}}function _(m){return m}function S(){}function O(){return!1}function b(){return Date.now()}function E(){return Math.round(Date.now()/1e3)}function w(){return new Date(Date.now()).toISOString()}function x(){function m(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return m(self)||m(window)||m(this)||{}}}return Ja}var jn={},lh;function uh(){return lh||(lh=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.PINO_CUSTOM_CONTEXT_KEY=jn.PINO_LOGGER_DEFAULTS=void 0,jn.PINO_LOGGER_DEFAULTS={level:"info"},jn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),jn}var Yt={},hh;function jm(){if(hh)return Yt;hh=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.generateChildLogger=Yt.formatChildLoggerContext=Yt.getLoggerContext=Yt.setBrowserLoggerContext=Yt.getBrowserLoggerContext=Yt.getDefaultLoggerOptions=void 0;const t=uh();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}Yt.getDefaultLoggerOptions=e;function r(a,c=t.PINO_CUSTOM_CONTEXT_KEY){return a[c]||""}Yt.getBrowserLoggerContext=r;function n(a,c,l=t.PINO_CUSTOM_CONTEXT_KEY){return a[l]=c,a}Yt.setBrowserLoggerContext=n;function i(a,c=t.PINO_CUSTOM_CONTEXT_KEY){let l="";return typeof a.bindings>"u"?l=r(a,c):l=a.bindings().context||"",l}Yt.getLoggerContext=i;function s(a,c,l=t.PINO_CUSTOM_CONTEXT_KEY){const h=i(a,l);return h.trim()?`${h}/${c}`:c}Yt.formatChildLoggerContext=s;function o(a,c,l=t.PINO_CUSTOM_CONTEXT_KEY){const h=s(a,c,l),f=a.child({context:h});return n(f,h,l)}return Yt.generateChildLogger=o,Yt}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=Fr,r=e.__importDefault(Um());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(uh(),t),e.__exportStar(jm(),t)})(We);let dh=class extends Fn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},Bm=class{constructor(e,r,n){this.core=e,this.logger=r}},fh=class extends Fn{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},ph=class{constructor(e,r){this.logger=e,this.core=r}},gh=class extends Fn{constructor(e,r){super(),this.relayer=e,this.logger=r}},mh=class extends Fn{constructor(e){super()}},yh=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},qm=class{constructor(){this.map=new Map}},vh=class extends Fn{constructor(e,r){super(),this.relayer=e,this.logger=r}},zm=class{constructor(e,r){this.core=e,this.logger=r}},wh=class extends Fn{constructor(e,r){super(),this.core=e,this.logger=r}},Wm=class{constructor(e,r){this.logger=e,this.core=r}},bh=class{constructor(e,r){this.projectId=e,this.logger=r}},Vm=class extends Ki{constructor(){super()}},_h=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},Hm=class extends mr.EventEmitter{constructor(){super()}},Eh=class{constructor(e){this.client=e}};var Xa={},di={},yo={},vo={};Object.defineProperty(vo,"__esModule",{value:!0}),vo.BrowserRandomSource=void 0;const Sh=65536;class Km{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Sh)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Sh)));return r}}vo.BrowserRandomSource=Km;function Zm(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wo={},hr={};Object.defineProperty(hr,"__esModule",{value:!0});function Gm(t){for(var e=0;e<t.length;e++)t[e]=0;return t}hr.wipe=Gm;const Qm=ka(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(wo,"__esModule",{value:!0}),wo.NodeRandomSource=void 0;const Ym=hr;class Jm{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Zm<"u"){const e=Qm;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,Ym.wipe)(r),n}}wo.NodeRandomSource=Jm,Object.defineProperty(yo,"__esModule",{value:!0}),yo.SystemRandomSource=void 0;const Xm=vo,e1=wo;class t1{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Xm.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new e1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}yo.SystemRandomSource=t1;var we={},xh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var l=a>>>16&65535,h=a&65535,f=c>>>16&65535,p=c&65535;return h*p+(l*p+h*f<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(xh),Object.defineProperty(we,"__esModule",{value:!0});var Ch=xh;function r1(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}we.readInt16BE=r1;function n1(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}we.readUint16BE=n1;function i1(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}we.readInt16LE=i1;function s1(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}we.readUint16LE=s1;function Oh(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}we.writeUint16BE=Oh,we.writeInt16BE=Oh;function Dh(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}we.writeUint16LE=Dh,we.writeInt16LE=Dh;function ec(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}we.readInt32BE=ec;function tc(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}we.readUint32BE=tc;function rc(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}we.readInt32LE=rc;function nc(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}we.readUint32LE=nc;function bo(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}we.writeUint32BE=bo,we.writeInt32BE=bo;function _o(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}we.writeUint32LE=_o,we.writeInt32LE=_o;function o1(t,e){e===void 0&&(e=0);var r=ec(t,e),n=ec(t,e+4);return r*4294967296+n-(n>>31)*4294967296}we.readInt64BE=o1;function a1(t,e){e===void 0&&(e=0);var r=tc(t,e),n=tc(t,e+4);return r*4294967296+n}we.readUint64BE=a1;function c1(t,e){e===void 0&&(e=0);var r=rc(t,e),n=rc(t,e+4);return n*4294967296+r-(r>>31)*4294967296}we.readInt64LE=c1;function l1(t,e){e===void 0&&(e=0);var r=nc(t,e),n=nc(t,e+4);return n*4294967296+r}we.readUint64LE=l1;function Ih(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),bo(t/4294967296>>>0,e,r),bo(t>>>0,e,r+4),e}we.writeUint64BE=Ih,we.writeInt64BE=Ih;function Ah(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),_o(t>>>0,e,r),_o(t/4294967296>>>0,e,r+4),e}we.writeUint64LE=Ah,we.writeInt64LE=Ah;function u1(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}we.readUintBE=u1;function h1(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}we.readUintLE=h1;function d1(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Ch.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}we.writeUintBE=d1;function f1(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Ch.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}we.writeUintLE=f1;function p1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}we.readFloat32BE=p1;function g1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}we.readFloat32LE=g1;function m1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}we.readFloat64BE=m1;function y1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}we.readFloat64LE=y1;function v1(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}we.writeFloat32BE=v1;function w1(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}we.writeFloat32LE=w1;function b1(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}we.writeFloat64BE=b1;function _1(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}we.writeFloat64LE=_1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=yo,r=we,n=hr;t.defaultRandomSource=new e.SystemRandomSource;function i(l,h=t.defaultRandomSource){return h.randomBytes(l)}t.randomBytes=i;function s(l=t.defaultRandomSource){const h=i(4,l),f=(0,r.readUint32LE)(h);return(0,n.wipe)(h),f}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,h=o,f=t.defaultRandomSource){if(h.length<2)throw new Error("randomString charset is too short");if(h.length>256)throw new Error("randomString charset is too long");let p="";const g=h.length,v=256-256%g;for(;l>0;){const _=i(Math.ceil(l*256/v),f);for(let S=0;S<_.length&&l>0;S++){const O=_[S];O<v&&(p+=h.charAt(O%g),l--)}(0,n.wipe)(_)}return p}t.randomString=a;function c(l,h=o,f=t.defaultRandomSource){const p=Math.ceil(l/(Math.log(h.length)/Math.LN2));return a(p,h,f)}t.randomStringForEntropy=c}(di);var Th={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=we,r=hr;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var h=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=c[h++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(h=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,h,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[h++],l--;return this},a.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,h=this._bufferLength,f=l/536870912|0,p=l<<3,g=l%128<112?128:256;this._buffer[h]=128;for(var v=h+1;v<g-8;v++)this._buffer[v]=0;e.writeUint32BE(f,this._buffer,g-8),e.writeUint32BE(p,this._buffer,g-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,g),this._finished=!0}for(var v=0;v<this.digestLength/8;v++)e.writeUint32BE(this._stateHi[v],c,v*8),e.writeUint32BE(this._stateLo[v],c,v*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,l,h,f,p,g){for(var v=l[0],_=l[1],S=l[2],O=l[3],b=l[4],E=l[5],w=l[6],x=l[7],m=h[0],u=h[1],y=h[2],T=h[3],A=h[4],k=h[5],B=h[6],V=h[7],R,N,Q,H,j,W,U,K;g>=128;){for(var pe=0;pe<16;pe++){var Z=8*pe+p;a[pe]=e.readUint32BE(f,Z),c[pe]=e.readUint32BE(f,Z+4)}for(var pe=0;pe<80;pe++){var ue=v,ne=_,le=S,M=O,L=b,P=E,d=w,I=x,Y=m,te=u,Re=y,Pe=T,xe=A,qe=k,ct=B,et=V;if(R=x,N=V,j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=(b>>>14|A<<32-14)^(b>>>18|A<<32-18)^(A>>>41-32|b<<32-(41-32)),N=(A>>>14|b<<32-14)^(A>>>18|b<<32-18)^(b>>>41-32|A<<32-(41-32)),j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,R=b&E^~b&w,N=A&k^~A&B,j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,R=i[pe*2],N=i[pe*2+1],j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,R=a[pe%16],N=c[pe%16],j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,Q=U&65535|K<<16,H=j&65535|W<<16,R=Q,N=H,j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=(v>>>28|m<<32-28)^(m>>>34-32|v<<32-(34-32))^(m>>>39-32|v<<32-(39-32)),N=(m>>>28|v<<32-28)^(v>>>34-32|m<<32-(34-32))^(v>>>39-32|m<<32-(39-32)),j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,R=v&_^v&S^_&S,N=m&u^m&y^u&y,j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,I=U&65535|K<<16,et=j&65535|W<<16,R=M,N=Pe,j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=Q,N=H,j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,M=U&65535|K<<16,Pe=j&65535|W<<16,_=ue,S=ne,O=le,b=M,E=L,w=P,x=d,v=I,u=Y,y=te,T=Re,A=Pe,k=xe,B=qe,V=ct,m=et,pe%16===15)for(var Z=0;Z<16;Z++)R=a[Z],N=c[Z],j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=a[(Z+9)%16],N=c[(Z+9)%16],j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,Q=a[(Z+1)%16],H=c[(Z+1)%16],R=(Q>>>1|H<<32-1)^(Q>>>8|H<<32-8)^Q>>>7,N=(H>>>1|Q<<32-1)^(H>>>8|Q<<32-8)^(H>>>7|Q<<32-7),j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,Q=a[(Z+14)%16],H=c[(Z+14)%16],R=(Q>>>19|H<<32-19)^(H>>>61-32|Q<<32-(61-32))^Q>>>6,N=(H>>>19|Q<<32-19)^(Q>>>61-32|H<<32-(61-32))^(H>>>6|Q<<32-6),j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,a[Z]=U&65535|K<<16,c[Z]=j&65535|W<<16}R=v,N=m,j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=l[0],N=h[0],j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,l[0]=v=U&65535|K<<16,h[0]=m=j&65535|W<<16,R=_,N=u,j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=l[1],N=h[1],j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,l[1]=_=U&65535|K<<16,h[1]=u=j&65535|W<<16,R=S,N=y,j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=l[2],N=h[2],j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,l[2]=S=U&65535|K<<16,h[2]=y=j&65535|W<<16,R=O,N=T,j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=l[3],N=h[3],j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,l[3]=O=U&65535|K<<16,h[3]=T=j&65535|W<<16,R=b,N=A,j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=l[4],N=h[4],j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,l[4]=b=U&65535|K<<16,h[4]=A=j&65535|W<<16,R=E,N=k,j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=l[5],N=h[5],j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,l[5]=E=U&65535|K<<16,h[5]=k=j&65535|W<<16,R=w,N=B,j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=l[6],N=h[6],j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,l[6]=w=U&65535|K<<16,h[6]=B=j&65535|W<<16,R=x,N=V,j=N&65535,W=N>>>16,U=R&65535,K=R>>>16,R=l[7],N=h[7],j+=N&65535,W+=N>>>16,U+=R&65535,K+=R>>>16,W+=j>>>16,U+=W>>>16,K+=U>>>16,l[7]=x=U&65535|K<<16,h[7]=V=j&65535|W<<16,p+=128,g-=128}return p}function o(a){var c=new n;c.update(a);var l=c.digest();return c.clean(),l}t.hash=o})(Th),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=di,r=Th,n=hr;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(M){const L=new Float64Array(16);if(M)for(let P=0;P<M.length;P++)L[P]=M[P];return L}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function g(M,L){for(let P=0;P<16;P++)M[P]=L[P]|0}function v(M){let L=1;for(let P=0;P<16;P++){let d=M[P]+L+65535;L=Math.floor(d/65536),M[P]=d-L*65536}M[0]+=L-1+37*(L-1)}function _(M,L,P){const d=~(P-1);for(let I=0;I<16;I++){const Y=d&(M[I]^L[I]);M[I]^=Y,L[I]^=Y}}function S(M,L){const P=i(),d=i();for(let I=0;I<16;I++)d[I]=L[I];v(d),v(d),v(d);for(let I=0;I<2;I++){P[0]=d[0]-65517;for(let te=1;te<15;te++)P[te]=d[te]-65535-(P[te-1]>>16&1),P[te-1]&=65535;P[15]=d[15]-32767-(P[14]>>16&1);const Y=P[15]>>16&1;P[14]&=65535,_(d,P,1-Y)}for(let I=0;I<16;I++)M[2*I]=d[I]&255,M[2*I+1]=d[I]>>8}function O(M,L){let P=0;for(let d=0;d<32;d++)P|=M[d]^L[d];return(1&P-1>>>8)-1}function b(M,L){const P=new Uint8Array(32),d=new Uint8Array(32);return S(P,M),S(d,L),O(P,d)}function E(M){const L=new Uint8Array(32);return S(L,M),L[0]&1}function w(M,L){for(let P=0;P<16;P++)M[P]=L[2*P]+(L[2*P+1]<<8);M[15]&=32767}function x(M,L,P){for(let d=0;d<16;d++)M[d]=L[d]+P[d]}function m(M,L,P){for(let d=0;d<16;d++)M[d]=L[d]-P[d]}function u(M,L,P){let d,I,Y=0,te=0,Re=0,Pe=0,xe=0,qe=0,ct=0,et=0,Fe=0,Le=0,Ce=0,Ie=0,Oe=0,be=0,ve=0,he=0,Ae=0,$e=0,ge=0,Me=0,ze=0,Ze=0,Ge=0,Ve=0,pr=0,_r=0,Vr=0,jt=0,Hr=0,Er=0,On=0,lt=P[0],it=P[1],mt=P[2],dt=P[3],yt=P[4],st=P[5],Et=P[6],It=P[7],At=P[8],St=P[9],Tt=P[10],xt=P[11],vt=P[12],rt=P[13],D=P[14],F=P[15];d=L[0],Y+=d*lt,te+=d*it,Re+=d*mt,Pe+=d*dt,xe+=d*yt,qe+=d*st,ct+=d*Et,et+=d*It,Fe+=d*At,Le+=d*St,Ce+=d*Tt,Ie+=d*xt,Oe+=d*vt,be+=d*rt,ve+=d*D,he+=d*F,d=L[1],te+=d*lt,Re+=d*it,Pe+=d*mt,xe+=d*dt,qe+=d*yt,ct+=d*st,et+=d*Et,Fe+=d*It,Le+=d*At,Ce+=d*St,Ie+=d*Tt,Oe+=d*xt,be+=d*vt,ve+=d*rt,he+=d*D,Ae+=d*F,d=L[2],Re+=d*lt,Pe+=d*it,xe+=d*mt,qe+=d*dt,ct+=d*yt,et+=d*st,Fe+=d*Et,Le+=d*It,Ce+=d*At,Ie+=d*St,Oe+=d*Tt,be+=d*xt,ve+=d*vt,he+=d*rt,Ae+=d*D,$e+=d*F,d=L[3],Pe+=d*lt,xe+=d*it,qe+=d*mt,ct+=d*dt,et+=d*yt,Fe+=d*st,Le+=d*Et,Ce+=d*It,Ie+=d*At,Oe+=d*St,be+=d*Tt,ve+=d*xt,he+=d*vt,Ae+=d*rt,$e+=d*D,ge+=d*F,d=L[4],xe+=d*lt,qe+=d*it,ct+=d*mt,et+=d*dt,Fe+=d*yt,Le+=d*st,Ce+=d*Et,Ie+=d*It,Oe+=d*At,be+=d*St,ve+=d*Tt,he+=d*xt,Ae+=d*vt,$e+=d*rt,ge+=d*D,Me+=d*F,d=L[5],qe+=d*lt,ct+=d*it,et+=d*mt,Fe+=d*dt,Le+=d*yt,Ce+=d*st,Ie+=d*Et,Oe+=d*It,be+=d*At,ve+=d*St,he+=d*Tt,Ae+=d*xt,$e+=d*vt,ge+=d*rt,Me+=d*D,ze+=d*F,d=L[6],ct+=d*lt,et+=d*it,Fe+=d*mt,Le+=d*dt,Ce+=d*yt,Ie+=d*st,Oe+=d*Et,be+=d*It,ve+=d*At,he+=d*St,Ae+=d*Tt,$e+=d*xt,ge+=d*vt,Me+=d*rt,ze+=d*D,Ze+=d*F,d=L[7],et+=d*lt,Fe+=d*it,Le+=d*mt,Ce+=d*dt,Ie+=d*yt,Oe+=d*st,be+=d*Et,ve+=d*It,he+=d*At,Ae+=d*St,$e+=d*Tt,ge+=d*xt,Me+=d*vt,ze+=d*rt,Ze+=d*D,Ge+=d*F,d=L[8],Fe+=d*lt,Le+=d*it,Ce+=d*mt,Ie+=d*dt,Oe+=d*yt,be+=d*st,ve+=d*Et,he+=d*It,Ae+=d*At,$e+=d*St,ge+=d*Tt,Me+=d*xt,ze+=d*vt,Ze+=d*rt,Ge+=d*D,Ve+=d*F,d=L[9],Le+=d*lt,Ce+=d*it,Ie+=d*mt,Oe+=d*dt,be+=d*yt,ve+=d*st,he+=d*Et,Ae+=d*It,$e+=d*At,ge+=d*St,Me+=d*Tt,ze+=d*xt,Ze+=d*vt,Ge+=d*rt,Ve+=d*D,pr+=d*F,d=L[10],Ce+=d*lt,Ie+=d*it,Oe+=d*mt,be+=d*dt,ve+=d*yt,he+=d*st,Ae+=d*Et,$e+=d*It,ge+=d*At,Me+=d*St,ze+=d*Tt,Ze+=d*xt,Ge+=d*vt,Ve+=d*rt,pr+=d*D,_r+=d*F,d=L[11],Ie+=d*lt,Oe+=d*it,be+=d*mt,ve+=d*dt,he+=d*yt,Ae+=d*st,$e+=d*Et,ge+=d*It,Me+=d*At,ze+=d*St,Ze+=d*Tt,Ge+=d*xt,Ve+=d*vt,pr+=d*rt,_r+=d*D,Vr+=d*F,d=L[12],Oe+=d*lt,be+=d*it,ve+=d*mt,he+=d*dt,Ae+=d*yt,$e+=d*st,ge+=d*Et,Me+=d*It,ze+=d*At,Ze+=d*St,Ge+=d*Tt,Ve+=d*xt,pr+=d*vt,_r+=d*rt,Vr+=d*D,jt+=d*F,d=L[13],be+=d*lt,ve+=d*it,he+=d*mt,Ae+=d*dt,$e+=d*yt,ge+=d*st,Me+=d*Et,ze+=d*It,Ze+=d*At,Ge+=d*St,Ve+=d*Tt,pr+=d*xt,_r+=d*vt,Vr+=d*rt,jt+=d*D,Hr+=d*F,d=L[14],ve+=d*lt,he+=d*it,Ae+=d*mt,$e+=d*dt,ge+=d*yt,Me+=d*st,ze+=d*Et,Ze+=d*It,Ge+=d*At,Ve+=d*St,pr+=d*Tt,_r+=d*xt,Vr+=d*vt,jt+=d*rt,Hr+=d*D,Er+=d*F,d=L[15],he+=d*lt,Ae+=d*it,$e+=d*mt,ge+=d*dt,Me+=d*yt,ze+=d*st,Ze+=d*Et,Ge+=d*It,Ve+=d*At,pr+=d*St,_r+=d*Tt,Vr+=d*xt,jt+=d*vt,Hr+=d*rt,Er+=d*D,On+=d*F,Y+=38*Ae,te+=38*$e,Re+=38*ge,Pe+=38*Me,xe+=38*ze,qe+=38*Ze,ct+=38*Ge,et+=38*Ve,Fe+=38*pr,Le+=38*_r,Ce+=38*Vr,Ie+=38*jt,Oe+=38*Hr,be+=38*Er,ve+=38*On,I=1,d=Y+I+65535,I=Math.floor(d/65536),Y=d-I*65536,d=te+I+65535,I=Math.floor(d/65536),te=d-I*65536,d=Re+I+65535,I=Math.floor(d/65536),Re=d-I*65536,d=Pe+I+65535,I=Math.floor(d/65536),Pe=d-I*65536,d=xe+I+65535,I=Math.floor(d/65536),xe=d-I*65536,d=qe+I+65535,I=Math.floor(d/65536),qe=d-I*65536,d=ct+I+65535,I=Math.floor(d/65536),ct=d-I*65536,d=et+I+65535,I=Math.floor(d/65536),et=d-I*65536,d=Fe+I+65535,I=Math.floor(d/65536),Fe=d-I*65536,d=Le+I+65535,I=Math.floor(d/65536),Le=d-I*65536,d=Ce+I+65535,I=Math.floor(d/65536),Ce=d-I*65536,d=Ie+I+65535,I=Math.floor(d/65536),Ie=d-I*65536,d=Oe+I+65535,I=Math.floor(d/65536),Oe=d-I*65536,d=be+I+65535,I=Math.floor(d/65536),be=d-I*65536,d=ve+I+65535,I=Math.floor(d/65536),ve=d-I*65536,d=he+I+65535,I=Math.floor(d/65536),he=d-I*65536,Y+=I-1+37*(I-1),I=1,d=Y+I+65535,I=Math.floor(d/65536),Y=d-I*65536,d=te+I+65535,I=Math.floor(d/65536),te=d-I*65536,d=Re+I+65535,I=Math.floor(d/65536),Re=d-I*65536,d=Pe+I+65535,I=Math.floor(d/65536),Pe=d-I*65536,d=xe+I+65535,I=Math.floor(d/65536),xe=d-I*65536,d=qe+I+65535,I=Math.floor(d/65536),qe=d-I*65536,d=ct+I+65535,I=Math.floor(d/65536),ct=d-I*65536,d=et+I+65535,I=Math.floor(d/65536),et=d-I*65536,d=Fe+I+65535,I=Math.floor(d/65536),Fe=d-I*65536,d=Le+I+65535,I=Math.floor(d/65536),Le=d-I*65536,d=Ce+I+65535,I=Math.floor(d/65536),Ce=d-I*65536,d=Ie+I+65535,I=Math.floor(d/65536),Ie=d-I*65536,d=Oe+I+65535,I=Math.floor(d/65536),Oe=d-I*65536,d=be+I+65535,I=Math.floor(d/65536),be=d-I*65536,d=ve+I+65535,I=Math.floor(d/65536),ve=d-I*65536,d=he+I+65535,I=Math.floor(d/65536),he=d-I*65536,Y+=I-1+37*(I-1),M[0]=Y,M[1]=te,M[2]=Re,M[3]=Pe,M[4]=xe,M[5]=qe,M[6]=ct,M[7]=et,M[8]=Fe,M[9]=Le,M[10]=Ce,M[11]=Ie,M[12]=Oe,M[13]=be,M[14]=ve,M[15]=he}function y(M,L){u(M,L,L)}function T(M,L){const P=i();let d;for(d=0;d<16;d++)P[d]=L[d];for(d=253;d>=0;d--)y(P,P),d!==2&&d!==4&&u(P,P,L);for(d=0;d<16;d++)M[d]=P[d]}function A(M,L){const P=i();let d;for(d=0;d<16;d++)P[d]=L[d];for(d=250;d>=0;d--)y(P,P),d!==1&&u(P,P,L);for(d=0;d<16;d++)M[d]=P[d]}function k(M,L){const P=i(),d=i(),I=i(),Y=i(),te=i(),Re=i(),Pe=i(),xe=i(),qe=i();m(P,M[1],M[0]),m(qe,L[1],L[0]),u(P,P,qe),x(d,M[0],M[1]),x(qe,L[0],L[1]),u(d,d,qe),u(I,M[3],L[3]),u(I,I,l),u(Y,M[2],L[2]),x(Y,Y,Y),m(te,d,P),m(Re,Y,I),x(Pe,Y,I),x(xe,d,P),u(M[0],te,Re),u(M[1],xe,Pe),u(M[2],Pe,Re),u(M[3],te,xe)}function B(M,L,P){for(let d=0;d<4;d++)_(M[d],L[d],P)}function V(M,L){const P=i(),d=i(),I=i();T(I,L[2]),u(P,L[0],I),u(d,L[1],I),S(M,d),M[31]^=E(P)<<7}function R(M,L,P){g(M[0],o),g(M[1],a),g(M[2],a),g(M[3],o);for(let d=255;d>=0;--d){const I=P[d/8|0]>>(d&7)&1;B(M,L,I),k(L,M),k(M,M),B(M,L,I)}}function N(M,L){const P=[i(),i(),i(),i()];g(P[0],h),g(P[1],f),g(P[2],a),u(P[3],h,f),R(M,P,L)}function Q(M){if(M.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const L=(0,r.hash)(M);L[0]&=248,L[31]&=127,L[31]|=64;const P=new Uint8Array(32),d=[i(),i(),i(),i()];N(d,L),V(P,d);const I=new Uint8Array(64);return I.set(M),I.set(P,32),{publicKey:P,secretKey:I}}t.generateKeyPairFromSeed=Q;function H(M){const L=(0,e.randomBytes)(32,M),P=Q(L);return(0,n.wipe)(L),P}t.generateKeyPair=H;function j(M){if(M.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(M.subarray(32))}t.extractPublicKeyFromSecretKey=j;const W=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function U(M,L){let P,d,I,Y;for(d=63;d>=32;--d){for(P=0,I=d-32,Y=d-12;I<Y;++I)L[I]+=P-16*L[d]*W[I-(d-32)],P=Math.floor((L[I]+128)/256),L[I]-=P*256;L[I]+=P,L[d]=0}for(P=0,I=0;I<32;I++)L[I]+=P-(L[31]>>4)*W[I],P=L[I]>>8,L[I]&=255;for(I=0;I<32;I++)L[I]-=P*W[I];for(d=0;d<32;d++)L[d+1]+=L[d]>>8,M[d]=L[d]&255}function K(M){const L=new Float64Array(64);for(let P=0;P<64;P++)L[P]=M[P];for(let P=0;P<64;P++)M[P]=0;U(M,L)}function pe(M,L){const P=new Float64Array(64),d=[i(),i(),i(),i()],I=(0,r.hash)(M.subarray(0,32));I[0]&=248,I[31]&=127,I[31]|=64;const Y=new Uint8Array(64);Y.set(I.subarray(32),32);const te=new r.SHA512;te.update(Y.subarray(32)),te.update(L);const Re=te.digest();te.clean(),K(Re),N(d,Re),V(Y,d),te.reset(),te.update(Y.subarray(0,32)),te.update(M.subarray(32)),te.update(L);const Pe=te.digest();K(Pe);for(let xe=0;xe<32;xe++)P[xe]=Re[xe];for(let xe=0;xe<32;xe++)for(let qe=0;qe<32;qe++)P[xe+qe]+=Pe[xe]*I[qe];return U(Y.subarray(32),P),Y}t.sign=pe;function Z(M,L){const P=i(),d=i(),I=i(),Y=i(),te=i(),Re=i(),Pe=i();return g(M[2],a),w(M[1],L),y(I,M[1]),u(Y,I,c),m(I,I,M[2]),x(Y,M[2],Y),y(te,Y),y(Re,te),u(Pe,Re,te),u(P,Pe,I),u(P,P,Y),A(P,P),u(P,P,I),u(P,P,Y),u(P,P,Y),u(M[0],P,Y),y(d,M[0]),u(d,d,Y),b(d,I)&&u(M[0],M[0],p),y(d,M[0]),u(d,d,Y),b(d,I)?-1:(E(M[0])===L[31]>>7&&m(M[0],o,M[0]),u(M[3],M[0],M[1]),0)}function ue(M,L,P){const d=new Uint8Array(32),I=[i(),i(),i(),i()],Y=[i(),i(),i(),i()];if(P.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(Z(Y,M))return!1;const te=new r.SHA512;te.update(P.subarray(0,32)),te.update(M),te.update(L);const Re=te.digest();return K(Re),R(I,Y,Re),N(Y,P.subarray(32)),k(I,Y),V(d,I),!O(P,d)}t.verify=ue;function ne(M){let L=[i(),i(),i(),i()];if(Z(L,M))throw new Error("Ed25519: invalid public key");let P=i(),d=i(),I=L[1];x(P,a,I),m(d,a,I),T(d,d),u(P,P,d);let Y=new Uint8Array(32);return S(Y,P),Y}t.convertPublicKeyToX25519=ne;function le(M){const L=(0,r.hash)(M.subarray(0,32));L[0]&=248,L[31]&=127,L[31]|=64;const P=new Uint8Array(L.subarray(0,32));return(0,n.wipe)(L),P}t.convertSecretKeyToX25519=le}(Xa);const E1="EdDSA",S1="JWT",Rh=".",Ph="base64url",x1="utf8",C1="utf8",O1=":",D1="did",I1="key",$h="base58btc",A1="z",T1="K36",R1=32;function ic(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Nh(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ic(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function sc(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=Nh(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return ic(r)}function P1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var _=0,S=0,O=0,b=v.length;O!==b&&v[O]===0;)O++,_++;for(var E=(b-O)*h+1>>>0,w=new Uint8Array(E);O!==b;){for(var x=v[O],m=0,u=E-1;(x!==0||m<S)&&u!==-1;u--,m++)x+=256*w[u]>>>0,w[u]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");S=m,O++}for(var y=E-S;y!==E&&w[y]===0;)y++;for(var T=c.repeat(_);y<E;++y)T+=t.charAt(w[y]);return T}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var _=0;if(v[_]!==" "){for(var S=0,O=0;v[_]===c;)S++,_++;for(var b=(v.length-_)*l+1>>>0,E=new Uint8Array(b);v[_];){var w=r[v.charCodeAt(_)];if(w===255)return;for(var x=0,m=b-1;(w!==0||x<O)&&m!==-1;m--,x++)w+=a*E[m]>>>0,E[m]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");O=x,_++}if(v[_]!==" "){for(var u=b-O;u!==b&&E[u]===0;)u++;for(var y=new Uint8Array(S+(b-u)),T=S;u!==b;)y[T++]=E[u++];return y}}}function g(v){var _=p(v);if(_)return _;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:g}}var $1=P1,N1=$1;const L1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},M1=t=>new TextEncoder().encode(t),k1=t=>new TextDecoder().decode(t);class F1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class U1{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Lh(this,e)}}class j1{constructor(e){this.decoders=e}or(e){return Lh(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Lh=(t,e)=>new j1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class B1{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new F1(e,r,n),this.decoder=new U1(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Eo=({name:t,prefix:e,encode:r,decode:n})=>new B1(t,e,r,n),ts=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=N1(r,e);return Eo({prefix:t,name:e,encode:n,decode:s=>L1(i(s))})},q1=(t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let h=0;h<s;++h){const f=i[t[h]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},z1=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ft=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Eo({prefix:e,name:t,encode(i){return z1(i,n,r)},decode(i){return q1(i,n,r,t)}}),W1=Eo({prefix:"\0",name:"identity",encode:t=>k1(t),decode:t=>M1(t)}),V1=Object.freeze(Object.defineProperty({__proto__:null,identity:W1},Symbol.toStringTag,{value:"Module"})),H1=Ft({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),K1=Object.freeze(Object.defineProperty({__proto__:null,base2:H1},Symbol.toStringTag,{value:"Module"})),Z1=Ft({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),G1=Object.freeze(Object.defineProperty({__proto__:null,base8:Z1},Symbol.toStringTag,{value:"Module"})),Q1=ts({prefix:"9",name:"base10",alphabet:"0123456789"}),Y1=Object.freeze(Object.defineProperty({__proto__:null,base10:Q1},Symbol.toStringTag,{value:"Module"})),J1=Ft({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),X1=Ft({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ey=Object.freeze(Object.defineProperty({__proto__:null,base16:J1,base16upper:X1},Symbol.toStringTag,{value:"Module"})),ty=Ft({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ry=Ft({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ny=Ft({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),iy=Ft({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sy=Ft({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),oy=Ft({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ay=Ft({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cy=Ft({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ly=Ft({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),uy=Object.freeze(Object.defineProperty({__proto__:null,base32:ty,base32hex:sy,base32hexpad:ay,base32hexpadupper:cy,base32hexupper:oy,base32pad:ny,base32padupper:iy,base32upper:ry,base32z:ly},Symbol.toStringTag,{value:"Module"})),hy=ts({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dy=ts({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),fy=Object.freeze(Object.defineProperty({__proto__:null,base36:hy,base36upper:dy},Symbol.toStringTag,{value:"Module"})),py=ts({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gy=ts({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),my=Object.freeze(Object.defineProperty({__proto__:null,base58btc:py,base58flickr:gy},Symbol.toStringTag,{value:"Module"})),yy=Ft({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vy=Ft({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wy=Ft({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),by=Ft({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),_y=Object.freeze(Object.defineProperty({__proto__:null,base64:yy,base64pad:vy,base64url:wy,base64urlpad:by},Symbol.toStringTag,{value:"Module"})),Mh=Array.from(""),Ey=Mh.reduce((t,e,r)=>(t[r]=e,t),[]),Sy=Mh.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function xy(t){return t.reduce((e,r)=>(e+=Ey[r],e),"")}function Cy(t){const e=[];for(const r of t){const n=Sy[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Oy=Eo({prefix:"",name:"base256emoji",encode:xy,decode:Cy}),Dy=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Oy},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const kh={...V1,...K1,...G1,...Y1,...ey,...uy,...fy,...my,..._y,...Dy};function Fh(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Uh=Fh("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),oc=Fh("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Nh(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),jh={utf8:Uh,"utf-8":Uh,hex:kh.base16,latin1:oc,ascii:oc,binary:oc,...kh};function Jt(t,e="utf8"){const r=jh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function or(t,e="utf8"){const r=jh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ic(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function So(t){return Jt(or(Gi(t),x1),Ph)}function Bh(t){const e=or(T1,$h),r=A1+Jt(sc([e,t]),$h);return[D1,I1,r].join(O1)}function Iy(t){return Jt(t,Ph)}function Ay(t){return or([So(t.header),So(t.payload)].join(Rh),C1)}function Ty(t){return[So(t.header),So(t.payload),Iy(t.signature)].join(Rh)}function qh(t=di.randomBytes(R1)){return Xa.generateKeyPairFromSeed(t)}async function Ry(t,e,r,n,i=oe.fromMiliseconds(Date.now())){const s={alg:E1,typ:S1},o=Bh(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},l=Ay({header:s,payload:c}),h=Xa.sign(n.secretKey,l);return Ty({header:s,payload:c,signature:h})}var ac={},xo={};Object.defineProperty(xo,"__esModule",{value:!0});var Wt=we,cc=hr,Py=20;function $y(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],h=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],g=r[27]<<24|r[26]<<16|r[25]<<8|r[24],v=r[31]<<24|r[30]<<16|r[29]<<8|r[28],_=e[3]<<24|e[2]<<16|e[1]<<8|e[0],S=e[7]<<24|e[6]<<16|e[5]<<8|e[4],O=e[11]<<24|e[10]<<16|e[9]<<8|e[8],b=e[15]<<24|e[14]<<16|e[13]<<8|e[12],E=n,w=i,x=s,m=o,u=a,y=c,T=l,A=h,k=f,B=p,V=g,R=v,N=_,Q=S,H=O,j=b,W=0;W<Py;W+=2)E=E+u|0,N^=E,N=N>>>32-16|N<<16,k=k+N|0,u^=k,u=u>>>32-12|u<<12,w=w+y|0,Q^=w,Q=Q>>>32-16|Q<<16,B=B+Q|0,y^=B,y=y>>>32-12|y<<12,x=x+T|0,H^=x,H=H>>>32-16|H<<16,V=V+H|0,T^=V,T=T>>>32-12|T<<12,m=m+A|0,j^=m,j=j>>>32-16|j<<16,R=R+j|0,A^=R,A=A>>>32-12|A<<12,x=x+T|0,H^=x,H=H>>>32-8|H<<8,V=V+H|0,T^=V,T=T>>>32-7|T<<7,m=m+A|0,j^=m,j=j>>>32-8|j<<8,R=R+j|0,A^=R,A=A>>>32-7|A<<7,w=w+y|0,Q^=w,Q=Q>>>32-8|Q<<8,B=B+Q|0,y^=B,y=y>>>32-7|y<<7,E=E+u|0,N^=E,N=N>>>32-8|N<<8,k=k+N|0,u^=k,u=u>>>32-7|u<<7,E=E+y|0,j^=E,j=j>>>32-16|j<<16,V=V+j|0,y^=V,y=y>>>32-12|y<<12,w=w+T|0,N^=w,N=N>>>32-16|N<<16,R=R+N|0,T^=R,T=T>>>32-12|T<<12,x=x+A|0,Q^=x,Q=Q>>>32-16|Q<<16,k=k+Q|0,A^=k,A=A>>>32-12|A<<12,m=m+u|0,H^=m,H=H>>>32-16|H<<16,B=B+H|0,u^=B,u=u>>>32-12|u<<12,x=x+A|0,Q^=x,Q=Q>>>32-8|Q<<8,k=k+Q|0,A^=k,A=A>>>32-7|A<<7,m=m+u|0,H^=m,H=H>>>32-8|H<<8,B=B+H|0,u^=B,u=u>>>32-7|u<<7,w=w+T|0,N^=w,N=N>>>32-8|N<<8,R=R+N|0,T^=R,T=T>>>32-7|T<<7,E=E+y|0,j^=E,j=j>>>32-8|j<<8,V=V+j|0,y^=V,y=y>>>32-7|y<<7;Wt.writeUint32LE(E+n|0,t,0),Wt.writeUint32LE(w+i|0,t,4),Wt.writeUint32LE(x+s|0,t,8),Wt.writeUint32LE(m+o|0,t,12),Wt.writeUint32LE(u+a|0,t,16),Wt.writeUint32LE(y+c|0,t,20),Wt.writeUint32LE(T+l|0,t,24),Wt.writeUint32LE(A+h|0,t,28),Wt.writeUint32LE(k+f|0,t,32),Wt.writeUint32LE(B+p|0,t,36),Wt.writeUint32LE(V+g|0,t,40),Wt.writeUint32LE(R+v|0,t,44),Wt.writeUint32LE(N+_|0,t,48),Wt.writeUint32LE(Q+S|0,t,52),Wt.writeUint32LE(H+O|0,t,56),Wt.writeUint32LE(j+b|0,t,60)}function zh(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){$y(a,s,t);for(var l=c;l<c+64&&l<r.length;l++)n[l]=r[l]^a[l-c];Ly(s,0,o)}return cc.wipe(a),i===0&&cc.wipe(s),n}xo.streamXOR=zh;function Ny(t,e,r,n){return n===void 0&&(n=0),cc.wipe(r),zh(t,e,r,r,n)}xo.stream=Ny;function Ly(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Wh={},ln={};Object.defineProperty(ln,"__esModule",{value:!0});function My(t,e,r){return~(t-1)&e|t-1&r}ln.select=My;function ky(t,e){return(t|0)-(e|0)-1>>>31&1}ln.lessOrEqual=ky;function Vh(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}ln.compare=Vh;function Fy(t,e){return t.length===0||e.length===0?!1:Vh(t,e)!==0}ln.equal=Fy,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ln,r=hr;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var l=a[2]|a[3]<<8;this._r[1]=(c>>>13|l<<3)&8191;var h=a[4]|a[5]<<8;this._r[2]=(l>>>10|h<<6)&7939;var f=a[6]|a[7]<<8;this._r[3]=(h>>>7|f<<9)&8191;var p=a[8]|a[9]<<8;this._r[4]=(f>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var g=a[10]|a[11]<<8;this._r[6]=(p>>>14|g<<2)&8191;var v=a[12]|a[13]<<8;this._r[7]=(g>>>11|v<<5)&8065;var _=a[14]|a[15]<<8;this._r[8]=(v>>>8|_<<8)&8191,this._r[9]=_>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,l){for(var h=this._fin?0:2048,f=this._h[0],p=this._h[1],g=this._h[2],v=this._h[3],_=this._h[4],S=this._h[5],O=this._h[6],b=this._h[7],E=this._h[8],w=this._h[9],x=this._r[0],m=this._r[1],u=this._r[2],y=this._r[3],T=this._r[4],A=this._r[5],k=this._r[6],B=this._r[7],V=this._r[8],R=this._r[9];l>=16;){var N=a[c+0]|a[c+1]<<8;f+=N&8191;var Q=a[c+2]|a[c+3]<<8;p+=(N>>>13|Q<<3)&8191;var H=a[c+4]|a[c+5]<<8;g+=(Q>>>10|H<<6)&8191;var j=a[c+6]|a[c+7]<<8;v+=(H>>>7|j<<9)&8191;var W=a[c+8]|a[c+9]<<8;_+=(j>>>4|W<<12)&8191,S+=W>>>1&8191;var U=a[c+10]|a[c+11]<<8;O+=(W>>>14|U<<2)&8191;var K=a[c+12]|a[c+13]<<8;b+=(U>>>11|K<<5)&8191;var pe=a[c+14]|a[c+15]<<8;E+=(K>>>8|pe<<8)&8191,w+=pe>>>5|h;var Z=0,ue=Z;ue+=f*x,ue+=p*(5*R),ue+=g*(5*V),ue+=v*(5*B),ue+=_*(5*k),Z=ue>>>13,ue&=8191,ue+=S*(5*A),ue+=O*(5*T),ue+=b*(5*y),ue+=E*(5*u),ue+=w*(5*m),Z+=ue>>>13,ue&=8191;var ne=Z;ne+=f*m,ne+=p*x,ne+=g*(5*R),ne+=v*(5*V),ne+=_*(5*B),Z=ne>>>13,ne&=8191,ne+=S*(5*k),ne+=O*(5*A),ne+=b*(5*T),ne+=E*(5*y),ne+=w*(5*u),Z+=ne>>>13,ne&=8191;var le=Z;le+=f*u,le+=p*m,le+=g*x,le+=v*(5*R),le+=_*(5*V),Z=le>>>13,le&=8191,le+=S*(5*B),le+=O*(5*k),le+=b*(5*A),le+=E*(5*T),le+=w*(5*y),Z+=le>>>13,le&=8191;var M=Z;M+=f*y,M+=p*u,M+=g*m,M+=v*x,M+=_*(5*R),Z=M>>>13,M&=8191,M+=S*(5*V),M+=O*(5*B),M+=b*(5*k),M+=E*(5*A),M+=w*(5*T),Z+=M>>>13,M&=8191;var L=Z;L+=f*T,L+=p*y,L+=g*u,L+=v*m,L+=_*x,Z=L>>>13,L&=8191,L+=S*(5*R),L+=O*(5*V),L+=b*(5*B),L+=E*(5*k),L+=w*(5*A),Z+=L>>>13,L&=8191;var P=Z;P+=f*A,P+=p*T,P+=g*y,P+=v*u,P+=_*m,Z=P>>>13,P&=8191,P+=S*x,P+=O*(5*R),P+=b*(5*V),P+=E*(5*B),P+=w*(5*k),Z+=P>>>13,P&=8191;var d=Z;d+=f*k,d+=p*A,d+=g*T,d+=v*y,d+=_*u,Z=d>>>13,d&=8191,d+=S*m,d+=O*x,d+=b*(5*R),d+=E*(5*V),d+=w*(5*B),Z+=d>>>13,d&=8191;var I=Z;I+=f*B,I+=p*k,I+=g*A,I+=v*T,I+=_*y,Z=I>>>13,I&=8191,I+=S*u,I+=O*m,I+=b*x,I+=E*(5*R),I+=w*(5*V),Z+=I>>>13,I&=8191;var Y=Z;Y+=f*V,Y+=p*B,Y+=g*k,Y+=v*A,Y+=_*T,Z=Y>>>13,Y&=8191,Y+=S*y,Y+=O*u,Y+=b*m,Y+=E*x,Y+=w*(5*R),Z+=Y>>>13,Y&=8191;var te=Z;te+=f*R,te+=p*V,te+=g*B,te+=v*k,te+=_*A,Z=te>>>13,te&=8191,te+=S*T,te+=O*y,te+=b*u,te+=E*m,te+=w*x,Z+=te>>>13,te&=8191,Z=(Z<<2)+Z|0,Z=Z+ue|0,ue=Z&8191,Z=Z>>>13,ne+=Z,f=ue,p=ne,g=le,v=M,_=L,S=P,O=d,b=I,E=Y,w=te,c+=16,l-=16}this._h[0]=f,this._h[1]=p,this._h[2]=g,this._h[3]=v,this._h[4]=_,this._h[5]=S,this._h[6]=O,this._h[7]=b,this._h[8]=E,this._h[9]=w},o.prototype.finish=function(a,c){c===void 0&&(c=0);var l=new Uint16Array(10),h,f,p,g;if(this._leftover){for(g=this._leftover,this._buffer[g++]=1;g<16;g++)this._buffer[g]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(h=this._h[1]>>>13,this._h[1]&=8191,g=2;g<10;g++)this._h[g]+=h,h=this._h[g]>>>13,this._h[g]&=8191;for(this._h[0]+=h*5,h=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=h,h=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=h,l[0]=this._h[0]+5,h=l[0]>>>13,l[0]&=8191,g=1;g<10;g++)l[g]=this._h[g]+h,h=l[g]>>>13,l[g]&=8191;for(l[9]-=8192,f=(h^1)-1,g=0;g<10;g++)l[g]&=f;for(f=~f,g=0;g<10;g++)this._h[g]=this._h[g]&f|l[g];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,p=this._h[0]+this._pad[0],this._h[0]=p&65535,g=1;g<8;g++)p=(this._h[g]+this._pad[g]|0)+(p>>>16)|0,this._h[g]=p&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,l=a.length,h;if(this._leftover){h=16-this._leftover,h>l&&(h=l);for(var f=0;f<h;f++)this._buffer[this._leftover+f]=a[c+f];if(l-=h,c+=h,this._leftover+=h,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(h=l-l%16,this._blocks(a,c,h),c+=h,l-=h),l){for(var f=0;f<l;f++)this._buffer[this._leftover+f]=a[c+f];this._leftover+=l}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var l=c.digest();return c.clean(),l}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Wh),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=xo,r=Wh,n=hr,i=we,s=ln;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function c(l){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,l.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return c.prototype.seal=function(l,h,f,p){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var g=new Uint8Array(16);g.set(l,g.length-l.length);var v=new Uint8Array(32);e.stream(this._key,g,v,4);var _=h.length+this.tagLength,S;if(p){if(p.length!==_)throw new Error("ChaCha20Poly1305: incorrect destination length");S=p}else S=new Uint8Array(_);return e.streamXOR(this._key,g,h,S,4),this._authenticate(S.subarray(S.length-this.tagLength,S.length),v,S.subarray(0,S.length-this.tagLength),f),n.wipe(g),S},c.prototype.open=function(l,h,f,p){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(h.length<this.tagLength)return null;var g=new Uint8Array(16);g.set(l,g.length-l.length);var v=new Uint8Array(32);e.stream(this._key,g,v,4);var _=new Uint8Array(this.tagLength);if(this._authenticate(_,v,h.subarray(0,h.length-this.tagLength),f),!s.equal(_,h.subarray(h.length-this.tagLength,h.length)))return null;var S=h.length-this.tagLength,O;if(p){if(p.length!==S)throw new Error("ChaCha20Poly1305: incorrect destination length");O=p}else O=new Uint8Array(S);return e.streamXOR(this._key,g,h.subarray(0,h.length-this.tagLength),O,4),n.wipe(g),O},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(l,h,f,p){var g=new r.Poly1305(h);p&&(g.update(p),p.length%16>0&&g.update(o.subarray(p.length%16))),g.update(f),f.length%16>0&&g.update(o.subarray(f.length%16));var v=new Uint8Array(8);p&&i.writeUint64LE(p.length,v),g.update(v),i.writeUint64LE(f.length,v),g.update(v);for(var _=g.digest(),S=0;S<_.length;S++)l[S]=_[S];g.clean(),n.wipe(_),n.wipe(v)},c}();t.ChaCha20Poly1305=a}(ac);var Hh={},rs={},lc={};Object.defineProperty(lc,"__esModule",{value:!0});function Uy(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}lc.isSerializableHash=Uy,Object.defineProperty(rs,"__esModule",{value:!0});var Ur=lc,jy=ln,By=hr,Kh=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Ur.isSerializableHash(this._inner)&&Ur.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),By.wipe(n)}return t.prototype.reset=function(){if(!Ur.isSerializableHash(this._inner)||!Ur.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Ur.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Ur.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Ur.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Ur.isSerializableHash(this._inner)||!Ur.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Ur.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();rs.HMAC=Kh;function qy(t,e,r){var n=new Kh(t,e);n.update(r);var i=n.digest();return n.clean(),i}rs.hmac=qy,rs.equal=jy.equal,Object.defineProperty(Hh,"__esModule",{value:!0});var Zh=rs,Gh=hr,zy=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Zh.hmac(this._hash,n,r);this._hmac=new Zh.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Gh.wipe(this._buffer),Gh.wipe(this._counter),this._bufpos=0},t}(),Wy=Hh.HKDF=zy,Co={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=we,r=hr;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var h=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=c[h++],l--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(h=s(this._temp,this._state,c,h,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[h++],l--;return this},a.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,h=this._bufferLength,f=l/536870912|0,p=l<<3,g=l%64<56?64:128;this._buffer[h]=128;for(var v=h+1;v<g-8;v++)this._buffer[v]=0;e.writeUint32BE(f,this._buffer,g-8),e.writeUint32BE(p,this._buffer,g-4),s(this._temp,this._state,this._buffer,0,g),this._finished=!0}for(var v=0;v<this.digestLength/4;v++)e.writeUint32BE(this._state[v],c,v*4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,c,l,h,f){for(;f>=64;){for(var p=c[0],g=c[1],v=c[2],_=c[3],S=c[4],O=c[5],b=c[6],E=c[7],w=0;w<16;w++){var x=h+w*4;a[w]=e.readUint32BE(l,x)}for(var w=16;w<64;w++){var m=a[w-2],u=(m>>>17|m<<32-17)^(m>>>19|m<<32-19)^m>>>10;m=a[w-15];var y=(m>>>7|m<<32-7)^(m>>>18|m<<32-18)^m>>>3;a[w]=(u+a[w-7]|0)+(y+a[w-16]|0)}for(var w=0;w<64;w++){var u=(((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))+(S&O^~S&b)|0)+(E+(i[w]+a[w]|0)|0)|0,y=((p>>>2|p<<32-2)^(p>>>13|p<<32-13)^(p>>>22|p<<32-22))+(p&g^p&v^g&v)|0;E=b,b=O,O=S,S=_+u|0,_=v,v=g,g=p,p=u+y|0}c[0]+=p,c[1]+=g,c[2]+=v,c[3]+=_,c[4]+=S,c[5]+=O,c[6]+=b,c[7]+=E,h+=64,f-=64}return h}function o(a){var c=new n;c.update(a);var l=c.digest();return c.clean(),l}t.hash=o})(Co);var uc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=di,r=hr;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(w){const x=new Float64Array(16);if(w)for(let m=0;m<w.length;m++)x[m]=w[m];return x}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(w){let x=1;for(let m=0;m<16;m++){let u=w[m]+x+65535;x=Math.floor(u/65536),w[m]=u-x*65536}w[0]+=x-1+37*(x-1)}function a(w,x,m){const u=~(m-1);for(let y=0;y<16;y++){const T=u&(w[y]^x[y]);w[y]^=T,x[y]^=T}}function c(w,x){const m=n(),u=n();for(let y=0;y<16;y++)u[y]=x[y];o(u),o(u),o(u);for(let y=0;y<2;y++){m[0]=u[0]-65517;for(let A=1;A<15;A++)m[A]=u[A]-65535-(m[A-1]>>16&1),m[A-1]&=65535;m[15]=u[15]-32767-(m[14]>>16&1);const T=m[15]>>16&1;m[14]&=65535,a(u,m,1-T)}for(let y=0;y<16;y++)w[2*y]=u[y]&255,w[2*y+1]=u[y]>>8}function l(w,x){for(let m=0;m<16;m++)w[m]=x[2*m]+(x[2*m+1]<<8);w[15]&=32767}function h(w,x,m){for(let u=0;u<16;u++)w[u]=x[u]+m[u]}function f(w,x,m){for(let u=0;u<16;u++)w[u]=x[u]-m[u]}function p(w,x,m){let u,y,T=0,A=0,k=0,B=0,V=0,R=0,N=0,Q=0,H=0,j=0,W=0,U=0,K=0,pe=0,Z=0,ue=0,ne=0,le=0,M=0,L=0,P=0,d=0,I=0,Y=0,te=0,Re=0,Pe=0,xe=0,qe=0,ct=0,et=0,Fe=m[0],Le=m[1],Ce=m[2],Ie=m[3],Oe=m[4],be=m[5],ve=m[6],he=m[7],Ae=m[8],$e=m[9],ge=m[10],Me=m[11],ze=m[12],Ze=m[13],Ge=m[14],Ve=m[15];u=x[0],T+=u*Fe,A+=u*Le,k+=u*Ce,B+=u*Ie,V+=u*Oe,R+=u*be,N+=u*ve,Q+=u*he,H+=u*Ae,j+=u*$e,W+=u*ge,U+=u*Me,K+=u*ze,pe+=u*Ze,Z+=u*Ge,ue+=u*Ve,u=x[1],A+=u*Fe,k+=u*Le,B+=u*Ce,V+=u*Ie,R+=u*Oe,N+=u*be,Q+=u*ve,H+=u*he,j+=u*Ae,W+=u*$e,U+=u*ge,K+=u*Me,pe+=u*ze,Z+=u*Ze,ue+=u*Ge,ne+=u*Ve,u=x[2],k+=u*Fe,B+=u*Le,V+=u*Ce,R+=u*Ie,N+=u*Oe,Q+=u*be,H+=u*ve,j+=u*he,W+=u*Ae,U+=u*$e,K+=u*ge,pe+=u*Me,Z+=u*ze,ue+=u*Ze,ne+=u*Ge,le+=u*Ve,u=x[3],B+=u*Fe,V+=u*Le,R+=u*Ce,N+=u*Ie,Q+=u*Oe,H+=u*be,j+=u*ve,W+=u*he,U+=u*Ae,K+=u*$e,pe+=u*ge,Z+=u*Me,ue+=u*ze,ne+=u*Ze,le+=u*Ge,M+=u*Ve,u=x[4],V+=u*Fe,R+=u*Le,N+=u*Ce,Q+=u*Ie,H+=u*Oe,j+=u*be,W+=u*ve,U+=u*he,K+=u*Ae,pe+=u*$e,Z+=u*ge,ue+=u*Me,ne+=u*ze,le+=u*Ze,M+=u*Ge,L+=u*Ve,u=x[5],R+=u*Fe,N+=u*Le,Q+=u*Ce,H+=u*Ie,j+=u*Oe,W+=u*be,U+=u*ve,K+=u*he,pe+=u*Ae,Z+=u*$e,ue+=u*ge,ne+=u*Me,le+=u*ze,M+=u*Ze,L+=u*Ge,P+=u*Ve,u=x[6],N+=u*Fe,Q+=u*Le,H+=u*Ce,j+=u*Ie,W+=u*Oe,U+=u*be,K+=u*ve,pe+=u*he,Z+=u*Ae,ue+=u*$e,ne+=u*ge,le+=u*Me,M+=u*ze,L+=u*Ze,P+=u*Ge,d+=u*Ve,u=x[7],Q+=u*Fe,H+=u*Le,j+=u*Ce,W+=u*Ie,U+=u*Oe,K+=u*be,pe+=u*ve,Z+=u*he,ue+=u*Ae,ne+=u*$e,le+=u*ge,M+=u*Me,L+=u*ze,P+=u*Ze,d+=u*Ge,I+=u*Ve,u=x[8],H+=u*Fe,j+=u*Le,W+=u*Ce,U+=u*Ie,K+=u*Oe,pe+=u*be,Z+=u*ve,ue+=u*he,ne+=u*Ae,le+=u*$e,M+=u*ge,L+=u*Me,P+=u*ze,d+=u*Ze,I+=u*Ge,Y+=u*Ve,u=x[9],j+=u*Fe,W+=u*Le,U+=u*Ce,K+=u*Ie,pe+=u*Oe,Z+=u*be,ue+=u*ve,ne+=u*he,le+=u*Ae,M+=u*$e,L+=u*ge,P+=u*Me,d+=u*ze,I+=u*Ze,Y+=u*Ge,te+=u*Ve,u=x[10],W+=u*Fe,U+=u*Le,K+=u*Ce,pe+=u*Ie,Z+=u*Oe,ue+=u*be,ne+=u*ve,le+=u*he,M+=u*Ae,L+=u*$e,P+=u*ge,d+=u*Me,I+=u*ze,Y+=u*Ze,te+=u*Ge,Re+=u*Ve,u=x[11],U+=u*Fe,K+=u*Le,pe+=u*Ce,Z+=u*Ie,ue+=u*Oe,ne+=u*be,le+=u*ve,M+=u*he,L+=u*Ae,P+=u*$e,d+=u*ge,I+=u*Me,Y+=u*ze,te+=u*Ze,Re+=u*Ge,Pe+=u*Ve,u=x[12],K+=u*Fe,pe+=u*Le,Z+=u*Ce,ue+=u*Ie,ne+=u*Oe,le+=u*be,M+=u*ve,L+=u*he,P+=u*Ae,d+=u*$e,I+=u*ge,Y+=u*Me,te+=u*ze,Re+=u*Ze,Pe+=u*Ge,xe+=u*Ve,u=x[13],pe+=u*Fe,Z+=u*Le,ue+=u*Ce,ne+=u*Ie,le+=u*Oe,M+=u*be,L+=u*ve,P+=u*he,d+=u*Ae,I+=u*$e,Y+=u*ge,te+=u*Me,Re+=u*ze,Pe+=u*Ze,xe+=u*Ge,qe+=u*Ve,u=x[14],Z+=u*Fe,ue+=u*Le,ne+=u*Ce,le+=u*Ie,M+=u*Oe,L+=u*be,P+=u*ve,d+=u*he,I+=u*Ae,Y+=u*$e,te+=u*ge,Re+=u*Me,Pe+=u*ze,xe+=u*Ze,qe+=u*Ge,ct+=u*Ve,u=x[15],ue+=u*Fe,ne+=u*Le,le+=u*Ce,M+=u*Ie,L+=u*Oe,P+=u*be,d+=u*ve,I+=u*he,Y+=u*Ae,te+=u*$e,Re+=u*ge,Pe+=u*Me,xe+=u*ze,qe+=u*Ze,ct+=u*Ge,et+=u*Ve,T+=38*ne,A+=38*le,k+=38*M,B+=38*L,V+=38*P,R+=38*d,N+=38*I,Q+=38*Y,H+=38*te,j+=38*Re,W+=38*Pe,U+=38*xe,K+=38*qe,pe+=38*ct,Z+=38*et,y=1,u=T+y+65535,y=Math.floor(u/65536),T=u-y*65536,u=A+y+65535,y=Math.floor(u/65536),A=u-y*65536,u=k+y+65535,y=Math.floor(u/65536),k=u-y*65536,u=B+y+65535,y=Math.floor(u/65536),B=u-y*65536,u=V+y+65535,y=Math.floor(u/65536),V=u-y*65536,u=R+y+65535,y=Math.floor(u/65536),R=u-y*65536,u=N+y+65535,y=Math.floor(u/65536),N=u-y*65536,u=Q+y+65535,y=Math.floor(u/65536),Q=u-y*65536,u=H+y+65535,y=Math.floor(u/65536),H=u-y*65536,u=j+y+65535,y=Math.floor(u/65536),j=u-y*65536,u=W+y+65535,y=Math.floor(u/65536),W=u-y*65536,u=U+y+65535,y=Math.floor(u/65536),U=u-y*65536,u=K+y+65535,y=Math.floor(u/65536),K=u-y*65536,u=pe+y+65535,y=Math.floor(u/65536),pe=u-y*65536,u=Z+y+65535,y=Math.floor(u/65536),Z=u-y*65536,u=ue+y+65535,y=Math.floor(u/65536),ue=u-y*65536,T+=y-1+37*(y-1),y=1,u=T+y+65535,y=Math.floor(u/65536),T=u-y*65536,u=A+y+65535,y=Math.floor(u/65536),A=u-y*65536,u=k+y+65535,y=Math.floor(u/65536),k=u-y*65536,u=B+y+65535,y=Math.floor(u/65536),B=u-y*65536,u=V+y+65535,y=Math.floor(u/65536),V=u-y*65536,u=R+y+65535,y=Math.floor(u/65536),R=u-y*65536,u=N+y+65535,y=Math.floor(u/65536),N=u-y*65536,u=Q+y+65535,y=Math.floor(u/65536),Q=u-y*65536,u=H+y+65535,y=Math.floor(u/65536),H=u-y*65536,u=j+y+65535,y=Math.floor(u/65536),j=u-y*65536,u=W+y+65535,y=Math.floor(u/65536),W=u-y*65536,u=U+y+65535,y=Math.floor(u/65536),U=u-y*65536,u=K+y+65535,y=Math.floor(u/65536),K=u-y*65536,u=pe+y+65535,y=Math.floor(u/65536),pe=u-y*65536,u=Z+y+65535,y=Math.floor(u/65536),Z=u-y*65536,u=ue+y+65535,y=Math.floor(u/65536),ue=u-y*65536,T+=y-1+37*(y-1),w[0]=T,w[1]=A,w[2]=k,w[3]=B,w[4]=V,w[5]=R,w[6]=N,w[7]=Q,w[8]=H,w[9]=j,w[10]=W,w[11]=U,w[12]=K,w[13]=pe,w[14]=Z,w[15]=ue}function g(w,x){p(w,x,x)}function v(w,x){const m=n();for(let u=0;u<16;u++)m[u]=x[u];for(let u=253;u>=0;u--)g(m,m),u!==2&&u!==4&&p(m,m,x);for(let u=0;u<16;u++)w[u]=m[u]}function _(w,x){const m=new Uint8Array(32),u=new Float64Array(80),y=n(),T=n(),A=n(),k=n(),B=n(),V=n();for(let H=0;H<31;H++)m[H]=w[H];m[31]=w[31]&127|64,m[0]&=248,l(u,x);for(let H=0;H<16;H++)T[H]=u[H];y[0]=k[0]=1;for(let H=254;H>=0;--H){const j=m[H>>>3]>>>(H&7)&1;a(y,T,j),a(A,k,j),h(B,y,A),f(y,y,A),h(A,T,k),f(T,T,k),g(k,B),g(V,y),p(y,A,y),p(A,T,B),h(B,y,A),f(y,y,A),g(T,y),f(A,k,V),p(y,A,s),h(y,y,k),p(A,A,y),p(y,k,V),p(k,T,u),g(T,B),a(y,T,j),a(A,k,j)}for(let H=0;H<16;H++)u[H+16]=y[H],u[H+32]=A[H],u[H+48]=T[H],u[H+64]=k[H];const R=u.subarray(32),N=u.subarray(16);v(R,R),p(N,N,R);const Q=new Uint8Array(32);return c(Q,N),Q}t.scalarMult=_;function S(w){return _(w,i)}t.scalarMultBase=S;function O(w){if(w.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const x=new Uint8Array(w);return{publicKey:S(x),secretKey:x}}t.generateKeyPairFromSeed=O;function b(w){const x=(0,e.randomBytes)(32,w),m=O(x);return(0,r.wipe)(x),m}t.generateKeyPair=b;function E(w,x,m=!1){if(w.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(x.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=_(w,x);if(m){let y=0;for(let T=0;T<u.length;T++)y|=u[T];if(y===0)throw new Error("X25519: invalid shared key")}return u}t.sharedKey=E})(uc);var Qh=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Vy=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Hy=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Ky=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Zy=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Gy=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Qy=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Yy=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Yh=3,Jy=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Qy]],Jh=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Xy(t){return t?Xh(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Gy:typeof navigator<"u"?Xh(navigator.userAgent):rv()}function ev(t){return t!==""&&Jy.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Xh(t){var e=ev(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Zy;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Yh&&(i=Qh(Qh([],i,!0),nv(Yh-i.length),!0)):i=[];var s=i.join("."),o=tv(t),a=Yy.exec(t);return a&&a[1]?new Ky(r,s,o,a[1]):new Vy(r,s,o)}function tv(t){for(var e=0,r=Jh.length;e<r;e++){var n=Jh[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function rv(){var t=typeof process<"u"&&process.version;return t?new Hy(process.version.slice(1)):null}function nv(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var tt={};Object.defineProperty(tt,"__esModule",{value:!0}),tt.getLocalStorage=tt.getLocalStorageOrThrow=tt.getCrypto=tt.getCryptoOrThrow=td=tt.getLocation=tt.getLocationOrThrow=hc=tt.getNavigator=tt.getNavigatorOrThrow=ed=tt.getDocument=tt.getDocumentOrThrow=tt.getFromWindowOrThrow=tt.getFromWindow=void 0;function Bn(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}tt.getFromWindow=Bn;function fi(t){const e=Bn(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}tt.getFromWindowOrThrow=fi;function iv(){return fi("document")}tt.getDocumentOrThrow=iv;function sv(){return Bn("document")}var ed=tt.getDocument=sv;function ov(){return fi("navigator")}tt.getNavigatorOrThrow=ov;function av(){return Bn("navigator")}var hc=tt.getNavigator=av;function cv(){return fi("location")}tt.getLocationOrThrow=cv;function lv(){return Bn("location")}var td=tt.getLocation=lv;function uv(){return fi("crypto")}tt.getCryptoOrThrow=uv;function hv(){return Bn("crypto")}tt.getCrypto=hv;function dv(){return fi("localStorage")}tt.getLocalStorageOrThrow=dv;function fv(){return Bn("localStorage")}tt.getLocalStorage=fv;var dc={};Object.defineProperty(dc,"__esModule",{value:!0});var rd=dc.getWindowMetadata=void 0;const nd=tt;function pv(){let t,e;try{t=nd.getDocumentOrThrow(),e=nd.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),p=[];for(let g=0;g<f.length;g++){const v=f[g],_=v.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const S=v.getAttribute("href");if(S)if(S.toLowerCase().indexOf("https:")===-1&&S.toLowerCase().indexOf("http:")===-1&&S.indexOf("//")!==0){let O=e.protocol+"//"+e.host;if(S.indexOf("/")===0)O+=S;else{const b=e.pathname.split("/");b.pop();const E=b.join("/");O+=E+"/"+S}p.push(O)}else if(S.indexOf("//")===0){const O=e.protocol+S;p.push(O)}else p.push(S)}}return p}function n(...f){const p=t.getElementsByTagName("meta");for(let g=0;g<p.length;g++){const v=p[g],_=["itemprop","property","name"].map(S=>v.getAttribute(S)).filter(S=>S?f.includes(S):!1);if(_.length&&_){const S=v.getAttribute("content");if(S)return S}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,l=r();return{description:a,url:c,icons:l,name:o}}rd=dc.getWindowMetadata=pv;var ns={},gv=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),id="%[a-f0-9]{2}",sd=new RegExp("("+id+")|([^%]+?)","gi"),od=new RegExp("("+id+")+","gi");function fc(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],fc(r),fc(n))}function mv(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(sd)||[],r=1;r<e.length;r++)t=fc(e,r).join(""),e=t.match(sd)||[];return t}}function yv(t){for(var e={"%FE%FF":"","%FF%FE":""},r=od.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=mv(r[0]);n!==r[0]&&(e[r[0]]=n)}r=od.exec(t)}e["%C2"]="";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var vv=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return yv(t)}},wv=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},bv=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=gv,r=vv,n=wv,i=bv,s=b=>b==null,o=Symbol("encodeFragmentIdentifier");function a(b){switch(b.arrayFormat){case"index":return E=>(w,x)=>{const m=w.length;return x===void 0||b.skipNull&&x===null||b.skipEmptyString&&x===""?w:x===null?[...w,[h(E,b),"[",m,"]"].join("")]:[...w,[h(E,b),"[",h(m,b),"]=",h(x,b)].join("")]};case"bracket":return E=>(w,x)=>x===void 0||b.skipNull&&x===null||b.skipEmptyString&&x===""?w:x===null?[...w,[h(E,b),"[]"].join("")]:[...w,[h(E,b),"[]=",h(x,b)].join("")];case"colon-list-separator":return E=>(w,x)=>x===void 0||b.skipNull&&x===null||b.skipEmptyString&&x===""?w:x===null?[...w,[h(E,b),":list="].join("")]:[...w,[h(E,b),":list=",h(x,b)].join("")];case"comma":case"separator":case"bracket-separator":{const E=b.arrayFormat==="bracket-separator"?"[]=":"=";return w=>(x,m)=>m===void 0||b.skipNull&&m===null||b.skipEmptyString&&m===""?x:(m=m===null?"":m,x.length===0?[[h(w,b),E,h(m,b)].join("")]:[[x,h(m,b)].join(b.arrayFormatSeparator)])}default:return E=>(w,x)=>x===void 0||b.skipNull&&x===null||b.skipEmptyString&&x===""?w:x===null?[...w,h(E,b)]:[...w,[h(E,b),"=",h(x,b)].join("")]}}function c(b){let E;switch(b.arrayFormat){case"index":return(w,x,m)=>{if(E=/\[(\d*)\]$/.exec(w),w=w.replace(/\[\d*\]$/,""),!E){m[w]=x;return}m[w]===void 0&&(m[w]={}),m[w][E[1]]=x};case"bracket":return(w,x,m)=>{if(E=/(\[\])$/.exec(w),w=w.replace(/\[\]$/,""),!E){m[w]=x;return}if(m[w]===void 0){m[w]=[x];return}m[w]=[].concat(m[w],x)};case"colon-list-separator":return(w,x,m)=>{if(E=/(:list)$/.exec(w),w=w.replace(/:list$/,""),!E){m[w]=x;return}if(m[w]===void 0){m[w]=[x];return}m[w]=[].concat(m[w],x)};case"comma":case"separator":return(w,x,m)=>{const u=typeof x=="string"&&x.includes(b.arrayFormatSeparator),y=typeof x=="string"&&!u&&f(x,b).includes(b.arrayFormatSeparator);x=y?f(x,b):x;const T=u||y?x.split(b.arrayFormatSeparator).map(A=>f(A,b)):x===null?x:f(x,b);m[w]=T};case"bracket-separator":return(w,x,m)=>{const u=/(\[\])$/.test(w);if(w=w.replace(/\[\]$/,""),!u){m[w]=x&&f(x,b);return}const y=x===null?[]:x.split(b.arrayFormatSeparator).map(T=>f(T,b));if(m[w]===void 0){m[w]=y;return}m[w]=[].concat(m[w],y)};default:return(w,x,m)=>{if(m[w]===void 0){m[w]=x;return}m[w]=[].concat(m[w],x)}}}function l(b){if(typeof b!="string"||b.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function h(b,E){return E.encode?E.strict?e(b):encodeURIComponent(b):b}function f(b,E){return E.decode?r(b):b}function p(b){return Array.isArray(b)?b.sort():typeof b=="object"?p(Object.keys(b)).sort((E,w)=>Number(E)-Number(w)).map(E=>b[E]):b}function g(b){const E=b.indexOf("#");return E!==-1&&(b=b.slice(0,E)),b}function v(b){let E="";const w=b.indexOf("#");return w!==-1&&(E=b.slice(w)),E}function _(b){b=g(b);const E=b.indexOf("?");return E===-1?"":b.slice(E+1)}function S(b,E){return E.parseNumbers&&!Number.isNaN(Number(b))&&typeof b=="string"&&b.trim()!==""?b=Number(b):E.parseBooleans&&b!==null&&(b.toLowerCase()==="true"||b.toLowerCase()==="false")&&(b=b.toLowerCase()==="true"),b}function O(b,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),l(E.arrayFormatSeparator);const w=c(E),x=Object.create(null);if(typeof b!="string"||(b=b.trim().replace(/^[?#&]/,""),!b))return x;for(const m of b.split("&")){if(m==="")continue;let[u,y]=n(E.decode?m.replace(/\+/g," "):m,"=");y=y===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?y:f(y,E),w(f(u,E),y,x)}for(const m of Object.keys(x)){const u=x[m];if(typeof u=="object"&&u!==null)for(const y of Object.keys(u))u[y]=S(u[y],E);else x[m]=S(u,E)}return E.sort===!1?x:(E.sort===!0?Object.keys(x).sort():Object.keys(x).sort(E.sort)).reduce((m,u)=>{const y=x[u];return y&&typeof y=="object"&&!Array.isArray(y)?m[u]=p(y):m[u]=y,m},Object.create(null))}t.extract=_,t.parse=O,t.stringify=(b,E)=>{if(!b)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),l(E.arrayFormatSeparator);const w=y=>E.skipNull&&s(b[y])||E.skipEmptyString&&b[y]==="",x=a(E),m={};for(const y of Object.keys(b))w(y)||(m[y]=b[y]);const u=Object.keys(m);return E.sort!==!1&&u.sort(E.sort),u.map(y=>{const T=b[y];return T===void 0?"":T===null?h(y,E):Array.isArray(T)?T.length===0&&E.arrayFormat==="bracket-separator"?h(y,E)+"[]":T.reduce(x(y),[]).join("&"):h(y,E)+"="+h(T,E)}).filter(y=>y.length>0).join("&")},t.parseUrl=(b,E)=>{E=Object.assign({decode:!0},E);const[w,x]=n(b,"#");return Object.assign({url:w.split("?")[0]||"",query:O(_(b),E)},E&&E.parseFragmentIdentifier&&x?{fragmentIdentifier:f(x,E)}:{})},t.stringifyUrl=(b,E)=>{E=Object.assign({encode:!0,strict:!0,[o]:!0},E);const w=g(b.url).split("?")[0]||"",x=t.extract(b.url),m=t.parse(x,{sort:!1}),u=Object.assign(m,b.query);let y=t.stringify(u,E);y&&(y=`?${y}`);let T=v(b.url);return b.fragmentIdentifier&&(T=`#${E[o]?h(b.fragmentIdentifier,E):b.fragmentIdentifier}`),`${w}${y}${T}`},t.pick=(b,E,w)=>{w=Object.assign({parseFragmentIdentifier:!0,[o]:!1},w);const{url:x,query:m,fragmentIdentifier:u}=t.parseUrl(b,w);return t.stringifyUrl({url:x,query:i(m,E),fragmentIdentifier:u},w)},t.exclude=(b,E,w)=>{const x=Array.isArray(E)?m=>!E.includes(m):(m,u)=>!E(m,u);return t.pick(b,x,w)}})(ns);const _v={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function ad(t,e){return t.includes(":")?[t]:e.chains||[]}const cd="base10",Xt="base16",pc="base64pad",gc="utf8",ld=0,qn=1,Ev=0,ud=1,mc=12,yc=32;function Sv(){const t=uc.generateKeyPair();return{privateKey:Jt(t.secretKey,Xt),publicKey:Jt(t.publicKey,Xt)}}function vc(){const t=di.randomBytes(yc);return Jt(t,Xt)}function xv(t,e){const r=uc.sharedKey(or(t,Xt),or(e,Xt),!0),n=new Wy(Co.SHA256,r).expand(yc);return Jt(n,Xt)}function Cv(t){const e=Co.hash(or(t,Xt));return Jt(e,Xt)}function pi(t){const e=Co.hash(or(t,gc));return Jt(e,Xt)}function Ov(t){return or(`${t}`,cd)}function is(t){return Number(Jt(t,cd))}function Dv(t){const e=Ov(typeof t.type<"u"?t.type:ld);if(is(e)===qn&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?or(t.senderPublicKey,Xt):void 0,n=typeof t.iv<"u"?or(t.iv,Xt):di.randomBytes(mc),i=new ac.ChaCha20Poly1305(or(t.symKey,Xt)).seal(n,or(t.message,gc));return Av({type:e,sealed:i,iv:n,senderPublicKey:r})}function Iv(t){const e=new ac.ChaCha20Poly1305(or(t.symKey,Xt)),{sealed:r,iv:n}=Oo(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return Jt(i,gc)}function Av(t){if(is(t.type)===qn){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Jt(sc([t.type,t.senderPublicKey,t.iv,t.sealed]),pc)}return Jt(sc([t.type,t.iv,t.sealed]),pc)}function Oo(t){const e=or(t,pc),r=e.slice(Ev,ud),n=ud;if(is(r)===qn){const a=n+yc,c=a+mc,l=e.slice(n,a),h=e.slice(a,c),f=e.slice(c);return{type:r,sealed:f,iv:h,senderPublicKey:l}}const i=n+mc,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function Tv(t,e){const r=Oo(t);return hd({type:is(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Jt(r.senderPublicKey,Xt):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function hd(t){const e=(t==null?void 0:t.type)||ld;if(e===qn){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function dd(t){return t.type===qn&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Rv=Object.defineProperty,fd=Object.getOwnPropertySymbols,Pv=Object.prototype.hasOwnProperty,$v=Object.prototype.propertyIsEnumerable,pd=(t,e,r)=>e in t?Rv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gd=(t,e)=>{for(var r in e||(e={}))Pv.call(e,r)&&pd(t,r,e[r]);if(fd)for(var r of fd(e))$v.call(e,r)&&pd(t,r,e[r]);return t};const Nv="ReactNative",dr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Lv="js";function wc(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function gi(){return!ed()&&!!hc()&&navigator.product===Nv}function mi(){return!wc()&&!!hc()}function ss(){return gi()?dr.reactNative:wc()?dr.node:mi()?dr.browser:dr.unknown}function Mv(){var t;try{return gi()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function kv(t,e){let r=ns.parse(t);return r=gd(gd({},r),e),t=ns.stringify(r),t}function Fv(){return rd()||{name:"",description:"",url:"",icons:[""]}}function Uv(){if(ss()===dr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=Xy();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function jv(){var t;const e=ss();return e===dr.browser?[e,((t=td())==null?void 0:t.host)||"unknown"].join(":"):e}function Bv(t,e,r){const n=Uv(),i=jv();return[[t,e].join("-"),[Lv,r].join("-"),n,i].join("/")}function qv({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a}){const c=r.split("?"),l=Bv(t,e,n),h={auth:i,ua:l,projectId:s,useOnCloseEvent:o||void 0,origin:a||void 0},f=kv(c[1]||"",h);return c[0]+"?"+f}function zn(t,e){return t.filter(r=>e.includes(r)).length===t.length}function md(t){return Object.fromEntries(t.entries())}function yd(t){return new Map(Object.entries(t))}function yi(t=oe.FIVE_MINUTES,e){const r=oe.toMiliseconds(t||oe.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function os(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function vd(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function zv(t){return vd("topic",t)}function Wv(t){return vd("id",t)}function wd(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Cr(t,e){return oe.fromMiliseconds((e||Date.now())+oe.toMiliseconds(t))}function un(t){return Date.now()>=oe.toMiliseconds(t)}function Ct(t,e){return`${t}${e?`:${e}`:""}`}async function Vv({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=ss();o===dr.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===dr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}async function Hv(t,e){try{return await t.getItem(e)||(mi()?localStorage.getItem(e):void 0)}catch(r){console.error(r)}}const Kv="irn";function bc(t){return(t==null?void 0:t.relay)||{protocol:Kv}}function Do(t){const e=_v[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Zv=Object.defineProperty,bd=Object.getOwnPropertySymbols,Gv=Object.prototype.hasOwnProperty,Qv=Object.prototype.propertyIsEnumerable,_d=(t,e,r)=>e in t?Zv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yv=(t,e)=>{for(var r in e||(e={}))Gv.call(e,r)&&_d(t,r,e[r]);if(bd)for(var r of bd(e))Qv.call(e,r)&&_d(t,r,e[r]);return t};function Jv(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Ed(t){t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=ns.parse(s);return{protocol:n,topic:Xv(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:Jv(o)}}function Xv(t){return t.startsWith("//")?t.substring(2):t}function ew(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function tw(t){return`${t.protocol}:${t.topic}@${t.version}?`+ns.stringify(Yv({symKey:t.symKey},ew(t.relay)))}function vi(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function rw(t){const e=[];return Object.values(t).forEach(r=>{e.push(...vi(r.accounts))}),e}function nw(t,e){const r=[];return Object.values(t).forEach(n=>{vi(n.accounts).includes(e)&&r.push(...n.methods)}),r}function iw(t,e){const r=[];return Object.values(t).forEach(n=>{vi(n.accounts).includes(e)&&r.push(...n.events)}),r}function sw(t,e){const r=Ao(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}const ow={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},aw={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function X(t,e){const{message:r,code:n}=aw[t];return{message:e?`${r} ${e}`:r,code:n}}function Ot(t,e){const{message:r,code:n}=ow[t];return{message:e?`${r} ${e}`:r,code:n}}function as(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function cs(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function er(t){return typeof t>"u"}function Lt(t,e){return e&&er(t)?!0:typeof t=="string"&&!!t.trim().length}function _c(t,e){return e&&er(t)?!0:typeof t=="number"&&!isNaN(t)}function cw(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return zn(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],h=vi(a),f=r[o];(!zn(ad(o,f),h)||!zn(f.methods,c)||!zn(f.events,l))&&(s=!1)}),s):!1}function Io(t){return Lt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function lw(t){if(Lt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Io(r)}}return!1}function uw(t){if(Lt(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function hw(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function dw(t){return t==null?void 0:t.topic}function fw(t,e){let r=null;return Lt(t==null?void 0:t.publicKey,!1)||(r=X("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Sd(t){let e=!0;return as(t)?t.length&&(e=t.every(r=>Lt(r,!1))):e=!1,e}function pw(t,e,r){let n=null;return as(e)&&e.length?e.forEach(i=>{n||Io(i)||(n=Ot("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Io(t)||(n=Ot("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function gw(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=pw(i,ad(i,s),`${e} ${r}`);o&&(n=o)}),n}function mw(t,e){let r=null;return as(t)?t.forEach(n=>{r||lw(n)||(r=Ot("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Ot("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function yw(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=mw(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function vw(t,e){let r=null;return Sd(t==null?void 0:t.methods)?Sd(t==null?void 0:t.events)||(r=Ot("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Ot("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function xd(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=vw(n,`${e}, namespace`);i&&(r=i)}),r}function ww(t,e,r){let n=null;if(t&&cs(t)){const i=xd(t,e);i&&(n=i);const s=gw(t,e,r);s&&(n=s)}else n=X("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Ao(t,e){let r=null;if(t&&cs(t)){const n=xd(t,e);n&&(r=n);const i=yw(t,e);i&&(r=i)}else r=X("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Cd(t){return Lt(t.protocol,!0)}function bw(t,e){let r=!1;return e&&!t?r=!0:t&&as(t)&&t.length&&t.forEach(n=>{r=Cd(n)}),r}function _w(t){return typeof t=="number"}function ar(t){return typeof t<"u"&&typeof t!==null}function Ew(t){return!(!t||typeof t!="object"||!t.code||!_c(t.code,!1)||!t.message||!Lt(t.message,!1))}function Sw(t){return!(er(t)||!Lt(t.method,!1))}function xw(t){return!(er(t)||er(t.result)&&er(t.error)||!_c(t.id,!1)||!Lt(t.jsonrpc,!1))}function Cw(t){return!(er(t)||!Lt(t.name,!1))}function Od(t,e){return!(!Io(e)||!rw(t).includes(e))}function Ow(t,e,r){return Lt(r,!1)?nw(t,e).includes(r):!1}function Dw(t,e,r){return Lt(r,!1)?iw(t,e).includes(r):!1}function Dd(t,e,r){let n=null;const i=Iw(t),s=Aw(e),o=Object.keys(i),a=Object.keys(s),c=Id(Object.keys(t)),l=Id(Object.keys(e)),h=c.filter(f=>!l.includes(f));return h.length&&(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(e).toString()}`)),zn(o,a)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const p=vi(e[f].accounts);p.includes(f)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${p.toString()}`))}),o.forEach(f=>{n||(zn(i[f].methods,s[f].methods)?zn(i[f].events,s[f].events)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function Iw(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function Id(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Aw(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=vi(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function Tw(t,e){return _c(t,!1)&&t<=e.max&&t>=e.min}function Ad(){const t=ss();return new Promise(e=>{switch(t){case dr.browser:e(Rw());break;case dr.reactNative:e(Pw());break;case dr.node:e($w());break;default:e(!0)}})}function Rw(){return mi()&&(navigator==null?void 0:navigator.onLine)}async function Pw(){if(gi()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function $w(){return!0}function Nw(t){switch(ss()){case dr.browser:Lw(t);break;case dr.reactNative:Mw(t);break}}function Lw(t){!gi()&&mi()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Mw(t){gi()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const Ec={};let To=class{static get(e){return Ec[e]}static set(e,r){Ec[e]=r}static delete(e){delete Ec[e]}};const kw="PARSE_ERROR",Fw="INVALID_REQUEST",Uw="METHOD_NOT_FOUND",jw="INVALID_PARAMS",Td="INTERNAL_ERROR",Sc="SERVER_ERROR",Bw=[-32700,-32600,-32601,-32602,-32603],ls={[kw]:{code:-32700,message:"Parse error"},[Fw]:{code:-32600,message:"Invalid Request"},[Uw]:{code:-32601,message:"Method not found"},[jw]:{code:-32602,message:"Invalid params"},[Td]:{code:-32603,message:"Internal error"},[Sc]:{code:-32e3,message:"Server error"}},Rd=Sc;function qw(t){return Bw.includes(t)}function Pd(t){return Object.keys(ls).includes(t)?ls[t]:ls[Rd]}function zw(t){const e=Object.values(ls).find(r=>r.code===t);return e||ls[Rd]}function Ww(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var $d={},Kr={},Nd;function Vw(){if(Nd)return Kr;Nd=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.isBrowserCryptoAvailable=Kr.getSubtleCrypto=Kr.getBrowerCrypto=void 0;function t(){return(kr==null?void 0:kr.crypto)||(kr==null?void 0:kr.msCrypto)||{}}Kr.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Kr.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Kr.isBrowserCryptoAvailable=r,Kr}var Zr={},Ld;function Hw(){if(Ld)return Zr;Ld=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.isBrowser=Zr.isNode=Zr.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Zr.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Zr.isNode=e;function r(){return!t()&&!e()}return Zr.isBrowser=r,Zr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Fr;e.__exportStar(Vw(),t),e.__exportStar(Hw(),t)})($d);function xc(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Md(t=6){return BigInt(xc(t))}function wi(t,e,r){return{id:r||xc(),jsonrpc:"2.0",method:t,params:e}}function Cc(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Oc(t,e,r){return{id:t,jsonrpc:"2.0",error:Kw(e,r)}}function Kw(t,e){return typeof t>"u"?Pd(Td):(typeof t=="string"&&(t=Object.assign(Object.assign({},Pd(Sc)),{message:t})),typeof e<"u"&&(t.data=e),qw(t.code)&&(t=zw(t.code)),t)}class Zw{}class Gw extends Zw{constructor(){super()}}class Qw extends Gw{constructor(e){super()}}const Yw="^wss?:";function Jw(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Xw(t,e){const r=Jw(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function kd(t){return Xw(t,Yw)}function eb(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Fd(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Dc(t){return Fd(t)&&"method"in t}function Ro(t){return Fd(t)&&(Gr(t)||Or(t))}function Gr(t){return"result"in t}function Or(t){return"error"in t}class tb extends Qw{constructor(e){super(e),this.events=new mr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(wi(e.method,e.params||[],e.id||Md().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Or(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ro(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const rb=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),nb=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Ud=t=>t.split("?")[0],jd=10,ib=rb();let sb=class{constructor(e){if(this.url=e,this.events=new mr.EventEmitter,this.registering=!1,!kd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Gi(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!kd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=new URLSearchParams(e).get("origin"),s=$d.isReactNative()?{headers:{origin:i}}:{rejectUnauthorized:!eb(e)},o=new ib(e,[],s);nb()?o.onerror=a=>{const c=a;n(this.emitError(c.error))}:o.on("error",a=>{n(this.emitError(a))}),o.onopen=()=>{this.onOpen(o),r(o)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?go(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Oc(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Ww(e,Ud(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>jd&&this.events.setMaxListeners(jd)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Ud(this.url)}`));return this.events.emit("register_error",r),r}};var Po={exports:{}};Po.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",h="[object Boolean]",f="[object Date]",p="[object Error]",g="[object Function]",v="[object GeneratorFunction]",_="[object Map]",S="[object Number]",O="[object Null]",b="[object Object]",E="[object Promise]",w="[object Proxy]",x="[object RegExp]",m="[object Set]",u="[object String]",y="[object Symbol]",T="[object Undefined]",A="[object WeakMap]",k="[object ArrayBuffer]",B="[object DataView]",V="[object Float32Array]",R="[object Float64Array]",N="[object Int8Array]",Q="[object Int16Array]",H="[object Int32Array]",j="[object Uint8Array]",W="[object Uint8ClampedArray]",U="[object Uint16Array]",K="[object Uint32Array]",pe=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,ue=/^(?:0|[1-9]\d*)$/,ne={};ne[V]=ne[R]=ne[N]=ne[Q]=ne[H]=ne[j]=ne[W]=ne[U]=ne[K]=!0,ne[a]=ne[c]=ne[k]=ne[h]=ne[B]=ne[f]=ne[p]=ne[g]=ne[_]=ne[S]=ne[b]=ne[x]=ne[m]=ne[u]=ne[A]=!1;var le=typeof kr=="object"&&kr&&kr.Object===Object&&kr,M=typeof self=="object"&&self&&self.Object===Object&&self,L=le||M||Function("return this")(),P=e&&!e.nodeType&&e,d=P&&!0&&t&&!t.nodeType&&t,I=d&&d.exports===P,Y=I&&le.process,te=function(){try{return Y&&Y.binding&&Y.binding("util")}catch{}}(),Re=te&&te.isTypedArray;function Pe(C,$){for(var q=-1,se=C==null?0:C.length,ot=0,Se=[];++q<se;){var bt=C[q];$(bt,q,C)&&(Se[ot++]=bt)}return Se}function xe(C,$){for(var q=-1,se=$.length,ot=C.length;++q<se;)C[ot+q]=$[q];return C}function qe(C,$){for(var q=-1,se=C==null?0:C.length;++q<se;)if($(C[q],q,C))return!0;return!1}function ct(C,$){for(var q=-1,se=Array(C);++q<C;)se[q]=$(q);return se}function et(C){return function($){return C($)}}function Fe(C,$){return C.has($)}function Le(C,$){return C==null?void 0:C[$]}function Ce(C){var $=-1,q=Array(C.size);return C.forEach(function(se,ot){q[++$]=[ot,se]}),q}function Ie(C,$){return function(q){return C($(q))}}function Oe(C){var $=-1,q=Array(C.size);return C.forEach(function(se){q[++$]=se}),q}var be=Array.prototype,ve=Function.prototype,he=Object.prototype,Ae=L["__core-js_shared__"],$e=ve.toString,ge=he.hasOwnProperty,Me=function(){var C=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}(),ze=he.toString,Ze=RegExp("^"+$e.call(ge).replace(pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=I?L.Buffer:void 0,Ve=L.Symbol,pr=L.Uint8Array,_r=he.propertyIsEnumerable,Vr=be.splice,jt=Ve?Ve.toStringTag:void 0,Hr=Object.getOwnPropertySymbols,Er=Ge?Ge.isBuffer:void 0,On=Ie(Object.keys,Object),lt=Vi(L,"DataView"),it=Vi(L,"Map"),mt=Vi(L,"Promise"),dt=Vi(L,"Set"),yt=Vi(L,"WeakMap"),st=Vi(Object,"create"),Et=oi(lt),It=oi(it),At=oi(mt),St=oi(dt),Tt=oi(yt),xt=Ve?Ve.prototype:void 0,vt=xt?xt.valueOf:void 0;function rt(C){var $=-1,q=C==null?0:C.length;for(this.clear();++$<q;){var se=C[$];this.set(se[0],se[1])}}function D(){this.__data__=st?st(null):{},this.size=0}function F(C){var $=this.has(C)&&delete this.__data__[C];return this.size-=$?1:0,$}function ee(C){var $=this.__data__;if(st){var q=$[C];return q===n?void 0:q}return ge.call($,C)?$[C]:void 0}function fe(C){var $=this.__data__;return st?$[C]!==void 0:ge.call($,C)}function He(C,$){var q=this.__data__;return this.size+=this.has(C)?0:1,q[C]=st&&$===void 0?n:$,this}rt.prototype.clear=D,rt.prototype.delete=F,rt.prototype.get=ee,rt.prototype.has=fe,rt.prototype.set=He;function ke(C){var $=-1,q=C==null?0:C.length;for(this.clear();++$<q;){var se=C[$];this.set(se[0],se[1])}}function Ue(){this.__data__=[],this.size=0}function Ne(C){var $=this.__data__,q=Da($,C);if(q<0)return!1;var se=$.length-1;return q==se?$.pop():Vr.call($,q,1),--this.size,!0}function Bt(C){var $=this.__data__,q=Da($,C);return q<0?void 0:$[q][1]}function ft(C){return Da(this.__data__,C)>-1}function wt(C,$){var q=this.__data__,se=Da(q,C);return se<0?(++this.size,q.push([C,$])):q[se][1]=$,this}ke.prototype.clear=Ue,ke.prototype.delete=Ne,ke.prototype.get=Bt,ke.prototype.has=ft,ke.prototype.set=wt;function Rt(C){var $=-1,q=C==null?0:C.length;for(this.clear();++$<q;){var se=C[$];this.set(se[0],se[1])}}function Dn(){this.size=0,this.__data__={hash:new rt,map:new(it||ke),string:new rt}}function Ca(C){var $=Ia(this,C).delete(C);return this.size-=$?1:0,$}function $r(C){return Ia(this,C).get(C)}function Vx(C){return Ia(this,C).has(C)}function Hx(C,$){var q=Ia(this,C),se=q.size;return q.set(C,$),this.size+=q.size==se?0:1,this}Rt.prototype.clear=Dn,Rt.prototype.delete=Ca,Rt.prototype.get=$r,Rt.prototype.has=Vx,Rt.prototype.set=Hx;function Oa(C){var $=-1,q=C==null?0:C.length;for(this.__data__=new Rt;++$<q;)this.add(C[$])}function Kx(C){return this.__data__.set(C,n),this}function Zx(C){return this.__data__.has(C)}Oa.prototype.add=Oa.prototype.push=Kx,Oa.prototype.has=Zx;function In(C){var $=this.__data__=new ke(C);this.size=$.size}function Gx(){this.__data__=new ke,this.size=0}function Qx(C){var $=this.__data__,q=$.delete(C);return this.size=$.size,q}function Yx(C){return this.__data__.get(C)}function Jx(C){return this.__data__.has(C)}function Xx(C,$){var q=this.__data__;if(q instanceof ke){var se=q.__data__;if(!it||se.length<r-1)return se.push([C,$]),this.size=++q.size,this;q=this.__data__=new Rt(se)}return q.set(C,$),this.size=q.size,this}In.prototype.clear=Gx,In.prototype.delete=Qx,In.prototype.get=Yx,In.prototype.has=Jx,In.prototype.set=Xx;function e8(C,$){var q=Aa(C),se=!q&&g8(C),ot=!q&&!se&&mu(C),Se=!q&&!se&&!ot&&Q0(C),bt=q||se||ot||Se,kt=bt?ct(C.length,String):[],qt=kt.length;for(var pt in C)($||ge.call(C,pt))&&!(bt&&(pt=="length"||ot&&(pt=="offset"||pt=="parent")||Se&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||u8(pt,qt)))&&kt.push(pt);return kt}function Da(C,$){for(var q=C.length;q--;)if(H0(C[q][0],$))return q;return-1}function t8(C,$,q){var se=$(C);return Aa(C)?se:xe(se,q(C))}function no(C){return C==null?C===void 0?T:O:jt&&jt in Object(C)?c8(C):p8(C)}function q0(C){return io(C)&&no(C)==a}function z0(C,$,q,se,ot){return C===$?!0:C==null||$==null||!io(C)&&!io($)?C!==C&&$!==$:r8(C,$,q,se,z0,ot)}function r8(C,$,q,se,ot,Se){var bt=Aa(C),kt=Aa($),qt=bt?c:An(C),pt=kt?c:An($);qt=qt==a?b:qt,pt=pt==a?b:pt;var gr=qt==b,Nr=pt==b,Gt=qt==pt;if(Gt&&mu(C)){if(!mu($))return!1;bt=!0,gr=!1}if(Gt&&!gr)return Se||(Se=new In),bt||Q0(C)?W0(C,$,q,se,ot,Se):o8(C,$,qt,q,se,ot,Se);if(!(q&i)){var Sr=gr&&ge.call(C,"__wrapped__"),xr=Nr&&ge.call($,"__wrapped__");if(Sr||xr){var Tn=Sr?C.value():C,nn=xr?$.value():$;return Se||(Se=new In),ot(Tn,nn,q,se,Se)}}return Gt?(Se||(Se=new In),a8(C,$,q,se,ot,Se)):!1}function n8(C){if(!G0(C)||d8(C))return!1;var $=K0(C)?Ze:Z;return $.test(oi(C))}function i8(C){return io(C)&&Z0(C.length)&&!!ne[no(C)]}function s8(C){if(!f8(C))return On(C);var $=[];for(var q in Object(C))ge.call(C,q)&&q!="constructor"&&$.push(q);return $}function W0(C,$,q,se,ot,Se){var bt=q&i,kt=C.length,qt=$.length;if(kt!=qt&&!(bt&&qt>kt))return!1;var pt=Se.get(C);if(pt&&Se.get($))return pt==$;var gr=-1,Nr=!0,Gt=q&s?new Oa:void 0;for(Se.set(C,$),Se.set($,C);++gr<kt;){var Sr=C[gr],xr=$[gr];if(se)var Tn=bt?se(xr,Sr,gr,$,C,Se):se(Sr,xr,gr,C,$,Se);if(Tn!==void 0){if(Tn)continue;Nr=!1;break}if(Gt){if(!qe($,function(nn,ai){if(!Fe(Gt,ai)&&(Sr===nn||ot(Sr,nn,q,se,Se)))return Gt.push(ai)})){Nr=!1;break}}else if(!(Sr===xr||ot(Sr,xr,q,se,Se))){Nr=!1;break}}return Se.delete(C),Se.delete($),Nr}function o8(C,$,q,se,ot,Se,bt){switch(q){case B:if(C.byteLength!=$.byteLength||C.byteOffset!=$.byteOffset)return!1;C=C.buffer,$=$.buffer;case k:return!(C.byteLength!=$.byteLength||!Se(new pr(C),new pr($)));case h:case f:case S:return H0(+C,+$);case p:return C.name==$.name&&C.message==$.message;case x:case u:return C==$+"";case _:var kt=Ce;case m:var qt=se&i;if(kt||(kt=Oe),C.size!=$.size&&!qt)return!1;var pt=bt.get(C);if(pt)return pt==$;se|=s,bt.set(C,$);var gr=W0(kt(C),kt($),se,ot,Se,bt);return bt.delete(C),gr;case y:if(vt)return vt.call(C)==vt.call($)}return!1}function a8(C,$,q,se,ot,Se){var bt=q&i,kt=V0(C),qt=kt.length,pt=V0($),gr=pt.length;if(qt!=gr&&!bt)return!1;for(var Nr=qt;Nr--;){var Gt=kt[Nr];if(!(bt?Gt in $:ge.call($,Gt)))return!1}var Sr=Se.get(C);if(Sr&&Se.get($))return Sr==$;var xr=!0;Se.set(C,$),Se.set($,C);for(var Tn=bt;++Nr<qt;){Gt=kt[Nr];var nn=C[Gt],ai=$[Gt];if(se)var Y0=bt?se(ai,nn,Gt,$,C,Se):se(nn,ai,Gt,C,$,Se);if(!(Y0===void 0?nn===ai||ot(nn,ai,q,se,Se):Y0)){xr=!1;break}Tn||(Tn=Gt=="constructor")}if(xr&&!Tn){var Ta=C.constructor,Ra=$.constructor;Ta!=Ra&&"constructor"in C&&"constructor"in $&&!(typeof Ta=="function"&&Ta instanceof Ta&&typeof Ra=="function"&&Ra instanceof Ra)&&(xr=!1)}return Se.delete(C),Se.delete($),xr}function V0(C){return t8(C,v8,l8)}function Ia(C,$){var q=C.__data__;return h8($)?q[typeof $=="string"?"string":"hash"]:q.map}function Vi(C,$){var q=Le(C,$);return n8(q)?q:void 0}function c8(C){var $=ge.call(C,jt),q=C[jt];try{C[jt]=void 0;var se=!0}catch{}var ot=ze.call(C);return se&&($?C[jt]=q:delete C[jt]),ot}var l8=Hr?function(C){return C==null?[]:(C=Object(C),Pe(Hr(C),function($){return _r.call(C,$)}))}:w8,An=no;(lt&&An(new lt(new ArrayBuffer(1)))!=B||it&&An(new it)!=_||mt&&An(mt.resolve())!=E||dt&&An(new dt)!=m||yt&&An(new yt)!=A)&&(An=function(C){var $=no(C),q=$==b?C.constructor:void 0,se=q?oi(q):"";if(se)switch(se){case Et:return B;case It:return _;case At:return E;case St:return m;case Tt:return A}return $});function u8(C,$){return $=$??o,!!$&&(typeof C=="number"||ue.test(C))&&C>-1&&C%1==0&&C<$}function h8(C){var $=typeof C;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?C!=="__proto__":C===null}function d8(C){return!!Me&&Me in C}function f8(C){var $=C&&C.constructor,q=typeof $=="function"&&$.prototype||he;return C===q}function p8(C){return ze.call(C)}function oi(C){if(C!=null){try{return $e.call(C)}catch{}try{return C+""}catch{}}return""}function H0(C,$){return C===$||C!==C&&$!==$}var g8=q0(function(){return arguments}())?q0:function(C){return io(C)&&ge.call(C,"callee")&&!_r.call(C,"callee")},Aa=Array.isArray;function m8(C){return C!=null&&Z0(C.length)&&!K0(C)}var mu=Er||b8;function y8(C,$){return z0(C,$)}function K0(C){if(!G0(C))return!1;var $=no(C);return $==g||$==v||$==l||$==w}function Z0(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=o}function G0(C){var $=typeof C;return C!=null&&($=="object"||$=="function")}function io(C){return C!=null&&typeof C=="object"}var Q0=Re?et(Re):i8;function v8(C){return m8(C)?e8(C):s8(C)}function w8(){return[]}function b8(){return!1}t.exports=y8}(Po,Po.exports);var ob=Po.exports;const ab=co(ob);function cb(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var _=0,S=0,O=0,b=v.length;O!==b&&v[O]===0;)O++,_++;for(var E=(b-O)*h+1>>>0,w=new Uint8Array(E);O!==b;){for(var x=v[O],m=0,u=E-1;(x!==0||m<S)&&u!==-1;u--,m++)x+=256*w[u]>>>0,w[u]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");S=m,O++}for(var y=E-S;y!==E&&w[y]===0;)y++;for(var T=c.repeat(_);y<E;++y)T+=t.charAt(w[y]);return T}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var _=0;if(v[_]!==" "){for(var S=0,O=0;v[_]===c;)S++,_++;for(var b=(v.length-_)*l+1>>>0,E=new Uint8Array(b);v[_];){var w=r[v.charCodeAt(_)];if(w===255)return;for(var x=0,m=b-1;(w!==0||x<O)&&m!==-1;m--,x++)w+=a*E[m]>>>0,E[m]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");O=x,_++}if(v[_]!==" "){for(var u=b-O;u!==b&&E[u]===0;)u++;for(var y=new Uint8Array(S+(b-u)),T=S;u!==b;)y[T++]=E[u++];return y}}}function g(v){var _=p(v);if(_)return _;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:g}}var lb=cb,ub=lb;const Bd=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},hb=t=>new TextEncoder().encode(t),db=t=>new TextDecoder().decode(t);class fb{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class pb{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return qd(this,e)}}class gb{constructor(e){this.decoders=e}or(e){return qd(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qd=(t,e)=>new gb({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class mb{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new fb(e,r,n),this.decoder=new pb(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const $o=({name:t,prefix:e,encode:r,decode:n})=>new mb(t,e,r,n),us=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=ub(r,e);return $o({prefix:t,name:e,encode:n,decode:s=>Bd(i(s))})},yb=(t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let h=0;h<s;++h){const f=i[t[h]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},vb=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ut=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>$o({prefix:e,name:t,encode(i){return vb(i,n,r)},decode(i){return yb(i,n,r,t)}}),wb=$o({prefix:"\0",name:"identity",encode:t=>db(t),decode:t=>hb(t)});var bb=Object.freeze({__proto__:null,identity:wb});const _b=Ut({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Eb=Object.freeze({__proto__:null,base2:_b});const Sb=Ut({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var xb=Object.freeze({__proto__:null,base8:Sb});const Cb=us({prefix:"9",name:"base10",alphabet:"0123456789"});var Ob=Object.freeze({__proto__:null,base10:Cb});const Db=Ut({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ib=Ut({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ab=Object.freeze({__proto__:null,base16:Db,base16upper:Ib});const Tb=Ut({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Rb=Ut({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pb=Ut({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),$b=Ut({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Nb=Ut({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Lb=Ut({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Mb=Ut({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),kb=Ut({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Fb=Ut({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ub=Object.freeze({__proto__:null,base32:Tb,base32upper:Rb,base32pad:Pb,base32padupper:$b,base32hex:Nb,base32hexupper:Lb,base32hexpad:Mb,base32hexpadupper:kb,base32z:Fb});const jb=us({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Bb=us({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var qb=Object.freeze({__proto__:null,base36:jb,base36upper:Bb});const zb=us({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Wb=us({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Vb=Object.freeze({__proto__:null,base58btc:zb,base58flickr:Wb});const Hb=Ut({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Kb=Ut({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Zb=Ut({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Gb=Ut({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Qb=Object.freeze({__proto__:null,base64:Hb,base64pad:Kb,base64url:Zb,base64urlpad:Gb});const zd=Array.from(""),Yb=zd.reduce((t,e,r)=>(t[r]=e,t),[]),Jb=zd.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Xb(t){return t.reduce((e,r)=>(e+=Yb[r],e),"")}function e2(t){const e=[];for(const r of t){const n=Jb[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const t2=$o({prefix:"",name:"base256emoji",encode:Xb,decode:e2});var r2=Object.freeze({__proto__:null,base256emoji:t2}),n2=Vd,Wd=128,i2=127,s2=~i2,o2=Math.pow(2,31);function Vd(t,e,r){e=e||[],r=r||0;for(var n=r;t>=o2;)e[r++]=t&255|Wd,t/=128;for(;t&s2;)e[r++]=t&255|Wd,t>>>=7;return e[r]=t|0,Vd.bytes=r-n+1,e}var a2=Ic,c2=128,Hd=127;function Ic(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Ic.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Hd)<<i:(o&Hd)*Math.pow(2,i),i+=7}while(o>=c2);return Ic.bytes=s-n,r}var l2=Math.pow(2,7),u2=Math.pow(2,14),h2=Math.pow(2,21),d2=Math.pow(2,28),f2=Math.pow(2,35),p2=Math.pow(2,42),g2=Math.pow(2,49),m2=Math.pow(2,56),y2=Math.pow(2,63),v2=function(t){return t<l2?1:t<u2?2:t<h2?3:t<d2?4:t<f2?5:t<p2?6:t<g2?7:t<m2?8:t<y2?9:10},w2={encode:n2,decode:a2,encodingLength:v2},Kd=w2;const Zd=(t,e,r=0)=>(Kd.encode(t,e,r),e),Gd=t=>Kd.encodingLength(t),Ac=(t,e)=>{const r=e.byteLength,n=Gd(t),i=n+Gd(r),s=new Uint8Array(i+r);return Zd(t,s,0),Zd(r,s,n),s.set(e,i),new b2(t,r,e,s)};let b2=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const Qd=({name:t,code:e,encode:r})=>new _2(t,e,r);let _2=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Ac(this.code,r):r.then(n=>Ac(this.code,n))}else throw Error("Unknown type, must be binary type")}};const Yd=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),E2=Qd({name:"sha2-256",code:18,encode:Yd("SHA-256")}),S2=Qd({name:"sha2-512",code:19,encode:Yd("SHA-512")});var x2=Object.freeze({__proto__:null,sha256:E2,sha512:S2});const Jd=0,C2="identity",Xd=Bd;var O2=Object.freeze({__proto__:null,identity:{code:Jd,name:C2,encode:Xd,digest:t=>Ac(Jd,Xd(t))}});new TextEncoder,new TextDecoder;const ef={...bb,...Eb,...xb,...Ob,...Ab,...Ub,...qb,...Vb,...Qb,...r2};({...x2,...O2});function tf(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function D2(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?tf(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function rf(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const nf=rf("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Tc=rf("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=D2(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),I2={utf8:nf,"utf-8":nf,hex:ef.base16,latin1:Tc,ascii:Tc,binary:Tc,...ef};function A2(t,e="utf8"){const r=I2[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?tf(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const sf="wc",T2=2,Rc="core",hn=`${sf}@2:${Rc}:`,R2={name:Rc,logger:"error"},P2={database:":memory:"},$2="crypto",of="client_ed25519_seed",N2=oe.ONE_DAY,L2="keychain",M2="0.3",k2="messages",F2="0.3",U2=oe.SIX_HOURS,j2="publisher",af="irn",B2="error",cf="wss://relay.walletconnect.com",lf="wss://relay.walletconnect.org",q2="relayer",Vt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},z2="_subscription",Qr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},W2=oe.ONE_SECOND,V2="2.10.6",H2=1e4,K2="0.3",Z2="WALLETCONNECT_CLIENT_ID",Dr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},G2="subscription",Q2="0.3",Y2=oe.FIVE_SECONDS*1e3,J2="pairing",X2="0.3",hs={wc_pairingDelete:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:0},res:{ttl:oe.ONE_DAY,prompt:!1,tag:0}}},ds={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},jr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},e_="history",t_="0.3",r_="expirer",yr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},n_="0.3",Pc="verify-api",bi="https://verify.walletconnect.com",$c="https://verify.walletconnect.org",i_=[bi,$c];let s_=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=L2,this.version=M2,this.initialized=!1,this.storagePrefix=hn,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=X("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=We.generateChildLogger(r,this.name)}get context(){return We.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,md(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?yd(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},o_=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=$2,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=qh(i);return Bh(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=Sv();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=qh(s),a=vc();return await Ry(a,i,N2,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=xv(a,s);return this.setSymKey(c,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||Cv(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=hd(o),c=Gi(s);if(dd(a)){const p=a.senderPublicKey,g=a.receiverPublicKey;i=await this.generateSharedKey(p,g)}const l=this.getSymKey(i),{type:h,senderPublicKey:f}=a;return Dv({type:h,symKey:l,message:c,senderPublicKey:f})},this.decode=async(i,s,o)=>{this.isInitialized();const a=Tv(s,o);if(dd(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=Iv({symKey:c,encoded:s});return go(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=i=>{const s=Oo(i);return is(s.type)},this.getPayloadSenderPublicKey=i=>{const s=Oo(i);return s.senderPublicKey?Jt(s.senderPublicKey,Xt):void 0},this.core=e,this.logger=We.generateChildLogger(r,this.name),this.keychain=n||new s_(this.core,this.logger)}get context(){return We.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(of)}catch{e=vc(),await this.keychain.set(of,e)}return A2(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},a_=class extends ph{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=k2,this.version=F2,this.initialized=!1,this.storagePrefix=hn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=pi(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=pi(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=We.generateChildLogger(e,this.name),this.core=r}get context(){return We.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,md(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?yd(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},c_=class extends gh{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new mr.EventEmitter,this.name=j2,this.queue=new Map,this.publishTimeout=oe.toMiliseconds(oe.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const a=(s==null?void 0:s.ttl)||U2,c=bc(s),l=(s==null?void 0:s.prompt)||!1,h=(s==null?void 0:s.tag)||0,f=(s==null?void 0:s.id)||Md().toString(),p={topic:n,message:i,opts:{ttl:a,relay:c,prompt:l,tag:h,id:f}},g=setTimeout(()=>this.queue.set(f,p),this.publishTimeout);try{await await os(this.rpcPublish(n,i,a,c,l,h,f),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(f),this.relayer.events.emit(Vt.publish,p)}catch(v){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(f),v;return}finally{clearTimeout(g)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=We.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return We.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var c,l,h,f;const p={method:Do(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return er((c=p.params)==null?void 0:c.prompt)&&((l=p.params)==null||delete l.prompt),er((h=p.params)==null?void 0:h.tag)&&((f=p.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(ui.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Vt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Vt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};class l_{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var u_=Object.defineProperty,h_=Object.defineProperties,d_=Object.getOwnPropertyDescriptors,uf=Object.getOwnPropertySymbols,f_=Object.prototype.hasOwnProperty,p_=Object.prototype.propertyIsEnumerable,hf=(t,e,r)=>e in t?u_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fs=(t,e)=>{for(var r in e||(e={}))f_.call(e,r)&&hf(t,r,e[r]);if(uf)for(var r of uf(e))p_.call(e,r)&&hf(t,r,e[r]);return t},Nc=(t,e)=>h_(t,d_(e));let g_=class extends vh{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new l_,this.events=new mr.EventEmitter,this.name=G2,this.version=Q2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=hn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=bc(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const o=new oe.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=Y2&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=We.generateChildLogger(r,this.name),this.clientId=""}get context(){return We.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=bc(n);await this.rpcUnsubscribe(e,r,i);const s=Ot("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:Do(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await os(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Vt.connection_stalled)}return pi(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Do(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await os(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Vt.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:Do(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Nc(fs({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,fs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,fs({},r)),this.topicMap.set(r.topic,e),this.events.emit(Dr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Dr.deleted,Nc(fs({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Dr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(Dr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);as(r)&&this.onBatchSubscribe(r.map((n,i)=>Nc(fs({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(ui.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Vt.connect,async()=>{await this.onConnect()}),this.relayer.on(Vt.disconnect,()=>{this.onDisconnect()}),this.events.on(Dr.created,async e=>{const r=Dr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Dr.deleted,async e=>{const r=Dr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var m_=Object.defineProperty,df=Object.getOwnPropertySymbols,y_=Object.prototype.hasOwnProperty,v_=Object.prototype.propertyIsEnumerable,ff=(t,e,r)=>e in t?m_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,w_=(t,e)=>{for(var r in e||(e={}))y_.call(e,r)&&ff(t,r,e[r]);if(df)for(var r of df(e))v_.call(e,r)&&ff(t,r,e[r]);return t};let b_=class extends mh{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new mr.EventEmitter,this.name=q2,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Vt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Vt.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Qr.payload,this.onPayloadHandler),this.provider.on(Qr.connect,this.onConnectHandler),this.provider.on(Qr.disconnect,this.onDisconnectHandler),this.provider.on(Qr.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?We.generateChildLogger(e.logger,this.name):We.pino(We.getDefaultLoggerOptions({level:e.logger||B2})),this.messages=new a_(this.logger,e.core),this.subscriber=new g_(this,this.logger),this.publisher=new c_(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||cf,this.projectId=e.projectId,this.bundleId=Mv(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${lf}...`),await this.restartTransport(lf)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},H2)}get context(){return We.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";if(i)return i;let s;const o=a=>{a.topic===e&&(this.subscriber.off(Dr.created,o),s())};return await Promise.all([new Promise(a=>{s=a,this.subscriber.on(Dr.created,o)}),new Promise(async a=>{i=await this.subscriber.subscribe(e,r),a()})]),i}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await os(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(Dr.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await os(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(Qr.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Ad())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new tb(new sb(qv({sdkVersion:V2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Dc(e)){if(!e.method.endsWith(z2))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(w_({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else Ro(e)&&this.events.emit(Vt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Vt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Cc(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Qr.payload,this.onPayloadHandler),this.provider.off(Qr.connect,this.onConnectHandler),this.provider.off(Qr.disconnect,this.onDisconnectHandler),this.provider.off(Qr.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Vt.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await Ad();Nw(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Vt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},oe.toMiliseconds(W2)))}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var __=Object.defineProperty,pf=Object.getOwnPropertySymbols,E_=Object.prototype.hasOwnProperty,S_=Object.prototype.propertyIsEnumerable,gf=(t,e,r)=>e in t?__(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mf=(t,e)=>{for(var r in e||(e={}))E_.call(e,r)&&gf(t,r,e[r]);if(pf)for(var r of pf(e))S_.call(e,r)&&gf(t,r,e[r]);return t};let No=class extends yh{constructor(e,r,n,i=hn,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=K2,this.cached=[],this.initialized=!1,this.storagePrefix=hn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!er(o)?this.map.set(this.getKey(o),o):hw(o)?this.map.set(o.id,o):dw(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>ab(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=mf(mf({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=We.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return We.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},x_=class{constructor(e,r){this.core=e,this.logger=r,this.name=J2,this.version=X2,this.events=new Ki,this.initialized=!1,this.storagePrefix=hn,this.ignoredPayloadTypes=[qn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=vc(),i=await this.core.crypto.setSymKey(n),s=Cr(oe.FIVE_MINUTES),o={protocol:af},a={topic:i,expiry:s,relay:o,active:!1},c=tw({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o}=Ed(n.uri);let a;if(this.pairings.keys.includes(i)&&(a=this.pairings.get(i),a.active))throw new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);const c=Cr(oe.FIVE_MINUTES),l={topic:i,relay:o,expiry:c,active:!1};return await this.pairings.set(i,l),this.core.expirer.set(i,c),n.activatePairing&&await this.activate({topic:i}),this.events.emit(ds.create,l),this.core.crypto.keychain.has(i)||(await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o})),l},this.activate=async({topic:n})=>{this.isInitialized();const i=Cr(oe.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=yi();this.events.once(Ct("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Ot("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=wi(i,s),a=await this.core.crypto.encode(n,o),c=hs[i].req;return await this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id},this.sendResult=async(n,i,s)=>{const o=Cc(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),l=hs[c.request.method].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=Oc(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),l=hs[c.request.method]?hs[c.request.method].res:hs.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Ot("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>un(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(ds.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Gr(i)?this.events.emit(Ct("pairing_ping",s),{}):Or(i)&&this.events.emit(Ct("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(ds.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Ot("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Ot("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{var i;if(!ar(n)){const{message:o}=X("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(o)}if(!uw(n.uri)){const{message:o}=X("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(o)}const s=Ed(n.uri);if(!((i=s==null?void 0:s.relay)!=null&&i.protocol)){const{message:o}=X("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(o)}if(!(s!=null&&s.symKey)){const{message:o}=X("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(o)}},this.isValidPing=async n=>{if(!ar(n)){const{message:s}=X("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!ar(n)){const{message:s}=X("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!Lt(n,!1)){const{message:i}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(un(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=X("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=We.generateChildLogger(r,this.name),this.pairings=new No(this.core,this.logger,this.name,this.storagePrefix)}get context(){return We.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Vt.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{Dc(i)?(await this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Ro(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(yr.expired,async e=>{const{topic:r}=wd(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(ds.expire,{topic:r}))})}},C_=class extends fh{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new mr.EventEmitter,this.name=e_,this.version=t_,this.cached=[],this.initialized=!1,this.storagePrefix=hn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Cr(oe.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(jr.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Or(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(jr.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(jr.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=We.generateChildLogger(r,this.name)}get context(){return We.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:wi(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(jr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(jr.created,e=>{const r=jr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(jr.updated,e=>{const r=jr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(jr.deleted,e=>{const r=jr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(ui.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{oe.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},O_=class extends wh{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new mr.EventEmitter,this.name=r_,this.version=n_,this.cached=[],this.initialized=!1,this.storagePrefix=hn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(yr.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(yr.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=We.generateChildLogger(r,this.name)}get context(){return We.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return zv(e);if(typeof e=="number")return Wv(e);const{message:r}=X("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(yr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;oe.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(yr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(ui.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(yr.created,e=>{const r=yr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(yr.expired,e=>{const r=yr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(yr.deleted,e=>{const r=yr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},D_=class extends bh{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Pc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||gi()||!mi())return;const i=this.getVerifyUrl(n==null?void 0:n.verifyUrl);this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=$c;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=this.getVerifyUrl(n==null?void 0:n.verifyUrl);let s;try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.info(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.info(o),s=await this.fetchAttestation(n.attestationId,$c)}return s},this.fetchAttestation=async(n,i)=>{this.logger.info(`resolving attestation: ${n} from url: ${i}`);const s=this.startAbortTimer(oe.ONE_SECOND*2),o=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(s),o.status===200?await o.json():void 0},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(Pc))return s();window.addEventListener("message",i);const o=document.createElement("iframe");o.id=Pc,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},oe.toMiliseconds(oe.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=n=>{let i=n||bi;return i_.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${bi}`),i=bi),i},this.logger=We.generateChildLogger(r,this.name),this.verifyUrl=bi,this.abortController=new AbortController,this.isDevEnv=wc()&&process.env.IS_VITEST}get context(){return We.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),oe.toMiliseconds(e))}};var I_=Object.defineProperty,yf=Object.getOwnPropertySymbols,A_=Object.prototype.hasOwnProperty,T_=Object.prototype.propertyIsEnumerable,vf=(t,e,r)=>e in t?I_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wf=(t,e)=>{for(var r in e||(e={}))A_.call(e,r)&&vf(t,r,e[r]);if(yf)for(var r of yf(e))T_.call(e,r)&&vf(t,r,e[r]);return t};const R_=class J0 extends dh{constructor(e){super(e),this.protocol=sf,this.version=T2,this.name=Rc,this.events=new mr.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||cf,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:We.pino(We.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||R2.logger}));this.logger=We.generateChildLogger(r,this.name),this.heartbeat=new ui.HeartBeat,this.crypto=new o_(this,this.logger,e==null?void 0:e.keychain),this.history=new C_(this,this.logger),this.expirer=new O_(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new om(wf(wf({},P2),e==null?void 0:e.storageOptions)),this.relayer=new b_({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new x_(this,this.logger),this.verify=new D_(this.projectId||"",this.logger)}static async init(e){const r=new J0(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Z2,n),r}get context(){return We.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},bf="wc",_f=2,Ef="client",Lc=`${bf}@${_f}:${Ef}:`,Mc={name:Ef,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Sf="WALLETCONNECT_DEEPLINK_CHOICE",P_="proposal",$_="Proposal expired",N_="session",Lo=oe.SEVEN_DAYS,L_="engine",ps={wc_sessionPropose:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1115}}},kc={min:oe.FIVE_MINUTES,max:oe.SEVEN_DAYS},Yr={idle:"IDLE",active:"ACTIVE"},M_="request",k_=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var F_=Object.defineProperty,U_=Object.defineProperties,j_=Object.getOwnPropertyDescriptors,xf=Object.getOwnPropertySymbols,B_=Object.prototype.hasOwnProperty,q_=Object.prototype.propertyIsEnumerable,Cf=(t,e,r)=>e in t?F_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cr=(t,e)=>{for(var r in e||(e={}))B_.call(e,r)&&Cf(t,r,e[r]);if(xf)for(var r of xf(e))q_.call(e,r)&&Cf(t,r,e[r]);return t},gs=(t,e)=>U_(t,j_(e));class z_ extends Eh{constructor(e){super(e),this.name=L_,this.events=new Ki,this.initialized=!1,this.ignoredPayloadTypes=[qn],this.requestQueue={state:Yr.idle,queue:[]},this.sessionRequestQueue={state:Yr.idle,queue:[]},this.requestQueueDelay=oe.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(ps)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},oe.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=gs(cr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let l=i,h,f=!1;if(l&&(f=this.client.core.pairing.pairings.get(l).active),!l||!f){const{topic:E,uri:w}=await this.client.core.pairing.create();l=E,h=w}const p=await this.client.core.crypto.generateKeyPair(),g=cr({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:af}],proposer:{publicKey:p,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:v,resolve:_,done:S}=yi(oe.FIVE_MINUTES,$_);if(this.events.once(Ct("session_connect"),async({error:E,session:w})=>{if(E)v(E);else if(w){w.self.publicKey=p;const x=gs(cr({},w),{requiredNamespaces:w.requiredNamespaces,optionalNamespaces:w.optionalNamespaces});await this.client.session.set(w.topic,x),await this.setExpiry(w.topic,w.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:w.peer.metadata}),_(x)}}),!l){const{message:E}=X("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(E)}const O=await this.sendRequest({topic:l,method:"wc_sessionPropose",params:g}),b=Cr(oe.FIVE_MINUTES);return await this.setProposal(O,cr({id:O,expiry:b},g)),{uri:h,approval:S}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:c,proposer:l,requiredNamespaces:h,optionalNamespaces:f}=a;c=c||"",cs(h)||(h=sw(s,"approve()"));const p=await this.client.core.crypto.generateKeyPair(),g=l.publicKey,v=await this.client.core.crypto.generateSharedKey(p,g);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:l.metadata}),await this.sendResult({id:n,topic:c,result:{relay:{protocol:i??"irn"},responderPublicKey:p}}),await this.client.proposal.delete(n,Ot("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const _=cr({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:h,optionalNamespaces:f,pairingTopic:c,controller:{publicKey:p,metadata:this.client.metadata},expiry:Cr(Lo)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(v),await this.sendRequest({topic:v,method:"wc_sessionSettle",params:_,throwOnFailedPublish:!0});const S=gs(cr({},_),{topic:v,pairingTopic:c,acknowledged:!1,self:_.controller,peer:{publicKey:l.publicKey,metadata:l.metadata},controller:p});return await this.client.session.set(v,S),await this.setExpiry(v,Cr(Lo)),{topic:v,acknowledged:()=>new Promise(O=>setTimeout(()=>O(this.client.session.get(v)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,Ot("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:a,reject:c}=yi();return this.events.once(Ct("session_update",s),({error:l})=>{l?c(l):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=yi();return this.events.once(Ct("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Cr(Lo)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o}=r,a=xc(),{done:c,resolve:l,reject:h}=yi(o,"Request expired. Please try again.");return this.events.once(Ct("session_request",a),({error:f,result:p})=>{f?h(f):l(p)}),await Promise.all([new Promise(async f=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:i,chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(p=>h(p)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),f()}),new Promise(async f=>{const p=await Hv(this.client.core.storage,Sf);Vv({id:a,topic:s,wcDeepLink:p}),f()}),c()]).then(f=>f[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;Gr(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):Or(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=yi();this.events.once(Ct("session_ping",i),({error:c})=>{c?a(c):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Ot("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>cw(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Ot("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Sf).catch(s=>this.client.logger.warn(s))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Ot("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Yr.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=ps.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o,verifyContext:a}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o,verifyContext:a}),n&&this.client.core.expirer.set(i,Cr(n))},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l}=r,h=wi(i,s,c);if(mi()&&k_.includes(i)){const g=pi(JSON.stringify(h));this.client.core.verify.register({attestationId:g})}const f=await this.client.core.crypto.encode(n,h),p=ps[i].req;return o&&(p.ttl=o),a&&(p.id=a),this.client.core.history.set(n,h),l?(p.internal=gs(cr({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,p)):this.client.core.relayer.publish(n,f,p).catch(g=>this.client.logger.error(g)),h.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o}=r,a=Cc(n,s),c=await this.client.core.crypto.encode(i,a),l=await this.client.core.history.get(i,n),h=ps[l.request.method].res;o?(h.internal=gs(cr({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,c,h)):this.client.core.relayer.publish(i,c,h).catch(f=>this.client.logger.error(f)),await this.client.core.history.resolve(a)},this.sendError=async(r,n,i)=>{const s=Oc(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),c=ps[a.request.method].res;this.client.core.relayer.publish(n,o,c),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{un(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{un(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Yr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Yr.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Yr.idle},this.processRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=X("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(cr({},n.params));const o=Cr(oe.FIVE_MINUTES),a=cr({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);const c=pi(JSON.stringify(n)),l=await this.getVerifyContext(c,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:l})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(Gr(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const l=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:l});const h=await this.client.core.relayer.subscribe(l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else Or(n)&&(await this.client.proposal.delete(i,Ot("USER_DISCONNECTED")),this.events.emit(Ct("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,requiredNamespaces:h,optionalNamespaces:f,sessionProperties:p,pairingTopic:g}=n.params,v=cr({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:g,requiredNamespaces:h,optionalNamespaces:f,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},p&&{sessionProperties:p});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(Ct("session_connect"),{session:v}),this.cleanupDuplicatePairings(v)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Gr(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ct("session_approve",i),{})):Or(n)&&(await this.client.session.delete(r,Ot("USER_DISCONNECTED")),this.events.emit(Ct("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=To.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(cr({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),To.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;Gr(n)?this.events.emit(Ct("session_update",i),{}):Or(n)&&this.events.emit(Ct("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Cr(Lo)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;Gr(n)?this.events.emit(Ct("session_extend",i),{}):Or(n)&&this.events.emit(Ct("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{Gr(n)?this.events.emit(Ct("session_ping",i),{}):Or(n)&&this.events.emit(Ct("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Vt.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult({id:i,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(cr({topic:r},s));const o=pi(JSON.stringify(wi("wc_sessionRequest",s,i))),a=this.client.session.get(r),c=await this.getVerifyContext(o,a.peer.metadata),l={id:i,topic:r,params:s,verifyContext:c};await this.setPendingSessionRequest(l),this.addSessionRequestToSessionRequestQueue(l),this.processSessionRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;Gr(n)?this.events.emit(Ct("session_request",i),{result:n.result}):Or(n)&&this.events.emit(Ct("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=To.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(cr({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),To.set(o,i)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Yr.idle,this.processSessionRequestQueue()},oe.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Yr.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Yr.active,this.client.events.emit("session_request",r)}catch(n){this.client.logger.error(n)}},this.onPairingCreated=r=>{if(r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest(r.topic,wi("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id))},this.isValidConnect=async r=>{if(!ar(r)){const{message:c}=X("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(er(n)||await this.isValidPairingTopic(n),!bw(a,!0)){const{message:c}=X("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!er(i)&&cs(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!er(s)&&cs(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),er(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=ww(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!ar(r))throw new Error(X("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=Ao(i,"approve()");if(c)throw new Error(c.message);const l=Dd(a.requiredNamespaces,i,"approve()");if(l)throw new Error(l.message);if(!Lt(s,!0)){const{message:h}=X("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}er(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!ar(r)){const{message:s}=X("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Ew(i)){const{message:s}=X("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!ar(r)){const{message:l}=X("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!Cd(n)){const{message:l}=X("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=fw(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Ao(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(un(o)){const{message:l}=X("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async r=>{if(!ar(r)){const{message:c}=X("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=Ao(i,"update()");if(o)throw new Error(o.message);const a=Dd(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!ar(r)){const{message:i}=X("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!ar(r)){const{message:c}=X("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!Od(a,s)){const{message:c}=X("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!Sw(i)){const{message:c}=X("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!Ow(a,s,i.method)){const{message:c}=X("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!Tw(o,kc)){const{message:c}=X("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${kc.min} and ${kc.max}`);throw new Error(c)}},this.isValidRespond=async r=>{if(!ar(r)){const{message:s}=X("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!xw(i)){const{message:s}=X("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!ar(r)){const{message:i}=X("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!ar(r)){const{message:a}=X("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!Od(o,s)){const{message:a}=X("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!Cw(i)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!Dw(o,s,i.name)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!ar(r)){const{message:i}=X("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||bi,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s.origin,i.verified.isScam=s.isScam,i.verified.validation=s.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.info(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!Lt(i,!1)){const{message:s}=X("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Vt.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);try{Dc(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Ro(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(yr.expired,async e=>{const{topic:r,id:n}=wd(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,X("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(ds.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!Lt(e,!1)){const{message:r}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(un(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=X("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Lt(e,!1)){const{message:r}=X("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=X("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(un(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=X("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Lt(e,!1)){const{message:r}=X("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=X("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!_w(e)){const{message:r}=X("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=X("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(un(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=X("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class W_ extends No{constructor(e,r){super(e,r,P_,Lc),this.core=e,this.logger=r}}class V_ extends No{constructor(e,r){super(e,r,N_,Lc),this.core=e,this.logger=r}}class H_ extends No{constructor(e,r){super(e,r,M_,Lc,n=>n.id),this.core=e,this.logger=r}}let K_=class X0 extends _h{constructor(e){super(e),this.protocol=bf,this.version=_f,this.name=Mc.name,this.events=new mr.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||Mc.name,this.metadata=(e==null?void 0:e.metadata)||Fv();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:We.pino(We.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Mc.logger}));this.core=(e==null?void 0:e.core)||new R_(e),this.logger=We.generateChildLogger(r,this.name),this.session=new V_(this.core,this.logger),this.proposal=new W_(this.core,this.logger),this.pendingRequest=new H_(this.core,this.logger),this.engine=new z_(this)}static async init(e){const r=new X0(e);return await r.initialize(),r}get context(){return We.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Z_=Object.defineProperty,G_=Object.defineProperties,Q_=Object.getOwnPropertyDescriptors,Of=Object.getOwnPropertySymbols,Y_=Object.prototype.hasOwnProperty,J_=Object.prototype.propertyIsEnumerable,Df=(t,e,r)=>e in t?Z_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,X_=(t,e)=>{for(var r in e||(e={}))Y_.call(e,r)&&Df(t,r,e[r]);if(Of)for(var r of Of(e))J_.call(e,r)&&Df(t,r,e[r]);return t},e3=(t,e)=>G_(t,Q_(e)),Fc=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},at=(t,e,r)=>(Fc(t,e,"read from private field"),r?r.call(t):e.get(t)),Wn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Mo=(t,e,r,n)=>(Fc(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Ht=(t,e,r)=>(Fc(t,e,"access private method"),r),Vn,_i,ms,Mt,Uc,If,Kt,tr,jc,Af;let t3=class{constructor(e){Wn(this,Uc),Wn(this,Kt),Wn(this,jc),Wn(this,Vn,void 0),Wn(this,_i,void 0),Wn(this,ms,void 0),Wn(this,Mt,void 0),Mo(this,Vn,e),Mo(this,_i,Ht(this,Uc,If).call(this)),Ht(this,Kt,tr).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await Ht(this,Kt,tr).call(this);const o=at(this,_i).subscribeModal(l=>{l.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:c}=await at(this,Mt).connect(e);if(a){const l=new Set;r&&Object.values(r).forEach(({chains:h})=>{h&&h.forEach(f=>l.add(f))}),n&&Object.values(n).forEach(({chains:h})=>{h&&h.forEach(f=>l.add(f))}),await at(this,_i).openModal({uri:a,chains:Array.from(l)})}try{const l=await c();i(l)}catch(l){s(l)}finally{o(),at(this,_i).closeModal()}})}async disconnect(e){await Ht(this,Kt,tr).call(this),await at(this,Mt).disconnect(e)}async request(e){return await Ht(this,Kt,tr).call(this),await at(this,Mt).request(e)}async getSessions(){return await Ht(this,Kt,tr).call(this),at(this,Mt).session.getAll()}async getSession(){return await Ht(this,Kt,tr).call(this),at(this,Mt).session.getAll().at(-1)}async onSessionEvent(e){await Ht(this,Kt,tr).call(this),at(this,Mt).on("session_event",e)}async offSessionEvent(e){await Ht(this,Kt,tr).call(this),at(this,Mt).off("session_event",e)}async onSessionUpdate(e){await Ht(this,Kt,tr).call(this),at(this,Mt).on("session_update",e)}async offSessionUpdate(e){await Ht(this,Kt,tr).call(this),at(this,Mt).off("session_update",e)}async onSessionDelete(e){await Ht(this,Kt,tr).call(this),at(this,Mt).on("session_delete",e)}async offSessionDelete(e){await Ht(this,Kt,tr).call(this),at(this,Mt).off("session_delete",e)}async onSessionExpire(e){await Ht(this,Kt,tr).call(this),at(this,Mt).on("session_expire",e)}async offSessionExpire(e){await Ht(this,Kt,tr).call(this),at(this,Mt).off("session_expire",e)}};Vn=new WeakMap,_i=new WeakMap,ms=new WeakMap,Mt=new WeakMap,Uc=new WeakSet,If=function(){const{modalOptions:t,projectId:e}=at(this,Vn);return new Eg(e3(X_({},t),{projectId:e}))},Kt=new WeakSet,tr=async function(){return at(this,Mt)?!0:(!at(this,ms)&&typeof window<"u"&&Mo(this,ms,Ht(this,jc,Af).call(this)),at(this,ms))},jc=new WeakSet,Af=async function(){Mo(this,Mt,await K_.init({metadata:at(this,Vn).metadata,projectId:at(this,Vn).projectId,relayUrl:at(this,Vn).relayUrl}));const t=await at(this,Mt).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};const ko=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent","getEvent","getEvents","createSharedState","importSharedState","requestSignature"],ys=["aleo:1"],Fo=["chainChanged","accountSelected","selectedAccountSynced","sharedAccountSynced"],Tf="f0aaeffe71b636da453fce042d79d723",Rf={standaloneChains:ys,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"puzzleapp://",universal:""}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:"https://walletconnect.puzzle.online/"}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},r3={requiredNamespaces:{aleo:{methods:ko,chains:ys,events:Fo}}},Hn=new Ki;let vs;function Pf(t){vs=new t3({projectId:Tf,metadata:{name:t.dAppName,description:t.dAppDescription,url:t.dAppUrl,icons:[t.dAppIconURL]},modalOptions:{...Rf}}),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")}async function nt(){return new Promise(t=>{if(vs)t(vs);else{const e=setInterval(()=>{vs&&(clearInterval(e),t(vs))},200)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}var Ke;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Ke||(Ke={}));var Bc;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Bc||(Bc={}));const re=Ke.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),dn=t=>{switch(typeof t){case"undefined":return re.undefined;case"string":return re.string;case"number":return isNaN(t)?re.nan:re.number;case"boolean":return re.boolean;case"function":return re.function;case"bigint":return re.bigint;case"symbol":return re.symbol;case"object":return Array.isArray(t)?re.array:t===null?re.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?re.promise:typeof Map<"u"&&t instanceof Map?re.map:typeof Set<"u"&&t instanceof Set?re.set:typeof Date<"u"&&t instanceof Date?re.date:re.object;default:return re.unknown}},G=Ke.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),n3=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ir extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(r(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ke.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Ir.create=t=>new Ir(t);const ws=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===re.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ke.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ke.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ke.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Ke.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ke.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ke.assertNever(t)}return{message:r}};let $f=ws;function i3(t){$f=t}function Uo(){return $f}const jo=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],o={...i,path:s};let a="";const c=n.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},s3=[];function ie(t,e){const r=jo({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Uo(),ws].filter(n=>!!n)});t.common.issues.push(r)}class Zt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return me;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return Zt.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return me;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:e.value,value:n}}}const me=Object.freeze({status:"aborted"}),Nf=t=>({status:"dirty",value:t}),rr=t=>({status:"valid",value:t}),qc=t=>t.status==="aborted",zc=t=>t.status==="dirty",Bo=t=>t.status==="valid",qo=t=>typeof Promise<"u"&&t instanceof Promise;var ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ce||(ce={}));class Br{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Lf=(t,e)=>{if(Bo(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ir(t.common.issues);return this._error=r,this._error}}};function _e(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:i}}class De{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return dn(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:dn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Zt,ctx:{common:e.parent.common,data:e.data,parsedType:dn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(qo(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dn(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Lf(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dn(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(qo(i)?i:Promise.resolve(i));return Lf(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Rr({schema:this,typeName:de.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Xr.create(this,this._def)}nullable(){return Qn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Tr.create(this,this._def)}promise(){return Ci.create(this,this._def)}or(e){return Ss.create([this,e],this._def)}and(e){return xs.create(this,e,this._def)}transform(e){return new Rr({..._e(this._def),schema:this,typeName:de.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new As({..._e(this._def),innerType:this,defaultValue:r,typeName:de.ZodDefault})}brand(){return new kf({typeName:de.ZodBranded,type:this,..._e(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Zo({..._e(this._def),innerType:this,catchValue:r,typeName:de.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ts.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const o3=/^c[^\s-]{8,}$/i,a3=/^[a-z][a-z0-9]*$/,c3=/[0-9A-HJKMNP-TV-Z]{26}/,l3=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,u3=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,h3=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,d3=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,f3=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,p3=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function g3(t,e){return!!((e==="v4"||!e)&&d3.test(t)||(e==="v6"||!e)&&f3.test(t))}class Ar extends De{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)}),this.nonempty=e=>this.min(1,ce.errToObj(e)),this.trim=()=>new Ar({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Ar({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Ar({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==re.string){const s=this._getOrReturnCtx(e);return ie(s,{code:G.invalid_type,expected:re.string,received:s.parsedType}),me}const n=new Zt;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:G.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:G.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?ie(i,{code:G.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ie(i,{code:G.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")u3.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"email",code:G.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")h3.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"emoji",code:G.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")l3.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"uuid",code:G.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")o3.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cuid",code:G.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")a3.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cuid2",code:G.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")c3.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"ulid",code:G.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ie(i,{validation:"url",code:G.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"regex",code:G.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),ie(i,{code:G.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),ie(i,{code:G.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),ie(i,{code:G.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?p3(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{code:G.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?g3(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"ip",code:G.invalid_string,message:s.message}),n.dirty()):Ke.assertNever(s);return{status:n.value,value:e.data}}_addCheck(e){return new Ar({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...ce.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...ce.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ar.create=t=>{var e;return new Ar({checks:[],typeName:de.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,..._e(t)})};function m3(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class fn extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==re.number){const s=this._getOrReturnCtx(e);return ie(s,{code:G.invalid_type,expected:re.number,received:s.parsedType}),me}let n;const i=new Zt;for(const s of this._def.checks)s.kind==="int"?Ke.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ie(n,{code:G.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:G.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:G.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?m3(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),ie(n,{code:G.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ie(n,{code:G.not_finite,message:s.message}),i.dirty()):Ke.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new fn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new fn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ke.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}fn.create=t=>new fn({checks:[],typeName:de.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,..._e(t)});class pn extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==re.bigint){const s=this._getOrReturnCtx(e);return ie(s,{code:G.invalid_type,expected:re.bigint,received:s.parsedType}),me}let n;const i=new Zt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:G.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:G.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:G.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Ke.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new pn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new pn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}pn.create=t=>{var e;return new pn({checks:[],typeName:de.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,..._e(t)})};class bs extends De{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==re.boolean){const n=this._getOrReturnCtx(e);return ie(n,{code:G.invalid_type,expected:re.boolean,received:n.parsedType}),me}return rr(e.data)}}bs.create=t=>new bs({typeName:de.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,..._e(t)});class Kn extends De{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==re.date){const s=this._getOrReturnCtx(e);return ie(s,{code:G.invalid_type,expected:re.date,received:s.parsedType}),me}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ie(s,{code:G.invalid_date}),me}const n=new Zt;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:G.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:G.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Ke.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Kn({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Kn.create=t=>new Kn({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:de.ZodDate,..._e(t)});class zo extends De{_parse(e){if(this._getType(e)!==re.symbol){const n=this._getOrReturnCtx(e);return ie(n,{code:G.invalid_type,expected:re.symbol,received:n.parsedType}),me}return rr(e.data)}}zo.create=t=>new zo({typeName:de.ZodSymbol,..._e(t)});class _s extends De{_parse(e){if(this._getType(e)!==re.undefined){const n=this._getOrReturnCtx(e);return ie(n,{code:G.invalid_type,expected:re.undefined,received:n.parsedType}),me}return rr(e.data)}}_s.create=t=>new _s({typeName:de.ZodUndefined,..._e(t)});class Es extends De{_parse(e){if(this._getType(e)!==re.null){const n=this._getOrReturnCtx(e);return ie(n,{code:G.invalid_type,expected:re.null,received:n.parsedType}),me}return rr(e.data)}}Es.create=t=>new Es({typeName:de.ZodNull,..._e(t)});class Ei extends De{constructor(){super(...arguments),this._any=!0}_parse(e){return rr(e.data)}}Ei.create=t=>new Ei({typeName:de.ZodAny,..._e(t)});class Zn extends De{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rr(e.data)}}Zn.create=t=>new Zn({typeName:de.ZodUnknown,..._e(t)});class Jr extends De{_parse(e){const r=this._getOrReturnCtx(e);return ie(r,{code:G.invalid_type,expected:re.never,received:r.parsedType}),me}}Jr.create=t=>new Jr({typeName:de.ZodNever,..._e(t)});class Wo extends De{_parse(e){if(this._getType(e)!==re.undefined){const n=this._getOrReturnCtx(e);return ie(n,{code:G.invalid_type,expected:re.void,received:n.parsedType}),me}return rr(e.data)}}Wo.create=t=>new Wo({typeName:de.ZodVoid,..._e(t)});class Tr extends De{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==re.array)return ie(r,{code:G.invalid_type,expected:re.array,received:r.parsedType}),me;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(ie(r,{code:o?G.too_big:G.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ie(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ie(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new Br(r,o,r.path,a)))).then(o=>Zt.mergeArray(n,o));const s=[...r.data].map((o,a)=>i.type._parseSync(new Br(r,o,r.path,a)));return Zt.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new Tr({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new Tr({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new Tr({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}}Tr.create=(t,e)=>new Tr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:de.ZodArray,..._e(e)});function Si(t){if(t instanceof ht){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Xr.create(Si(n))}return new ht({...t._def,shape:()=>e})}else return t instanceof Tr?new Tr({...t._def,type:Si(t.element)}):t instanceof Xr?Xr.create(Si(t.unwrap())):t instanceof Qn?Qn.create(Si(t.unwrap())):t instanceof qr?qr.create(t.items.map(e=>Si(e))):t}class ht extends De{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Ke.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==re.object){const l=this._getOrReturnCtx(e);return ie(l,{code:G.invalid_type,expected:re.object,received:l.parsedType}),me}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Jr&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const h=s[l],f=i.data[l];c.push({key:{status:"valid",value:l},value:h._parse(new Br(i,f,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Jr){const l=this._def.unknownKeys;if(l==="passthrough")for(const h of a)c.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(l==="strict")a.length>0&&(ie(i,{code:G.unrecognized_keys,keys:a}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const h of a){const f=i.data[h];c.push({key:{status:"valid",value:h},value:l._parse(new Br(i,f,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const h of c){const f=await h.key;l.push({key:f,value:await h.value,alwaysSet:h.alwaysSet})}return l}).then(l=>Zt.mergeObjectSync(n,l)):Zt.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new ht({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=ce.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new ht({...this._def,unknownKeys:"strip"})}passthrough(){return new ht({...this._def,unknownKeys:"passthrough"})}extend(e){return new ht({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ht({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:de.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new ht({...this._def,catchall:e})}pick(e){const r={};return Ke.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new ht({...this._def,shape:()=>r})}omit(e){const r={};return Ke.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new ht({...this._def,shape:()=>r})}deepPartial(){return Si(this)}partial(e){const r={};return Ke.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new ht({...this._def,shape:()=>r})}required(e){const r={};return Ke.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof Xr;)s=s._def.innerType;r[n]=s}}),new ht({...this._def,shape:()=>r})}keyof(){return Mf(Ke.objectKeys(this.shape))}}ht.create=(t,e)=>new ht({shape:()=>t,unknownKeys:"strip",catchall:Jr.create(),typeName:de.ZodObject,..._e(e)}),ht.strictCreate=(t,e)=>new ht({shape:()=>t,unknownKeys:"strict",catchall:Jr.create(),typeName:de.ZodObject,..._e(e)}),ht.lazycreate=(t,e)=>new ht({shape:t,unknownKeys:"strip",catchall:Jr.create(),typeName:de.ZodObject,..._e(e)});class Ss extends De{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Ir(a.ctx.common.issues));return ie(r,{code:G.invalid_union,unionErrors:o}),me}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of n){const l={...r,common:{...r.common,issues:[]},parent:null},h=c._parseSync({data:r.data,path:r.path,parent:l});if(h.status==="valid")return h;h.status==="dirty"&&!s&&(s={result:h,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new Ir(c));return ie(r,{code:G.invalid_union,unionErrors:a}),me}}get options(){return this._def.options}}Ss.create=(t,e)=>new Ss({options:t,typeName:de.ZodUnion,..._e(e)});const Vo=t=>t instanceof Os?Vo(t.schema):t instanceof Rr?Vo(t.innerType()):t instanceof Ds?[t.value]:t instanceof gn?t.options:t instanceof Is?Object.keys(t.enum):t instanceof As?Vo(t._def.innerType):t instanceof _s?[void 0]:t instanceof Es?[null]:null;class Ho extends De{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==re.object)return ie(r,{code:G.invalid_type,expected:re.object,received:r.parsedType}),me;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(ie(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const o=Vo(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Ho({typeName:de.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,..._e(n)})}}function Wc(t,e){const r=dn(t),n=dn(e);if(t===e)return{valid:!0,data:t};if(r===re.object&&n===re.object){const i=Ke.objectKeys(e),s=Ke.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=Wc(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===re.array&&n===re.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=Wc(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===re.date&&n===re.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class xs extends De{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,o)=>{if(qc(s)||qc(o))return me;const a=Wc(s.value,o.value);return a.valid?((zc(s)||zc(o))&&r.dirty(),{status:r.value,value:a.data}):(ie(n,{code:G.invalid_intersection_types}),me)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}xs.create=(t,e,r)=>new xs({left:t,right:e,typeName:de.ZodIntersection,..._e(r)});class qr extends De{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==re.array)return ie(n,{code:G.invalid_type,expected:re.array,received:n.parsedType}),me;if(n.data.length<this._def.items.length)return ie(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),me;!this._def.rest&&n.data.length>this._def.items.length&&(ie(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Br(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>Zt.mergeArray(r,o)):Zt.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new qr({...this._def,rest:e})}}qr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new qr({items:t,typeName:de.ZodTuple,rest:null,..._e(e)})};class Cs extends De{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==re.object)return ie(n,{code:G.invalid_type,expected:re.object,received:n.parsedType}),me;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in n.data)i.push({key:s._parse(new Br(n,a,n.path,a)),value:o._parse(new Br(n,n.data[a],n.path,a))});return n.common.async?Zt.mergeObjectAsync(r,i):Zt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof De?new Cs({keyType:e,valueType:r,typeName:de.ZodRecord,..._e(n)}):new Cs({keyType:Ar.create(),valueType:e,typeName:de.ZodRecord,..._e(r)})}}class Ko extends De{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==re.map)return ie(n,{code:G.invalid_type,expected:re.map,received:n.parsedType}),me;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,c],l)=>({key:i._parse(new Br(n,a,n.path,[l,"key"])),value:s._parse(new Br(n,c,n.path,[l,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,h=await c.value;if(l.status==="aborted"||h.status==="aborted")return me;(l.status==="dirty"||h.status==="dirty")&&r.dirty(),a.set(l.value,h.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,h=c.value;if(l.status==="aborted"||h.status==="aborted")return me;(l.status==="dirty"||h.status==="dirty")&&r.dirty(),a.set(l.value,h.value)}return{status:r.value,value:a}}}}Ko.create=(t,e,r)=>new Ko({valueType:e,keyType:t,typeName:de.ZodMap,..._e(r)});class Gn extends De{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==re.set)return ie(n,{code:G.invalid_type,expected:re.set,received:n.parsedType}),me;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ie(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ie(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const h of c){if(h.status==="aborted")return me;h.status==="dirty"&&r.dirty(),l.add(h.value)}return{status:r.value,value:l}}const a=[...n.data.values()].map((c,l)=>s._parse(new Br(n,c,n.path,l)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new Gn({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new Gn({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Gn.create=(t,e)=>new Gn({valueType:t,minSize:null,maxSize:null,typeName:de.ZodSet,..._e(e)});class xi extends De{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==re.function)return ie(r,{code:G.invalid_type,expected:re.function,received:r.parsedType}),me;function n(a,c){return jo({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Uo(),ws].filter(l=>!!l),issueData:{code:G.invalid_arguments,argumentsError:c}})}function i(a,c){return jo({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Uo(),ws].filter(l=>!!l),issueData:{code:G.invalid_return_type,returnTypeError:c}})}const s={errorMap:r.common.contextualErrorMap},o=r.data;return this._def.returns instanceof Ci?rr(async(...a)=>{const c=new Ir([]),l=await this._def.args.parseAsync(a,s).catch(p=>{throw c.addIssue(n(a,p)),c}),h=await o(...l);return await this._def.returns._def.type.parseAsync(h,s).catch(p=>{throw c.addIssue(i(h,p)),c})}):rr((...a)=>{const c=this._def.args.safeParse(a,s);if(!c.success)throw new Ir([n(a,c.error)]);const l=o(...c.data),h=this._def.returns.safeParse(l,s);if(!h.success)throw new Ir([i(l,h.error)]);return h.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new xi({...this._def,args:qr.create(e).rest(Zn.create())})}returns(e){return new xi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new xi({args:e||qr.create([]).rest(Zn.create()),returns:r||Zn.create(),typeName:de.ZodFunction,..._e(n)})}}class Os extends De{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Os.create=(t,e)=>new Os({getter:t,typeName:de.ZodLazy,..._e(e)});class Ds extends De{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return ie(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),me}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ds.create=(t,e)=>new Ds({value:t,typeName:de.ZodLiteral,..._e(e)});function Mf(t,e){return new gn({values:t,typeName:de.ZodEnum,..._e(e)})}class gn extends De{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return ie(r,{expected:Ke.joinValues(n),received:r.parsedType,code:G.invalid_type}),me}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return ie(r,{received:r.data,code:G.invalid_enum_value,options:n}),me}return rr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return gn.create(e)}exclude(e){return gn.create(this.options.filter(r=>!e.includes(r)))}}gn.create=Mf;class Is extends De{_parse(e){const r=Ke.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==re.string&&n.parsedType!==re.number){const i=Ke.objectValues(r);return ie(n,{expected:Ke.joinValues(i),received:n.parsedType,code:G.invalid_type}),me}if(r.indexOf(e.data)===-1){const i=Ke.objectValues(r);return ie(n,{received:n.data,code:G.invalid_enum_value,options:i}),me}return rr(e.data)}get enum(){return this._def.values}}Is.create=(t,e)=>new Is({values:t,typeName:de.ZodNativeEnum,..._e(e)});class Ci extends De{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==re.promise&&r.common.async===!1)return ie(r,{code:G.invalid_type,expected:re.promise,received:r.parsedType}),me;const n=r.parsedType===re.promise?r.data:Promise.resolve(r.data);return rr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Ci.create=(t,e)=>new Ci({type:t,typeName:de.ZodPromise,..._e(e)});class Rr extends De{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===de.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null;if(i.type==="preprocess"){const o=i.transform(n.data);return n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}const s={addIssue:o=>{ie(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?me:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?me:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Bo(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Bo(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:r.value,value:a})):o);Ke.assertNever(i)}}Rr.create=(t,e,r)=>new Rr({schema:t,typeName:de.ZodEffects,effect:e,..._e(r)}),Rr.createWithPreprocess=(t,e,r)=>new Rr({schema:e,effect:{type:"preprocess",transform:t},typeName:de.ZodEffects,..._e(r)});class Xr extends De{_parse(e){return this._getType(e)===re.undefined?rr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xr.create=(t,e)=>new Xr({innerType:t,typeName:de.ZodOptional,..._e(e)});class Qn extends De{_parse(e){return this._getType(e)===re.null?rr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qn.create=(t,e)=>new Qn({innerType:t,typeName:de.ZodNullable,..._e(e)});class As extends De{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===re.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}As.create=(t,e)=>new As({innerType:t,typeName:de.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,..._e(e)});class Zo extends De{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return qo(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ir(n.common.issues)}})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ir(n.common.issues)}})}}removeCatch(){return this._def.innerType}}Zo.create=(t,e)=>new Zo({innerType:t,typeName:de.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,..._e(e)});class Go extends De{_parse(e){if(this._getType(e)!==re.nan){const n=this._getOrReturnCtx(e);return ie(n,{code:G.invalid_type,expected:re.nan,received:n.parsedType}),me}return{status:"valid",value:e.data}}}Go.create=t=>new Go({typeName:de.ZodNaN,..._e(t)});const y3=Symbol("zod_brand");class kf extends De{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ts extends De{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?me:s.status==="dirty"?(r.dirty(),Nf(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?me:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Ts({in:e,out:r,typeName:de.ZodPipeline})}}const Ff=(t,e={},r)=>t?Ei.create().superRefine((n,i)=>{var s,o;if(!t(n)){const a=typeof e=="function"?e(n):e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...l,fatal:c})}}):Ei.create(),v3={object:ht.lazycreate};var de;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(de||(de={}));const w3=(t,e={message:`Input not instance of ${t.name}`})=>Ff(r=>r instanceof t,e),Uf=Ar.create,jf=fn.create,b3=Go.create,_3=pn.create,Bf=bs.create,E3=Kn.create,S3=zo.create,x3=_s.create,C3=Es.create,O3=Ei.create,D3=Zn.create,I3=Jr.create,A3=Wo.create,T3=Tr.create,R3=ht.create,P3=ht.strictCreate,$3=Ss.create,N3=Ho.create,L3=xs.create,M3=qr.create,k3=Cs.create,F3=Ko.create,U3=Gn.create,j3=xi.create,B3=Os.create,q3=Ds.create,z3=gn.create,W3=Is.create,V3=Ci.create,qf=Rr.create,H3=Xr.create,K3=Qn.create,Z3=Rr.createWithPreprocess,G3=Ts.create;var Pr=Object.freeze({__proto__:null,defaultErrorMap:ws,setErrorMap:i3,getErrorMap:Uo,makeIssue:jo,EMPTY_PATH:s3,addIssueToContext:ie,ParseStatus:Zt,INVALID:me,DIRTY:Nf,OK:rr,isAborted:qc,isDirty:zc,isValid:Bo,isAsync:qo,get util(){return Ke},get objectUtil(){return Bc},ZodParsedType:re,getParsedType:dn,ZodType:De,ZodString:Ar,ZodNumber:fn,ZodBigInt:pn,ZodBoolean:bs,ZodDate:Kn,ZodSymbol:zo,ZodUndefined:_s,ZodNull:Es,ZodAny:Ei,ZodUnknown:Zn,ZodNever:Jr,ZodVoid:Wo,ZodArray:Tr,ZodObject:ht,ZodUnion:Ss,ZodDiscriminatedUnion:Ho,ZodIntersection:xs,ZodTuple:qr,ZodRecord:Cs,ZodMap:Ko,ZodSet:Gn,ZodFunction:xi,ZodLazy:Os,ZodLiteral:Ds,ZodEnum:gn,ZodNativeEnum:Is,ZodPromise:Ci,ZodEffects:Rr,ZodTransformer:Rr,ZodOptional:Xr,ZodNullable:Qn,ZodDefault:As,ZodCatch:Zo,ZodNaN:Go,BRAND:y3,ZodBranded:kf,ZodPipeline:Ts,custom:Ff,Schema:De,ZodSchema:De,late:v3,get ZodFirstPartyTypeKind(){return de},coerce:{string:t=>Ar.create({...t,coerce:!0}),number:t=>fn.create({...t,coerce:!0}),boolean:t=>bs.create({...t,coerce:!0}),bigint:t=>pn.create({...t,coerce:!0}),date:t=>Kn.create({...t,coerce:!0})},any:O3,array:T3,bigint:_3,boolean:Bf,date:E3,discriminatedUnion:N3,effect:qf,enum:z3,function:j3,instanceof:w3,intersection:L3,lazy:B3,literal:q3,map:F3,nan:b3,nativeEnum:W3,never:I3,null:C3,nullable:K3,number:jf,object:R3,oboolean:()=>Bf().optional(),onumber:()=>jf().optional(),optional:H3,ostring:()=>Uf().optional(),pipeline:G3,preprocess:Z3,promise:V3,record:k3,set:U3,strictObject:P3,string:Uf,symbol:S3,transformer:qf,tuple:M3,undefined:x3,union:$3,unknown:D3,void:A3,NEVER:me,ZodIssueCode:G,quotelessJson:n3,ZodError:Ir});const zf=/^aleo1.{58}$/i,Wf=/^AViewKey1.{44}$/i,Vf=/^APrivateKey1.{47}$/i,Hf=/^at1.{60}$/i,Kf=/^\d+field$/,Zf=/^\d+u32$/,Gf=/^\d+u64$/,Q3=Pr.string().regex(zf),Y3=Pr.string().regex(Wf),J3=Pr.string().regex(Vf),X3=Pr.string().regex(Hf),e5=Pr.string().regex(Kf),t5=Pr.string().regex(Zf),r5=Pr.string().regex(Gf);z.EventType=void 0,function(t){t.Deploy="Deploy",t.Execute="Execute",t.Send="Send",t.Receive="Receive",t.Join="Join",t.Split="Split",t.Shield="Shield",t.Unshield="Unshield"}(z.EventType||(z.EventType={})),z.EventStatus=void 0,function(t){t.Creating="Creating",t.Pending="Pending",t.Settled="Settled",t.Failed="Failed"}(z.EventStatus||(z.EventStatus={})),z.Visibility=void 0,function(t){t.Private="Private",t.Public="Public"}(z.Visibility||(z.Visibility={})),z.Network=void 0,function(t){t.AleoTestnet="AleoTestnet",t.AleoMainnet="AleoMainnet"}(z.Network||(z.Network={})),z.AssetType=void 0,function(t){t[t.ALEO=0]="ALEO"}(z.AssetType||(z.AssetType={}));const n5=Pr.nativeEnum(z.EventType),i5=Pr.nativeEnum(z.EventStatus),s5=Pr.nativeEnum(z.Network),o5=Pr.nativeEnum(z.Visibility);function Vc(t){Xe.useEffect(()=>(nt().then(e=>{e.onSessionDelete(t)}),()=>{nt().then(e=>{e.offSessionDelete(t)})}),[t])}function Qf(t){Xe.useEffect(()=>(nt().then(e=>{e.onSessionExpire(t)}),()=>{nt().then(e=>{e.offSessionExpire(t)})}),[t])}function Hc(t){Xe.useEffect(()=>(nt().then(e=>{e.onSessionUpdate(t)}),()=>{nt().then(e=>{e.offSessionUpdate(t)})}),[t])}function vr(){const[t,e]=Xe.useState(void 0);return Vc(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),Hc(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:n}=r.params,i={...t,namespaces:n};e(i)}}),Qf(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),Xe.useEffect(()=>{async function r(){const i=await(await nt()).getSession();e(i)}return r(),Hn.on("session_change",r),()=>{Hn.off("session_change",r)}},[]),t}function Oi(t){Xe.useEffect(()=>(nt().then(e=>{e.onSessionEvent(t)}),()=>{nt().then(e=>{e.offSessionEvent(t)})}),[t])}const Yf=t=>{let e;const r=new Set,n=(c,l)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const f=e;e=l??(typeof h!="object"||h===null)?h:Object.assign({},e,h),r.forEach(p=>p(e,f))}},i=()=>e,a={setState:n,getState:i,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{r.clear()}};return e=t(n,i,a),a},a5=t=>t?Yf(t):Yf;var Kc={exports:{}},Zc={},Qo={exports:{}},Gc={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf;function c5(){if(Jf)return Gc;Jf=1;var t=Xe;function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,p){var g=p(),v=n({inst:{value:g,getSnapshot:p}}),_=v[0].inst,S=v[1];return s(function(){_.value=g,_.getSnapshot=p,c(_)&&S({inst:_})},[f,g,p]),i(function(){return c(_)&&S({inst:_}),f(function(){c(_)&&S({inst:_})})},[f]),o(g),g}function c(f){var p=f.getSnapshot;f=f.value;try{var g=p();return!r(f,g)}catch{return!0}}function l(f,p){return p()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:a;return Gc.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,Gc}var Qc={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf;function l5(){return Xf||(Xf=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=Xe,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(E){{for(var w=arguments.length,x=new Array(w>1?w-1:0),m=1;m<w;m++)x[m-1]=arguments[m];n("error",E,x)}}function n(E,w,x){{var m=e.ReactDebugCurrentFrame,u=m.getStackAddendum();u!==""&&(w+="%s",x=x.concat([u]));var y=x.map(function(T){return String(T)});y.unshift("Warning: "+w),Function.prototype.apply.call(console[E],console,y)}}function i(E,w){return E===w&&(E!==0||1/E===1/w)||E!==E&&w!==w}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,c=t.useLayoutEffect,l=t.useDebugValue,h=!1,f=!1;function p(E,w,x){h||t.startTransition!==void 0&&(h=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var m=w();if(!f){var u=w();s(m,u)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),f=!0)}var y=o({inst:{value:m,getSnapshot:w}}),T=y[0].inst,A=y[1];return c(function(){T.value=m,T.getSnapshot=w,g(T)&&A({inst:T})},[E,m,w]),a(function(){g(T)&&A({inst:T});var k=function(){g(T)&&A({inst:T})};return E(k)},[E]),l(m),m}function g(E){var w=E.getSnapshot,x=E.value;try{var m=w();return!s(x,m)}catch{return!0}}function v(E,w,x){return w()}var _=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S=!_,O=S?v:p,b=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:O;Qc.useSyncExternalStore=b,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Qc}var ep;function Yc(){return ep||(ep=1,process.env.NODE_ENV==="production"?Qo.exports=c5():Qo.exports=l5()),Qo.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function u5(){if(tp)return Zc;tp=1;var t=Xe,e=Yc();function r(l,h){return l===h&&(l!==0||1/l===1/h)||l!==l&&h!==h}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return Zc.useSyncExternalStoreWithSelector=function(l,h,f,p,g){var v=s(null);if(v.current===null){var _={hasValue:!1,value:null};v.current=_}else _=v.current;v=a(function(){function O(m){if(!b){if(b=!0,E=m,m=p(m),g!==void 0&&_.hasValue){var u=_.value;if(g(u,m))return w=u}return w=m}if(u=w,n(E,m))return u;var y=p(m);return g!==void 0&&g(u,y)?u:(E=m,w=y)}var b=!1,E,w,x=f===void 0?null:f;return[function(){return O(h())},x===null?void 0:function(){return O(x())}]},[h,f,p,g]);var S=i(l,v[0],v[1]);return o(function(){_.hasValue=!0,_.value=S},[S]),c(S),S},Zc}var Jc={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function h5(){return rp||(rp=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=Xe,e=Yc();function r(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;function l(h,f,p,g,v){var _=s(null),S;_.current===null?(S={hasValue:!1,value:null},_.current=S):S=_.current;var O=a(function(){var x=!1,m,u,y=function(B){if(!x){x=!0,m=B;var V=g(B);if(v!==void 0&&S.hasValue){var R=S.value;if(v(R,V))return u=R,R}return u=V,V}var N=m,Q=u;if(n(N,B))return Q;var H=g(B);return v!==void 0&&v(Q,H)?Q:(m=B,u=H,H)},T=p===void 0?null:p,A=function(){return y(f())},k=T===null?void 0:function(){return y(T())};return[A,k]},[f,p,g,v]),b=O[0],E=O[1],w=i(h,b,E);return o(function(){S.hasValue=!0,S.value=w},[w]),c(w),w}Jc.useSyncExternalStoreWithSelector=l,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Jc}process.env.NODE_ENV==="production"?Kc.exports=u5():Kc.exports=h5();var d5=Kc.exports;const f5=co(d5),{useDebugValue:p5}=Xe,{useSyncExternalStoreWithSelector:g5}=f5;let eC=!1;function m5(t,e=t.getState,r){const n=g5(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return p5(n),n}const np=t=>{const e=typeof t=="function"?a5(t):t,r=(n,i)=>m5(e,n,i);return Object.assign(r,e),r},y5=t=>t?np(t):np;function v5(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,e==null?void 0:e.reviver),a=(s=r.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>r.setItem(i,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:i=>r.removeItem(i)}}const Rs=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Rs(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Rs(n)(r)}}}},w5=(t,e)=>(r,n,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,O)=>({...O,...S}),...e},o=!1;const a=new Set,c=new Set;let l;try{l=s.getStorage()}catch{}if(!l)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...S)},n,i);const h=Rs(s.serialize),f=()=>{const S=s.partialize({...n()});let O;const b=h({state:S,version:s.version}).then(E=>l.setItem(s.name,E)).catch(E=>{O=E});if(O)throw O;return b},p=i.setState;i.setState=(S,O)=>{p(S,O),f()};const g=t((...S)=>{r(...S),f()},n,i);let v;const _=()=>{var S;if(!l)return;o=!1,a.forEach(b=>b(n()));const O=((S=s.onRehydrateStorage)==null?void 0:S.call(s,n()))||void 0;return Rs(l.getItem.bind(l))(s.name).then(b=>{if(b)return s.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return s.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var E;return v=s.merge(b,(E=n())!=null?E:g),r(v,!0),f()}).then(()=>{O==null||O(v,void 0),o=!0,c.forEach(b=>b(v))}).catch(b=>{O==null||O(void 0,b)})};return i.persist={setOptions:S=>{s={...s,...S},S.getStorage&&(l=S.getStorage())},clearStorage:()=>{l==null||l.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(c.add(S),()=>{c.delete(S)})},_(),v||g},b5=(t,e)=>(r,n,i)=>{let s={storage:v5(()=>localStorage),partialize:_=>_,version:0,merge:(_,S)=>({...S,..._}),...e},o=!1;const a=new Set,c=new Set;let l=s.storage;if(!l)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(..._)},n,i);const h=()=>{const _=s.partialize({...n()});return l.setItem(s.name,{state:_,version:s.version})},f=i.setState;i.setState=(_,S)=>{f(_,S),h()};const p=t((..._)=>{r(..._),h()},n,i);let g;const v=()=>{var _,S;if(!l)return;o=!1,a.forEach(b=>{var E;return b((E=n())!=null?E:p)});const O=((S=s.onRehydrateStorage)==null?void 0:S.call(s,(_=n())!=null?_:p))||void 0;return Rs(l.getItem.bind(l))(s.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return s.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var E;return g=s.merge(b,(E=n())!=null?E:p),r(g,!0),h()}).then(()=>{O==null||O(g,void 0),g=n(),o=!0,c.forEach(b=>b(g))}).catch(b=>{O==null||O(void 0,b)})};return i.persist={setOptions:_=>{s={...s,..._},_.storage&&(l=_.storage)},clearStorage:()=>{l==null||l.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(c.add(_),()=>{c.delete(_)})},s.skipHydration||v(),g||p},_5=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?w5(t,e):b5(t,e),mn=y5()(_5((t,e)=>({account:void 0,chainId:"aleo:1",setAccount:r=>{t({account:r})},setChainId:r=>{t({chainId:r})},onDisconnect:()=>{t({account:void 0,chainId:void 0})}}),{name:"puzzle-wallet-store"}));class Ps{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const r={listener:e};return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const $s=typeof window>"u"||"Deno"in window;function wr(){}function E5(t,e){return typeof t=="function"?t(e):t}function Xc(t){return typeof t=="number"&&t>=0&&t!==1/0}function ip(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ns(t,e,r){return Yo(t)?typeof e=="function"?{...r,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function yn(t,e,r){return Yo(t)?[{...e,queryKey:t},r]:[t||{},e]}function sp(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(Yo(o)){if(n){if(e.queryHash!==el(o,e.options))return!1}else if(!Di(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||s&&!s(e))}function op(t,e){const{exact:r,fetching:n,predicate:i,mutationKey:s}=t;if(Yo(s)){if(!e.options.mutationKey)return!1;if(r){if(Yn(e.options.mutationKey)!==Yn(s))return!1}else if(!Di(e.options.mutationKey,s))return!1}return!(typeof n=="boolean"&&e.state.status==="loading"!==n||i&&!i(e))}function el(t,e){return((e==null?void 0:e.queryKeyHashFn)||Yn)(t)}function Yn(t){return JSON.stringify(t,(e,r)=>rl(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Di(t,e){return ap(t,e)}function ap(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!ap(t[r],e[r])):!1}function cp(t,e){if(t===e)return t;const r=lp(t)&&lp(e);if(r||rl(t)&&rl(e)){const n=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),s=i.length,o=r?[]:{};let a=0;for(let c=0;c<s;c++){const l=r?c:i[c];o[l]=cp(t[l],e[l]),o[l]===t[l]&&a++}return n===s&&a===n?t:o}return e}function tl(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function lp(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function rl(t){if(!up(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!up(r)||!r.hasOwnProperty("isPrototypeOf"))}function up(t){return Object.prototype.toString.call(t)==="[object Object]"}function Yo(t){return Array.isArray(t)}function hp(t){return new Promise(e=>{setTimeout(e,t)})}function dp(t){hp(0).then(t)}function S5(){if(typeof AbortController=="function")return new AbortController}function nl(t,e,r){return r.isDataEqual!=null&&r.isDataEqual(t,e)?t:typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?cp(t,e):e}class x5 extends Ps{constructor(){super(),this.setup=e=>{if(!$s&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Jo=new x5,fp=["online","offline"];class C5 extends Ps{constructor(){super(),this.setup=e=>{if(!$s&&window.addEventListener){const r=()=>e();return fp.forEach(n=>{window.addEventListener(n,r,!1)}),()=>{fp.forEach(n=>{window.removeEventListener(n,r)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setOnline(n):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Xo=new C5;function O5(t){return Math.min(1e3*2**t,3e4)}function ea(t){return(t??"online")==="online"?Xo.isOnline():!0}class pp{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function ta(t){return t instanceof pp}function gp(t){let e=!1,r=0,n=!1,i,s,o;const a=new Promise((S,O)=>{s=S,o=O}),c=S=>{n||(g(new pp(S)),t.abort==null||t.abort())},l=()=>{e=!0},h=()=>{e=!1},f=()=>!Jo.isFocused()||t.networkMode!=="always"&&!Xo.isOnline(),p=S=>{n||(n=!0,t.onSuccess==null||t.onSuccess(S),i==null||i(),s(S))},g=S=>{n||(n=!0,t.onError==null||t.onError(S),i==null||i(),o(S))},v=()=>new Promise(S=>{i=O=>{const b=n||!f();return b&&S(O),b},t.onPause==null||t.onPause()}).then(()=>{i=void 0,n||t.onContinue==null||t.onContinue()}),_=()=>{if(n)return;let S;try{S=t.fn()}catch(O){S=Promise.reject(O)}Promise.resolve(S).then(p).catch(O=>{var b,E;if(n)return;const w=(b=t.retry)!=null?b:3,x=(E=t.retryDelay)!=null?E:O5,m=typeof x=="function"?x(r,O):x,u=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,O);if(e||!u){g(O);return}r++,t.onFail==null||t.onFail(r,O),hp(m).then(()=>{if(f())return v()}).then(()=>{e?g(O):_()})})};return ea(t.networkMode)?_():v().then(_),{promise:a,cancel:c,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:l,continueRetry:h}}const il=console;function D5(){let t=[],e=0,r=h=>{h()},n=h=>{h()};const i=h=>{let f;e++;try{f=h()}finally{e--,e||a()}return f},s=h=>{e?t.push(h):dp(()=>{r(h)})},o=h=>(...f)=>{s(()=>{h(...f)})},a=()=>{const h=t;t=[],h.length&&dp(()=>{n(()=>{h.forEach(f=>{r(f)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{n=h}}}const Dt=D5();class mp{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Xc(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??($s?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class I5 extends mp{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||il,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||A5(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,r){const n=nl(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){this.dispatch({type:"setState",state:e,setStateOptions:r})}cancel(e){var r;const n=this.promise;return(r=this.retryer)==null||r.cancel(e),n?n.then(wr).catch(wr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!ip(this.state.dataUpdatedAt,e)}onFocus(){var e;const r=this.observers.find(n=>n.shouldFetchOnWindowFocus());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const r=this.observers.find(n=>n.shouldFetchOnReconnect());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,r){var n,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&r!=null&&r.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(v=>v.options.queryFn);g&&this.setOptions(g.options)}process.env.NODE_ENV!=="production"&&(Array.isArray(this.options.queryKey)||this.logger.error("As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']"));const o=S5(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},c=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};c(a);const l=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),h={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:l};if(c(h),(n=this.options.behavior)==null||n.onFetch(h),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=h.fetchOptions)==null?void 0:i.meta)){var f;this.dispatch({type:"fetch",meta:(f=h.fetchOptions)==null?void 0:f.meta})}const p=g=>{if(ta(g)&&g.silent||this.dispatch({type:"error",error:g}),!ta(g)){var v,_,S,O;(v=(_=this.cache.config).onError)==null||v.call(_,g,this),(S=(O=this.cache.config).onSettled)==null||S.call(O,this.state.data,g,this),process.env.NODE_ENV!=="production"&&this.logger.error(g)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=gp({fn:h.fetchFn,abort:o==null?void 0:o.abort.bind(o),onSuccess:g=>{var v,_,S,O;if(typeof g>"u"){process.env.NODE_ENV!=="production"&&this.logger.error("Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: "+this.queryHash),p(new Error(this.queryHash+" data is undefined"));return}this.setData(g),(v=(_=this.cache.config).onSuccess)==null||v.call(_,g,this),(S=(O=this.cache.config).onSettled)==null||S.call(O,g,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:p,onFail:(g,v)=>{this.dispatch({type:"failed",failureCount:g,error:v})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const r=n=>{var i,s;switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:ea(this.options.networkMode)?"fetching":"paused",...!n.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return ta(o)&&o.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Dt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function A5(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}class T5 extends Ps{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,r,n){var i;const s=r.queryKey,o=(i=r.queryHash)!=null?i:el(s,r);let a=this.get(o);return a||(a=new I5({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const r=this.queriesMap[e.queryHash];r&&(e.destroy(),this.queries=this.queries.filter(n=>n!==e),r===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){Dt.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,r){const[n]=yn(e,r);return typeof n.exact>"u"&&(n.exact=!0),this.queries.find(i=>sp(n,i))}findAll(e,r){const[n]=yn(e,r);return Object.keys(n).length>0?this.queries.filter(i=>sp(n,i)):this.queries}notify(e){Dt.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}onFocus(){Dt.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){Dt.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class R5 extends mp{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||il,this.observers=[],this.state=e.state||P5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(r=>r!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,r;return(e=(r=this.retryer)==null?void 0:r.continue())!=null?e:this.execute()}async execute(){const e=()=>{var u;return this.retryer=gp({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(y,T)=>{this.dispatch({type:"failed",failureCount:y,error:T})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(u=this.options.retry)!=null?u:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},r=this.state.status==="loading";try{var n,i,s,o,a,c,l,h;if(!r){var f,p,g,v;this.dispatch({type:"loading",variables:this.options.variables}),await((f=(p=this.mutationCache.config).onMutate)==null?void 0:f.call(p,this.state.variables,this));const y=await((g=(v=this.options).onMutate)==null?void 0:g.call(v,this.state.variables));y!==this.state.context&&this.dispatch({type:"loading",context:y,variables:this.state.variables})}const u=await e();return await((n=(i=this.mutationCache.config).onSuccess)==null?void 0:n.call(i,u,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,u,this.state.variables,this.state.context)),await((a=(c=this.mutationCache.config).onSettled)==null?void 0:a.call(c,u,null,this.state.variables,this.state.context,this)),await((l=(h=this.options).onSettled)==null?void 0:l.call(h,u,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:u}),u}catch(u){try{var _,S,O,b,E,w,x,m;throw await((_=(S=this.mutationCache.config).onError)==null?void 0:_.call(S,u,this.state.variables,this.state.context,this)),process.env.NODE_ENV!=="production"&&this.logger.error(u),await((O=(b=this.options).onError)==null?void 0:O.call(b,u,this.state.variables,this.state.context)),await((E=(w=this.mutationCache.config).onSettled)==null?void 0:E.call(w,void 0,u,this.state.variables,this.state.context,this)),await((x=(m=this.options).onSettled)==null?void 0:x.call(m,void 0,u,this.state.variables,this.state.context)),u}finally{this.dispatch({type:"error",error:u})}}}dispatch(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"loading":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!ea(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...n,...e.state}}};this.state=r(this.state),Dt.batch(()=>{this.observers.forEach(n=>{n.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function P5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class $5 extends Ps{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,r,n){const i=new R5({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(r),state:n,defaultOptions:r.mutationKey?e.getMutationDefaults(r.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(r=>r!==e),this.notify({type:"removed",mutation:e})}clear(){Dt.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(r=>op(e,r))}findAll(e){return this.mutations.filter(r=>op(e,r))}notify(e){Dt.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const r=this.mutations.filter(n=>n.state.isPaused);return Dt.batch(()=>r.reduce((n,i)=>n.then(()=>i.continue().catch(wr)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function N5(){return{onFetch:t=>{t.fetchFn=()=>{var e,r,n,i,s,o;const a=(e=t.fetchOptions)==null||(r=e.meta)==null?void 0:r.refetchPage,c=(n=t.fetchOptions)==null||(i=n.meta)==null?void 0:i.fetchMore,l=c==null?void 0:c.pageParam,h=(c==null?void 0:c.direction)==="forward",f=(c==null?void 0:c.direction)==="backward",p=((s=t.state.data)==null?void 0:s.pages)||[],g=((o=t.state.data)==null?void 0:o.pageParams)||[];let v=g,_=!1;const S=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>{var u;if((u=t.signal)!=null&&u.aborted)_=!0;else{var y;(y=t.signal)==null||y.addEventListener("abort",()=>{_=!0})}return t.signal}})},O=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),b=(m,u,y,T)=>(v=T?[u,...v]:[...v,u],T?[y,...m]:[...m,y]),E=(m,u,y,T)=>{if(_)return Promise.reject("Cancelled");if(typeof y>"u"&&!u&&m.length)return Promise.resolve(m);const A={queryKey:t.queryKey,pageParam:y,meta:t.options.meta};S(A);const k=O(A);return Promise.resolve(k).then(V=>b(m,y,V,T))};let w;if(!p.length)w=E([]);else if(h){const m=typeof l<"u",u=m?l:yp(t.options,p);w=E(p,m,u)}else if(f){const m=typeof l<"u",u=m?l:L5(t.options,p);w=E(p,m,u,!0)}else{v=[];const m=typeof t.options.getNextPageParam>"u";w=(a&&p[0]?a(p[0],0,p):!0)?E([],m,g[0]):Promise.resolve(b([],g[0],p[0]));for(let y=1;y<p.length;y++)w=w.then(T=>{if(a&&p[y]?a(p[y],y,p):!0){const k=m?g[y]:yp(t.options,T);return E(T,m,k)}return Promise.resolve(b(T,g[y],p[y]))})}return w.then(m=>({pages:m,pageParams:v}))}}}}function yp(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function L5(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class M5{constructor(e={}){this.queryCache=e.queryCache||new T5,this.mutationCache=e.mutationCache||new $5,this.logger=e.logger||il,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0,process.env.NODE_ENV!=="production"&&e.logger&&this.logger.error("Passing a custom logger has been deprecated and will be removed in the next major version.")}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Jo.subscribe(()=>{Jo.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Xo.subscribe(()=>{Xo.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,r;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(r=this.unsubscribeOnline)==null||r.call(this),this.unsubscribeOnline=void 0)}isFetching(e,r){const[n]=yn(e,r);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state.data}ensureQueryData(e,r,n){const i=Ns(e,r,n),s=this.getQueryData(i.queryKey);return s?Promise.resolve(s):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:r,state:n})=>{const i=n.data;return[r,i]})}setQueryData(e,r,n){const i=this.queryCache.find(e),s=i==null?void 0:i.state.data,o=E5(r,s);if(typeof o>"u")return;const a=Ns(e),c=this.defaultQueryOptions(a);return this.queryCache.build(this,c).setData(o,{...n,manual:!0})}setQueriesData(e,r,n){return Dt.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,r,n)]))}getQueryState(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state}removeQueries(e,r){const[n]=yn(e,r),i=this.queryCache;Dt.batch(()=>{i.findAll(n).forEach(s=>{i.remove(s)})})}resetQueries(e,r,n){const[i,s]=yn(e,r,n),o=this.queryCache,a={type:"active",...i};return Dt.batch(()=>(o.findAll(i).forEach(c=>{c.reset()}),this.refetchQueries(a,s)))}cancelQueries(e,r,n){const[i,s={}]=yn(e,r,n);typeof s.revert>"u"&&(s.revert=!0);const o=Dt.batch(()=>this.queryCache.findAll(i).map(a=>a.cancel(s)));return Promise.all(o).then(wr).catch(wr)}invalidateQueries(e,r,n){const[i,s]=yn(e,r,n);return Dt.batch(()=>{var o,a;if(this.queryCache.findAll(i).forEach(l=>{l.invalidate()}),i.refetchType==="none")return Promise.resolve();const c={...i,type:(o=(a=i.refetchType)!=null?a:i.type)!=null?o:"active"};return this.refetchQueries(c,s)})}refetchQueries(e,r,n){const[i,s]=yn(e,r,n),o=Dt.batch(()=>this.queryCache.findAll(i).filter(c=>!c.isDisabled()).map(c=>{var l;return c.fetch(void 0,{...s,cancelRefetch:(l=s==null?void 0:s.cancelRefetch)!=null?l:!0,meta:{refetchPage:i.refetchPage}})}));let a=Promise.all(o).then(wr);return s!=null&&s.throwOnError||(a=a.catch(wr)),a}fetchQuery(e,r,n){const i=Ns(e,r,n),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,r,n){return this.fetchQuery(e,r,n).then(wr).catch(wr)}fetchInfiniteQuery(e,r,n){const i=Ns(e,r,n);return i.behavior=N5(),this.fetchQuery(i)}prefetchInfiniteQuery(e,r,n){return this.fetchInfiniteQuery(e,r,n).then(wr).catch(wr)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,r){const n=this.queryDefaults.find(i=>Yn(e)===Yn(i.queryKey));n?n.defaultOptions=r:this.queryDefaults.push({queryKey:e,defaultOptions:r})}getQueryDefaults(e){if(!e)return;const r=this.queryDefaults.find(n=>Di(e,n.queryKey));return process.env.NODE_ENV!=="production"&&this.queryDefaults.filter(i=>Di(e,i.queryKey)).length>1&&this.logger.error("[QueryClient] Several query defaults match with key '"+JSON.stringify(e)+"'. The first matching query defaults are used. Please check how query defaults are registered. Order does matter here. cf. https://react-query.tanstack.com/reference/QueryClient#queryclientsetquerydefaults."),r==null?void 0:r.defaultOptions}setMutationDefaults(e,r){const n=this.mutationDefaults.find(i=>Yn(e)===Yn(i.mutationKey));n?n.defaultOptions=r:this.mutationDefaults.push({mutationKey:e,defaultOptions:r})}getMutationDefaults(e){if(!e)return;const r=this.mutationDefaults.find(n=>Di(e,n.mutationKey));return process.env.NODE_ENV!=="production"&&this.mutationDefaults.filter(i=>Di(e,i.mutationKey)).length>1&&this.logger.error("[QueryClient] Several mutation defaults match with key '"+JSON.stringify(e)+"'. The first matching mutation defaults are used. Please check how mutation defaults are registered. Order does matter here. cf. https://react-query.tanstack.com/reference/QueryClient#queryclientsetmutationdefaults."),r==null?void 0:r.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const r={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!r.queryHash&&r.queryKey&&(r.queryHash=el(r.queryKey,r)),typeof r.refetchOnReconnect>"u"&&(r.refetchOnReconnect=r.networkMode!=="always"),typeof r.useErrorBoundary>"u"&&(r.useErrorBoundary=!!r.suspense),r}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class k5 extends Ps{constructor(e,r){super(),this.client=e,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),vp(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return sl(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return sl(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,r){const n=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),process.env.NODE_ENV!=="production"&&typeof(e==null?void 0:e.isDataEqual)<"u"&&this.client.getLogger().error("The isDataEqual option has been deprecated and will be removed in the next major version. You can achieve the same functionality by passing a function as the structuralSharing option"),tl(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const s=this.hasListeners();s&&wp(this.currentQuery,i,this.options,n)&&this.executeFetch(),this.updateResult(r),s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const r=this.client.getQueryCache().build(this.client,e),n=this.createResult(r,e);return U5(this,n,e)&&(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n}getCurrentResult(){return this.currentResult}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...r}={}){return this.fetch({...r,meta:{refetchPage:e}})}fetchOptimistic(e){const r=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){var r;return this.executeFetch({...e,cancelRefetch:(r=e.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let r=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(wr)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),$s||this.currentResult.isStale||!Xc(this.options.staleTime))return;const r=ip(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!($s||this.options.enabled===!1||!Xc(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Jo.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,r){const n=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,c=e!==n,l=c?e.state:this.currentQueryInitialState,h=c?this.currentResult:this.previousQueryResult,{state:f}=e;let{dataUpdatedAt:p,error:g,errorUpdatedAt:v,fetchStatus:_,status:S}=f,O=!1,b=!1,E;if(r._optimisticResults){const y=this.hasListeners(),T=!y&&vp(e,r),A=y&&wp(e,n,r,i);(T||A)&&(_=ea(e.options.networkMode)?"fetching":"paused",p||(S="loading")),r._optimisticResults==="isRestoring"&&(_="idle")}if(r.keepPreviousData&&!f.dataUpdatedAt&&h!=null&&h.isSuccess&&S!=="error")E=h.data,p=h.dataUpdatedAt,S=h.status,O=!0;else if(r.select&&typeof f.data<"u")if(s&&f.data===(o==null?void 0:o.data)&&r.select===this.selectFn)E=this.selectResult;else try{this.selectFn=r.select,E=r.select(f.data),E=nl(s==null?void 0:s.data,E,r),this.selectResult=E,this.selectError=null}catch(y){process.env.NODE_ENV!=="production"&&this.client.getLogger().error(y),this.selectError=y}else E=f.data;if(typeof r.placeholderData<"u"&&typeof E>"u"&&S==="loading"){let y;if(s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))y=s.data;else if(y=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof y<"u")try{y=r.select(y),this.selectError=null}catch(T){process.env.NODE_ENV!=="production"&&this.client.getLogger().error(T),this.selectError=T}typeof y<"u"&&(S="success",E=nl(s==null?void 0:s.data,y,r),b=!0)}this.selectError&&(g=this.selectError,E=this.selectResult,v=Date.now(),S="error");const w=_==="fetching",x=S==="loading",m=S==="error";return{status:S,fetchStatus:_,isLoading:x,isSuccess:S==="success",isError:m,isInitialLoading:x&&w,data:E,dataUpdatedAt:p,error:g,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>l.dataUpdateCount||f.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!x,isLoadingError:m&&f.dataUpdatedAt===0,isPaused:_==="paused",isPlaceholderData:b,isPreviousData:O,isRefetchError:m&&f.dataUpdatedAt!==0,isStale:ol(e,r),refetch:this.refetch,remove:this.remove}}updateResult(e){const r=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,tl(n,r))return;this.currentResult=n;const i={cache:!0},s=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!this.trackedProps.size)return!0;const c=new Set(a??this.trackedProps);return this.options.useErrorBoundary&&c.add("error"),Object.keys(this.currentResult).some(l=>{const h=l;return this.currentResult[h]!==r[h]&&c.has(h)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const r={};e.type==="success"?r.onSuccess=!e.manual:e.type==="error"&&!ta(e.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(e){Dt.batch(()=>{if(e.onSuccess){var r,n,i,s;(r=(n=this.options).onSuccess)==null||r.call(n,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,a,c,l;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(c=(l=this.options).onSettled)==null||c.call(l,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:h})=>{h(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function F5(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function vp(t,e){return F5(t,e)||t.state.dataUpdatedAt>0&&sl(t,e,e.refetchOnMount)}function sl(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&ol(t,e)}return!1}function wp(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&ol(t,r)}function ol(t,e){return t.isStaleByTime(e.staleTime)}function U5(t,e,r){return r.keepPreviousData?!1:r.placeholderData!==void 0?e.isPlaceholderData:!tl(t.getCurrentResult(),e)}var j5=Yc();const B5=j5.useSyncExternalStore,bp=Qt.createContext(void 0),_p=Qt.createContext(!1);function Ep(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=bp),window.ReactQueryClientContext):bp)}const q5=({context:t}={})=>{const e=Qt.useContext(Ep(t,Qt.useContext(_p)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},z5=({client:t,children:e,context:r,contextSharing:n=!1})=>{Qt.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),process.env.NODE_ENV!=="production"&&n&&t.getLogger().error("The contextSharing option has been deprecated and will be removed in the next major version");const i=Ep(r,n);return Qt.createElement(_p.Provider,{value:!r&&n},Qt.createElement(i.Provider,{value:t},e))},Sp=Qt.createContext(!1),W5=()=>Qt.useContext(Sp);Sp.Provider;function V5(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const H5=Qt.createContext(V5()),K5=()=>Qt.useContext(H5);function Z5(t,e){return typeof t=="function"?t(...e):!!t}const G5=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},Q5=t=>{Qt.useEffect(()=>{t.clearReset()},[t])},Y5=({result:t,errorResetBoundary:e,useErrorBoundary:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&Z5(r,[t.error,n]),J5=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},X5=(t,e)=>t.isLoading&&t.isFetching&&!e,eE=(t,e,r)=>(t==null?void 0:t.suspense)&&X5(e,r),tE=(t,e,r)=>e.fetchOptimistic(t).then(({data:n})=>{t.onSuccess==null||t.onSuccess(n),t.onSettled==null||t.onSettled(n,null)}).catch(n=>{r.clearReset(),t.onError==null||t.onError(n),t.onSettled==null||t.onSettled(void 0,n)});function rE(t,e){const r=q5({context:t.context}),n=W5(),i=K5(),s=r.defaultQueryOptions(t);s._optimisticResults=n?"isRestoring":"optimistic",s.onError&&(s.onError=Dt.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=Dt.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=Dt.batchCalls(s.onSettled)),J5(s),G5(s,i),Q5(i);const[o]=Qt.useState(()=>new e(r,s)),a=o.getOptimisticResult(s);if(B5(Qt.useCallback(c=>{const l=n?()=>{}:o.subscribe(Dt.batchCalls(c));return o.updateResult(),l},[o,n]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),Qt.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),eE(s,a,n))throw tE(s,o,i);if(Y5({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function nE(t,e,r){const n=Ns(t,e,r);return rE(n,k5)}function al(){const[t,e]=Xe.useState(void 0),[r,n]=Xe.useState(void 0),[i,s]=Xe.useState(!1);return{data:t,error:r,loading:i,setData:e,setError:n,setLoading:s}}async function xp(t,e){const n=await(await nt()).request(t);if(n===void 0&&e)throw console.error("Result is undefined, retrying..."),new Error("Result is undefined, retrying...");return n}function Ls({queryKey:t,wcParams:e,enabled:r,queryOptions:n}){return nE(t,async()=>xp(e,t),n??{staleTime:t[0]==="getEvent"?7500:45e3,refetchInterval:t[0]==="getEvent"?5e3:3e4,refetchIntervalInBackground:!0,enabled:r,retry:!0})}function Ms(t){const{data:e,error:r,loading:n,setData:i,setError:s,setLoading:o}=al();async function a(c){try{o(!0),s(void 0);const l=await xp(t??c);return i(l),l}catch(l){throw s(l),l}finally{o(!1)}}return{data:e,error:r,loading:n,request:a}}const cl=(t,e=!0,r=4,n=!0)=>t?t.length<r?t:n?`(...${t.slice(-r)})`:t.length<r*2?t:`${t.slice(0,r+(e?5:0))}...${t.slice(t.length-r,t.length)}`:"",iE=()=>{const t=vr(),e="aleo:1",[r,n,i]=mn(h=>[h.account,h.setAccount,h.onDisconnect]),{refetch:s,data:o,error:a,isLoading:c}=Ls({queryKey:["useAccount",t==null?void 0:t.topic],enabled:!!t,wcParams:{topic:t==null?void 0:t.topic,chainId:e,request:{jsonrpc:"2.0",method:"getSelectedAccount"}}});Oi(({params:h,topic:f})=>{if(h.event.name==="accountSelected"&&t&&t.topic===f){const g=h.event.address??h.event.data.address,v=h.chainId.split(":")[0],_=h.chainId.split(":")[1];n({network:v,chainId:_,address:g,shortenedAddress:cl(g)})}}),Hc(({params:h,topic:f})=>{const p=h.event.address??h.event.data.address,g=h.chainId.split(":")[0],v=h.chainId.split(":")[1];n({network:g,chainId:v,address:p,shortenedAddress:cl(p)})}),Vc(({params:h,topic:f})=>{i()}),Xe.useEffect(()=>{t&&!c&&s()},[t==null?void 0:t.topic]),Xe.useEffect(()=>{if(o){const h=o,f=h==null?void 0:h.account;f&&n(f)}},[o]);const l=a?a.message:o&&o.error;return{account:r,error:l,loading:c}},sE=({address:t,multisig:e})=>{const r=vr(),[n]=mn(p=>[p.account]),i="aleo:1",{refetch:s,data:o,error:a,isLoading:c}=Ls({queryKey:["useBalance",t,(n==null?void 0:n.address)??"",e,r==null?void 0:r.topic],enabled:!!r&&!!n&&(e?!!t:!0),wcParams:{topic:r==null?void 0:r.topic,chainId:i,request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}}});Oi(({params:p,topic:g})=>{const v=p.event.name,_=p.event.address??p.event.data.address;["accountSelected","selectedAccountSynced","sharedAccountSynced"].includes(v)&&r&&r.topic===g&&_===(n==null?void 0:n.address)&&!c&&s()}),Xe.useEffect(()=>{r&&!c&&s()},[r==null?void 0:r.topic]);const l=a?a.message:o&&o.error,h=o;return{balances:h==null?void 0:h.balances,error:l,loading:c}};function oE(){const{data:t,error:e,loading:r,setData:n,setError:i,setLoading:s}=al();async function o(){try{s(!0),i(void 0);const c=await(await nt()).connect({requiredNamespaces:{aleo:{methods:ko,chains:ys,events:Fo}}});return n(c),Hn.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),c}catch(a){throw i(a),a}finally{s(!1)}}return{data:t,error:e,loading:r,connect:o}}const aE=()=>{const t=vr(),{request:e,data:r,error:n,loading:i}=Ms({topic:(t==null?void 0:t.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"createSharedState",params:{}}}),s=n?n.message:r&&r.error,o=r;return{createSharedState:()=>{e()},data:o==null?void 0:o.data,loading:i,error:s}};var ll={exports:{}},ul,Cp;function cE(){if(Cp)return ul;Cp=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;ul=function(h,f){f=f||{};var p=typeof h;if(p==="string"&&h.length>0)return o(h);if(p==="number"&&isFinite(h))return f.long?c(h):a(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function o(h){if(h=String(h),!(h.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(f){var p=parseFloat(f[1]),g=(f[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return p*s;case"weeks":case"week":case"w":return p*i;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(h){var f=Math.abs(h);return f>=n?Math.round(h/n)+"d":f>=r?Math.round(h/r)+"h":f>=e?Math.round(h/e)+"m":f>=t?Math.round(h/t)+"s":h+"ms"}function c(h){var f=Math.abs(h);return f>=n?l(h,f,n,"day"):f>=r?l(h,f,r,"hour"):f>=e?l(h,f,e,"minute"):f>=t?l(h,f,t,"second"):h+" ms"}function l(h,f,p,g){var v=f>=p*1.5;return Math.round(h/p)+" "+g+(v?"s":"")}return ul}function lE(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=cE(),r.destroy=l,Object.keys(t).forEach(h=>{r[h]=t[h]}),r.names=[],r.skips=[],r.formatters={};function e(h){let f=0;for(let p=0;p<h.length;p++)f=(f<<5)-f+h.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(h){let f,p=null,g,v;function _(...S){if(!_.enabled)return;const O=_,b=Number(new Date),E=b-(f||b);O.diff=E,O.prev=f,O.curr=b,f=b,S[0]=r.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let w=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(m,u)=>{if(m==="%%")return"%";w++;const y=r.formatters[u];if(typeof y=="function"){const T=S[w];m=y.call(O,T),S.splice(w,1),w--}return m}),r.formatArgs.call(O,S),(O.log||r.log).apply(O,S)}return _.namespace=h,_.useColors=r.useColors(),_.color=r.selectColor(h),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==r.namespaces&&(g=r.namespaces,v=r.enabled(h)),v),set:S=>{p=S}}),typeof r.init=="function"&&r.init(_),_}function n(h,f){const p=r(this.namespace+(typeof f>"u"?":":f)+h);return p.log=this.log,p}function i(h){r.save(h),r.namespaces=h,r.names=[],r.skips=[];let f;const p=(typeof h=="string"?h:"").split(/[\s,]+/),g=p.length;for(f=0;f<g;f++)p[f]&&(h=p[f].replace(/\*/g,".*?"),h[0]==="-"?r.skips.push(new RegExp("^"+h.slice(1)+"$")):r.names.push(new RegExp("^"+h+"$")))}function s(){const h=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),h}function o(h){if(h[h.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(h))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(h))return!0;return!1}function a(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function c(h){return h instanceof Error?h.stack||h.message:h}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var uE=lE;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let h=0,f=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(h++,p==="%c"&&(f=h))}),c.splice(f,0,l)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=uE(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(ll,ll.exports);var hE=ll.exports;const hl=co(hE)("wallet:sdk");hl.enabled=!0;const dE=t=>{hl("useDecrypt",t);const e=vr(),{request:r,data:n,error:i,loading:s}=Ms({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}}),o=i?i.message:n&&n.error,a=n;return{decrypt:()=>{t&&r()},plaintexts:a==null?void 0:a.plaintexts,loading:s,error:o}};function fE(){const t=vr(),{error:e,loading:r,setError:n,setLoading:i}=al();async function s(){try{i(!0),n(void 0),await(await nt()).disconnect({topic:t==null?void 0:t.topic,reason:Ot("USER_DISCONNECTED")}),Hn.emit("session_change"),mn.setState({account:void 0})}catch(o){throw n(o),o}finally{i(!1)}}return{error:e,loading:r,disconnect:s}}const pE=({id:t,address:e,multisig:r=!1})=>{const n=vr(),[i]=mn(v=>[v.account]),{refetch:s,data:o,error:a,isLoading:c}=Ls({queryKey:["useEvent",i==null?void 0:i.address,e,r,t??"",n==null?void 0:n.topic],enabled:!!t&&!!n&&!!i&&(r?!!e:!0),wcParams:{topic:(n==null?void 0:n.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}}});Oi(({params:v,topic:_})=>{const S=v.event.name;(S==="selectedAccountSynced"&&!r||S==="sharedAccountSynced"&&r)&&s()});const l=!!n&&!!i;Xe.useEffect(()=>{l&&!c&&s()},[l]);const h=()=>{!!n&&!!i&&!c&&s()},f=a?a.message:o&&o.error,p=o,g=p==null?void 0:p.event;return{fetchEvent:h,event:g,error:f,loading:c}},gE=({filter:t,page:e})=>{const r=vr(),[n]=mn(v=>[v.account]);(t==null?void 0:t.programId)===""&&(t.programId=void 0);const{refetch:i,data:s,error:o,isLoading:a}=Ls({queryKey:["useEvents",n==null?void 0:n.address,t,e,r==null?void 0:r.topic],enabled:!!r&&!!n,wcParams:{topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:e}}}});Oi(({id:v,params:_,topic:S})=>{const O=_.event.name,b=_.event.address??_.event.data.address;O==="selectedAccountSynced"&&r&&r.topic===S&&b===(n==null?void 0:n.address)&&!a&&i()});const c=!!r&&!!n;Xe.useEffect(()=>{c&&!a&&i()},[c]);const l=()=>{!!r&&!!n&&!a&&i()},h=o?o.message:s&&s.error,f=s,p=f==null?void 0:f.events,g=(f==null?void 0:f.pageCount)??0;return{fetchPage:l,events:p,error:h,loading:a,page:e,pageCount:g}},mE=t=>{const e=vr(),{request:r,data:n,error:i,loading:s}=Ms({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}}),o=i?i.message:n&&n.error,a=n;return{importSharedState:()=>{r()},data:a==null?void 0:a.data,loading:s,error:o}},yE=t=>{try{return JSON.stringify(t,null,2).replaceAll('"',"")??""}catch{return""}},vE=({address:t,multisig:e=!1,filter:r,page:n})=>{const i=vr(),[s,o]=mn(O=>[O.chainId,O.account]),{refetch:a,data:c,error:l,isLoading:h}=Ls({queryKey:["useRecords",o==null?void 0:o.address,t,e,r,n,i==null?void 0:i.topic],enabled:(e?!!t:!0)&&!!i&&!!o,wcParams:{topic:i==null?void 0:i.topic,chainId:s,request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:r,page:n}}}}),f=!!i&&!!o&&(e?!!t:!0);Oi(({params:O})=>{const b=O.event.name;(b==="selectedAccountSynced"&&!e||b==="sharedAccountSynced"&&e)&&a()});const p=()=>{f&&!h&&a()},g=l?l.message:c&&c.error,v=c,_=v==null?void 0:v.records,S=(v==null?void 0:v.pageCount)??0;return{fetchPage:p,records:_,error:g,loading:h,page:n,pageCount:S}},wE=(t,e)=>{const r=vr(),{request:n,data:i,error:s,loading:o}=Ms({topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}}),a=s?s.message:i&&i.error;return{requestSignature:()=>{n()},response:i,loading:o,error:a}},bE=t=>{const e=vr(),r=t==null?void 0:t.inputs.map(h=>typeof h=="string"?h:h.plaintext),{request:n,data:i,error:s,loading:o}=Ms({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:r}}}),a=s?s.message:i&&i.error,c=i;return{createEvent:()=>{t&&(hl("useCreateEvent requesting...",t),n())},eventId:c==null?void 0:c.eventId,loading:o,error:a}},_E=async()=>{const t=await nt(),e=await t.getSession(),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{const n=await t.request({topic:e==null?void 0:e.topic,chainId:r,request:{jsonrpc:"2.0",method:"getSelectedAccount"}});return mn.setState({account:n.account}),n}catch(n){const i=n.message;return console.error("getAccount error",i),{error:i}}},EE=async({address:t})=>{const e=await nt(),r=await e.getSession(),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r==null?void 0:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}})}catch(i){const s=i.message;return console.error("getBalance error",s),{error:s}}},SE=async()=>{const t=await nt();if(!t)throw new Error("call setConnection() first!");try{const e=await t.connect({requiredNamespaces:{aleo:{methods:ko,chains:ys,events:Fo}}});return Hn.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),e}catch(e){console.error("connect error",e.message)}},xE=async t=>{const e=await nt(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};const i=t==null?void 0:t.inputs.map(s=>typeof s=="string"?s:s.plaintext);try{return await e.request({topic:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:i}}})}catch(s){const o=s.message;return console.error("createEvent error",o),{error:o}}},CE=async()=>{const t=await nt(),e=await(t==null?void 0:t.getSession()),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e.topic,chainId:r,request:{jsonrpc:"2.0",method:"createSharedState",params:{}}})}catch(n){const i=n.message;return console.error("createSharedState error",i),{error:i}}},OE=async t=>{const e=await nt(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}})}catch(i){return console.error("decrypt error",i.message),{error:i.message}}},DE=async()=>{const t=await nt(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session, or connection"};try{return await t.disconnect({reason:Ot("USER_DISCONNECTED"),topic:e.topic}),Hn.emit("session_change"),mn.setState({account:void 0}),{}}catch(r){const n=r.message;return console.error("error disconnecting",n),{error:n}}},IE=async({id:t,address:e})=>{const r=await nt(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{event:void 0,error:"no session, chainId, or connection"};const s=async()=>await r.request({topic:(n==null?void 0:n.topic)??"",chainId:i,request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}});try{return await s()}catch(o){const a=o.message;return console.error("getEvents error",a),{error:a}}},AE=async t=>{const e=await nt(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{events:void 0,error:"no session, chainId, or connection"};(t==null?void 0:t.programId)===""&&(t.programId=void 0);const i=async(s=0)=>await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:s}}});try{return await i()}catch(s){const o=s.message;return console.error("getEvents error",o),{error:o}}},TE=async t=>{const e=await nt(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}})}catch(i){const s=i.message;return console.error("importSharedState error",s),{error:s}}},RE=async({address:t,filter:e,page:r=0})=>{const n=await nt(),i=await(n==null?void 0:n.getSession()),s="aleo:1";if(!i||!s||!n)return{error:"no session, chainId, or connection"};const o=async(a=0)=>await n.request({topic:i.topic,chainId:s,request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:a}}});try{return await o()}catch(a){const c=a.message;return console.error("getRecords error",c),{error:c}}},PE=async({message:t,address:e})=>{const r=await nt(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{error:"no session, chainId, or connection"};try{return await r.request({topic:n.topic,chainId:i,request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}})}catch(s){const o=s.message;return console.error("signature error",o),{error:o}}},$E=50;var dl={exports:{}},ks={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op;function NE(){if(Op)return ks;Op=1;var t=Xe,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,l){var h,f={},p=null,g=null;l!==void 0&&(p=""+l),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(g=c.ref);for(h in c)n.call(c,h)&&!s.hasOwnProperty(h)&&(f[h]=c[h]);if(a&&a.defaultProps)for(h in c=a.defaultProps,c)f[h]===void 0&&(f[h]=c[h]);return{$$typeof:e,type:a,key:p,ref:g,props:f,_owner:i.current}}return ks.Fragment=r,ks.jsx=o,ks.jsxs=o,ks}var Fs={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function LE(){return Dp||(Dp=1,process.env.NODE_ENV!=="production"&&function(){var t=Xe,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),v=Symbol.iterator,_="@@iterator";function S(D){if(D===null||typeof D!="object")return null;var F=v&&D[v]||D[_];return typeof F=="function"?F:null}var O=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(D){{for(var F=arguments.length,ee=new Array(F>1?F-1:0),fe=1;fe<F;fe++)ee[fe-1]=arguments[fe];E("error",D,ee)}}function E(D,F,ee){{var fe=O.ReactDebugCurrentFrame,He=fe.getStackAddendum();He!==""&&(F+="%s",ee=ee.concat([He]));var ke=ee.map(function(Ue){return String(Ue)});ke.unshift("Warning: "+F),Function.prototype.apply.call(console[D],console,ke)}}var w=!1,x=!1,m=!1,u=!1,y=!1,T;T=Symbol.for("react.module.reference");function A(D){return!!(typeof D=="string"||typeof D=="function"||D===n||D===s||y||D===i||D===l||D===h||u||D===g||w||x||m||typeof D=="object"&&D!==null&&(D.$$typeof===p||D.$$typeof===f||D.$$typeof===o||D.$$typeof===a||D.$$typeof===c||D.$$typeof===T||D.getModuleId!==void 0))}function k(D,F,ee){var fe=D.displayName;if(fe)return fe;var He=F.displayName||F.name||"";return He!==""?ee+"("+He+")":ee}function B(D){return D.displayName||"Context"}function V(D){if(D==null)return null;if(typeof D.tag=="number"&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof D=="function")return D.displayName||D.name||null;if(typeof D=="string")return D;switch(D){case n:return"Fragment";case r:return"Portal";case s:return"Profiler";case i:return"StrictMode";case l:return"Suspense";case h:return"SuspenseList"}if(typeof D=="object")switch(D.$$typeof){case a:var F=D;return B(F)+".Consumer";case o:var ee=D;return B(ee._context)+".Provider";case c:return k(D,D.render,"ForwardRef");case f:var fe=D.displayName||null;return fe!==null?fe:V(D.type)||"Memo";case p:{var He=D,ke=He._payload,Ue=He._init;try{return V(Ue(ke))}catch{return null}}}return null}var R=Object.assign,N=0,Q,H,j,W,U,K,pe;function Z(){}Z.__reactDisabledLog=!0;function ue(){{if(N===0){Q=console.log,H=console.info,j=console.warn,W=console.error,U=console.group,K=console.groupCollapsed,pe=console.groupEnd;var D={configurable:!0,enumerable:!0,value:Z,writable:!0};Object.defineProperties(console,{info:D,log:D,warn:D,error:D,group:D,groupCollapsed:D,groupEnd:D})}N++}}function ne(){{if(N--,N===0){var D={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:R({},D,{value:Q}),info:R({},D,{value:H}),warn:R({},D,{value:j}),error:R({},D,{value:W}),group:R({},D,{value:U}),groupCollapsed:R({},D,{value:K}),groupEnd:R({},D,{value:pe})})}N<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var le=O.ReactCurrentDispatcher,M;function L(D,F,ee){{if(M===void 0)try{throw Error()}catch(He){var fe=He.stack.trim().match(/\n( *(at )?)/);M=fe&&fe[1]||""}return`
`+M+D}}var P=!1,d;{var I=typeof WeakMap=="function"?WeakMap:Map;d=new I}function Y(D,F){if(!D||P)return"";{var ee=d.get(D);if(ee!==void 0)return ee}var fe;P=!0;var He=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ke;ke=le.current,le.current=null,ue();try{if(F){var Ue=function(){throw Error()};if(Object.defineProperty(Ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ue,[])}catch($r){fe=$r}Reflect.construct(D,[],Ue)}else{try{Ue.call()}catch($r){fe=$r}D.call(Ue.prototype)}}else{try{throw Error()}catch($r){fe=$r}D()}}catch($r){if($r&&fe&&typeof $r.stack=="string"){for(var Ne=$r.stack.split(`
`),Bt=fe.stack.split(`
`),ft=Ne.length-1,wt=Bt.length-1;ft>=1&&wt>=0&&Ne[ft]!==Bt[wt];)wt--;for(;ft>=1&&wt>=0;ft--,wt--)if(Ne[ft]!==Bt[wt]){if(ft!==1||wt!==1)do if(ft--,wt--,wt<0||Ne[ft]!==Bt[wt]){var Rt=`
`+Ne[ft].replace(" at new "," at ");return D.displayName&&Rt.includes("<anonymous>")&&(Rt=Rt.replace("<anonymous>",D.displayName)),typeof D=="function"&&d.set(D,Rt),Rt}while(ft>=1&&wt>=0);break}}}finally{P=!1,le.current=ke,ne(),Error.prepareStackTrace=He}var Dn=D?D.displayName||D.name:"",Ca=Dn?L(Dn):"";return typeof D=="function"&&d.set(D,Ca),Ca}function te(D,F,ee){return Y(D,!1)}function Re(D){var F=D.prototype;return!!(F&&F.isReactComponent)}function Pe(D,F,ee){if(D==null)return"";if(typeof D=="function")return Y(D,Re(D));if(typeof D=="string")return L(D);switch(D){case l:return L("Suspense");case h:return L("SuspenseList")}if(typeof D=="object")switch(D.$$typeof){case c:return te(D.render);case f:return Pe(D.type,F,ee);case p:{var fe=D,He=fe._payload,ke=fe._init;try{return Pe(ke(He),F,ee)}catch{}}}return""}var xe=Object.prototype.hasOwnProperty,qe={},ct=O.ReactDebugCurrentFrame;function et(D){if(D){var F=D._owner,ee=Pe(D.type,D._source,F?F.type:null);ct.setExtraStackFrame(ee)}else ct.setExtraStackFrame(null)}function Fe(D,F,ee,fe,He){{var ke=Function.call.bind(xe);for(var Ue in D)if(ke(D,Ue)){var Ne=void 0;try{if(typeof D[Ue]!="function"){var Bt=Error((fe||"React class")+": "+ee+" type `"+Ue+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof D[Ue]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Bt.name="Invariant Violation",Bt}Ne=D[Ue](F,Ue,fe,ee,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ft){Ne=ft}Ne&&!(Ne instanceof Error)&&(et(He),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",fe||"React class",ee,Ue,typeof Ne),et(null)),Ne instanceof Error&&!(Ne.message in qe)&&(qe[Ne.message]=!0,et(He),b("Failed %s type: %s",ee,Ne.message),et(null))}}}var Le=Array.isArray;function Ce(D){return Le(D)}function Ie(D){{var F=typeof Symbol=="function"&&Symbol.toStringTag,ee=F&&D[Symbol.toStringTag]||D.constructor.name||"Object";return ee}}function Oe(D){try{return be(D),!1}catch{return!0}}function be(D){return""+D}function ve(D){if(Oe(D))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ie(D)),be(D)}var he=O.ReactCurrentOwner,Ae={key:!0,ref:!0,__self:!0,__source:!0},$e,ge,Me;Me={};function ze(D){if(xe.call(D,"ref")){var F=Object.getOwnPropertyDescriptor(D,"ref").get;if(F&&F.isReactWarning)return!1}return D.ref!==void 0}function Ze(D){if(xe.call(D,"key")){var F=Object.getOwnPropertyDescriptor(D,"key").get;if(F&&F.isReactWarning)return!1}return D.key!==void 0}function Ge(D,F){if(typeof D.ref=="string"&&he.current&&F&&he.current.stateNode!==F){var ee=V(he.current.type);Me[ee]||(b('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',V(he.current.type),D.ref),Me[ee]=!0)}}function Ve(D,F){{var ee=function(){$e||($e=!0,b("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",F))};ee.isReactWarning=!0,Object.defineProperty(D,"key",{get:ee,configurable:!0})}}function pr(D,F){{var ee=function(){ge||(ge=!0,b("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",F))};ee.isReactWarning=!0,Object.defineProperty(D,"ref",{get:ee,configurable:!0})}}var _r=function(D,F,ee,fe,He,ke,Ue){var Ne={$$typeof:e,type:D,key:F,ref:ee,props:Ue,_owner:ke};return Ne._store={},Object.defineProperty(Ne._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ne,"_self",{configurable:!1,enumerable:!1,writable:!1,value:fe}),Object.defineProperty(Ne,"_source",{configurable:!1,enumerable:!1,writable:!1,value:He}),Object.freeze&&(Object.freeze(Ne.props),Object.freeze(Ne)),Ne};function Vr(D,F,ee,fe,He){{var ke,Ue={},Ne=null,Bt=null;ee!==void 0&&(ve(ee),Ne=""+ee),Ze(F)&&(ve(F.key),Ne=""+F.key),ze(F)&&(Bt=F.ref,Ge(F,He));for(ke in F)xe.call(F,ke)&&!Ae.hasOwnProperty(ke)&&(Ue[ke]=F[ke]);if(D&&D.defaultProps){var ft=D.defaultProps;for(ke in ft)Ue[ke]===void 0&&(Ue[ke]=ft[ke])}if(Ne||Bt){var wt=typeof D=="function"?D.displayName||D.name||"Unknown":D;Ne&&Ve(Ue,wt),Bt&&pr(Ue,wt)}return _r(D,Ne,Bt,He,fe,he.current,Ue)}}var jt=O.ReactCurrentOwner,Hr=O.ReactDebugCurrentFrame;function Er(D){if(D){var F=D._owner,ee=Pe(D.type,D._source,F?F.type:null);Hr.setExtraStackFrame(ee)}else Hr.setExtraStackFrame(null)}var On;On=!1;function lt(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function it(){{if(jt.current){var D=V(jt.current.type);if(D)return`

Check the render method of \``+D+"`."}return""}}function mt(D){{if(D!==void 0){var F=D.fileName.replace(/^.*[\\\/]/,""),ee=D.lineNumber;return`

Check your code at `+F+":"+ee+"."}return""}}var dt={};function yt(D){{var F=it();if(!F){var ee=typeof D=="string"?D:D.displayName||D.name;ee&&(F=`

Check the top-level render call using <`+ee+">.")}return F}}function st(D,F){{if(!D._store||D._store.validated||D.key!=null)return;D._store.validated=!0;var ee=yt(F);if(dt[ee])return;dt[ee]=!0;var fe="";D&&D._owner&&D._owner!==jt.current&&(fe=" It was passed a child from "+V(D._owner.type)+"."),Er(D),b('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',ee,fe),Er(null)}}function Et(D,F){{if(typeof D!="object")return;if(Ce(D))for(var ee=0;ee<D.length;ee++){var fe=D[ee];lt(fe)&&st(fe,F)}else if(lt(D))D._store&&(D._store.validated=!0);else if(D){var He=S(D);if(typeof He=="function"&&He!==D.entries)for(var ke=He.call(D),Ue;!(Ue=ke.next()).done;)lt(Ue.value)&&st(Ue.value,F)}}}function It(D){{var F=D.type;if(F==null||typeof F=="string")return;var ee;if(typeof F=="function")ee=F.propTypes;else if(typeof F=="object"&&(F.$$typeof===c||F.$$typeof===f))ee=F.propTypes;else return;if(ee){var fe=V(F);Fe(ee,D.props,"prop",fe,D)}else if(F.PropTypes!==void 0&&!On){On=!0;var He=V(F);b("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",He||"Unknown")}typeof F.getDefaultProps=="function"&&!F.getDefaultProps.isReactClassApproved&&b("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function At(D){{for(var F=Object.keys(D.props),ee=0;ee<F.length;ee++){var fe=F[ee];if(fe!=="children"&&fe!=="key"){Er(D),b("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",fe),Er(null);break}}D.ref!==null&&(Er(D),b("Invalid attribute `ref` supplied to `React.Fragment`."),Er(null))}}function St(D,F,ee,fe,He,ke){{var Ue=A(D);if(!Ue){var Ne="";(D===void 0||typeof D=="object"&&D!==null&&Object.keys(D).length===0)&&(Ne+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Bt=mt(He);Bt?Ne+=Bt:Ne+=it();var ft;D===null?ft="null":Ce(D)?ft="array":D!==void 0&&D.$$typeof===e?(ft="<"+(V(D.type)||"Unknown")+" />",Ne=" Did you accidentally export a JSX literal instead of a component?"):ft=typeof D,b("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",ft,Ne)}var wt=Vr(D,F,ee,He,ke);if(wt==null)return wt;if(Ue){var Rt=F.children;if(Rt!==void 0)if(fe)if(Ce(Rt)){for(var Dn=0;Dn<Rt.length;Dn++)Et(Rt[Dn],D);Object.freeze&&Object.freeze(Rt)}else b("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Et(Rt,D)}return D===n?At(wt):It(wt),wt}}function Tt(D,F,ee){return St(D,F,ee,!0)}function xt(D,F,ee){return St(D,F,ee,!1)}var vt=xt,rt=Tt;Fs.Fragment=n,Fs.jsx=vt,Fs.jsxs=rt}()),Fs}process.env.NODE_ENV==="production"?dl.exports=NE():dl.exports=LE();var ME=dl.exports;const Ip=new M5,kE=({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n,children:i})=>(Xe.useEffect(()=>{Pf({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n}),Ki.defaultMaxListeners=100},[]),ME.jsx(z5,{client:Ip,children:i})),FE=["wc@2:client:0.3//proposal","wc@2:core:0.3//subscription","wc@2:core:0.3//keychain","wc@2:core:0.3//messages","wc@2:core:0.3//history","wc@2:client:0.3//session","wc@2:core:0.3//expirer","WCM_WALLETCONNECT_CLIENT_ID","wc@2:core:0.3//pairing","debug"],Ap=tg.version;try{const t=localStorage.getItem("puzzle-sdk-version");Ap!==t&&(FE.forEach(e=>{localStorage.removeItem(e)}),localStorage.setItem("puzzle-sdk-version",Ap))}catch(t){console.error(t)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ra=window,fl=ra.ShadowRoot&&(ra.ShadyCSS===void 0||ra.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,pl=Symbol(),Tp=new WeakMap;let Rp=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==pl)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(fl&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Tp.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Tp.set(r,e))}return e}toString(){return this.cssText}};const UE=t=>new Rp(typeof t=="string"?t:t+"",void 0,pl),Qe=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Rp(r,t,pl)},jE=(t,e)=>{fl?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=ra.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},Pp=fl?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return UE(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var gl;const na=window,$p=na.trustedTypes,BE=$p?$p.emptyScript:"",Np=na.reactiveElementPolyfillSupport,ml={toAttribute(t,e){switch(e){case Boolean:t=t?BE:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Lp=(t,e)=>e!==t&&(e==e||t==t),yl={attribute:!0,type:String,converter:ml,reflect:!1,hasChanged:Lp},vl="finalized";let Ii=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=yl){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||yl}static finalize(){if(this.hasOwnProperty(vl))return!1;this[vl]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(Pp(i))}else e!==void 0&&r.push(Pp(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return jE(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=yl){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:ml).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:ml;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||Lp)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};Ii[vl]=!0,Ii.elementProperties=new Map,Ii.elementStyles=[],Ii.shadowRootOptions={mode:"open"},Np==null||Np({ReactiveElement:Ii}),((gl=na.reactiveElementVersions)!==null&&gl!==void 0?gl:na.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var wl;const ia=window,Ai=ia.trustedTypes,Mp=Ai?Ai.createPolicy("lit-html",{createHTML:t=>t}):void 0,bl="$lit$",vn=`lit$${(Math.random()+"").slice(9)}$`,kp="?"+vn,qE=`<${kp}>`,Jn=document,Us=()=>Jn.createComment(""),js=t=>t===null||typeof t!="object"&&typeof t!="function",Fp=Array.isArray,zE=t=>Fp(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",_l=`[ 	
\f\r]`,Bs=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Up=/-->/g,jp=/>/g,Xn=RegExp(`>|${_l}(?:([^\\s"'>=/]+)(${_l}*=${_l}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Bp=/'/g,qp=/"/g,zp=/^(?:script|style|textarea|title)$/i,Wp=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),J=Wp(1),gt=Wp(2),ei=Symbol.for("lit-noChange"),Pt=Symbol.for("lit-nothing"),Vp=new WeakMap,ti=Jn.createTreeWalker(Jn,129,null,!1);function Hp(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Mp!==void 0?Mp.createHTML(e):e}const WE=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=Bs;for(let a=0;a<r;a++){const c=t[a];let l,h,f=-1,p=0;for(;p<c.length&&(o.lastIndex=p,h=o.exec(c),h!==null);)p=o.lastIndex,o===Bs?h[1]==="!--"?o=Up:h[1]!==void 0?o=jp:h[2]!==void 0?(zp.test(h[2])&&(i=RegExp("</"+h[2],"g")),o=Xn):h[3]!==void 0&&(o=Xn):o===Xn?h[0]===">"?(o=i??Bs,f=-1):h[1]===void 0?f=-2:(f=o.lastIndex-h[2].length,l=h[1],o=h[3]===void 0?Xn:h[3]==='"'?qp:Bp):o===qp||o===Bp?o=Xn:o===Up||o===jp?o=Bs:(o=Xn,i=void 0);const g=o===Xn&&t[a+1].startsWith("/>")?" ":"";s+=o===Bs?c+qE:f>=0?(n.push(l),c.slice(0,f)+bl+c.slice(f)+vn+g):c+vn+(f===-2?(n.push(void 0),a):g)}return[Hp(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class qs{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,h]=WE(e,r);if(this.el=qs.createElement(l,n),ti.currentNode=this.el.content,r===2){const f=this.el.content,p=f.firstChild;p.remove(),f.append(...p.childNodes)}for(;(i=ti.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const f=[];for(const p of i.getAttributeNames())if(p.endsWith(bl)||p.startsWith(vn)){const g=h[o++];if(f.push(p),g!==void 0){const v=i.getAttribute(g.toLowerCase()+bl).split(vn),_=/([.?@])?(.*)/.exec(g);c.push({type:1,index:s,name:_[2],strings:v,ctor:_[1]==="."?HE:_[1]==="?"?ZE:_[1]==="@"?GE:sa})}else c.push({type:6,index:s})}for(const p of f)i.removeAttribute(p)}if(zp.test(i.tagName)){const f=i.textContent.split(vn),p=f.length-1;if(p>0){i.textContent=Ai?Ai.emptyScript:"";for(let g=0;g<p;g++)i.append(f[g],Us()),ti.nextNode(),c.push({type:2,index:++s});i.append(f[p],Us())}}}else if(i.nodeType===8)if(i.data===kp)c.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(vn,f+1))!==-1;)c.push({type:7,index:s}),f+=vn.length-1}s++}}static createElement(e,r){const n=Jn.createElement("template");return n.innerHTML=e,n}}function Ti(t,e,r=t,n){var i,s,o,a;if(e===ei)return e;let c=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const l=js(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==l&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),l===void 0?c=void 0:(c=new l(t),c._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=c:r._$Cl=c),c!==void 0&&(e=Ti(t,c._$AS(t,e.values),c,n)),e}class VE{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:Jn).importNode(n,!0);ti.currentNode=s;let o=ti.nextNode(),a=0,c=0,l=i[0];for(;l!==void 0;){if(a===l.index){let h;l.type===2?h=new zs(o,o.nextSibling,this,e):l.type===1?h=new l.ctor(o,l.name,l.strings,this,e):l.type===6&&(h=new QE(o,this,e)),this._$AV.push(h),l=i[++c]}a!==(l==null?void 0:l.index)&&(o=ti.nextNode(),a++)}return ti.currentNode=Jn,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class zs{constructor(e,r,n,i){var s;this.type=2,this._$AH=Pt,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Ti(this,e,r),js(e)?e===Pt||e==null||e===""?(this._$AH!==Pt&&this._$AR(),this._$AH=Pt):e!==this._$AH&&e!==ei&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):zE(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Pt&&js(this._$AH)?this._$AA.nextSibling.data=e:this.$(Jn.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=qs.createElement(Hp(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new VE(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=Vp.get(e.strings);return r===void 0&&Vp.set(e.strings,r=new qs(e)),r}T(e){Fp(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new zs(this.k(Us()),this.k(Us()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class sa{constructor(e,r,n,i,s){this.type=1,this._$AH=Pt,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Pt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Ti(this,e,r,0),o=!js(e)||e!==this._$AH&&e!==ei,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=Ti(this,a[n+c],r,c),l===ei&&(l=this._$AH[c]),o||(o=!js(l)||l!==this._$AH[c]),l===Pt?e=Pt:e!==Pt&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===Pt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class HE extends sa{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Pt?void 0:e}}const KE=Ai?Ai.emptyScript:"";let ZE=class extends sa{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Pt?this.element.setAttribute(this.name,KE):this.element.removeAttribute(this.name)}};class GE extends sa{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=Ti(this,e,r,0))!==null&&n!==void 0?n:Pt)===ei)return;const i=this._$AH,s=e===Pt&&i!==Pt||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==Pt&&(i===Pt||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let QE=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Ti(this,e)}};const Kp=ia.litHtmlPolyfillSupport;Kp==null||Kp(qs,zs),((wl=ia.litHtmlVersions)!==null&&wl!==void 0?wl:ia.litHtmlVersions=[]).push("2.8.0");const YE=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new zs(e.insertBefore(Us(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var El,Sl;class Te extends Ii{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=YE(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return ei}}Te.finalized=!0,Te._$litElement$=!0,(El=globalThis.litElementHydrateSupport)===null||El===void 0||El.call(globalThis,{LitElement:Te});const Zp=globalThis.litElementPolyfillSupport;Zp==null||Zp({LitElement:Te}),((Sl=globalThis.litElementVersions)!==null&&Sl!==void 0?Sl:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Be=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const JE=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},XE=(t,e,r)=>{e.constructor.createProperty(r,t)};function Ee(t){return(e,r)=>r!==void 0?XE(t,e,r):JE(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function lr(t){return Ee({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var xl;((xl=window.HTMLSlotElement)===null||xl===void 0?void 0:xl.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e6={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},t6=t=>(...e)=>({_$litDirective$:t,values:e});class r6{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const en=t6(class extends r6{constructor(t){var e;if(super(t),t.type!==e6.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return ei}});function n6(t,e){t.indexOf(e)===-1&&t.push(e)}const Gp=(t,e,r)=>Math.min(Math.max(r,t),e),br={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},oa=t=>typeof t=="number",Ri=t=>Array.isArray(t)&&!oa(t[0]),i6=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function s6(t,e){return Ri(t)?t[i6(0,t.length,e)]:t}const Qp=(t,e,r)=>-r*t+r*e+t,Yp=()=>{},wn=t=>t,Cl=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function Jp(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=Cl(0,e,n);t.push(Qp(r,1,i))}}function o6(t){const e=[0];return Jp(e,t-1),e}function a6(t,e=o6(t.length),r=wn){const n=t.length,i=n-e.length;return i>0&&Jp(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=Gp(0,1,Cl(e[o],e[o+1],s));return a=s6(r,o)(a),Qp(t[o],t[o+1],a)}}const Xp=t=>Array.isArray(t)&&oa(t[0]),Ol=t=>typeof t=="object"&&!!t.createAnimation,Pi=t=>typeof t=="function",c6=t=>typeof t=="string",Ws={ms:t=>t*1e3,s:t=>t/1e3},e0=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,l6=1e-7,u6=12;function h6(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=e0(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>l6&&++a<u6);return o}function Vs(t,e,r,n){if(t===e&&r===n)return wn;const i=s=>h6(s,0,1,t,r);return s=>s===0||s===1?s:e0(i(s),e,n)}const d6=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return Gp(0,1,i/t)},t0={ease:Vs(.25,.1,.25,1),"ease-in":Vs(.42,0,1,1),"ease-in-out":Vs(.42,0,.58,1),"ease-out":Vs(0,0,.58,1)},f6=/\((.*?)\)/;function r0(t){if(Pi(t))return t;if(Xp(t))return Vs(...t);if(t0[t])return t0[t];if(t.startsWith("steps")){const e=f6.exec(t);if(e){const r=e[1].split(",");return d6(parseFloat(r[0]),r[1].trim())}}return wn}class n0{constructor(e,r=[0,1],{easing:n,duration:i=br.duration,delay:s=br.delay,endDelay:o=br.endDelay,repeat:a=br.repeat,offset:c,direction:l="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=wn,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((f,p)=>{this.resolve=f,this.reject=p}),n=n||br.easing,Ol(n)){const f=n.createAnimation(r);n=f.easing,r=f.keyframes||r,i=f.duration||i}this.repeat=a,this.easing=Ri(n)?wn:r0(n),this.updateDuration(i);const h=a6(r,c,Ri(n)?n.map(r0):wn);this.tick=f=>{var p;s=s;let g=0;this.pauseTime!==void 0?g=this.pauseTime:g=(f-this.startTime)*this.rate,this.t=g,g/=1e3,g=Math.max(g-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(g=this.totalDuration);const v=g/this.duration;let _=Math.floor(v),S=v%1;!S&&v>=1&&(S=1),S===1&&_--;const O=_%2;(l==="reverse"||l==="alternate"&&O||l==="alternate-reverse"&&!O)&&(S=1-S);const b=g>=this.totalDuration?1:Math.min(S,1),E=h(this.easing(b));e(E),this.pauseTime===void 0&&(this.playState==="finished"||g>=this.totalDuration+o)?(this.playState="finished",(p=this.resolve)===null||p===void 0||p.call(this,E)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var Dl=function(){};process.env.NODE_ENV!=="production"&&(Dl=function(t,e){if(!t)throw new Error(e)});class p6{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Il=new WeakMap;function i0(t){return Il.has(t)||Il.set(t,{transforms:[],values:new Map}),Il.get(t)}function g6(t,e){return t.has(e)||t.set(e,new p6),t.get(e)}const m6=["","X","Y","Z"],y6=["translate","scale","rotate","skew"],aa={x:"translateX",y:"translateY",z:"translateZ"},s0={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},v6={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:s0,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:wn},skew:s0},Hs=new Map,Al=t=>`--motion-${t}`,ca=["x","y","z"];y6.forEach(t=>{m6.forEach(e=>{ca.push(t+e),Hs.set(Al(t+e),v6[t])})});const w6=(t,e)=>ca.indexOf(t)-ca.indexOf(e),b6=new Set(ca),o0=t=>b6.has(t),_6=(t,e)=>{aa[e]&&(e=aa[e]);const{transforms:r}=i0(t);n6(r,e),t.style.transform=E6(r)},E6=t=>t.sort(w6).reduce(S6,"").trim(),S6=(t,e)=>`${t} ${e}(var(${Al(e)}))`,Tl=t=>t.startsWith("--"),a0=new Set;function x6(t){if(!a0.has(t)){a0.add(t);try{const{syntax:e,initialValue:r}=Hs.has(t)?Hs.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const Rl=(t,e)=>document.createElement("div").animate(t,e),c0={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Rl({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Rl({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Rl({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},Pl={},$i={};for(const t in c0)$i[t]=()=>(Pl[t]===void 0&&(Pl[t]=c0[t]()),Pl[t]);const C6=.015,O6=(t,e)=>{let r="";const n=Math.round(e/C6);for(let i=0;i<n;i++)r+=t(Cl(0,n-1,i))+", ";return r.substring(0,r.length-2)},l0=(t,e)=>Pi(t)?$i.linearEasing()?`linear(${O6(t,e)})`:br.easing:Xp(t)?D6(t):t,D6=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function I6(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const A6=t=>Array.isArray(t)?t:[t];function $l(t){return aa[t]&&(t=aa[t]),o0(t)?Al(t):t}const la={get:(t,e)=>{e=$l(e);let r=Tl(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=Hs.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=$l(e),Tl(e)?t.style.setProperty(e,r):t.style[e]=r}};function u0(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function T6(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||wn;const i=t[t.length-1];if(c6(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function R6(){return window.__MOTION_DEV_TOOLS_RECORD}function P6(t,e,r,n={},i){const s=R6(),o=n.record!==!1&&s;let a,{duration:c=br.duration,delay:l=br.delay,endDelay:h=br.endDelay,repeat:f=br.repeat,easing:p=br.easing,persist:g=!1,direction:v,offset:_,allowWebkitAcceleration:S=!1}=n;const O=i0(t),b=o0(e);let E=$i.waapi();b&&_6(t,e);const w=$l(e),x=g6(O.values,w),m=Hs.get(w);return u0(x.animation,!(Ol(p)&&x.generator)&&n.record!==!1),()=>{const u=()=>{var A,k;return(k=(A=la.get(t,w))!==null&&A!==void 0?A:m==null?void 0:m.initialValue)!==null&&k!==void 0?k:0};let y=I6(A6(r),u);const T=T6(y,m);if(Ol(p)){const A=p.createAnimation(y,e!=="opacity",u,w,x);p=A.easing,y=A.keyframes||y,c=A.duration||c}if(Tl(w)&&($i.cssRegisterProperty()?x6(w):E=!1),b&&!$i.linearEasing()&&(Pi(p)||Ri(p)&&p.some(Pi))&&(E=!1),E){m&&(y=y.map(B=>oa(B)?m.toDefaultUnit(B):B)),y.length===1&&(!$i.partialKeyframes()||o)&&y.unshift(u());const A={delay:Ws.ms(l),duration:Ws.ms(c),endDelay:Ws.ms(h),easing:Ri(p)?void 0:l0(p,c),direction:v,iterations:f+1,fill:"both"};a=t.animate({[w]:y,offset:_,easing:Ri(p)?p.map(B=>l0(B,c)):void 0},A),a.finished||(a.finished=new Promise((B,V)=>{a.onfinish=B,a.oncancel=V}));const k=y[y.length-1];a.finished.then(()=>{g||(la.set(t,w,k),a.cancel())}).catch(Yp),S||(a.playbackRate=1.000001)}else if(i&&b)y=y.map(A=>typeof A=="string"?parseFloat(A):A),y.length===1&&y.unshift(parseFloat(u())),a=new i(A=>{la.set(t,w,T?T(A):A)},y,Object.assign(Object.assign({},n),{duration:c,easing:p}));else{const A=y[y.length-1];la.set(t,w,m&&oa(A)?m.toDefaultUnit(A):A)}return o&&s(t,e,y,{duration:c,delay:l,easing:p,repeat:f,offset:_},"motion-one"),x.setAnimation(a),a}}const $6=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function N6(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const L6=t=>t(),h0=(t,e,r=br.duration)=>new Proxy({animations:t.map(L6).filter(Boolean),duration:r,options:e},k6),M6=t=>t.animations[0],k6={get:(t,e)=>{const r=M6(t);switch(e){case"duration":return t.duration;case"currentTime":return Ws.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(F6)).catch(Yp)),t.finished;case"stop":return()=>{t.animations.forEach(n=>u0(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=Ws.ms(r);case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},F6=t=>t.finished;function U6(t,e,r){return Pi(t)?t(e,r):t}function j6(t){return function(r,n,i={}){r=N6(r);const s=r.length;Dl(!!s,"No valid element provided."),Dl(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const l in n){const h=$6(i,l);h.delay=U6(h.delay,a,s);const f=P6(c,l,n[l],h,t);o.push(f)}}return h0(o,i,i.duration)}}const B6=j6(n0);function q6(t,e={}){return h0([()=>{const r=new n0(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function ri(t,e,r){return(Pi(t)?q6:B6)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const nr=t=>t??Pt;var Ks={},z6=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},d0={},fr={};let Nl;const W6=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];fr.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},fr.getSymbolTotalCodewords=function(e){return W6[e]},fr.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},fr.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Nl=e},fr.isKanjiModeEnabled=function(){return typeof Nl<"u"},fr.toSJIS=function(e){return Nl(e)};var ua={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(ua);function f0(){this.buffer=[],this.length=0}f0.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var V6=f0;function Zs(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Zs.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},Zs.prototype.get=function(t,e){return this.data[t*this.size+e]},Zs.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},Zs.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var H6=Zs,p0={};(function(t){const e=fr.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(p0);var g0={};const K6=fr.getSymbolSize,m0=7;g0.getPositions=function(e){const r=K6(e);return[[0,0],[r-m0,0],[0,r-m0]]};var y0={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,h=null;for(let f=0;f<s;f++){a=c=0,l=h=null;for(let p=0;p<s;p++){let g=i.get(f,p);g===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=g,a=1),g=i.get(p,f),g===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=g,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let h=0;h<s;h++)a=a<<1&2047|i.get(l,h),h>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(h,l),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const h=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),h<c&&(c=h,a=l)}return a}})(y0);var ha={};const bn=ua,da=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],fa=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ha.getBlocksCount=function(e,r){switch(r){case bn.L:return da[(e-1)*4+0];case bn.M:return da[(e-1)*4+1];case bn.Q:return da[(e-1)*4+2];case bn.H:return da[(e-1)*4+3];default:return}},ha.getTotalCodewordsCount=function(e,r){switch(r){case bn.L:return fa[(e-1)*4+0];case bn.M:return fa[(e-1)*4+1];case bn.Q:return fa[(e-1)*4+2];case bn.H:return fa[(e-1)*4+3];default:return}};var v0={},pa={};const Gs=new Uint8Array(512),ga=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Gs[r]=e,ga[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Gs[r]=Gs[r-255]})(),pa.log=function(e){if(e<1)throw new Error("log("+e+")");return ga[e]},pa.exp=function(e){return Gs[e]},pa.mul=function(e,r){return e===0||r===0?0:Gs[ga[e]+ga[r]]},function(t){const e=pa;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(v0);const w0=v0;function Ll(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Ll.prototype.initialize=function(e){this.degree=e,this.genPoly=w0.generateECPolynomial(this.degree)},Ll.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=w0.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var Z6=Ll,b0={},_n={},Ml={};Ml.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var zr={};const _0="[0-9]+",G6="[A-Z $%*+\\-./:]+";let Qs="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Qs=Qs.replace(/u/g,"\\u");const Q6="(?:(?![A-Z0-9 $%*+\\-./:]|"+Qs+`)(?:.|[\r
]))+`;zr.KANJI=new RegExp(Qs,"g"),zr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),zr.BYTE=new RegExp(Q6,"g"),zr.NUMERIC=new RegExp(_0,"g"),zr.ALPHANUMERIC=new RegExp(G6,"g");const Y6=new RegExp("^"+Qs+"$"),J6=new RegExp("^"+_0+"$"),X6=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");zr.testKanji=function(e){return Y6.test(e)},zr.testNumeric=function(e){return J6.test(e)},zr.testAlphanumeric=function(e){return X6.test(e)},function(t){const e=Ml,r=zr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(_n),function(t){const e=fr,r=ha,n=ua,i=_n,s=Ml,o=7973,a=e.getBCHDigit(o);function c(p,g,v){for(let _=1;_<=40;_++)if(g<=t.getCapacity(_,v,p))return _}function l(p,g){return i.getCharCountIndicator(p,g)+4}function h(p,g){let v=0;return p.forEach(function(_){const S=l(_.mode,g);v+=S+_.getBitsLength()}),v}function f(p,g){for(let v=1;v<=40;v++)if(h(p,v)<=t.getCapacity(v,g,i.MIXED))return v}t.from=function(g,v){return s.isValid(g)?parseInt(g,10):v},t.getCapacity=function(g,v,_){if(!s.isValid(g))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=i.BYTE);const S=e.getSymbolTotalCodewords(g),O=r.getTotalCodewordsCount(g,v),b=(S-O)*8;if(_===i.MIXED)return b;const E=b-l(_,g);switch(_){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},t.getBestVersionForData=function(g,v){let _;const S=n.from(v,n.M);if(Array.isArray(g)){if(g.length>1)return f(g,S);if(g.length===0)return 1;_=g[0]}else _=g;return c(_.mode,_.getLength(),S)},t.getEncodedBits=function(g){if(!s.isValid(g)||g<7)throw new Error("Invalid QR Code version");let v=g<<12;for(;e.getBCHDigit(v)-a>=0;)v^=o<<e.getBCHDigit(v)-a;return g<<12|v}}(b0);var E0={};const kl=fr,S0=1335,e4=21522,x0=kl.getBCHDigit(S0);E0.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;kl.getBCHDigit(i)-x0>=0;)i^=S0<<kl.getBCHDigit(i)-x0;return(n<<10|i)^e4};var C0={};const t4=_n;function Ni(t){this.mode=t4.NUMERIC,this.data=t.toString()}Ni.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Ni.prototype.getLength=function(){return this.data.length},Ni.prototype.getBitsLength=function(){return Ni.getBitsLength(this.data.length)},Ni.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var r4=Ni;const n4=_n,Fl=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Li(t){this.mode=n4.ALPHANUMERIC,this.data=t}Li.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Li.prototype.getLength=function(){return this.data.length},Li.prototype.getBitsLength=function(){return Li.getBitsLength(this.data.length)},Li.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Fl.indexOf(this.data[r])*45;n+=Fl.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Fl.indexOf(this.data[r]),6)};var i4=Li,s4=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const o4=s4,a4=_n;function Mi(t){this.mode=a4.BYTE,typeof t=="string"&&(t=o4(t)),this.data=new Uint8Array(t)}Mi.getBitsLength=function(e){return e*8},Mi.prototype.getLength=function(){return this.data.length},Mi.prototype.getBitsLength=function(){return Mi.getBitsLength(this.data.length)},Mi.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var c4=Mi;const l4=_n,u4=fr;function ki(t){this.mode=l4.KANJI,this.data=t}ki.getBitsLength=function(e){return e*13},ki.prototype.getLength=function(){return this.data.length},ki.prototype.getBitsLength=function(){return ki.getBitsLength(this.data.length)},ki.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=u4.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var h4=ki,O0={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,l,h,f,p,g,v,_,S;!a.empty();){c=a.pop(),l=c.value,f=c.cost,p=r[l]||{};for(h in p)p.hasOwnProperty(h)&&(g=p[h],v=f+g,_=o[h],S=typeof o[h]>"u",(S||_>v)&&(o[h]=v,a.push(h,v),s[h]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var O=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(O)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(O0);var d4=O0.exports;(function(t){const e=_n,r=r4,n=i4,i=c4,s=h4,o=zr,a=fr,c=d4;function l(O){return unescape(encodeURIComponent(O)).length}function h(O,b,E){const w=[];let x;for(;(x=O.exec(E))!==null;)w.push({data:x[0],index:x.index,mode:b,length:x[0].length});return w}function f(O){const b=h(o.NUMERIC,e.NUMERIC,O),E=h(o.ALPHANUMERIC,e.ALPHANUMERIC,O);let w,x;return a.isKanjiModeEnabled()?(w=h(o.BYTE,e.BYTE,O),x=h(o.KANJI,e.KANJI,O)):(w=h(o.BYTE_KANJI,e.BYTE,O),x=[]),b.concat(E,w,x).sort(function(u,y){return u.index-y.index}).map(function(u){return{data:u.data,mode:u.mode,length:u.length}})}function p(O,b){switch(b){case e.NUMERIC:return r.getBitsLength(O);case e.ALPHANUMERIC:return n.getBitsLength(O);case e.KANJI:return s.getBitsLength(O);case e.BYTE:return i.getBitsLength(O)}}function g(O){return O.reduce(function(b,E){const w=b.length-1>=0?b[b.length-1]:null;return w&&w.mode===E.mode?(b[b.length-1].data+=E.data,b):(b.push(E),b)},[])}function v(O){const b=[];for(let E=0;E<O.length;E++){const w=O[E];switch(w.mode){case e.NUMERIC:b.push([w,{data:w.data,mode:e.ALPHANUMERIC,length:w.length},{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.ALPHANUMERIC:b.push([w,{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.KANJI:b.push([w,{data:w.data,mode:e.BYTE,length:l(w.data)}]);break;case e.BYTE:b.push([{data:w.data,mode:e.BYTE,length:l(w.data)}])}}return b}function _(O,b){const E={},w={start:{}};let x=["start"];for(let m=0;m<O.length;m++){const u=O[m],y=[];for(let T=0;T<u.length;T++){const A=u[T],k=""+m+T;y.push(k),E[k]={node:A,lastCount:0},w[k]={};for(let B=0;B<x.length;B++){const V=x[B];E[V]&&E[V].node.mode===A.mode?(w[V][k]=p(E[V].lastCount+A.length,A.mode)-p(E[V].lastCount,A.mode),E[V].lastCount+=A.length):(E[V]&&(E[V].lastCount=A.length),w[V][k]=p(A.length,A.mode)+4+e.getCharCountIndicator(A.mode,b))}}x=y}for(let m=0;m<x.length;m++)w[x[m]].end=0;return{map:w,table:E}}function S(O,b){let E;const w=e.getBestModeForData(O);if(E=e.from(b,w),E!==e.BYTE&&E.bit<w.bit)throw new Error('"'+O+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(w));switch(E===e.KANJI&&!a.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new r(O);case e.ALPHANUMERIC:return new n(O);case e.KANJI:return new s(O);case e.BYTE:return new i(O)}}t.fromArray=function(b){return b.reduce(function(E,w){return typeof w=="string"?E.push(S(w,null)):w.data&&E.push(S(w.data,w.mode)),E},[])},t.fromString=function(b,E){const w=f(b,a.isKanjiModeEnabled()),x=v(w),m=_(x,E),u=c.find_path(m.map,"start","end"),y=[];for(let T=1;T<u.length-1;T++)y.push(m.table[u[T]].node);return t.fromArray(g(y))},t.rawSplit=function(b){return t.fromArray(f(b,a.isKanjiModeEnabled()))}})(C0);const ma=fr,Ul=ua,f4=V6,p4=H6,g4=p0,m4=g0,jl=y0,Bl=ha,y4=Z6,ya=b0,v4=E0,w4=_n,ql=C0;function b4(t,e){const r=t.size,n=m4.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function _4(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function E4(t,e){const r=g4.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function S4(t,e){const r=t.size,n=ya.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function zl(t,e,r){const n=t.size,i=v4.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function x4(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function C4(t,e,r){const n=new f4;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),w4.getCharCountIndicator(c.mode,t)),c.write(n)});const i=ma.getSymbolTotalCodewords(t),s=Bl.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return O4(n,t,e)}function O4(t,e,r){const n=ma.getSymbolTotalCodewords(e),i=Bl.getTotalCodewordsCount(e,r),s=n-i,o=Bl.getBlocksCount(e,r),a=n%o,c=o-a,l=Math.floor(n/o),h=Math.floor(s/o),f=h+1,p=l-h,g=new y4(p);let v=0;const _=new Array(o),S=new Array(o);let O=0;const b=new Uint8Array(t.buffer);for(let u=0;u<o;u++){const y=u<c?h:f;_[u]=b.slice(v,v+y),S[u]=g.encode(_[u]),v+=y,O=Math.max(O,y)}const E=new Uint8Array(n);let w=0,x,m;for(x=0;x<O;x++)for(m=0;m<o;m++)x<_[m].length&&(E[w++]=_[m][x]);for(x=0;x<p;x++)for(m=0;m<o;m++)E[w++]=S[m][x];return E}function D4(t,e,r,n){let i;if(Array.isArray(t))i=ql.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const h=ql.rawSplit(t);l=ya.getBestVersionForData(h,r)}i=ql.fromString(t,l||40)}else throw new Error("Invalid data");const s=ya.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=C4(e,r,i),a=ma.getSymbolSize(e),c=new p4(a);return b4(c,e),_4(c),E4(c,e),zl(c,r,0),e>=7&&S4(c,e),x4(c,o),isNaN(n)&&(n=jl.getBestMask(c,zl.bind(null,c,r))),jl.applyMask(n,c),zl(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}d0.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Ul.M,i,s;return typeof r<"u"&&(n=Ul.from(r.errorCorrectionLevel,Ul.M),i=ya.from(r.version),s=jl.from(r.maskPattern),r.toSJISFunc&&ma.setToSJISFunction(r.toSJISFunc)),D4(e,i,n,s)};var D0={},Wl={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),h=s.margin*c,f=[s.color.light,s.color.dark];for(let p=0;p<l;p++)for(let g=0;g<l;g++){let v=(p*l+g)*4,_=s.color.light;if(p>=h&&g>=h&&p<l-h&&g<l-h){const S=Math.floor((p-h)/c),O=Math.floor((g-h)/c);_=f[a[S*o+O]?1:0]}n[v++]=_.r,n[v++]=_.g,n[v++]=_.b,n[v]=_.a}}})(Wl),function(t){const e=Wl;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=n()),c=e.getOptions(c);const h=e.getImageWidth(s.modules.size,c),f=l.getContext("2d"),p=f.createImageData(h,h);return e.qrToImageData(p.data,s,c),r(f,l,h),f.putImageData(p,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),h=c.type||"image/png",f=c.rendererOpts||{};return l.toDataURL(h,f.quality)}}(D0);var I0={};const I4=Wl;function A0(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Vl(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function A4(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?Vl("M",c+r,.5+l+r):Vl("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=Vl("h",o),o=0)):i++}return n}I0.render=function(e,r,n){const i=I4.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+A0(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+A0(i.color.dark,"stroke")+' d="'+A4(o,s,i.margin)+'"/>',h='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof n=="function"&&n(null,p),p};const T4=z6,Hl=d0,T0=D0,R4=I0;function Kl(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!T4())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,l){try{const h=Hl.create(r,n);c(t(h,e,n))}catch(h){l(h)}})}try{const c=Hl.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}Ks.create=Hl.create,Ks.toCanvas=Kl.bind(null,T0.render),Ks.toDataURL=Kl.bind(null,T0.renderToDataURL),Ks.toString=Kl.bind(null,function(t,e,r){return R4.render(t,r)});var P4=Object.defineProperty,R0=Object.getOwnPropertySymbols,$4=Object.prototype.hasOwnProperty,N4=Object.prototype.propertyIsEnumerable,P0=(t,e,r)=>e in t?P4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zl=(t,e)=>{for(var r in e||(e={}))$4.call(e,r)&&P0(t,r,e[r]);if(R0)for(var r of R0(e))N4.call(e,r)&&P0(t,r,e[r]);return t};function L4(){var t;const e=(t=an.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function $0(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const je={getPreset(t){return $0()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=an.state;if(t){const r=Zl(Zl(Zl({},L4()),$0()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:Qe`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},M4=Qe`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var k4=Object.defineProperty,F4=Object.getOwnPropertyDescriptor,Fi=(t,e,r,n)=>{for(var i=n>1?void 0:n?F4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&k4(e,r,i),i};let En=class extends Te{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),J`<button class="${en(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};En.styles=[je.globalCss,M4],Fi([Ee({type:Boolean})],En.prototype,"disabled",2),Fi([Ee()],En.prototype,"iconLeft",2),Fi([Ee()],En.prototype,"iconRight",2),Fi([Ee()],En.prototype,"onClick",2),Fi([Ee()],En.prototype,"variant",2),En=Fi([Be("wcm-button")],En);const U4=Qe`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var j4=Object.defineProperty,B4=Object.getOwnPropertyDescriptor,Gl=(t,e,r,n)=>{for(var i=n>1?void 0:n?B4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&j4(e,r,i),i};let Ys=class extends Te{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return J`<button ?disabled="${this.disabled}" class="${en(t)}"><slot></slot></button>`}};Ys.styles=[je.globalCss,U4],Gl([Ee({type:Boolean})],Ys.prototype,"disabled",2),Gl([Ee()],Ys.prototype,"variant",2),Ys=Gl([Be("wcm-button-big")],Ys);const q4=Qe`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var z4=Object.defineProperty,W4=Object.getOwnPropertyDescriptor,V4=(t,e,r,n)=>{for(var i=n>1?void 0:n?W4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&z4(e,r,i),i};let Ql=class extends Te{render(){return J`<div><slot></slot></div>`}};Ql.styles=[je.globalCss,q4],Ql=V4([Be("wcm-info-footer")],Ql);const Ye={CROSS_ICON:gt`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:gt`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:gt`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:gt`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:gt`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:gt`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:gt`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:gt`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:gt`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:gt`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:gt`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:gt`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:gt`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:gt`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:gt`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:gt`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:gt`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:gt`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},H4=Qe`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var K4=Object.defineProperty,Z4=Object.getOwnPropertyDescriptor,G4=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&K4(e,r,i),i};let Yl=class extends Te{render(){return J`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${Ye.WALLET_CONNECT_LOGO} <button @click="${$n.close}">${Ye.CROSS_ICON}</button></div>`}};Yl.styles=[je.globalCss,H4],Yl=G4([Be("wcm-modal-backcard")],Yl);const Q4=Qe`main{padding:20px;padding-top:0;width:100%}`;var Y4=Object.defineProperty,J4=Object.getOwnPropertyDescriptor,X4=(t,e,r,n)=>{for(var i=n>1?void 0:n?J4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Y4(e,r,i),i};let Jl=class extends Te{render(){return J`<main><slot></slot></main>`}};Jl.styles=[je.globalCss,Q4],Jl=X4([Be("wcm-modal-content")],Jl);const eS=Qe`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var tS=Object.defineProperty,rS=Object.getOwnPropertyDescriptor,nS=(t,e,r,n)=>{for(var i=n>1?void 0:n?rS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&tS(e,r,i),i};let Xl=class extends Te{render(){return J`<footer><slot></slot></footer>`}};Xl.styles=[je.globalCss,eS],Xl=nS([Be("wcm-modal-footer")],Xl);const iS=Qe`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var sS=Object.defineProperty,oS=Object.getOwnPropertyDescriptor,Js=(t,e,r,n)=>{for(var i=n>1?void 0:n?oS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&sS(e,r,i),i};let ni=class extends Te{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return J`<button class="wcm-back-btn" @click="${ut.goBack}">${Ye.BACK_ICON}</button>`}actionBtnTemplate(){return J`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=ut.state.history.length>1,r=this.title?J`<wcm-text variant="big-bold">${this.title}</wcm-text>`:J`<slot></slot>`;return J`<header class="${en(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};ni.styles=[je.globalCss,iS],Js([Ee()],ni.prototype,"title",2),Js([Ee()],ni.prototype,"onAction",2),Js([Ee()],ni.prototype,"actionIcon",2),Js([Ee({type:Boolean})],ni.prototype,"border",2),ni=Js([Be("wcm-modal-header")],ni);const ye={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=ur.state;return r!=null&&r[t]?r[t]:e?ir.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=ye.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,ae.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=_t.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;ye.setRecentWallet(t);function o(a){let c="";i?c=ae.formatUniversalUrl(i,a,n):s&&(c=ae.formatNativeUrl(s,a,n)),ae.openHref(c,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=_t.state;t&&(ae.setWalletConnectAndroidDeepLink(t),ae.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=_t.state;if(t)try{await navigator.clipboard.writeText(t),cn.openToast("Link copied","success")}catch{cn.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=ur.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(ye.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(ye.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){ae.openHref(ye.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=ae.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){ut.setData({Wallet:t});const e=ae.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=ye.getCachedRouterWalletPlatforms();e?i?ut.push("MobileConnecting"):n?ut.push("WebConnecting"):ut.push("InstallWallet"):r?ut.push("DesktopConnecting"):n?ut.push("WebConnecting"):i?ut.push("MobileQrcodeConnecting"):ut.push("InstallWallet")}},aS=Qe`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var cS=Object.defineProperty,lS=Object.getOwnPropertyDescriptor,eu=(t,e,r,n)=>{for(var i=n>1?void 0:n?lS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&cS(e,r,i),i};let Xs=class extends Te{constructor(){super(),this.view=ut.state.view,this.prevView=ut.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=ut.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&ri(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return ye.getShadowRootElement(this,".wcm-router")}get contentEl(){return ye.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return J`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return J`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return J`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return J`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return J`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return J`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return J`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return J`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return J`<div>Not Found</div>`}}async onChangeRoute(){await ri(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=ut.state.view,ri(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return J`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};Xs.styles=[je.globalCss,aS],eu([lr()],Xs.prototype,"view",2),eu([lr()],Xs.prototype,"prevView",2),Xs=eu([Be("wcm-modal-router")],Xs);const uS=Qe`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var hS=Object.defineProperty,dS=Object.getOwnPropertyDescriptor,N0=(t,e,r,n)=>{for(var i=n>1?void 0:n?dS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&hS(e,r,i),i};let va=class extends Te{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=cn.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>cn.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),cn.closeToast()}render(){const{message:t,variant:e}=cn.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?J`<div class="${en(r)}">${e==="success"?Ye.CHECKMARK_ICON:null} ${e==="error"?Ye.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};va.styles=[je.globalCss,uS],N0([lr()],va.prototype,"open",2),va=N0([Be("wcm-modal-toast")],va);const fS=.1,L0=2.5,tn=7;function tu(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+fS}function pS(t,e){const r=Array.prototype.slice.call(Ks.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const gS={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=pS(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:v,y:_})=>{const S=(o.length-tn)*a*v,O=(o.length-tn)*a*_,b=.45;for(let E=0;E<c.length;E+=1){const w=a*(tn-E*2);s.push(gt`<rect fill="${E%2===0?n:i}" height="${w}" rx="${w*b}" ry="${w*b}" width="${w}" x="${S+a*E}" y="${O+a*E}">`)}});const l=Math.floor((r+25)/a),h=o.length/2-l/2,f=o.length/2+l/2-1,p=[];o.forEach((v,_)=>{v.forEach((S,O)=>{if(o[_][O]&&!(_<tn&&O<tn||_>o.length-(tn+1)&&O<tn||_<tn&&O>o.length-(tn+1))&&!(_>h&&_<f&&O>h&&O<f)){const b=_*a+a/2,E=O*a+a/2;p.push([b,E])}})});const g={};return p.forEach(([v,_])=>{g[v]?g[v].push(_):g[v]=[_]}),Object.entries(g).map(([v,_])=>{const S=_.filter(O=>_.every(b=>!tu(O,b,a)));return[Number(v),S]}).forEach(([v,_])=>{_.forEach(S=>{s.push(gt`<circle cx="${v}" cy="${S}" fill="${n}" r="${a/L0}">`)})}),Object.entries(g).filter(([v,_])=>_.length>1).map(([v,_])=>{const S=_.filter(O=>_.some(b=>tu(O,b,a)));return[Number(v),S]}).map(([v,_])=>{_.sort((O,b)=>O<b?-1:1);const S=[];for(const O of _){const b=S.find(E=>E.some(w=>tu(O,w,a)));b?b.push(O):S.push([O])}return[v,S.map(O=>[O[0],O[O.length-1]])]}).forEach(([v,_])=>{_.forEach(([S,O])=>{s.push(gt`<line x1="${v}" x2="${v}" y1="${S}" y2="${O}" stroke="${n}" stroke-width="${a/(L0/2)}" stroke-linecap="round">`)})}),s}},mS=Qe`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var yS=Object.defineProperty,vS=Object.getOwnPropertyDescriptor,Ui=(t,e,r,n)=>{for(var i=n>1?void 0:n?vS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&yS(e,r,i),i};let rn=class extends Te{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=an.state.themeMode==="light"?this.size:this.size-36;return gt`<svg height="${t}" width="${t}">${gS.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":an.state.themeMode==="dark"};return J`<div style="${`width: ${this.size}px`}" class="${en(t)}">${this.walletId||this.imageUrl?J`<wcm-wallet-image walletId="${nr(this.walletId)}" imageId="${nr(this.imageId)}" imageUrl="${nr(this.imageUrl)}"></wcm-wallet-image>`:Ye.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};rn.styles=[je.globalCss,mS],Ui([Ee()],rn.prototype,"uri",2),Ui([Ee({type:Number})],rn.prototype,"size",2),Ui([Ee()],rn.prototype,"imageId",2),Ui([Ee()],rn.prototype,"walletId",2),Ui([Ee()],rn.prototype,"imageUrl",2),rn=Ui([Be("wcm-qrcode")],rn);const wS=Qe`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var bS=Object.defineProperty,_S=Object.getOwnPropertyDescriptor,M0=(t,e,r,n)=>{for(var i=n>1?void 0:n?_S(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&bS(e,r,i),i};let wa=class extends Te{constructor(){super(...arguments),this.onChange=()=>null}render(){return J`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${Ye.SEARCH_ICON}`}};wa.styles=[je.globalCss,wS],M0([Ee()],wa.prototype,"onChange",2),wa=M0([Be("wcm-search-input")],wa);const ES=Qe`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var SS=Object.defineProperty,xS=Object.getOwnPropertyDescriptor,CS=(t,e,r,n)=>{for(var i=n>1?void 0:n?xS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&SS(e,r,i),i};let ru=class extends Te{render(){return J`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};ru.styles=[je.globalCss,ES],ru=CS([Be("wcm-spinner")],ru);const OS=Qe`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var DS=Object.defineProperty,IS=Object.getOwnPropertyDescriptor,nu=(t,e,r,n)=>{for(var i=n>1?void 0:n?IS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&DS(e,r,i),i};let eo=class extends Te{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return J`<span><slot class="${en(t)}"></slot></span>`}};eo.styles=[je.globalCss,OS],nu([Ee()],eo.prototype,"variant",2),nu([Ee()],eo.prototype,"color",2),eo=nu([Be("wcm-text")],eo);const AS=Qe`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var TS=Object.defineProperty,RS=Object.getOwnPropertyDescriptor,Sn=(t,e,r,n)=>{for(var i=n>1?void 0:n?RS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&TS(e,r,i),i};let Wr=class extends Te{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?J`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?J`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){wu.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return J`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${nr(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:ye.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};Wr.styles=[je.globalCss,AS],Sn([Ee()],Wr.prototype,"onClick",2),Sn([Ee()],Wr.prototype,"name",2),Sn([Ee()],Wr.prototype,"walletId",2),Sn([Ee()],Wr.prototype,"label",2),Sn([Ee()],Wr.prototype,"imageId",2),Sn([Ee({type:Boolean})],Wr.prototype,"installed",2),Sn([Ee({type:Boolean})],Wr.prototype,"recent",2),Wr=Sn([Be("wcm-wallet-button")],Wr);const PS=Qe`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var $S=Object.defineProperty,NS=Object.getOwnPropertyDescriptor,ba=(t,e,r,n)=>{for(var i=n>1?void 0:n?NS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&$S(e,r,i),i};let ji=class extends Te{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:ye.getWalletIcon({id:this.walletId,image_id:this.imageId});return J`${e.length?J`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:Ye.WALLET_PLACEHOLDER}`}};ji.styles=[je.globalCss,PS],ba([Ee()],ji.prototype,"walletId",2),ba([Ee()],ji.prototype,"imageId",2),ba([Ee()],ji.prototype,"imageUrl",2),ji=ba([Be("wcm-wallet-image")],ji);var LS=Object.defineProperty,MS=Object.getOwnPropertyDescriptor,k0=(t,e,r,n)=>{for(var i=n>1?void 0:n?MS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&LS(e,r,i),i};let iu=class extends Te{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>ye.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(ur.state.enableExplorer){await ir.getRecomendedWallets(),_t.setIsDataLoaded(!0);const{recomendedWallets:t}=ir.state,e=t.map(r=>ye.getWalletIcon(r));await this.loadImages(e)}else _t.setIsDataLoaded(!0)}async preloadCustomImages(){const t=ye.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),cn.openToast("Failed preloading","error")}}};k0([lr()],iu.prototype,"preload",2),iu=k0([Be("wcm-explorer-context")],iu);var kS=Object.defineProperty,FS=Object.getOwnPropertyDescriptor,US=(t,e,r,n)=>{for(var i=n>1?void 0:n?FS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&kS(e,r,i),i};let F0=class extends Te{constructor(){super(),this.unsubscribeTheme=void 0,je.setTheme(),this.unsubscribeTheme=an.subscribe(je.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};F0=US([Be("wcm-theme-context")],F0);const jS=Qe`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var BS=Object.defineProperty,qS=Object.getOwnPropertyDescriptor,zS=(t,e,r,n)=>{for(var i=n>1?void 0:n?qS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&BS(e,r,i),i};let su=class extends Te{onGoToQrcode(){ut.push("Qrcode")}render(){const{recomendedWallets:t}=ir.state,e=[...t,...t],r=ae.RECOMMENDED_WALLET_AMOUNT*2;return J`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${Ye.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${Ye.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?J`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:Ye.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${ye.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};su.styles=[je.globalCss,jS],su=zS([Be("wcm-android-wallet-selection")],su);const WS=Qe`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var VS=Object.defineProperty,HS=Object.getOwnPropertyDescriptor,Bi=(t,e,r,n)=>{for(var i=n>1?void 0:n?HS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&VS(e,r,i),i};let xn=class extends Te{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=an.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:je.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return J`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return J`<div class="${en(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${nr(this.walletId)}" imageId="${nr(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};xn.styles=[je.globalCss,WS],Bi([Ee()],xn.prototype,"walletId",2),Bi([Ee()],xn.prototype,"imageId",2),Bi([Ee({type:Boolean})],xn.prototype,"isError",2),Bi([Ee({type:Boolean})],xn.prototype,"isStale",2),Bi([Ee()],xn.prototype,"label",2),xn=Bi([Be("wcm-connector-waiting")],xn);const qi={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=ur.state,i=(t=qi.recentWallet())==null?void 0:t.id,s=ae.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=ae.isMobile()?o==null?void 0:o.map(({id:a,name:c,links:l})=>({id:a,name:c,mobile:l,links:l})):o==null?void 0:o.map(({id:a,name:c,links:l})=>({id:a,name:c,desktop:l,links:l})))!=null?e:[]},recentWallet(){return ye.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=qi.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=ir.state;return n.filter(i=>r!==i.id)}},Cn={onConnecting(t){ye.goToConnectingView(t)},manualWalletsTemplate(){return qi.manualWallets().map(t=>J`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return qi.recomendedWallets(t).map(e=>J`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=qi.recentWallet();if(t)return J`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${nr(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},KS=Qe`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var ZS=Object.defineProperty,GS=Object.getOwnPropertyDescriptor,QS=(t,e,r,n)=>{for(var i=n>1?void 0:n?GS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&ZS(e,r,i),i};let ou=class extends Te{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=ur.state,r=t!=="ALL"&&e,n=Cn.manualWalletsTemplate(),i=Cn.recomendedWalletsTemplate();let s=[Cn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const c=!!a.length;return J`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${ye.handleUriCopy}" .actionIcon="${Ye.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${Ye.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${Ye.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?J`<wcm-modal-footer><div class="wcm-desktop-title">${Ye.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?J`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};ou.styles=[je.globalCss,KS],ou=QS([Be("wcm-desktop-wallet-selection")],ou);const YS=Qe`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var JS=Object.defineProperty,XS=Object.getOwnPropertyDescriptor,ex=(t,e,r,n)=>{for(var i=n>1?void 0:n?XS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&JS(e,r,i),i};let au=class extends Te{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=ur.state;return t??e?J`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?J`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?J`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};au.styles=[je.globalCss,YS],au=ex([Be("wcm-legal-notice")],au);const tx=Qe`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var rx=Object.defineProperty,nx=Object.getOwnPropertyDescriptor,ix=(t,e,r,n)=>{for(var i=n>1?void 0:n?nx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&rx(e,r,i),i};let cu=class extends Te{onQrcode(){ut.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=ur.state,r=t!=="ALL"&&e,n=Cn.manualWalletsTemplate(),i=Cn.recomendedWalletsTemplate();let s=[Cn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const c=!!a.length;return J`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${Ye.QRCODE_ICON}"></wcm-modal-header>${c?J`<wcm-modal-content><div>${a} ${o?J`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};cu.styles=[je.globalCss,tx],cu=ix([Be("wcm-mobile-wallet-selection")],cu);const sx=Qe`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var ox=Object.defineProperty,ax=Object.getOwnPropertyDescriptor,lu=(t,e,r,n)=>{for(var i=n>1?void 0:n?ax(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&ox(e,r,i),i};let zi=class extends Te{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=$n.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return ye.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return ye.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&$n.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=ye.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([ri(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,ri(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=ye.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([ri(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,ri(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?$n.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return J`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${en(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?J`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};zi.styles=[je.globalCss,sx],lu([lr()],zi.prototype,"open",2),lu([lr()],zi.prototype,"active",2),zi=lu([Be("wcm-modal")],zi);const cx=Qe`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var lx=Object.defineProperty,ux=Object.getOwnPropertyDescriptor,to=(t,e,r,n)=>{for(var i=n>1?void 0:n?ux(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&lx(e,r,i),i};let ii=class extends Te{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){ae.isMobile()?ut.replace("MobileConnecting"):ut.replace("MobileQrcodeConnecting")}onDesktop(){ut.replace("DesktopConnecting")}onWeb(){ut.replace("WebConnecting")}render(){return J`<div>${this.isRetry?J`<slot></slot>`:null} ${this.isMobile?J`<wcm-button .onClick="${this.onMobile}" .iconLeft="${Ye.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?J`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${Ye.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?J`<wcm-button .onClick="${this.onWeb}" .iconLeft="${Ye.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};ii.styles=[je.globalCss,cx],to([Ee({type:Boolean})],ii.prototype,"isMobile",2),to([Ee({type:Boolean})],ii.prototype,"isDesktop",2),to([Ee({type:Boolean})],ii.prototype,"isWeb",2),to([Ee({type:Boolean})],ii.prototype,"isRetry",2),ii=to([Be("wcm-platform-selection")],ii);const hx=Qe`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var dx=Object.defineProperty,fx=Object.getOwnPropertyDescriptor,px=(t,e,r,n)=>{for(var i=n>1?void 0:n?fx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&dx(e,r,i),i};let uu=class extends Te{onClick(){ut.push("WalletExplorer")}render(){const{recomendedWallets:t}=ir.state,e=qi.manualWallets(),r=[...t,...e].reverse().slice(0,4);return J`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=ye.getWalletIcon(n);if(i)return J`<img crossorigin="anonymous" src="${i}">`;const s=ye.getWalletIcon({id:n.id});return s?J`<img crossorigin="anonymous" src="${s}">`:Ye.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>Ye.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};uu.styles=[je.globalCss,hx],uu=px([Be("wcm-view-all-wallets-button")],uu);const gx=Qe`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var mx=Object.defineProperty,yx=Object.getOwnPropertyDescriptor,_a=(t,e,r,n)=>{for(var i=n>1?void 0:n?yx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&mx(e,r,i),i};let Wi=class extends Te{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=_t.state;this.uri=t},0)}get overlayEl(){return ye.getShadowRootElement(this,".wcm-qr-container")}render(){return J`<div class="wcm-qr-container">${this.uri?J`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${nr(this.walletId)}" imageId="${nr(this.imageId)}"></wcm-qrcode>`:J`<wcm-spinner></wcm-spinner>`}</div>`}};Wi.styles=[je.globalCss,gx],_a([Ee()],Wi.prototype,"walletId",2),_a([Ee()],Wi.prototype,"imageId",2),_a([lr()],Wi.prototype,"uri",2),Wi=_a([Be("wcm-walletconnect-qr")],Wi);var vx=Object.defineProperty,wx=Object.getOwnPropertyDescriptor,bx=(t,e,r,n)=>{for(var i=n>1?void 0:n?wx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&vx(e,r,i),i};let hu=class extends Te{viewTemplate(){return ae.isAndroid()?J`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:ae.isMobile()?J`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:J`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return J`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};hu.styles=[je.globalCss],hu=bx([Be("wcm-connect-wallet-view")],hu);const _x=Qe`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Ex=Object.defineProperty,Sx=Object.getOwnPropertyDescriptor,U0=(t,e,r,n)=>{for(var i=n>1?void 0:n?Sx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Ex(e,r,i),i};let Ea=class extends Te{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=ae.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=ae.formatNativeUrl(n,t,r);ae.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=_t.state,e=ae.getWalletRouterData();ye.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ae.getWalletRouterData(),{isMobile:n,isWeb:i}=ye.getCachedRouterWalletPlatforms();return J`<wcm-modal-header title="${t}" .onAction="${ye.handleUriCopy}" .actionIcon="${Ye.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${nr(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${Ye.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Ea.styles=[je.globalCss,_x],U0([lr()],Ea.prototype,"isError",2),Ea=U0([Be("wcm-desktop-connecting-view")],Ea);const xx=Qe`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var Cx=Object.defineProperty,Ox=Object.getOwnPropertyDescriptor,Dx=(t,e,r,n)=>{for(var i=n>1?void 0:n?Ox(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Cx(e,r,i),i};let du=class extends Te{onInstall(t){t&&ae.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=ae.getWalletRouterData();return J`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${nr(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${Ye.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};du.styles=[je.globalCss,xx],du=Dx([Be("wcm-install-wallet-view")],du);const Ix=Qe`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var Ax=Object.defineProperty,Tx=Object.getOwnPropertyDescriptor,j0=(t,e,r,n)=>{for(var i=n>1?void 0:n?Tx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Ax(e,r,i),i};let Sa=class extends Te{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=ae.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=ae.formatNativeUrl(i,t,n);ae.openHref(o,"_self")}else if(s){const o=ae.formatUniversalUrl(s,t,n);ae.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=_t.state,r=ae.getWalletRouterData();ye.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&ae.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=ae.getWalletRouterData(),{isWeb:s}=ye.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return J`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${nr(r)}" label="Tap 'Open' to continue" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${Ye.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?J`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${nr(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${Ye.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};Sa.styles=[je.globalCss,Ix],j0([lr()],Sa.prototype,"isError",2),Sa=j0([Be("wcm-mobile-connecting-view")],Sa);const Rx=Qe`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Px=Object.defineProperty,$x=Object.getOwnPropertyDescriptor,Nx=(t,e,r,n)=>{for(var i=n>1?void 0:n?$x(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Px(e,r,i),i};let fu=class extends Te{render(){const{name:t,id:e,image_id:r}=ae.getWalletRouterData(),{isDesktop:n,isWeb:i}=ye.getCachedRouterWalletPlatforms();return J`<wcm-modal-header title="${t}" .onAction="${ye.handleUriCopy}" .actionIcon="${Ye.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${nr(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};fu.styles=[je.globalCss,Rx],fu=Nx([Be("wcm-mobile-qr-connecting-view")],fu);var Lx=Object.defineProperty,Mx=Object.getOwnPropertyDescriptor,kx=(t,e,r,n)=>{for(var i=n>1?void 0:n?Mx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Lx(e,r,i),i};let pu=class extends Te{render(){return J`<wcm-modal-header title="Scan the code" .onAction="${ye.handleUriCopy}" .actionIcon="${Ye.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};pu.styles=[je.globalCss],pu=kx([Be("wcm-qrcode-view")],pu);const Fx=Qe`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var Ux=Object.defineProperty,jx=Object.getOwnPropertyDescriptor,ro=(t,e,r,n)=>{for(var i=n>1?void 0:n?jx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Ux(e,r,i),i};const gu=40;let si=class extends Te{constructor(){super(...arguments),this.loading=!ir.state.wallets.listings.length,this.firstFetch=!ir.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=ye.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,ir.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),ir.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return ye.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=ir.state,{listings:r,total:n}=this.search?e:t;return n<=gu||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=ir.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>gu&&n.length<i))try{this.loading=!0;const o=(t=_t.state.chains)==null?void 0:t.join(","),{listings:a}=await ir.getWallets({page:this.firstFetch?1:s+1,entries:gu,search:this.search,version:2,chains:o}),c=a.map(l=>ye.getWalletIcon(l));await Promise.all([...c.map(async l=>ye.preloadImage(l)),ae.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),cn.openToast(ye.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){ae.isAndroid()?ye.handleMobileLinking(t):ye.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=ir.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=Cn.manualWalletsTemplate(),o=Cn.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:l})=>ye.caseSafeIncludes(l[0],this.search)),o=o.filter(({values:l})=>ye.caseSafeIncludes(l[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return J`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${en(c)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(l=>J`${l?J`<wcm-wallet-button imageId="${l.image_id}" name="${l.name}" walletId="${l.id}" .onClick="${()=>this.onConnect(l)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?J`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?J`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};si.styles=[je.globalCss,Fx],ro([lr()],si.prototype,"loading",2),ro([lr()],si.prototype,"firstFetch",2),ro([lr()],si.prototype,"search",2),ro([lr()],si.prototype,"endReached",2),si=ro([Be("wcm-wallet-explorer-view")],si);const Bx=Qe`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var qx=Object.defineProperty,zx=Object.getOwnPropertyDescriptor,B0=(t,e,r,n)=>{for(var i=n>1?void 0:n?zx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&qx(e,r,i),i};let xa=class extends Te{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=ae.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=ae.formatUniversalUrl(n,t,r);ae.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=_t.state,e=ae.getWalletRouterData();ye.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ae.getWalletRouterData(),{isMobile:n,isDesktop:i}=ye.getCachedRouterWalletPlatforms(),s=ae.isMobile();return J`<wcm-modal-header title="${t}" .onAction="${ye.handleUriCopy}" .actionIcon="${Ye.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${nr(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${Ye.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};xa.styles=[je.globalCss,Bx],B0([lr()],xa.prototype,"isError",2),xa=B0([Be("wcm-web-connecting-view")],xa);const Wx=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return zi},get WcmQrCode(){return rn}},Symbol.toStringTag,{value:"Module"}));z.ICore=dh,z.ICrypto=Bm,z.IEngine=Eh,z.IEngineEvents=Hm,z.IExpirer=wh,z.IJsonRpcHistory=fh,z.IKeyChain=zm,z.IMessageTracker=ph,z.IPairing=Wm,z.IPublisher=gh,z.IRelayer=mh,z.ISignClient=_h,z.ISignClientEvents=Vm,z.IStore=yh,z.ISubscriber=vh,z.ISubscriberTopicMap=qm,z.IVerify=bh,z.PAGE_SIZE=$E,z.PuzzleWalletProvider=kE,z.aleoAddressRegex=zf,z.aleoFieldRegex=Kf,z.aleoPrivateKeyRegex=Vf,z.aleoTransactionIdRegex=Hf,z.aleoU32=Zf,z.aleoU64=Gf,z.aleoViewKeyRegex=Wf,z.configureConnection=Pf,z.connect=SE,z.createSharedState=CE,z.decrypt=OE,z.disconnect=DE,z.emitter=Hn,z.getAccount=_E,z.getBalance=EE,z.getEvent=IE,z.getEvents=AE,z.getFormattedRecordPlaintext=yE,z.getRecords=RE,z.getWalletConnectModalSignClient=nt,z.importSharedState=TE,z.projectId=Tf,z.queryClient=Ip,z.requestCreateEvent=xE,z.requestSignature=PE,z.shortenAddress=cl,z.signClient_puzzleProps=r3,z.useAccount=iE,z.useBalance=sE,z.useConnect=oE,z.useCreateSharedState=aE,z.useDecrypt=dE,z.useDisconnect=fE,z.useEvent=pE,z.useEvents=gE,z.useImportSharedState=mE,z.useOnSessionDelete=Vc,z.useOnSessionEvent=Oi,z.useOnSessionExpire=Qf,z.useOnSessionUpdate=Hc,z.useRecords=vE,z.useRequestCreateEvent=bE,z.useRequestSignature=wE,z.useSession=vr,z.wc_aleo_chains=ys,z.wc_aleo_methods=ko,z.wc_events=Fo,z.web3modal_puzzle_props=Rf,z.zodAddress=Q3,z.zodEventStatus=i5,z.zodEventType=n5,z.zodField=e5,z.zodNetwork=s5,z.zodPrivateKey=J3,z.zodTransactionId=X3,z.zodU32=t5,z.zodU64=r5,z.zodViewKey=Y3,z.zodVisibility=o5,Object.defineProperty(z,Symbol.toStringTag,{value:"Module"})});
