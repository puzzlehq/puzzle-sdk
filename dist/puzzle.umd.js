(function(pe,Me){typeof exports=="object"&&typeof module<"u"?Me(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],Me):(pe=typeof globalThis<"u"?globalThis:pe||self,Me(pe["@puzzlehq/sdk"]={},pe.React))})(this,function(pe,Me){"use strict";const Xd={name:"@puzzlehq/sdk",displayName:"Puzzle SDK",version:"0.1.28",description:"Your portal to privacy",main:"./dist/puzzle.umd.js",module:"./dist/puzzle.es.js",types:"./dist/types/src/index.d.ts",exports:{".":{import:"./dist/puzzle.es.js",require:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts"}},type:"module",scripts:{build:"vite build && tsc --declaration --emitDeclarationOnly --outDir dist/types"},dependencies:{"@tanstack/react-query":"^4.29.5","@trpc/client":"^10.9.0","@trpc/react-query":"^10.9.0","@trpc/server":"^10.8.1","@types/debug":"^4.1.7","@walletconnect/modal-sign-html":"^2.6.2","@walletconnect/types":"^2.9.0","@walletconnect/utils":"^2.9.2",debug:"^4.3.4",immer:"^9.0.19",mitt:"^3.0.1",react:"^18.2.0",ws:"^8.13.0",zustand:"^4.3.9"},devDependencies:{"@puzzlehq/types":"1.0.3","@types/chrome":"^0.0.228","@types/node":"^18.11.18","@types/react":"^18.0.27","@types/react-dom":"^18.0.10",typescript:"^4.9.4",vite:"^4.4.7"},repository:{type:"git",url:"git+https://github.com/puzzlehq/puzzle-sdk.git"},keywords:["puzzle","aleo","aztec","web3","crypto\\"],author:"Puzzle",license:"ISC",bugs:{url:"https://github.com/puzzlehq/puzzle-sdk/issues"},homepage:"https://github.com/puzzlehq/puzzle-sdk#readme"},ef=Symbol(),pc=Object.getPrototypeOf,Vs=new WeakMap,tf=t=>t&&(Vs.has(t)?Vs.get(t):pc(t)===Object.prototype||pc(t)===Array.prototype),rf=t=>tf(t)&&t[ef]||null,gc=(t,e=!0)=>{Vs.set(t,e)},Ks=t=>typeof t=="object"&&t!==null,yr=new WeakMap,Ui=new WeakSet,nf=(t=Object.is,e=(h,d)=>new Proxy(h,d),r=h=>Ks(h)&&!Ui.has(h)&&(Array.isArray(h)||!(Symbol.iterator in h))&&!(h instanceof WeakMap)&&!(h instanceof WeakSet)&&!(h instanceof Error)&&!(h instanceof Number)&&!(h instanceof Date)&&!(h instanceof String)&&!(h instanceof RegExp)&&!(h instanceof ArrayBuffer),n=h=>{switch(h.status){case"fulfilled":return h.value;case"rejected":throw h.reason;default:throw h}},i=new WeakMap,s=(h,d,m=n)=>{const w=i.get(h);if((w==null?void 0:w[0])===d)return w[1];const y=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h));return gc(y,!0),i.set(h,[d,y]),Reflect.ownKeys(h).forEach(b=>{if(Object.getOwnPropertyDescriptor(y,b))return;const _=Reflect.get(h,b),D={value:_,enumerable:!0,configurable:!0};if(Ui.has(_))gc(_,!1);else if(_ instanceof Promise)delete D.value,D.get=()=>m(_);else if(yr.has(_)){const[I,v]=yr.get(_);D.value=s(I,v(),m)}Object.defineProperty(y,b,D)}),Object.preventExtensions(y)},o=new WeakMap,a=[1,1],l=h=>{if(!Ks(h))throw new Error("object required");const d=o.get(h);if(d)return d;let m=a[0];const w=new Set,y=(R,C=++a[0])=>{m!==C&&(m=C,w.forEach(M=>M(R,C)))};let b=a[1];const _=(R=++a[1])=>(b!==R&&!w.size&&(b=R,I.forEach(([C])=>{const M=C[1](R);M>m&&(m=M)})),m),D=R=>(C,M)=>{const B=[...C];B[1]=[R,...B[1]],y(B,M)},I=new Map,v=(R,C)=>{if(w.size){const M=C[3](D(R));I.set(R,[C,M])}else I.set(R,[C])},E=R=>{var C;const M=I.get(R);M&&(I.delete(R),(C=M[1])==null||C.call(M))},g=R=>(w.add(R),w.size===1&&I.forEach(([M,B],W)=>{const A=M[3](D(W));I.set(W,[M,A])}),()=>{w.delete(R),w.size===0&&I.forEach(([M,B],W)=>{B&&(B(),I.set(W,[M]))})}),x=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h)),c=e(x,{deleteProperty(R,C){const M=Reflect.get(R,C);E(C);const B=Reflect.deleteProperty(R,C);return B&&y(["delete",[C],M]),B},set(R,C,M,B){const W=Reflect.has(R,C),A=Reflect.get(R,C,B);if(W&&(t(A,M)||o.has(M)&&t(A,o.get(M))))return!0;E(C),Ks(M)&&(M=rf(M)||M);let N=M;if(M instanceof Promise)M.then(V=>{M.status="fulfilled",M.value=V,y(["resolve",[C],V])}).catch(V=>{M.status="rejected",M.reason=V,y(["reject",[C],V])});else{!yr.has(M)&&r(M)&&(N=l(M));const V=!Ui.has(N)&&yr.get(N);V&&v(C,V)}return Reflect.set(R,C,N,B),y(["set",[C],M,A]),!0}});o.set(h,c);const p=[x,_,s,g];return yr.set(c,p),Reflect.ownKeys(h).forEach(R=>{const C=Object.getOwnPropertyDescriptor(h,R);"value"in C&&(c[R]=h[R],delete C.value,delete C.writable),Object.defineProperty(x,R,C)}),c})=>[l,yr,Ui,t,e,r,n,i,s,o,a],[sf]=nf();function vr(t={}){return sf(t)}function Ur(t,e,r){const n=yr.get(t);let i;const s=[],o=n[3];let a=!1;const h=o(d=>{if(s.push(d),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,h()}}function of(t,e){const r=yr.get(t),[n,i,s]=r;return s(n,i(),e)}const ot=vr({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),ze={state:ot,subscribe(t){return Ur(ot,()=>t(ot))},push(t,e){t!==ot.view&&(ot.view=t,e&&(ot.data=e),ot.history.push(t))},reset(t){ot.view=t,ot.history=[t]},replace(t){ot.history.length>1&&(ot.history[ot.history.length-1]=t,ot.view=t)},goBack(){if(ot.history.length>1){ot.history.pop();const[t]=ot.history.slice(-1);ot.view=t}},setData(t){ot.data=t}},ee={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return ee.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return ee.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(ee.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!ee.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(ee.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(ee.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(ee.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(ee.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=ze.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},af=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),bt=vr({enabled:af,userSessionId:"",events:[],connectedWalletId:void 0}),mc={state:bt,subscribe(t){return Ur(bt.events,()=>t(of(bt.events[bt.events.length-1])))},initialize(){bt.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(bt.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){bt.connectedWalletId=t},click(t){if(bt.enabled){const e={type:"CLICK",name:t.name,userSessionId:bt.userSessionId,timestamp:Date.now(),data:t};bt.events.push(e)}},track(t){if(bt.enabled){const e={type:"TRACK",name:t.name,userSessionId:bt.userSessionId,timestamp:Date.now(),data:t};bt.events.push(e)}},view(t){if(bt.enabled){const e={type:"VIEW",name:t.name,userSessionId:bt.userSessionId,timestamp:Date.now(),data:t};bt.events.push(e)}}},er=vr({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),Ye={state:er,subscribe(t){return Ur(er,()=>t(er))},setChains(t){er.chains=t},setWalletConnectUri(t){er.walletConnectUri=t},setIsCustomDesktop(t){er.isCustomDesktop=t},setIsCustomMobile(t){er.isCustomMobile=t},setIsDataLoaded(t){er.isDataLoaded=t},setIsUiLoaded(t){er.isUiLoaded=t},setIsAuth(t){er.isAuth=t}},Fi=vr({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Ut={state:Fi,subscribe(t){return Ur(Fi,()=>t(Fi))},setConfig(t){var e,r;mc.initialize(),Ye.setChains(t.chains),Ye.setIsAuth(!!t.enableAuthMode),Ye.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),Ye.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),ee.setModalVersionInStorage(),Object.assign(Fi,t)}};var cf=Object.defineProperty,wc=Object.getOwnPropertySymbols,lf=Object.prototype.hasOwnProperty,uf=Object.prototype.propertyIsEnumerable,yc=(t,e,r)=>e in t?cf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hf=(t,e)=>{for(var r in e||(e={}))lf.call(e,r)&&yc(t,r,e[r]);if(wc)for(var r of wc(e))uf.call(e,r)&&yc(t,r,e[r]);return t};const Gs="https://explorer-api.walletconnect.com",Ys="wcm",Js="js-2.6.2";async function ji(t,e){const r=hf({sdkType:Ys,sdkVersion:Js},e),n=new URL(t,Gs);return n.searchParams.append("projectId",Ut.state.projectId),Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,String(s))}),(await fetch(n)).json()}const Fr={async getDesktopListings(t){return ji("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return ji("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return ji("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return ji("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${Gs}/w3m/v1/getWalletImage/${t}?projectId=${Ut.state.projectId}&sdkType=${Ys}&sdkVersion=${Js}`},getAssetImageUrl(t){return`${Gs}/w3m/v1/getAssetImage/${t}?projectId=${Ut.state.projectId}&sdkType=${Ys}&sdkVersion=${Js}`}};var df=Object.defineProperty,vc=Object.getOwnPropertySymbols,ff=Object.prototype.hasOwnProperty,pf=Object.prototype.propertyIsEnumerable,bc=(t,e,r)=>e in t?df(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gf=(t,e)=>{for(var r in e||(e={}))ff.call(e,r)&&bc(t,r,e[r]);if(vc)for(var r of vc(e))pf.call(e,r)&&bc(t,r,e[r]);return t};const _c=ee.isMobile(),tr=vr({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),Rt={state:tr,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Ut.state;if(t==="NONE"||e==="ALL"&&!t)return tr.recomendedWallets;if(ee.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await Fr.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),l=t.indexOf(o.id);return a-l}),tr.recomendedWallets=i}else{const{chains:r,isAuth:n}=Ye.state,i=r==null?void 0:r.join(","),s=ee.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:ee.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=_c?await Fr.getMobileListings(o):await Fr.getDesktopListings(o);tr.recomendedWallets=Object.values(a)}return tr.recomendedWallets},async getWallets(t){const e=gf({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Ut.state,{recomendedWallets:i}=tr;if(n==="ALL")return tr.wallets;i.length?e.excludedIds=i.map(m=>m.id).join(","):ee.isArray(r)&&(e.excludedIds=r.join(",")),ee.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),Ye.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:l}=_c?await Fr.getMobileListings(e):await Fr.getDesktopListings(e),h=Object.values(a),d=o?"search":"wallets";return tr[d]={listings:[...tr[d].listings,...h],total:l,page:s??1},{listings:h,total:l}},getWalletImageUrl(t){return Fr.getWalletImageUrl(t)},getAssetImageUrl(t){return Fr.getAssetImageUrl(t)},resetSearch(){tr.search={listings:[],total:0,page:1}}},hn=vr({open:!1}),jr={state:hn,subscribe(t){return Ur(hn,()=>t(hn))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=Ye.state;if(ee.removeWalletConnectDeepLink(),Ye.setWalletConnectUri(t==null?void 0:t.uri),Ye.setChains(t==null?void 0:t.chains),ze.reset("ConnectWallet"),r&&n)hn.open=!0,e();else{const i=setInterval(()=>{const s=Ye.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),hn.open=!0,e())},200)}})},close(){hn.open=!1}};var mf=Object.defineProperty,Ec=Object.getOwnPropertySymbols,wf=Object.prototype.hasOwnProperty,yf=Object.prototype.propertyIsEnumerable,Sc=(t,e,r)=>e in t?mf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vf=(t,e)=>{for(var r in e||(e={}))wf.call(e,r)&&Sc(t,r,e[r]);if(Ec)for(var r of Ec(e))yf.call(e,r)&&Sc(t,r,e[r]);return t};function bf(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Bn=vr({themeMode:bf()?"dark":"light"}),br={state:Bn,subscribe(t){return Ur(Bn,()=>t(Bn))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(Bn.themeMode=e),r&&(Bn.themeVariables=vf({},r))}},Br=vr({open:!1,message:"",variant:"success"}),_r={state:Br,subscribe(t){return Ur(Br,()=>t(Br))},openToast(t,e){Br.open=!0,Br.message=t,Br.variant=e},closeToast(){Br.open=!1}};let _f=class{constructor(e){this.openModal=jr.open,this.closeModal=jr.close,this.subscribeModal=jr.subscribe,this.setTheme=br.setThemeConfig,br.setThemeConfig(e),Ut.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>E6);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),Ye.setIsUiLoaded(!0)}}};var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qs(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Xs={exports:{}},dn=typeof Reflect=="object"?Reflect:null,xc=dn&&typeof dn.apply=="function"?dn.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Bi;dn&&typeof dn.ownKeys=="function"?Bi=dn.ownKeys:Object.getOwnPropertySymbols?Bi=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Bi=function(e){return Object.getOwnPropertyNames(e)};function Ef(t){console&&console.warn&&console.warn(t)}var Dc=Number.isNaN||function(e){return e!==e};function Le(){Le.init.call(this)}Xs.exports=Le,Xs.exports.once=Of,Le.EventEmitter=Le,Le.prototype._events=void 0,Le.prototype._eventsCount=0,Le.prototype._maxListeners=void 0;var Oc=10;function ki(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Le,"defaultMaxListeners",{enumerable:!0,get:function(){return Oc},set:function(t){if(typeof t!="number"||t<0||Dc(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Oc=t}}),Le.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Le.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Dc(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Ic(t){return t._maxListeners===void 0?Le.defaultMaxListeners:t._maxListeners}Le.prototype.getMaxListeners=function(){return Ic(this)},Le.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")xc(l,this,r);else for(var h=l.length,d=Rc(l,h),n=0;n<h;++n)xc(d[n],this,r);return!0};function Cc(t,e,r,n){var i,s,o;if(ki(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Ic(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Ef(a)}return t}Le.prototype.addListener=function(e,r){return Cc(this,e,r,!1)},Le.prototype.on=Le.prototype.addListener,Le.prototype.prependListener=function(e,r){return Cc(this,e,r,!0)};function Sf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ac(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Sf.bind(n);return i.listener=r,n.wrapFn=i,i}Le.prototype.once=function(e,r){return ki(r),this.on(e,Ac(this,e,r)),this},Le.prototype.prependOnceListener=function(e,r){return ki(r),this.prependListener(e,Ac(this,e,r)),this},Le.prototype.removeListener=function(e,r){var n,i,s,o,a;if(ki(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():xf(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},Le.prototype.off=Le.prototype.removeListener,Le.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function $c(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Df(i):Rc(i,i.length)}Le.prototype.listeners=function(e){return $c(this,e,!0)},Le.prototype.rawListeners=function(e){return $c(this,e,!1)},Le.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Tc.call(t,e)},Le.prototype.listenerCount=Tc;function Tc(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Le.prototype.eventNames=function(){return this._eventsCount>0?Bi(this._events):[]};function Rc(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function xf(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Df(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Of(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Pc(t,e,s,{once:!0}),e!=="error"&&If(t,i,{once:!0})})}function If(t,e,r){typeof t.on=="function"&&Pc(t,"error",e,r)}function Pc(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Yt=Xs.exports;const Nc=Zs(Yt);var zi={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var eo=function(t,e){return eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},eo(t,e)};function Cf(t,e){eo(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var to=function(){return to=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},to.apply(this,arguments)};function Af(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function $f(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Tf(t,e){return function(r,n){e(r,n,t)}}function Rf(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Pf(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{h(n.next(d))}catch(m){o(m)}}function l(d){try{h(n.throw(d))}catch(m){o(m)}}function h(d){d.done?s(d.value):i(d.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function Nf(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(d){return l([h,d])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(d){h=[6,d],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Lf(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Mf(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function ro(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lc(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Uf(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Lc(arguments[e]));return t}function Ff(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function kn(t){return this instanceof kn?(this.v=t,this):new kn(t)}function jf(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(w){n[w]&&(i[w]=function(y){return new Promise(function(b,_){s.push([w,y,b,_])>1||a(w,y)})})}function a(w,y){try{l(n[w](y))}catch(b){m(s[0][3],b)}}function l(w){w.value instanceof kn?Promise.resolve(w.value.v).then(h,d):m(s[0][2],w)}function h(w){a("next",w)}function d(w){a("throw",w)}function m(w,y){w(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Bf(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:kn(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function kf(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ro=="function"?ro(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},o)}}function zf(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function qf(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Hf(t){return t&&t.__esModule?t:{default:t}}function Wf(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Vf(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const Ht=Qs(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return to},__asyncDelegator:Bf,__asyncGenerator:jf,__asyncValues:kf,__await:kn,__awaiter:Pf,__classPrivateFieldGet:Wf,__classPrivateFieldSet:Vf,__createBinding:Lf,__decorate:$f,__exportStar:Mf,__extends:Cf,__generator:Nf,__importDefault:Hf,__importStar:qf,__makeTemplateObject:zf,__metadata:Rf,__param:Tf,__read:Lc,__rest:Af,__spread:Uf,__spreadArrays:Ff,__values:ro},Symbol.toStringTag,{value:"Module"})));var zn={};Object.defineProperty(zn,"__esModule",{value:!0});function Kf(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}zn.safeJsonParse=Kf;function Gf(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}zn.safeJsonStringify=Gf;var qn={exports:{}},Mc;function Yf(){return Mc||(Mc=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ft<"u"&&Ft.localStorage?qn.exports=Ft.localStorage:typeof window<"u"&&window.localStorage?qn.exports=window.localStorage:qn.exports=new e}()),qn.exports}var no={},Hn={},Uc;function Jf(){if(Uc)return Hn;Uc=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.IKeyValueStorage=void 0;class t{}return Hn.IKeyValueStorage=t,Hn}var Wn={},Fc;function Zf(){if(Fc)return Wn;Fc=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.parseEntry=void 0;const t=zn;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return Wn.parseEntry=e,Wn}var jc;function Qf(){return jc||(jc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ht;e.__exportStar(Jf(),t),e.__exportStar(Zf(),t)}(no)),no}Object.defineProperty(zi,"__esModule",{value:!0}),zi.KeyValueStorage=void 0;const fn=Ht,Bc=zn,Xf=fn.__importDefault(Yf()),e0=Qf();class kc{constructor(){this.localStorage=Xf.default}getKeys(){return fn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return fn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(e0.parseEntry)})}getItem(e){return fn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return Bc.safeJsonParse(r)})}setItem(e,r){return fn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Bc.safeJsonStringify(r))})}removeItem(e){return fn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}zi.KeyValueStorage=kc;var t0=zi.default=kc,pn={},Vn={},X={},io={},Kn={},zc;function r0(){if(zc)return Kn;zc=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Kn.delay=t,Kn}var kr={},so={},zr={},qc;function n0(){return qc||(qc=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.ONE_THOUSAND=zr.ONE_HUNDRED=void 0,zr.ONE_HUNDRED=100,zr.ONE_THOUSAND=1e3),zr}var oo={},Hc;function i0(){return Hc||(Hc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(oo)),oo}var Wc;function Vc(){return Wc||(Wc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ht;e.__exportStar(n0(),t),e.__exportStar(i0(),t)}(so)),so}var Kc;function s0(){if(Kc)return kr;Kc=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.fromMiliseconds=kr.toMiliseconds=void 0;const t=Vc();function e(n){return n*t.ONE_THOUSAND}kr.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return kr.fromMiliseconds=r,kr}var Gc;function o0(){return Gc||(Gc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ht;e.__exportStar(r0(),t),e.__exportStar(s0(),t)}(io)),io}var gn={},Yc;function a0(){if(Yc)return gn;Yc=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return gn.Watch=t,gn.default=t,gn}var ao={},Gn={},Jc;function c0(){if(Jc)return Gn;Jc=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.IWatch=void 0;class t{}return Gn.IWatch=t,Gn}var Zc;function l0(){return Zc||(Zc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ht.__exportStar(c0(),t)}(ao)),ao}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ht;e.__exportStar(o0(),t),e.__exportStar(a0(),t),e.__exportStar(l0(),t),e.__exportStar(Vc(),t)})(X);var co={},Yn={};let qr=class{};const u0=Qs(Object.freeze(Object.defineProperty({__proto__:null,IEvents:qr},Symbol.toStringTag,{value:"Module"})));var Qc;function h0(){if(Qc)return Yn;Qc=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.IHeartBeat=void 0;const t=u0;class e extends t.IEvents{constructor(n){super()}}return Yn.IHeartBeat=e,Yn}var Xc;function el(){return Xc||(Xc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ht.__exportStar(h0(),t)}(co)),co}var lo={},Hr={},tl;function d0(){if(tl)return Hr;tl=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.HEARTBEAT_EVENTS=Hr.HEARTBEAT_INTERVAL=void 0;const t=X;return Hr.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,Hr.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Hr}var rl;function nl(){return rl||(rl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ht.__exportStar(d0(),t)}(lo)),lo}var il;function f0(){if(il)return Vn;il=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.HeartBeat=void 0;const t=Ht,e=Yt,r=X,n=el(),i=nl();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const l=new s(a);return yield l.init(),l})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,l){this.events.on(a,l)}once(a,l){this.events.once(a,l)}off(a,l){this.events.off(a,l)}removeListener(a,l){this.events.removeListener(a,l)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Vn.HeartBeat=s,Vn}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ht;e.__exportStar(f0(),t),e.__exportStar(el(),t),e.__exportStar(nl(),t)})(pn);var De={},uo,sl;function p0(){if(sl)return uo;sl=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}uo=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var l=new Array(a);l[0]=s(r);for(var h=1;h<a;h++)l[h]=s(n[h]);return l.join(" ")}if(typeof r!="string")return r;var d=n.length;if(d===0)return r;for(var m="",w=1-o,y=-1,b=r&&r.length||0,_=0;_<b;){if(r.charCodeAt(_)===37&&_+1<b){switch(y=y>-1?y:0,r.charCodeAt(_+1)){case 100:case 102:if(w>=d||n[w]==null)break;y<_&&(m+=r.slice(y,_)),m+=Number(n[w]),y=_+2,_++;break;case 105:if(w>=d||n[w]==null)break;y<_&&(m+=r.slice(y,_)),m+=Math.floor(Number(n[w])),y=_+2,_++;break;case 79:case 111:case 106:if(w>=d||n[w]===void 0)break;y<_&&(m+=r.slice(y,_));var D=typeof n[w];if(D==="string"){m+="'"+n[w]+"'",y=_+2,_++;break}if(D==="function"){m+=n[w].name||"<anonymous>",y=_+2,_++;break}m+=s(n[w]),y=_+2,_++;break;case 115:if(w>=d)break;y<_&&(m+=r.slice(y,_)),m+=String(n[w]),y=_+2,_++;break;case 37:y<_&&(m+=r.slice(y,_)),m+="%",y=_+2,_++,w--;break}++w}++_}return y===-1?r:(y<b&&(m+=r.slice(y)),m)}return uo}var ho,ol;function g0(){if(ol)return ho;ol=1;const t=p0();ho=i;const e=x().console||{},r={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:_,wrapResponseSerializer:_,wrapErrorSerializer:_,req:b,res:b,err:w};function n(f,c){return Array.isArray(f)?f.filter(function(R){return R!=="!stdSerializers.err"}):f===!0?Object.keys(c):!1}function i(f){f=f||{},f.browser=f.browser||{};const c=f.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const p=f.browser.write||e;f.browser.write&&(f.browser.asObject=!0);const R=f.serializers||{},C=n(f.browser.serialize,R);let M=f.browser.serialize;Array.isArray(f.browser.serialize)&&f.browser.serialize.indexOf("!stdSerializers.err")>-1&&(M=!1);const B=["error","fatal","warn","info","debug","trace"];typeof p=="function"&&(p.error=p.fatal=p.warn=p.info=p.debug=p.trace=p),f.enabled===!1&&(f.level="silent");const W=f.level||"info",A=Object.create(p);A.log||(A.log=D),Object.defineProperty(A,"levelVal",{get:V}),Object.defineProperty(A,"level",{get:z,set:F});const N={transmit:c,serialize:C,asObject:f.browser.asObject,levels:B,timestamp:y(f)};A.levels=i.levels,A.level=W,A.setMaxListeners=A.getMaxListeners=A.emit=A.addListener=A.on=A.prependListener=A.once=A.prependOnceListener=A.removeListener=A.removeAllListeners=A.listeners=A.listenerCount=A.eventNames=A.write=A.flush=D,A.serializers=R,A._serialize=C,A._stdErrSerialize=M,A.child=k,c&&(A._logEvent=m());function V(){return this.level==="silent"?1/0:this.levels.values[this.level]}function z(){return this._level}function F(U){if(U!=="silent"&&!this.levels.values[U])throw Error("unknown level "+U);this._level=U,s(N,A,"error","log"),s(N,A,"fatal","error"),s(N,A,"warn","error"),s(N,A,"info","log"),s(N,A,"debug","log"),s(N,A,"trace","log")}function k(U,q){if(!U)throw new Error("missing bindings for child Pino");q=q||{},C&&U.serializers&&(q.serializers=U.serializers);const ie=q.serializers;if(C&&ie){var H=Object.assign({},R,ie),te=f.browser.serialize===!0?Object.keys(H):C;delete U.serializers,l([U],te,H,this._stdErrSerialize)}function Z(re){this._childLevel=(re._childLevel|0)+1,this.error=h(re,U,"error"),this.fatal=h(re,U,"fatal"),this.warn=h(re,U,"warn"),this.info=h(re,U,"info"),this.debug=h(re,U,"debug"),this.trace=h(re,U,"trace"),H&&(this.serializers=H,this._serialize=te),c&&(this._logEvent=m([].concat(re._logEvent.bindings,U)))}return Z.prototype=this,new Z(this)}return A}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:I,epochTime:v,unixTime:E,isoTime:g});function s(f,c,p,R){const C=Object.getPrototypeOf(c);c[p]=c.levelVal>c.levels.values[p]?D:C[p]?C[p]:e[p]||e[R]||D,o(f,c,p)}function o(f,c,p){!f.transmit&&c[p]===D||(c[p]=function(R){return function(){const M=f.timestamp(),B=new Array(arguments.length),W=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var A=0;A<B.length;A++)B[A]=arguments[A];if(f.serialize&&!f.asObject&&l(B,this._serialize,this.serializers,this._stdErrSerialize),f.asObject?R.call(W,a(this,p,B,M)):R.apply(W,B),f.transmit){const N=f.transmit.level||c.level,V=i.levels.values[N],z=i.levels.values[p];if(z<V)return;d(this,{ts:M,methodLevel:p,methodValue:z,transmitLevel:N,transmitValue:i.levels.values[f.transmit.level||c.level],send:f.transmit.send,val:c.levelVal},B)}}}(c[p]))}function a(f,c,p,R){f._serialize&&l(p,f._serialize,f.serializers,f._stdErrSerialize);const C=p.slice();let M=C[0];const B={};R&&(B.time=R),B.level=i.levels.values[c];let W=(f._childLevel|0)+1;if(W<1&&(W=1),M!==null&&typeof M=="object"){for(;W--&&typeof C[0]=="object";)Object.assign(B,C.shift());M=C.length?t(C.shift(),C):void 0}else typeof M=="string"&&(M=t(C.shift(),C));return M!==void 0&&(B.msg=M),B}function l(f,c,p,R){for(const C in f)if(R&&f[C]instanceof Error)f[C]=i.stdSerializers.err(f[C]);else if(typeof f[C]=="object"&&!Array.isArray(f[C]))for(const M in f[C])c&&c.indexOf(M)>-1&&M in p&&(f[C][M]=p[M](f[C][M]))}function h(f,c,p){return function(){const R=new Array(1+arguments.length);R[0]=c;for(var C=1;C<R.length;C++)R[C]=arguments[C-1];return f[p].apply(this,R)}}function d(f,c,p){const R=c.send,C=c.ts,M=c.methodLevel,B=c.methodValue,W=c.val,A=f._logEvent.bindings;l(p,f._serialize||Object.keys(f.serializers),f.serializers,f._stdErrSerialize===void 0?!0:f._stdErrSerialize),f._logEvent.ts=C,f._logEvent.messages=p.filter(function(N){return A.indexOf(N)===-1}),f._logEvent.level.label=M,f._logEvent.level.value=B,R(M,f._logEvent,W),f._logEvent=m(A)}function m(f){return{ts:0,messages:[],bindings:f||[],level:{label:"",value:0}}}function w(f){const c={type:f.constructor.name,msg:f.message,stack:f.stack};for(const p in f)c[p]===void 0&&(c[p]=f[p]);return c}function y(f){return typeof f.timestamp=="function"?f.timestamp:f.timestamp===!1?I:v}function b(){return{}}function _(f){return f}function D(){}function I(){return!1}function v(){return Date.now()}function E(){return Math.round(Date.now()/1e3)}function g(){return new Date(Date.now()).toISOString()}function x(){function f(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return f(self)||f(window)||f(this)||{}}}return ho}var Wr={},al;function cl(){return al||(al=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.PINO_CUSTOM_CONTEXT_KEY=Wr.PINO_LOGGER_DEFAULTS=void 0,Wr.PINO_LOGGER_DEFAULTS={level:"info"},Wr.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Wr}var Ot={},ll;function m0(){if(ll)return Ot;ll=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.generateChildLogger=Ot.formatChildLoggerContext=Ot.getLoggerContext=Ot.setBrowserLoggerContext=Ot.getBrowserLoggerContext=Ot.getDefaultLoggerOptions=void 0;const t=cl();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}Ot.getDefaultLoggerOptions=e;function r(a,l=t.PINO_CUSTOM_CONTEXT_KEY){return a[l]||""}Ot.getBrowserLoggerContext=r;function n(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){return a[h]=l,a}Ot.setBrowserLoggerContext=n;function i(a,l=t.PINO_CUSTOM_CONTEXT_KEY){let h="";return typeof a.bindings>"u"?h=r(a,l):h=a.bindings().context||"",h}Ot.getLoggerContext=i;function s(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){const d=i(a,h);return d.trim()?`${d}/${l}`:l}Ot.formatChildLoggerContext=s;function o(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(a,l,h),m=a.child({context:d});return n(m,d,h)}return Ot.generateChildLogger=o,Ot}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=Ht,r=e.__importDefault(g0());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(cl(),t),e.__exportStar(m0(),t)})(De);let w0=class extends qr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},y0=class extends qr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},v0=class{constructor(e,r){this.logger=e,this.core=r}},b0=class extends qr{constructor(e,r){super(),this.relayer=e,this.logger=r}},_0=class extends qr{constructor(e){super()}},E0=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},S0=class extends qr{constructor(e,r){super(),this.relayer=e,this.logger=r}},x0=class extends qr{constructor(e,r){super(),this.core=e,this.logger=r}},D0=class{constructor(e,r){this.projectId=e,this.logger=r}},O0=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},I0=class{constructor(e){this.client=e}};const C0=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),A0=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function ul(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return A0(t)}catch{return t}}function fo(t){return typeof t=="string"?t:C0(t)||""}var po={},mn={},qi={},Hi={};Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.BrowserRandomSource=void 0;const hl=65536;class $0{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=hl)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,hl)));return r}}Hi.BrowserRandomSource=$0;function T0(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wi={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});function R0(t){for(var e=0;e<t.length;e++)t[e]=0;return t}jt.wipe=R0;const P0=Qs(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.NodeRandomSource=void 0;const N0=jt;class L0{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof T0<"u"){const e=P0;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,N0.wipe)(r),n}}Wi.NodeRandomSource=L0,Object.defineProperty(qi,"__esModule",{value:!0}),qi.SystemRandomSource=void 0;const M0=Hi,U0=Wi;class F0{constructor(){if(this.isAvailable=!1,this.name="",this._source=new M0.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new U0.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}qi.SystemRandomSource=F0;var oe={},dl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,l){var h=a>>>16&65535,d=a&65535,m=l>>>16&65535,w=l&65535;return d*w+(h*w+d*m<<16>>>0)|0}t.mul=Math.imul||e;function r(a,l){return a+l|0}t.add=r;function n(a,l){return a-l|0}t.sub=n;function i(a,l){return a<<l|a>>>32-l}t.rotl=i;function s(a,l){return a<<32-l|a>>>l}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(dl),Object.defineProperty(oe,"__esModule",{value:!0});var fl=dl;function j0(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}oe.readInt16BE=j0;function B0(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}oe.readUint16BE=B0;function k0(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}oe.readInt16LE=k0;function z0(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}oe.readUint16LE=z0;function pl(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}oe.writeUint16BE=pl,oe.writeInt16BE=pl;function gl(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}oe.writeUint16LE=gl,oe.writeInt16LE=gl;function go(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}oe.readInt32BE=go;function mo(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}oe.readUint32BE=mo;function wo(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}oe.readInt32LE=wo;function yo(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}oe.readUint32LE=yo;function Vi(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}oe.writeUint32BE=Vi,oe.writeInt32BE=Vi;function Ki(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}oe.writeUint32LE=Ki,oe.writeInt32LE=Ki;function q0(t,e){e===void 0&&(e=0);var r=go(t,e),n=go(t,e+4);return r*4294967296+n-(n>>31)*4294967296}oe.readInt64BE=q0;function H0(t,e){e===void 0&&(e=0);var r=mo(t,e),n=mo(t,e+4);return r*4294967296+n}oe.readUint64BE=H0;function W0(t,e){e===void 0&&(e=0);var r=wo(t,e),n=wo(t,e+4);return n*4294967296+r-(r>>31)*4294967296}oe.readInt64LE=W0;function V0(t,e){e===void 0&&(e=0);var r=yo(t,e),n=yo(t,e+4);return n*4294967296+r}oe.readUint64LE=V0;function ml(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Vi(t/4294967296>>>0,e,r),Vi(t>>>0,e,r+4),e}oe.writeUint64BE=ml,oe.writeInt64BE=ml;function wl(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Ki(t>>>0,e,r),Ki(t/4294967296>>>0,e,r+4),e}oe.writeUint64LE=wl,oe.writeInt64LE=wl;function K0(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}oe.readUintBE=K0;function G0(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}oe.readUintLE=G0;function Y0(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!fl.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}oe.writeUintBE=Y0;function J0(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!fl.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}oe.writeUintLE=J0;function Z0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}oe.readFloat32BE=Z0;function Q0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}oe.readFloat32LE=Q0;function X0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}oe.readFloat64BE=X0;function e1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}oe.readFloat64LE=e1;function t1(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}oe.writeFloat32BE=t1;function r1(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}oe.writeFloat32LE=r1;function n1(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}oe.writeFloat64BE=n1;function i1(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}oe.writeFloat64LE=i1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=qi,r=oe,n=jt;t.defaultRandomSource=new e.SystemRandomSource;function i(h,d=t.defaultRandomSource){return d.randomBytes(h)}t.randomBytes=i;function s(h=t.defaultRandomSource){const d=i(4,h),m=(0,r.readUint32LE)(d);return(0,n.wipe)(d),m}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(h,d=o,m=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let w="";const y=d.length,b=256-256%y;for(;h>0;){const _=i(Math.ceil(h*256/b),m);for(let D=0;D<_.length&&h>0;D++){const I=_[D];I<b&&(w+=d.charAt(I%y),h--)}(0,n.wipe)(_)}return w}t.randomString=a;function l(h,d=o,m=t.defaultRandomSource){const w=Math.ceil(h/(Math.log(d.length)/Math.LN2));return a(w,d,m)}t.randomStringForEntropy=l}(mn);var yl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=oe,r=jt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&h>0;)this._buffer[this._bufferLength++]=l[d++],h--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,l,d,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[d++],h--;return this},a.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,d=this._bufferLength,m=h/536870912|0,w=h<<3,y=h%128<112?128:256;this._buffer[d]=128;for(var b=d+1;b<y-8;b++)this._buffer[b]=0;e.writeUint32BE(m,this._buffer,y-8),e.writeUint32BE(w,this._buffer,y-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,y),this._finished=!0}for(var b=0;b<this.digestLength/8;b++)e.writeUint32BE(this._stateHi[b],l,b*8),e.writeUint32BE(this._stateLo[b],l,b*8+4);return this},a.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(l){return this._stateHi.set(l.stateHi),this._stateLo.set(l.stateLo),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(l){r.wipe(l.stateHi),r.wipe(l.stateLo),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,l,h,d,m,w,y){for(var b=h[0],_=h[1],D=h[2],I=h[3],v=h[4],E=h[5],g=h[6],x=h[7],f=d[0],c=d[1],p=d[2],R=d[3],C=d[4],M=d[5],B=d[6],W=d[7],A,N,V,z,F,k,U,q;y>=128;){for(var ie=0;ie<16;ie++){var H=8*ie+w;a[ie]=e.readUint32BE(m,H),l[ie]=e.readUint32BE(m,H+4)}for(var ie=0;ie<80;ie++){var te=b,Z=_,re=D,L=I,P=v,$=E,u=g,O=x,K=f,J=c,we=p,Oe=R,be=C,$e=M,Je=B,We=W;if(A=x,N=W,F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=(v>>>14|C<<32-14)^(v>>>18|C<<32-18)^(C>>>41-32|v<<32-(41-32)),N=(C>>>14|v<<32-14)^(C>>>18|v<<32-18)^(v>>>41-32|C<<32-(41-32)),F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,A=v&E^~v&g,N=C&M^~C&B,F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,A=i[ie*2],N=i[ie*2+1],F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,A=a[ie%16],N=l[ie%16],F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,V=U&65535|q<<16,z=F&65535|k<<16,A=V,N=z,F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=(b>>>28|f<<32-28)^(f>>>34-32|b<<32-(34-32))^(f>>>39-32|b<<32-(39-32)),N=(f>>>28|b<<32-28)^(b>>>34-32|f<<32-(34-32))^(b>>>39-32|f<<32-(39-32)),F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,A=b&_^b&D^_&D,N=f&c^f&p^c&p,F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,O=U&65535|q<<16,We=F&65535|k<<16,A=L,N=Oe,F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=V,N=z,F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,L=U&65535|q<<16,Oe=F&65535|k<<16,_=te,D=Z,I=re,v=L,E=P,g=$,x=u,b=O,c=K,p=J,R=we,C=Oe,M=be,B=$e,W=Je,f=We,ie%16===15)for(var H=0;H<16;H++)A=a[H],N=l[H],F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=a[(H+9)%16],N=l[(H+9)%16],F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,V=a[(H+1)%16],z=l[(H+1)%16],A=(V>>>1|z<<32-1)^(V>>>8|z<<32-8)^V>>>7,N=(z>>>1|V<<32-1)^(z>>>8|V<<32-8)^(z>>>7|V<<32-7),F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,V=a[(H+14)%16],z=l[(H+14)%16],A=(V>>>19|z<<32-19)^(z>>>61-32|V<<32-(61-32))^V>>>6,N=(z>>>19|V<<32-19)^(V>>>61-32|z<<32-(61-32))^(z>>>6|V<<32-6),F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,a[H]=U&65535|q<<16,l[H]=F&65535|k<<16}A=b,N=f,F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=h[0],N=d[0],F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[0]=b=U&65535|q<<16,d[0]=f=F&65535|k<<16,A=_,N=c,F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=h[1],N=d[1],F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[1]=_=U&65535|q<<16,d[1]=c=F&65535|k<<16,A=D,N=p,F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=h[2],N=d[2],F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[2]=D=U&65535|q<<16,d[2]=p=F&65535|k<<16,A=I,N=R,F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=h[3],N=d[3],F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[3]=I=U&65535|q<<16,d[3]=R=F&65535|k<<16,A=v,N=C,F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=h[4],N=d[4],F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[4]=v=U&65535|q<<16,d[4]=C=F&65535|k<<16,A=E,N=M,F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=h[5],N=d[5],F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[5]=E=U&65535|q<<16,d[5]=M=F&65535|k<<16,A=g,N=B,F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=h[6],N=d[6],F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[6]=g=U&65535|q<<16,d[6]=B=F&65535|k<<16,A=x,N=W,F=N&65535,k=N>>>16,U=A&65535,q=A>>>16,A=h[7],N=d[7],F+=N&65535,k+=N>>>16,U+=A&65535,q+=A>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[7]=x=U&65535|q<<16,d[7]=W=F&65535|k<<16,w+=128,y-=128}return w}function o(a){var l=new n;l.update(a);var h=l.digest();return l.clean(),h}t.hash=o})(yl),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=mn,r=yl,n=jt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(L){const P=new Float64Array(16);if(L)for(let $=0;$<L.length;$++)P[$]=L[$];return P}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),l=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),m=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),w=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(L,P){for(let $=0;$<16;$++)L[$]=P[$]|0}function b(L){let P=1;for(let $=0;$<16;$++){let u=L[$]+P+65535;P=Math.floor(u/65536),L[$]=u-P*65536}L[0]+=P-1+37*(P-1)}function _(L,P,$){const u=~($-1);for(let O=0;O<16;O++){const K=u&(L[O]^P[O]);L[O]^=K,P[O]^=K}}function D(L,P){const $=i(),u=i();for(let O=0;O<16;O++)u[O]=P[O];b(u),b(u),b(u);for(let O=0;O<2;O++){$[0]=u[0]-65517;for(let J=1;J<15;J++)$[J]=u[J]-65535-($[J-1]>>16&1),$[J-1]&=65535;$[15]=u[15]-32767-($[14]>>16&1);const K=$[15]>>16&1;$[14]&=65535,_(u,$,1-K)}for(let O=0;O<16;O++)L[2*O]=u[O]&255,L[2*O+1]=u[O]>>8}function I(L,P){let $=0;for(let u=0;u<32;u++)$|=L[u]^P[u];return(1&$-1>>>8)-1}function v(L,P){const $=new Uint8Array(32),u=new Uint8Array(32);return D($,L),D(u,P),I($,u)}function E(L){const P=new Uint8Array(32);return D(P,L),P[0]&1}function g(L,P){for(let $=0;$<16;$++)L[$]=P[2*$]+(P[2*$+1]<<8);L[15]&=32767}function x(L,P,$){for(let u=0;u<16;u++)L[u]=P[u]+$[u]}function f(L,P,$){for(let u=0;u<16;u++)L[u]=P[u]-$[u]}function c(L,P,$){let u,O,K=0,J=0,we=0,Oe=0,be=0,$e=0,Je=0,We=0,xe=0,_e=0,ye=0,ge=0,fe=0,he=0,ue=0,se=0,me=0,Ee=0,ae=0,Ie=0,Ce=0,Pe=0,Ne=0,Te=0,Qt=0,ar=0,Pr=0,zt=0,an=0,Ni=0,js=0,Qe=$[0],Ve=$[1],Xe=$[2],et=$[3],tt=$[4],Ke=$[5],lt=$[6],ut=$[7],ht=$[8],dt=$[9],ft=$[10],st=$[11],rt=$[12],ke=$[13],pt=$[14],gt=$[15];u=P[0],K+=u*Qe,J+=u*Ve,we+=u*Xe,Oe+=u*et,be+=u*tt,$e+=u*Ke,Je+=u*lt,We+=u*ut,xe+=u*ht,_e+=u*dt,ye+=u*ft,ge+=u*st,fe+=u*rt,he+=u*ke,ue+=u*pt,se+=u*gt,u=P[1],J+=u*Qe,we+=u*Ve,Oe+=u*Xe,be+=u*et,$e+=u*tt,Je+=u*Ke,We+=u*lt,xe+=u*ut,_e+=u*ht,ye+=u*dt,ge+=u*ft,fe+=u*st,he+=u*rt,ue+=u*ke,se+=u*pt,me+=u*gt,u=P[2],we+=u*Qe,Oe+=u*Ve,be+=u*Xe,$e+=u*et,Je+=u*tt,We+=u*Ke,xe+=u*lt,_e+=u*ut,ye+=u*ht,ge+=u*dt,fe+=u*ft,he+=u*st,ue+=u*rt,se+=u*ke,me+=u*pt,Ee+=u*gt,u=P[3],Oe+=u*Qe,be+=u*Ve,$e+=u*Xe,Je+=u*et,We+=u*tt,xe+=u*Ke,_e+=u*lt,ye+=u*ut,ge+=u*ht,fe+=u*dt,he+=u*ft,ue+=u*st,se+=u*rt,me+=u*ke,Ee+=u*pt,ae+=u*gt,u=P[4],be+=u*Qe,$e+=u*Ve,Je+=u*Xe,We+=u*et,xe+=u*tt,_e+=u*Ke,ye+=u*lt,ge+=u*ut,fe+=u*ht,he+=u*dt,ue+=u*ft,se+=u*st,me+=u*rt,Ee+=u*ke,ae+=u*pt,Ie+=u*gt,u=P[5],$e+=u*Qe,Je+=u*Ve,We+=u*Xe,xe+=u*et,_e+=u*tt,ye+=u*Ke,ge+=u*lt,fe+=u*ut,he+=u*ht,ue+=u*dt,se+=u*ft,me+=u*st,Ee+=u*rt,ae+=u*ke,Ie+=u*pt,Ce+=u*gt,u=P[6],Je+=u*Qe,We+=u*Ve,xe+=u*Xe,_e+=u*et,ye+=u*tt,ge+=u*Ke,fe+=u*lt,he+=u*ut,ue+=u*ht,se+=u*dt,me+=u*ft,Ee+=u*st,ae+=u*rt,Ie+=u*ke,Ce+=u*pt,Pe+=u*gt,u=P[7],We+=u*Qe,xe+=u*Ve,_e+=u*Xe,ye+=u*et,ge+=u*tt,fe+=u*Ke,he+=u*lt,ue+=u*ut,se+=u*ht,me+=u*dt,Ee+=u*ft,ae+=u*st,Ie+=u*rt,Ce+=u*ke,Pe+=u*pt,Ne+=u*gt,u=P[8],xe+=u*Qe,_e+=u*Ve,ye+=u*Xe,ge+=u*et,fe+=u*tt,he+=u*Ke,ue+=u*lt,se+=u*ut,me+=u*ht,Ee+=u*dt,ae+=u*ft,Ie+=u*st,Ce+=u*rt,Pe+=u*ke,Ne+=u*pt,Te+=u*gt,u=P[9],_e+=u*Qe,ye+=u*Ve,ge+=u*Xe,fe+=u*et,he+=u*tt,ue+=u*Ke,se+=u*lt,me+=u*ut,Ee+=u*ht,ae+=u*dt,Ie+=u*ft,Ce+=u*st,Pe+=u*rt,Ne+=u*ke,Te+=u*pt,Qt+=u*gt,u=P[10],ye+=u*Qe,ge+=u*Ve,fe+=u*Xe,he+=u*et,ue+=u*tt,se+=u*Ke,me+=u*lt,Ee+=u*ut,ae+=u*ht,Ie+=u*dt,Ce+=u*ft,Pe+=u*st,Ne+=u*rt,Te+=u*ke,Qt+=u*pt,ar+=u*gt,u=P[11],ge+=u*Qe,fe+=u*Ve,he+=u*Xe,ue+=u*et,se+=u*tt,me+=u*Ke,Ee+=u*lt,ae+=u*ut,Ie+=u*ht,Ce+=u*dt,Pe+=u*ft,Ne+=u*st,Te+=u*rt,Qt+=u*ke,ar+=u*pt,Pr+=u*gt,u=P[12],fe+=u*Qe,he+=u*Ve,ue+=u*Xe,se+=u*et,me+=u*tt,Ee+=u*Ke,ae+=u*lt,Ie+=u*ut,Ce+=u*ht,Pe+=u*dt,Ne+=u*ft,Te+=u*st,Qt+=u*rt,ar+=u*ke,Pr+=u*pt,zt+=u*gt,u=P[13],he+=u*Qe,ue+=u*Ve,se+=u*Xe,me+=u*et,Ee+=u*tt,ae+=u*Ke,Ie+=u*lt,Ce+=u*ut,Pe+=u*ht,Ne+=u*dt,Te+=u*ft,Qt+=u*st,ar+=u*rt,Pr+=u*ke,zt+=u*pt,an+=u*gt,u=P[14],ue+=u*Qe,se+=u*Ve,me+=u*Xe,Ee+=u*et,ae+=u*tt,Ie+=u*Ke,Ce+=u*lt,Pe+=u*ut,Ne+=u*ht,Te+=u*dt,Qt+=u*ft,ar+=u*st,Pr+=u*rt,zt+=u*ke,an+=u*pt,Ni+=u*gt,u=P[15],se+=u*Qe,me+=u*Ve,Ee+=u*Xe,ae+=u*et,Ie+=u*tt,Ce+=u*Ke,Pe+=u*lt,Ne+=u*ut,Te+=u*ht,Qt+=u*dt,ar+=u*ft,Pr+=u*st,zt+=u*rt,an+=u*ke,Ni+=u*pt,js+=u*gt,K+=38*me,J+=38*Ee,we+=38*ae,Oe+=38*Ie,be+=38*Ce,$e+=38*Pe,Je+=38*Ne,We+=38*Te,xe+=38*Qt,_e+=38*ar,ye+=38*Pr,ge+=38*zt,fe+=38*an,he+=38*Ni,ue+=38*js,O=1,u=K+O+65535,O=Math.floor(u/65536),K=u-O*65536,u=J+O+65535,O=Math.floor(u/65536),J=u-O*65536,u=we+O+65535,O=Math.floor(u/65536),we=u-O*65536,u=Oe+O+65535,O=Math.floor(u/65536),Oe=u-O*65536,u=be+O+65535,O=Math.floor(u/65536),be=u-O*65536,u=$e+O+65535,O=Math.floor(u/65536),$e=u-O*65536,u=Je+O+65535,O=Math.floor(u/65536),Je=u-O*65536,u=We+O+65535,O=Math.floor(u/65536),We=u-O*65536,u=xe+O+65535,O=Math.floor(u/65536),xe=u-O*65536,u=_e+O+65535,O=Math.floor(u/65536),_e=u-O*65536,u=ye+O+65535,O=Math.floor(u/65536),ye=u-O*65536,u=ge+O+65535,O=Math.floor(u/65536),ge=u-O*65536,u=fe+O+65535,O=Math.floor(u/65536),fe=u-O*65536,u=he+O+65535,O=Math.floor(u/65536),he=u-O*65536,u=ue+O+65535,O=Math.floor(u/65536),ue=u-O*65536,u=se+O+65535,O=Math.floor(u/65536),se=u-O*65536,K+=O-1+37*(O-1),O=1,u=K+O+65535,O=Math.floor(u/65536),K=u-O*65536,u=J+O+65535,O=Math.floor(u/65536),J=u-O*65536,u=we+O+65535,O=Math.floor(u/65536),we=u-O*65536,u=Oe+O+65535,O=Math.floor(u/65536),Oe=u-O*65536,u=be+O+65535,O=Math.floor(u/65536),be=u-O*65536,u=$e+O+65535,O=Math.floor(u/65536),$e=u-O*65536,u=Je+O+65535,O=Math.floor(u/65536),Je=u-O*65536,u=We+O+65535,O=Math.floor(u/65536),We=u-O*65536,u=xe+O+65535,O=Math.floor(u/65536),xe=u-O*65536,u=_e+O+65535,O=Math.floor(u/65536),_e=u-O*65536,u=ye+O+65535,O=Math.floor(u/65536),ye=u-O*65536,u=ge+O+65535,O=Math.floor(u/65536),ge=u-O*65536,u=fe+O+65535,O=Math.floor(u/65536),fe=u-O*65536,u=he+O+65535,O=Math.floor(u/65536),he=u-O*65536,u=ue+O+65535,O=Math.floor(u/65536),ue=u-O*65536,u=se+O+65535,O=Math.floor(u/65536),se=u-O*65536,K+=O-1+37*(O-1),L[0]=K,L[1]=J,L[2]=we,L[3]=Oe,L[4]=be,L[5]=$e,L[6]=Je,L[7]=We,L[8]=xe,L[9]=_e,L[10]=ye,L[11]=ge,L[12]=fe,L[13]=he,L[14]=ue,L[15]=se}function p(L,P){c(L,P,P)}function R(L,P){const $=i();let u;for(u=0;u<16;u++)$[u]=P[u];for(u=253;u>=0;u--)p($,$),u!==2&&u!==4&&c($,$,P);for(u=0;u<16;u++)L[u]=$[u]}function C(L,P){const $=i();let u;for(u=0;u<16;u++)$[u]=P[u];for(u=250;u>=0;u--)p($,$),u!==1&&c($,$,P);for(u=0;u<16;u++)L[u]=$[u]}function M(L,P){const $=i(),u=i(),O=i(),K=i(),J=i(),we=i(),Oe=i(),be=i(),$e=i();f($,L[1],L[0]),f($e,P[1],P[0]),c($,$,$e),x(u,L[0],L[1]),x($e,P[0],P[1]),c(u,u,$e),c(O,L[3],P[3]),c(O,O,h),c(K,L[2],P[2]),x(K,K,K),f(J,u,$),f(we,K,O),x(Oe,K,O),x(be,u,$),c(L[0],J,we),c(L[1],be,Oe),c(L[2],Oe,we),c(L[3],J,be)}function B(L,P,$){for(let u=0;u<4;u++)_(L[u],P[u],$)}function W(L,P){const $=i(),u=i(),O=i();R(O,P[2]),c($,P[0],O),c(u,P[1],O),D(L,u),L[31]^=E($)<<7}function A(L,P,$){y(L[0],o),y(L[1],a),y(L[2],a),y(L[3],o);for(let u=255;u>=0;--u){const O=$[u/8|0]>>(u&7)&1;B(L,P,O),M(P,L),M(L,L),B(L,P,O)}}function N(L,P){const $=[i(),i(),i(),i()];y($[0],d),y($[1],m),y($[2],a),c($[3],d,m),A(L,$,P)}function V(L){if(L.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const P=(0,r.hash)(L);P[0]&=248,P[31]&=127,P[31]|=64;const $=new Uint8Array(32),u=[i(),i(),i(),i()];N(u,P),W($,u);const O=new Uint8Array(64);return O.set(L),O.set($,32),{publicKey:$,secretKey:O}}t.generateKeyPairFromSeed=V;function z(L){const P=(0,e.randomBytes)(32,L),$=V(P);return(0,n.wipe)(P),$}t.generateKeyPair=z;function F(L){if(L.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(L.subarray(32))}t.extractPublicKeyFromSecretKey=F;const k=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function U(L,P){let $,u,O,K;for(u=63;u>=32;--u){for($=0,O=u-32,K=u-12;O<K;++O)P[O]+=$-16*P[u]*k[O-(u-32)],$=Math.floor((P[O]+128)/256),P[O]-=$*256;P[O]+=$,P[u]=0}for($=0,O=0;O<32;O++)P[O]+=$-(P[31]>>4)*k[O],$=P[O]>>8,P[O]&=255;for(O=0;O<32;O++)P[O]-=$*k[O];for(u=0;u<32;u++)P[u+1]+=P[u]>>8,L[u]=P[u]&255}function q(L){const P=new Float64Array(64);for(let $=0;$<64;$++)P[$]=L[$];for(let $=0;$<64;$++)L[$]=0;U(L,P)}function ie(L,P){const $=new Float64Array(64),u=[i(),i(),i(),i()],O=(0,r.hash)(L.subarray(0,32));O[0]&=248,O[31]&=127,O[31]|=64;const K=new Uint8Array(64);K.set(O.subarray(32),32);const J=new r.SHA512;J.update(K.subarray(32)),J.update(P);const we=J.digest();J.clean(),q(we),N(u,we),W(K,u),J.reset(),J.update(K.subarray(0,32)),J.update(L.subarray(32)),J.update(P);const Oe=J.digest();q(Oe);for(let be=0;be<32;be++)$[be]=we[be];for(let be=0;be<32;be++)for(let $e=0;$e<32;$e++)$[be+$e]+=Oe[be]*O[$e];return U(K.subarray(32),$),K}t.sign=ie;function H(L,P){const $=i(),u=i(),O=i(),K=i(),J=i(),we=i(),Oe=i();return y(L[2],a),g(L[1],P),p(O,L[1]),c(K,O,l),f(O,O,L[2]),x(K,L[2],K),p(J,K),p(we,J),c(Oe,we,J),c($,Oe,O),c($,$,K),C($,$),c($,$,O),c($,$,K),c($,$,K),c(L[0],$,K),p(u,L[0]),c(u,u,K),v(u,O)&&c(L[0],L[0],w),p(u,L[0]),c(u,u,K),v(u,O)?-1:(E(L[0])===P[31]>>7&&f(L[0],o,L[0]),c(L[3],L[0],L[1]),0)}function te(L,P,$){const u=new Uint8Array(32),O=[i(),i(),i(),i()],K=[i(),i(),i(),i()];if($.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(H(K,L))return!1;const J=new r.SHA512;J.update($.subarray(0,32)),J.update(L),J.update(P);const we=J.digest();return q(we),A(O,K,we),N(K,$.subarray(32)),M(O,K),W(u,O),!I($,u)}t.verify=te;function Z(L){let P=[i(),i(),i(),i()];if(H(P,L))throw new Error("Ed25519: invalid public key");let $=i(),u=i(),O=P[1];x($,a,O),f(u,a,O),R(u,u),c($,$,u);let K=new Uint8Array(32);return D(K,$),K}t.convertPublicKeyToX25519=Z;function re(L){const P=(0,r.hash)(L.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;const $=new Uint8Array(P.subarray(0,32));return(0,n.wipe)(P),$}t.convertSecretKeyToX25519=re}(po);const s1="EdDSA",o1="JWT",vl=".",bl="base64url",a1="utf8",c1="utf8",l1=":",u1="did",h1="key",_l="base58btc",d1="z",f1="K36",p1=32;function vo(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function El(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?vo(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function bo(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=El(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return vo(r)}function g1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,l=t.charAt(0),h=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function m(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var _=0,D=0,I=0,v=b.length;I!==v&&b[I]===0;)I++,_++;for(var E=(v-I)*d+1>>>0,g=new Uint8Array(E);I!==v;){for(var x=b[I],f=0,c=E-1;(x!==0||f<D)&&c!==-1;c--,f++)x+=256*g[c]>>>0,g[c]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");D=f,I++}for(var p=E-D;p!==E&&g[p]===0;)p++;for(var R=l.repeat(_);p<E;++p)R+=t.charAt(g[p]);return R}function w(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var _=0;if(b[_]!==" "){for(var D=0,I=0;b[_]===l;)D++,_++;for(var v=(b.length-_)*h+1>>>0,E=new Uint8Array(v);b[_];){var g=r[b.charCodeAt(_)];if(g===255)return;for(var x=0,f=v-1;(g!==0||x<I)&&f!==-1;f--,x++)g+=a*E[f]>>>0,E[f]=g%256>>>0,g=g/256>>>0;if(g!==0)throw new Error("Non-zero carry");I=x,_++}if(b[_]!==" "){for(var c=v-I;c!==v&&E[c]===0;)c++;for(var p=new Uint8Array(D+(v-c)),R=D;c!==v;)p[R++]=E[c++];return p}}}function y(b){var _=w(b);if(_)return _;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:w,decode:y}}var m1=g1,w1=m1;const y1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},v1=t=>new TextEncoder().encode(t),b1=t=>new TextDecoder().decode(t);class _1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class E1{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Sl(this,e)}}class S1{constructor(e){this.decoders=e}or(e){return Sl(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Sl=(t,e)=>new S1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class x1{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new _1(e,r,n),this.decoder=new E1(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Gi=({name:t,prefix:e,encode:r,decode:n})=>new x1(t,e,r,n),Jn=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=w1(r,e);return Gi({prefix:t,name:e,encode:n,decode:s=>y1(i(s))})},D1=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,l=0,h=0;for(let d=0;d<s;++d){const m=i[t[d]];if(m===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|m,a+=r,a>=8&&(a-=8,o[h++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},O1=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},wt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Gi({prefix:e,name:t,encode(i){return O1(i,n,r)},decode(i){return D1(i,n,r,t)}}),I1=Gi({prefix:"\0",name:"identity",encode:t=>b1(t),decode:t=>v1(t)}),C1=Object.freeze(Object.defineProperty({__proto__:null,identity:I1},Symbol.toStringTag,{value:"Module"})),A1=wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),$1=Object.freeze(Object.defineProperty({__proto__:null,base2:A1},Symbol.toStringTag,{value:"Module"})),T1=wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),R1=Object.freeze(Object.defineProperty({__proto__:null,base8:T1},Symbol.toStringTag,{value:"Module"})),P1=Jn({prefix:"9",name:"base10",alphabet:"0123456789"}),N1=Object.freeze(Object.defineProperty({__proto__:null,base10:P1},Symbol.toStringTag,{value:"Module"})),L1=wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),M1=wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),U1=Object.freeze(Object.defineProperty({__proto__:null,base16:L1,base16upper:M1},Symbol.toStringTag,{value:"Module"})),F1=wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),j1=wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),B1=wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),k1=wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),z1=wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),q1=wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),H1=wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),W1=wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),V1=wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),K1=Object.freeze(Object.defineProperty({__proto__:null,base32:F1,base32hex:z1,base32hexpad:H1,base32hexpadupper:W1,base32hexupper:q1,base32pad:B1,base32padupper:k1,base32upper:j1,base32z:V1},Symbol.toStringTag,{value:"Module"})),G1=Jn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Y1=Jn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),J1=Object.freeze(Object.defineProperty({__proto__:null,base36:G1,base36upper:Y1},Symbol.toStringTag,{value:"Module"})),Z1=Jn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Q1=Jn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),X1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Z1,base58flickr:Q1},Symbol.toStringTag,{value:"Module"})),ep=wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tp=wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),rp=wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),np=wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ip=Object.freeze(Object.defineProperty({__proto__:null,base64:ep,base64pad:tp,base64url:rp,base64urlpad:np},Symbol.toStringTag,{value:"Module"})),xl=Array.from(""),sp=xl.reduce((t,e,r)=>(t[r]=e,t),[]),op=xl.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function ap(t){return t.reduce((e,r)=>(e+=sp[r],e),"")}function cp(t){const e=[];for(const r of t){const n=op[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const lp=Gi({prefix:"",name:"base256emoji",encode:ap,decode:cp}),up=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:lp},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const Dl={...C1,...$1,...R1,...N1,...U1,...K1,...J1,...X1,...ip,...up};function Ol(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Il=Ol("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),_o=Ol("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=El(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Cl={utf8:Il,"utf-8":Il,hex:Dl.base16,latin1:_o,ascii:_o,binary:_o,...Dl};function It(t,e="utf8"){const r=Cl[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Pt(t,e="utf8"){const r=Cl[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?vo(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Yi(t){return It(Pt(fo(t),a1),bl)}function Al(t){const e=Pt(f1,_l),r=d1+It(bo([e,t]),_l);return[u1,h1,r].join(l1)}function hp(t){return It(t,bl)}function dp(t){return Pt([Yi(t.header),Yi(t.payload)].join(vl),c1)}function fp(t){return[Yi(t.header),Yi(t.payload),hp(t.signature)].join(vl)}function $l(t=mn.randomBytes(p1)){return po.generateKeyPairFromSeed(t)}async function pp(t,e,r,n,i=X.fromMiliseconds(Date.now())){const s={alg:s1,typ:o1},o=Al(n.publicKey),a=i+r,l={iss:o,sub:t,aud:e,iat:i,exp:a},h=dp({header:s,payload:l}),d=po.sign(n.secretKey,h);return fp({header:s,payload:l,signature:d})}var Eo={},Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});var _t=oe,So=jt,gp=20;function mp(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],m=r[19]<<24|r[18]<<16|r[17]<<8|r[16],w=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],b=r[31]<<24|r[30]<<16|r[29]<<8|r[28],_=e[3]<<24|e[2]<<16|e[1]<<8|e[0],D=e[7]<<24|e[6]<<16|e[5]<<8|e[4],I=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],E=n,g=i,x=s,f=o,c=a,p=l,R=h,C=d,M=m,B=w,W=y,A=b,N=_,V=D,z=I,F=v,k=0;k<gp;k+=2)E=E+c|0,N^=E,N=N>>>32-16|N<<16,M=M+N|0,c^=M,c=c>>>32-12|c<<12,g=g+p|0,V^=g,V=V>>>32-16|V<<16,B=B+V|0,p^=B,p=p>>>32-12|p<<12,x=x+R|0,z^=x,z=z>>>32-16|z<<16,W=W+z|0,R^=W,R=R>>>32-12|R<<12,f=f+C|0,F^=f,F=F>>>32-16|F<<16,A=A+F|0,C^=A,C=C>>>32-12|C<<12,x=x+R|0,z^=x,z=z>>>32-8|z<<8,W=W+z|0,R^=W,R=R>>>32-7|R<<7,f=f+C|0,F^=f,F=F>>>32-8|F<<8,A=A+F|0,C^=A,C=C>>>32-7|C<<7,g=g+p|0,V^=g,V=V>>>32-8|V<<8,B=B+V|0,p^=B,p=p>>>32-7|p<<7,E=E+c|0,N^=E,N=N>>>32-8|N<<8,M=M+N|0,c^=M,c=c>>>32-7|c<<7,E=E+p|0,F^=E,F=F>>>32-16|F<<16,W=W+F|0,p^=W,p=p>>>32-12|p<<12,g=g+R|0,N^=g,N=N>>>32-16|N<<16,A=A+N|0,R^=A,R=R>>>32-12|R<<12,x=x+C|0,V^=x,V=V>>>32-16|V<<16,M=M+V|0,C^=M,C=C>>>32-12|C<<12,f=f+c|0,z^=f,z=z>>>32-16|z<<16,B=B+z|0,c^=B,c=c>>>32-12|c<<12,x=x+C|0,V^=x,V=V>>>32-8|V<<8,M=M+V|0,C^=M,C=C>>>32-7|C<<7,f=f+c|0,z^=f,z=z>>>32-8|z<<8,B=B+z|0,c^=B,c=c>>>32-7|c<<7,g=g+R|0,N^=g,N=N>>>32-8|N<<8,A=A+N|0,R^=A,R=R>>>32-7|R<<7,E=E+p|0,F^=E,F=F>>>32-8|F<<8,W=W+F|0,p^=W,p=p>>>32-7|p<<7;_t.writeUint32LE(E+n|0,t,0),_t.writeUint32LE(g+i|0,t,4),_t.writeUint32LE(x+s|0,t,8),_t.writeUint32LE(f+o|0,t,12),_t.writeUint32LE(c+a|0,t,16),_t.writeUint32LE(p+l|0,t,20),_t.writeUint32LE(R+h|0,t,24),_t.writeUint32LE(C+d|0,t,28),_t.writeUint32LE(M+m|0,t,32),_t.writeUint32LE(B+w|0,t,36),_t.writeUint32LE(W+y|0,t,40),_t.writeUint32LE(A+b|0,t,44),_t.writeUint32LE(N+_|0,t,48),_t.writeUint32LE(V+D|0,t,52),_t.writeUint32LE(z+I|0,t,56),_t.writeUint32LE(F+v|0,t,60)}function Tl(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),l=0;l<r.length;l+=64){mp(a,s,t);for(var h=l;h<l+64&&h<r.length;h++)n[h]=r[h]^a[h-l];yp(s,0,o)}return So.wipe(a),i===0&&So.wipe(s),n}Ji.streamXOR=Tl;function wp(t,e,r,n){return n===void 0&&(n=0),So.wipe(r),Tl(t,e,r,r,n)}Ji.stream=wp;function yp(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Rl={},Er={};Object.defineProperty(Er,"__esModule",{value:!0});function vp(t,e,r){return~(t-1)&e|t-1&r}Er.select=vp;function bp(t,e){return(t|0)-(e|0)-1>>>31&1}Er.lessOrEqual=bp;function Pl(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Er.compare=Pl;function _p(t,e){return t.length===0||e.length===0?!1:Pl(t,e)!==0}Er.equal=_p,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Er,r=jt;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var l=a[0]|a[1]<<8;this._r[0]=l&8191;var h=a[2]|a[3]<<8;this._r[1]=(l>>>13|h<<3)&8191;var d=a[4]|a[5]<<8;this._r[2]=(h>>>10|d<<6)&7939;var m=a[6]|a[7]<<8;this._r[3]=(d>>>7|m<<9)&8191;var w=a[8]|a[9]<<8;this._r[4]=(m>>>4|w<<12)&255,this._r[5]=w>>>1&8190;var y=a[10]|a[11]<<8;this._r[6]=(w>>>14|y<<2)&8191;var b=a[12]|a[13]<<8;this._r[7]=(y>>>11|b<<5)&8065;var _=a[14]|a[15]<<8;this._r[8]=(b>>>8|_<<8)&8191,this._r[9]=_>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,l,h){for(var d=this._fin?0:2048,m=this._h[0],w=this._h[1],y=this._h[2],b=this._h[3],_=this._h[4],D=this._h[5],I=this._h[6],v=this._h[7],E=this._h[8],g=this._h[9],x=this._r[0],f=this._r[1],c=this._r[2],p=this._r[3],R=this._r[4],C=this._r[5],M=this._r[6],B=this._r[7],W=this._r[8],A=this._r[9];h>=16;){var N=a[l+0]|a[l+1]<<8;m+=N&8191;var V=a[l+2]|a[l+3]<<8;w+=(N>>>13|V<<3)&8191;var z=a[l+4]|a[l+5]<<8;y+=(V>>>10|z<<6)&8191;var F=a[l+6]|a[l+7]<<8;b+=(z>>>7|F<<9)&8191;var k=a[l+8]|a[l+9]<<8;_+=(F>>>4|k<<12)&8191,D+=k>>>1&8191;var U=a[l+10]|a[l+11]<<8;I+=(k>>>14|U<<2)&8191;var q=a[l+12]|a[l+13]<<8;v+=(U>>>11|q<<5)&8191;var ie=a[l+14]|a[l+15]<<8;E+=(q>>>8|ie<<8)&8191,g+=ie>>>5|d;var H=0,te=H;te+=m*x,te+=w*(5*A),te+=y*(5*W),te+=b*(5*B),te+=_*(5*M),H=te>>>13,te&=8191,te+=D*(5*C),te+=I*(5*R),te+=v*(5*p),te+=E*(5*c),te+=g*(5*f),H+=te>>>13,te&=8191;var Z=H;Z+=m*f,Z+=w*x,Z+=y*(5*A),Z+=b*(5*W),Z+=_*(5*B),H=Z>>>13,Z&=8191,Z+=D*(5*M),Z+=I*(5*C),Z+=v*(5*R),Z+=E*(5*p),Z+=g*(5*c),H+=Z>>>13,Z&=8191;var re=H;re+=m*c,re+=w*f,re+=y*x,re+=b*(5*A),re+=_*(5*W),H=re>>>13,re&=8191,re+=D*(5*B),re+=I*(5*M),re+=v*(5*C),re+=E*(5*R),re+=g*(5*p),H+=re>>>13,re&=8191;var L=H;L+=m*p,L+=w*c,L+=y*f,L+=b*x,L+=_*(5*A),H=L>>>13,L&=8191,L+=D*(5*W),L+=I*(5*B),L+=v*(5*M),L+=E*(5*C),L+=g*(5*R),H+=L>>>13,L&=8191;var P=H;P+=m*R,P+=w*p,P+=y*c,P+=b*f,P+=_*x,H=P>>>13,P&=8191,P+=D*(5*A),P+=I*(5*W),P+=v*(5*B),P+=E*(5*M),P+=g*(5*C),H+=P>>>13,P&=8191;var $=H;$+=m*C,$+=w*R,$+=y*p,$+=b*c,$+=_*f,H=$>>>13,$&=8191,$+=D*x,$+=I*(5*A),$+=v*(5*W),$+=E*(5*B),$+=g*(5*M),H+=$>>>13,$&=8191;var u=H;u+=m*M,u+=w*C,u+=y*R,u+=b*p,u+=_*c,H=u>>>13,u&=8191,u+=D*f,u+=I*x,u+=v*(5*A),u+=E*(5*W),u+=g*(5*B),H+=u>>>13,u&=8191;var O=H;O+=m*B,O+=w*M,O+=y*C,O+=b*R,O+=_*p,H=O>>>13,O&=8191,O+=D*c,O+=I*f,O+=v*x,O+=E*(5*A),O+=g*(5*W),H+=O>>>13,O&=8191;var K=H;K+=m*W,K+=w*B,K+=y*M,K+=b*C,K+=_*R,H=K>>>13,K&=8191,K+=D*p,K+=I*c,K+=v*f,K+=E*x,K+=g*(5*A),H+=K>>>13,K&=8191;var J=H;J+=m*A,J+=w*W,J+=y*B,J+=b*M,J+=_*C,H=J>>>13,J&=8191,J+=D*R,J+=I*p,J+=v*c,J+=E*f,J+=g*x,H+=J>>>13,J&=8191,H=(H<<2)+H|0,H=H+te|0,te=H&8191,H=H>>>13,Z+=H,m=te,w=Z,y=re,b=L,_=P,D=$,I=u,v=O,E=K,g=J,l+=16,h-=16}this._h[0]=m,this._h[1]=w,this._h[2]=y,this._h[3]=b,this._h[4]=_,this._h[5]=D,this._h[6]=I,this._h[7]=v,this._h[8]=E,this._h[9]=g},o.prototype.finish=function(a,l){l===void 0&&(l=0);var h=new Uint16Array(10),d,m,w,y;if(this._leftover){for(y=this._leftover,this._buffer[y++]=1;y<16;y++)this._buffer[y]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,y=2;y<10;y++)this._h[y]+=d,d=this._h[y]>>>13,this._h[y]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,h[0]=this._h[0]+5,d=h[0]>>>13,h[0]&=8191,y=1;y<10;y++)h[y]=this._h[y]+d,d=h[y]>>>13,h[y]&=8191;for(h[9]-=8192,m=(d^1)-1,y=0;y<10;y++)h[y]&=m;for(m=~m,y=0;y<10;y++)this._h[y]=this._h[y]&m|h[y];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,w=this._h[0]+this._pad[0],this._h[0]=w&65535,y=1;y<8;y++)w=(this._h[y]+this._pad[y]|0)+(w>>>16)|0,this._h[y]=w&65535;return a[l+0]=this._h[0]>>>0,a[l+1]=this._h[0]>>>8,a[l+2]=this._h[1]>>>0,a[l+3]=this._h[1]>>>8,a[l+4]=this._h[2]>>>0,a[l+5]=this._h[2]>>>8,a[l+6]=this._h[3]>>>0,a[l+7]=this._h[3]>>>8,a[l+8]=this._h[4]>>>0,a[l+9]=this._h[4]>>>8,a[l+10]=this._h[5]>>>0,a[l+11]=this._h[5]>>>8,a[l+12]=this._h[6]>>>0,a[l+13]=this._h[6]>>>8,a[l+14]=this._h[7]>>>0,a[l+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var l=0,h=a.length,d;if(this._leftover){d=16-this._leftover,d>h&&(d=h);for(var m=0;m<d;m++)this._buffer[this._leftover+m]=a[l+m];if(h-=d,l+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(h>=16&&(d=h-h%16,this._blocks(a,l,d),l+=d,h-=d),h){for(var m=0;m<h;m++)this._buffer[this._leftover+m]=a[l+m];this._leftover+=h}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var l=new n(o);l.update(a);var h=l.digest();return l.clean(),h}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Rl),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ji,r=Rl,n=jt,i=oe,s=Er;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function l(h){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,h.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(h)}return l.prototype.seal=function(h,d,m,w){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var y=new Uint8Array(16);y.set(h,y.length-h.length);var b=new Uint8Array(32);e.stream(this._key,y,b,4);var _=d.length+this.tagLength,D;if(w){if(w.length!==_)throw new Error("ChaCha20Poly1305: incorrect destination length");D=w}else D=new Uint8Array(_);return e.streamXOR(this._key,y,d,D,4),this._authenticate(D.subarray(D.length-this.tagLength,D.length),b,D.subarray(0,D.length-this.tagLength),m),n.wipe(y),D},l.prototype.open=function(h,d,m,w){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var y=new Uint8Array(16);y.set(h,y.length-h.length);var b=new Uint8Array(32);e.stream(this._key,y,b,4);var _=new Uint8Array(this.tagLength);if(this._authenticate(_,b,d.subarray(0,d.length-this.tagLength),m),!s.equal(_,d.subarray(d.length-this.tagLength,d.length)))return null;var D=d.length-this.tagLength,I;if(w){if(w.length!==D)throw new Error("ChaCha20Poly1305: incorrect destination length");I=w}else I=new Uint8Array(D);return e.streamXOR(this._key,y,d.subarray(0,d.length-this.tagLength),I,4),n.wipe(y),I},l.prototype.clean=function(){return n.wipe(this._key),this},l.prototype._authenticate=function(h,d,m,w){var y=new r.Poly1305(d);w&&(y.update(w),w.length%16>0&&y.update(o.subarray(w.length%16))),y.update(m),m.length%16>0&&y.update(o.subarray(m.length%16));var b=new Uint8Array(8);w&&i.writeUint64LE(w.length,b),y.update(b),i.writeUint64LE(m.length,b),y.update(b);for(var _=y.digest(),D=0;D<_.length;D++)h[D]=_[D];y.clean(),n.wipe(_),n.wipe(b)},l}();t.ChaCha20Poly1305=a}(Eo);var Nl={},Zn={},xo={};Object.defineProperty(xo,"__esModule",{value:!0});function Ep(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}xo.isSerializableHash=Ep,Object.defineProperty(Zn,"__esModule",{value:!0});var rr=xo,Sp=Er,xp=jt,Ll=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),rr.isSerializableHash(this._inner)&&rr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),xp.wipe(n)}return t.prototype.reset=function(){if(!rr.isSerializableHash(this._inner)||!rr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){rr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),rr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!rr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!rr.isSerializableHash(this._inner)||!rr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!rr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();Zn.HMAC=Ll;function Dp(t,e,r){var n=new Ll(t,e);n.update(r);var i=n.digest();return n.clean(),i}Zn.hmac=Dp,Zn.equal=Sp.equal,Object.defineProperty(Nl,"__esModule",{value:!0});var Ml=Zn,Ul=jt,Op=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Ml.hmac(this._hash,n,r);this._hmac=new Ml.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Ul.wipe(this._buffer),Ul.wipe(this._counter),this._bufpos=0},t}(),Ip=Nl.HKDF=Op,Zi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=oe,r=jt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&h>0;)this._buffer[this._bufferLength++]=l[d++],h--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(d=s(this._temp,this._state,l,d,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[d++],h--;return this},a.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,d=this._bufferLength,m=h/536870912|0,w=h<<3,y=h%64<56?64:128;this._buffer[d]=128;for(var b=d+1;b<y-8;b++)this._buffer[b]=0;e.writeUint32BE(m,this._buffer,y-8),e.writeUint32BE(w,this._buffer,y-4),s(this._temp,this._state,this._buffer,0,y),this._finished=!0}for(var b=0;b<this.digestLength/4;b++)e.writeUint32BE(this._state[b],l,b*4);return this},a.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(l){return this._state.set(l.state),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(l){r.wipe(l.state),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,l,h,d,m){for(;m>=64;){for(var w=l[0],y=l[1],b=l[2],_=l[3],D=l[4],I=l[5],v=l[6],E=l[7],g=0;g<16;g++){var x=d+g*4;a[g]=e.readUint32BE(h,x)}for(var g=16;g<64;g++){var f=a[g-2],c=(f>>>17|f<<32-17)^(f>>>19|f<<32-19)^f>>>10;f=a[g-15];var p=(f>>>7|f<<32-7)^(f>>>18|f<<32-18)^f>>>3;a[g]=(c+a[g-7]|0)+(p+a[g-16]|0)}for(var g=0;g<64;g++){var c=(((D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>25|D<<7))+(D&I^~D&v)|0)+(E+(i[g]+a[g]|0)|0)|0,p=((w>>>2|w<<32-2)^(w>>>13|w<<32-13)^(w>>>22|w<<32-22))+(w&y^w&b^y&b)|0;E=v,v=I,I=D,D=_+c|0,_=b,b=y,y=w,w=c+p|0}l[0]+=w,l[1]+=y,l[2]+=b,l[3]+=_,l[4]+=D,l[5]+=I,l[6]+=v,l[7]+=E,d+=64,m-=64}return d}function o(a){var l=new n;l.update(a);var h=l.digest();return l.clean(),h}t.hash=o})(Zi);var Do={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=mn,r=jt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(g){const x=new Float64Array(16);if(g)for(let f=0;f<g.length;f++)x[f]=g[f];return x}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(g){let x=1;for(let f=0;f<16;f++){let c=g[f]+x+65535;x=Math.floor(c/65536),g[f]=c-x*65536}g[0]+=x-1+37*(x-1)}function a(g,x,f){const c=~(f-1);for(let p=0;p<16;p++){const R=c&(g[p]^x[p]);g[p]^=R,x[p]^=R}}function l(g,x){const f=n(),c=n();for(let p=0;p<16;p++)c[p]=x[p];o(c),o(c),o(c);for(let p=0;p<2;p++){f[0]=c[0]-65517;for(let C=1;C<15;C++)f[C]=c[C]-65535-(f[C-1]>>16&1),f[C-1]&=65535;f[15]=c[15]-32767-(f[14]>>16&1);const R=f[15]>>16&1;f[14]&=65535,a(c,f,1-R)}for(let p=0;p<16;p++)g[2*p]=c[p]&255,g[2*p+1]=c[p]>>8}function h(g,x){for(let f=0;f<16;f++)g[f]=x[2*f]+(x[2*f+1]<<8);g[15]&=32767}function d(g,x,f){for(let c=0;c<16;c++)g[c]=x[c]+f[c]}function m(g,x,f){for(let c=0;c<16;c++)g[c]=x[c]-f[c]}function w(g,x,f){let c,p,R=0,C=0,M=0,B=0,W=0,A=0,N=0,V=0,z=0,F=0,k=0,U=0,q=0,ie=0,H=0,te=0,Z=0,re=0,L=0,P=0,$=0,u=0,O=0,K=0,J=0,we=0,Oe=0,be=0,$e=0,Je=0,We=0,xe=f[0],_e=f[1],ye=f[2],ge=f[3],fe=f[4],he=f[5],ue=f[6],se=f[7],me=f[8],Ee=f[9],ae=f[10],Ie=f[11],Ce=f[12],Pe=f[13],Ne=f[14],Te=f[15];c=x[0],R+=c*xe,C+=c*_e,M+=c*ye,B+=c*ge,W+=c*fe,A+=c*he,N+=c*ue,V+=c*se,z+=c*me,F+=c*Ee,k+=c*ae,U+=c*Ie,q+=c*Ce,ie+=c*Pe,H+=c*Ne,te+=c*Te,c=x[1],C+=c*xe,M+=c*_e,B+=c*ye,W+=c*ge,A+=c*fe,N+=c*he,V+=c*ue,z+=c*se,F+=c*me,k+=c*Ee,U+=c*ae,q+=c*Ie,ie+=c*Ce,H+=c*Pe,te+=c*Ne,Z+=c*Te,c=x[2],M+=c*xe,B+=c*_e,W+=c*ye,A+=c*ge,N+=c*fe,V+=c*he,z+=c*ue,F+=c*se,k+=c*me,U+=c*Ee,q+=c*ae,ie+=c*Ie,H+=c*Ce,te+=c*Pe,Z+=c*Ne,re+=c*Te,c=x[3],B+=c*xe,W+=c*_e,A+=c*ye,N+=c*ge,V+=c*fe,z+=c*he,F+=c*ue,k+=c*se,U+=c*me,q+=c*Ee,ie+=c*ae,H+=c*Ie,te+=c*Ce,Z+=c*Pe,re+=c*Ne,L+=c*Te,c=x[4],W+=c*xe,A+=c*_e,N+=c*ye,V+=c*ge,z+=c*fe,F+=c*he,k+=c*ue,U+=c*se,q+=c*me,ie+=c*Ee,H+=c*ae,te+=c*Ie,Z+=c*Ce,re+=c*Pe,L+=c*Ne,P+=c*Te,c=x[5],A+=c*xe,N+=c*_e,V+=c*ye,z+=c*ge,F+=c*fe,k+=c*he,U+=c*ue,q+=c*se,ie+=c*me,H+=c*Ee,te+=c*ae,Z+=c*Ie,re+=c*Ce,L+=c*Pe,P+=c*Ne,$+=c*Te,c=x[6],N+=c*xe,V+=c*_e,z+=c*ye,F+=c*ge,k+=c*fe,U+=c*he,q+=c*ue,ie+=c*se,H+=c*me,te+=c*Ee,Z+=c*ae,re+=c*Ie,L+=c*Ce,P+=c*Pe,$+=c*Ne,u+=c*Te,c=x[7],V+=c*xe,z+=c*_e,F+=c*ye,k+=c*ge,U+=c*fe,q+=c*he,ie+=c*ue,H+=c*se,te+=c*me,Z+=c*Ee,re+=c*ae,L+=c*Ie,P+=c*Ce,$+=c*Pe,u+=c*Ne,O+=c*Te,c=x[8],z+=c*xe,F+=c*_e,k+=c*ye,U+=c*ge,q+=c*fe,ie+=c*he,H+=c*ue,te+=c*se,Z+=c*me,re+=c*Ee,L+=c*ae,P+=c*Ie,$+=c*Ce,u+=c*Pe,O+=c*Ne,K+=c*Te,c=x[9],F+=c*xe,k+=c*_e,U+=c*ye,q+=c*ge,ie+=c*fe,H+=c*he,te+=c*ue,Z+=c*se,re+=c*me,L+=c*Ee,P+=c*ae,$+=c*Ie,u+=c*Ce,O+=c*Pe,K+=c*Ne,J+=c*Te,c=x[10],k+=c*xe,U+=c*_e,q+=c*ye,ie+=c*ge,H+=c*fe,te+=c*he,Z+=c*ue,re+=c*se,L+=c*me,P+=c*Ee,$+=c*ae,u+=c*Ie,O+=c*Ce,K+=c*Pe,J+=c*Ne,we+=c*Te,c=x[11],U+=c*xe,q+=c*_e,ie+=c*ye,H+=c*ge,te+=c*fe,Z+=c*he,re+=c*ue,L+=c*se,P+=c*me,$+=c*Ee,u+=c*ae,O+=c*Ie,K+=c*Ce,J+=c*Pe,we+=c*Ne,Oe+=c*Te,c=x[12],q+=c*xe,ie+=c*_e,H+=c*ye,te+=c*ge,Z+=c*fe,re+=c*he,L+=c*ue,P+=c*se,$+=c*me,u+=c*Ee,O+=c*ae,K+=c*Ie,J+=c*Ce,we+=c*Pe,Oe+=c*Ne,be+=c*Te,c=x[13],ie+=c*xe,H+=c*_e,te+=c*ye,Z+=c*ge,re+=c*fe,L+=c*he,P+=c*ue,$+=c*se,u+=c*me,O+=c*Ee,K+=c*ae,J+=c*Ie,we+=c*Ce,Oe+=c*Pe,be+=c*Ne,$e+=c*Te,c=x[14],H+=c*xe,te+=c*_e,Z+=c*ye,re+=c*ge,L+=c*fe,P+=c*he,$+=c*ue,u+=c*se,O+=c*me,K+=c*Ee,J+=c*ae,we+=c*Ie,Oe+=c*Ce,be+=c*Pe,$e+=c*Ne,Je+=c*Te,c=x[15],te+=c*xe,Z+=c*_e,re+=c*ye,L+=c*ge,P+=c*fe,$+=c*he,u+=c*ue,O+=c*se,K+=c*me,J+=c*Ee,we+=c*ae,Oe+=c*Ie,be+=c*Ce,$e+=c*Pe,Je+=c*Ne,We+=c*Te,R+=38*Z,C+=38*re,M+=38*L,B+=38*P,W+=38*$,A+=38*u,N+=38*O,V+=38*K,z+=38*J,F+=38*we,k+=38*Oe,U+=38*be,q+=38*$e,ie+=38*Je,H+=38*We,p=1,c=R+p+65535,p=Math.floor(c/65536),R=c-p*65536,c=C+p+65535,p=Math.floor(c/65536),C=c-p*65536,c=M+p+65535,p=Math.floor(c/65536),M=c-p*65536,c=B+p+65535,p=Math.floor(c/65536),B=c-p*65536,c=W+p+65535,p=Math.floor(c/65536),W=c-p*65536,c=A+p+65535,p=Math.floor(c/65536),A=c-p*65536,c=N+p+65535,p=Math.floor(c/65536),N=c-p*65536,c=V+p+65535,p=Math.floor(c/65536),V=c-p*65536,c=z+p+65535,p=Math.floor(c/65536),z=c-p*65536,c=F+p+65535,p=Math.floor(c/65536),F=c-p*65536,c=k+p+65535,p=Math.floor(c/65536),k=c-p*65536,c=U+p+65535,p=Math.floor(c/65536),U=c-p*65536,c=q+p+65535,p=Math.floor(c/65536),q=c-p*65536,c=ie+p+65535,p=Math.floor(c/65536),ie=c-p*65536,c=H+p+65535,p=Math.floor(c/65536),H=c-p*65536,c=te+p+65535,p=Math.floor(c/65536),te=c-p*65536,R+=p-1+37*(p-1),p=1,c=R+p+65535,p=Math.floor(c/65536),R=c-p*65536,c=C+p+65535,p=Math.floor(c/65536),C=c-p*65536,c=M+p+65535,p=Math.floor(c/65536),M=c-p*65536,c=B+p+65535,p=Math.floor(c/65536),B=c-p*65536,c=W+p+65535,p=Math.floor(c/65536),W=c-p*65536,c=A+p+65535,p=Math.floor(c/65536),A=c-p*65536,c=N+p+65535,p=Math.floor(c/65536),N=c-p*65536,c=V+p+65535,p=Math.floor(c/65536),V=c-p*65536,c=z+p+65535,p=Math.floor(c/65536),z=c-p*65536,c=F+p+65535,p=Math.floor(c/65536),F=c-p*65536,c=k+p+65535,p=Math.floor(c/65536),k=c-p*65536,c=U+p+65535,p=Math.floor(c/65536),U=c-p*65536,c=q+p+65535,p=Math.floor(c/65536),q=c-p*65536,c=ie+p+65535,p=Math.floor(c/65536),ie=c-p*65536,c=H+p+65535,p=Math.floor(c/65536),H=c-p*65536,c=te+p+65535,p=Math.floor(c/65536),te=c-p*65536,R+=p-1+37*(p-1),g[0]=R,g[1]=C,g[2]=M,g[3]=B,g[4]=W,g[5]=A,g[6]=N,g[7]=V,g[8]=z,g[9]=F,g[10]=k,g[11]=U,g[12]=q,g[13]=ie,g[14]=H,g[15]=te}function y(g,x){w(g,x,x)}function b(g,x){const f=n();for(let c=0;c<16;c++)f[c]=x[c];for(let c=253;c>=0;c--)y(f,f),c!==2&&c!==4&&w(f,f,x);for(let c=0;c<16;c++)g[c]=f[c]}function _(g,x){const f=new Uint8Array(32),c=new Float64Array(80),p=n(),R=n(),C=n(),M=n(),B=n(),W=n();for(let z=0;z<31;z++)f[z]=g[z];f[31]=g[31]&127|64,f[0]&=248,h(c,x);for(let z=0;z<16;z++)R[z]=c[z];p[0]=M[0]=1;for(let z=254;z>=0;--z){const F=f[z>>>3]>>>(z&7)&1;a(p,R,F),a(C,M,F),d(B,p,C),m(p,p,C),d(C,R,M),m(R,R,M),y(M,B),y(W,p),w(p,C,p),w(C,R,B),d(B,p,C),m(p,p,C),y(R,p),m(C,M,W),w(p,C,s),d(p,p,M),w(C,C,p),w(p,M,W),w(M,R,c),y(R,B),a(p,R,F),a(C,M,F)}for(let z=0;z<16;z++)c[z+16]=p[z],c[z+32]=C[z],c[z+48]=R[z],c[z+64]=M[z];const A=c.subarray(32),N=c.subarray(16);b(A,A),w(N,N,A);const V=new Uint8Array(32);return l(V,N),V}t.scalarMult=_;function D(g){return _(g,i)}t.scalarMultBase=D;function I(g){if(g.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const x=new Uint8Array(g);return{publicKey:D(x),secretKey:x}}t.generateKeyPairFromSeed=I;function v(g){const x=(0,e.randomBytes)(32,g),f=I(x);return(0,r.wipe)(x),f}t.generateKeyPair=v;function E(g,x,f=!1){if(g.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(x.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=_(g,x);if(f){let p=0;for(let R=0;R<c.length;R++)p|=c[R];if(p===0)throw new Error("X25519: invalid shared key")}return c}t.sharedKey=E})(Do);var Fl=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Cp=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Ap=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),$p=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Tp=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Rp=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Pp=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Np=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,jl=3,Lp=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Pp]],Bl=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Mp(t){return t?kl(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Rp:typeof navigator<"u"?kl(navigator.userAgent):jp()}function Up(t){return t!==""&&Lp.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function kl(t){var e=Up(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Tp;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<jl&&(i=Fl(Fl([],i,!0),Bp(jl-i.length),!0)):i=[];var s=i.join("."),o=Fp(t),a=Np.exec(t);return a&&a[1]?new $p(r,s,o,a[1]):new Cp(r,s,o)}function Fp(t){for(var e=0,r=Bl.length;e<r;e++){var n=Bl[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function jp(){var t=typeof process<"u"&&process.version;return t?new Ap(process.version.slice(1)):null}function Bp(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.getLocalStorage=Ue.getLocalStorageOrThrow=Ue.getCrypto=Ue.getCryptoOrThrow=ql=Ue.getLocation=Ue.getLocationOrThrow=Oo=Ue.getNavigator=Ue.getNavigatorOrThrow=zl=Ue.getDocument=Ue.getDocumentOrThrow=Ue.getFromWindowOrThrow=Ue.getFromWindow=void 0;function Vr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ue.getFromWindow=Vr;function wn(t){const e=Vr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ue.getFromWindowOrThrow=wn;function kp(){return wn("document")}Ue.getDocumentOrThrow=kp;function zp(){return Vr("document")}var zl=Ue.getDocument=zp;function qp(){return wn("navigator")}Ue.getNavigatorOrThrow=qp;function Hp(){return Vr("navigator")}var Oo=Ue.getNavigator=Hp;function Wp(){return wn("location")}Ue.getLocationOrThrow=Wp;function Vp(){return Vr("location")}var ql=Ue.getLocation=Vp;function Kp(){return wn("crypto")}Ue.getCryptoOrThrow=Kp;function Gp(){return Vr("crypto")}Ue.getCrypto=Gp;function Yp(){return wn("localStorage")}Ue.getLocalStorageOrThrow=Yp;function Jp(){return Vr("localStorage")}Ue.getLocalStorage=Jp;var Io={};Object.defineProperty(Io,"__esModule",{value:!0});var Hl=Io.getWindowMetadata=void 0;const Wl=Ue;function Zp(){let t,e;try{t=Wl.getDocumentOrThrow(),e=Wl.getLocationOrThrow()}catch{return null}function r(){const m=t.getElementsByTagName("link"),w=[];for(let y=0;y<m.length;y++){const b=m[y],_=b.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const D=b.getAttribute("href");if(D)if(D.toLowerCase().indexOf("https:")===-1&&D.toLowerCase().indexOf("http:")===-1&&D.indexOf("//")!==0){let I=e.protocol+"//"+e.host;if(D.indexOf("/")===0)I+=D;else{const v=e.pathname.split("/");v.pop();const E=v.join("/");I+=E+"/"+D}w.push(I)}else if(D.indexOf("//")===0){const I=e.protocol+D;w.push(I)}else w.push(D)}}return w}function n(...m){const w=t.getElementsByTagName("meta");for(let y=0;y<w.length;y++){const b=w[y],_=["itemprop","property","name"].map(D=>b.getAttribute(D)).filter(D=>D?m.includes(D):!1);if(_.length&&_){const D=b.getAttribute("content");if(D)return D}}return""}function i(){let m=n("name","og:site_name","og:title","twitter:title");return m||(m=t.title),m}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),l=e.origin,h=r();return{description:a,url:l,icons:h,name:o}}Hl=Io.getWindowMetadata=Zp;var Qn={},Qp=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Vl="%[a-f0-9]{2}",Kl=new RegExp("("+Vl+")|([^%]+?)","gi"),Gl=new RegExp("("+Vl+")+","gi");function Co(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Co(r),Co(n))}function Xp(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Kl)||[],r=1;r<e.length;r++)t=Co(e,r).join(""),e=t.match(Kl)||[];return t}}function eg(t){for(var e={"%FE%FF":"","%FF%FE":""},r=Gl.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Xp(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Gl.exec(t)}e["%C2"]="";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var tg=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return eg(t)}},rg=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},ng=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=Qp,r=tg,n=rg,i=ng,s=v=>v==null,o=Symbol("encodeFragmentIdentifier");function a(v){switch(v.arrayFormat){case"index":return E=>(g,x)=>{const f=g.length;return x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?g:x===null?[...g,[d(E,v),"[",f,"]"].join("")]:[...g,[d(E,v),"[",d(f,v),"]=",d(x,v)].join("")]};case"bracket":return E=>(g,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?g:x===null?[...g,[d(E,v),"[]"].join("")]:[...g,[d(E,v),"[]=",d(x,v)].join("")];case"colon-list-separator":return E=>(g,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?g:x===null?[...g,[d(E,v),":list="].join("")]:[...g,[d(E,v),":list=",d(x,v)].join("")];case"comma":case"separator":case"bracket-separator":{const E=v.arrayFormat==="bracket-separator"?"[]=":"=";return g=>(x,f)=>f===void 0||v.skipNull&&f===null||v.skipEmptyString&&f===""?x:(f=f===null?"":f,x.length===0?[[d(g,v),E,d(f,v)].join("")]:[[x,d(f,v)].join(v.arrayFormatSeparator)])}default:return E=>(g,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?g:x===null?[...g,d(E,v)]:[...g,[d(E,v),"=",d(x,v)].join("")]}}function l(v){let E;switch(v.arrayFormat){case"index":return(g,x,f)=>{if(E=/\[(\d*)\]$/.exec(g),g=g.replace(/\[\d*\]$/,""),!E){f[g]=x;return}f[g]===void 0&&(f[g]={}),f[g][E[1]]=x};case"bracket":return(g,x,f)=>{if(E=/(\[\])$/.exec(g),g=g.replace(/\[\]$/,""),!E){f[g]=x;return}if(f[g]===void 0){f[g]=[x];return}f[g]=[].concat(f[g],x)};case"colon-list-separator":return(g,x,f)=>{if(E=/(:list)$/.exec(g),g=g.replace(/:list$/,""),!E){f[g]=x;return}if(f[g]===void 0){f[g]=[x];return}f[g]=[].concat(f[g],x)};case"comma":case"separator":return(g,x,f)=>{const c=typeof x=="string"&&x.includes(v.arrayFormatSeparator),p=typeof x=="string"&&!c&&m(x,v).includes(v.arrayFormatSeparator);x=p?m(x,v):x;const R=c||p?x.split(v.arrayFormatSeparator).map(C=>m(C,v)):x===null?x:m(x,v);f[g]=R};case"bracket-separator":return(g,x,f)=>{const c=/(\[\])$/.test(g);if(g=g.replace(/\[\]$/,""),!c){f[g]=x&&m(x,v);return}const p=x===null?[]:x.split(v.arrayFormatSeparator).map(R=>m(R,v));if(f[g]===void 0){f[g]=p;return}f[g]=[].concat(f[g],p)};default:return(g,x,f)=>{if(f[g]===void 0){f[g]=x;return}f[g]=[].concat(f[g],x)}}}function h(v){if(typeof v!="string"||v.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(v,E){return E.encode?E.strict?e(v):encodeURIComponent(v):v}function m(v,E){return E.decode?r(v):v}function w(v){return Array.isArray(v)?v.sort():typeof v=="object"?w(Object.keys(v)).sort((E,g)=>Number(E)-Number(g)).map(E=>v[E]):v}function y(v){const E=v.indexOf("#");return E!==-1&&(v=v.slice(0,E)),v}function b(v){let E="";const g=v.indexOf("#");return g!==-1&&(E=v.slice(g)),E}function _(v){v=y(v);const E=v.indexOf("?");return E===-1?"":v.slice(E+1)}function D(v,E){return E.parseNumbers&&!Number.isNaN(Number(v))&&typeof v=="string"&&v.trim()!==""?v=Number(v):E.parseBooleans&&v!==null&&(v.toLowerCase()==="true"||v.toLowerCase()==="false")&&(v=v.toLowerCase()==="true"),v}function I(v,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),h(E.arrayFormatSeparator);const g=l(E),x=Object.create(null);if(typeof v!="string"||(v=v.trim().replace(/^[?#&]/,""),!v))return x;for(const f of v.split("&")){if(f==="")continue;let[c,p]=n(E.decode?f.replace(/\+/g," "):f,"=");p=p===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?p:m(p,E),g(m(c,E),p,x)}for(const f of Object.keys(x)){const c=x[f];if(typeof c=="object"&&c!==null)for(const p of Object.keys(c))c[p]=D(c[p],E);else x[f]=D(c,E)}return E.sort===!1?x:(E.sort===!0?Object.keys(x).sort():Object.keys(x).sort(E.sort)).reduce((f,c)=>{const p=x[c];return p&&typeof p=="object"&&!Array.isArray(p)?f[c]=w(p):f[c]=p,f},Object.create(null))}t.extract=_,t.parse=I,t.stringify=(v,E)=>{if(!v)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),h(E.arrayFormatSeparator);const g=p=>E.skipNull&&s(v[p])||E.skipEmptyString&&v[p]==="",x=a(E),f={};for(const p of Object.keys(v))g(p)||(f[p]=v[p]);const c=Object.keys(f);return E.sort!==!1&&c.sort(E.sort),c.map(p=>{const R=v[p];return R===void 0?"":R===null?d(p,E):Array.isArray(R)?R.length===0&&E.arrayFormat==="bracket-separator"?d(p,E)+"[]":R.reduce(x(p),[]).join("&"):d(p,E)+"="+d(R,E)}).filter(p=>p.length>0).join("&")},t.parseUrl=(v,E)=>{E=Object.assign({decode:!0},E);const[g,x]=n(v,"#");return Object.assign({url:g.split("?")[0]||"",query:I(_(v),E)},E&&E.parseFragmentIdentifier&&x?{fragmentIdentifier:m(x,E)}:{})},t.stringifyUrl=(v,E)=>{E=Object.assign({encode:!0,strict:!0,[o]:!0},E);const g=y(v.url).split("?")[0]||"",x=t.extract(v.url),f=t.parse(x,{sort:!1}),c=Object.assign(f,v.query);let p=t.stringify(c,E);p&&(p=`?${p}`);let R=b(v.url);return v.fragmentIdentifier&&(R=`#${E[o]?d(v.fragmentIdentifier,E):v.fragmentIdentifier}`),`${g}${p}${R}`},t.pick=(v,E,g)=>{g=Object.assign({parseFragmentIdentifier:!0,[o]:!1},g);const{url:x,query:f,fragmentIdentifier:c}=t.parseUrl(v,g);return t.stringifyUrl({url:x,query:i(f,E),fragmentIdentifier:c},g)},t.exclude=(v,E,g)=>{const x=Array.isArray(E)?f=>!E.includes(f):(f,c)=>!E(f,c);return t.pick(v,x,g)}})(Qn);const ig={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Yl(t,e){return t.includes(":")?[t]:e.chains||[]}const Jl="base10",Ct="base16",Ao="base64pad",$o="utf8",Zl=0,Kr=1,sg=0,Ql=1,To=12,Ro=32;function og(){const t=Do.generateKeyPair();return{privateKey:It(t.secretKey,Ct),publicKey:It(t.publicKey,Ct)}}function Po(){const t=mn.randomBytes(Ro);return It(t,Ct)}function ag(t,e){const r=Do.sharedKey(Pt(t,Ct),Pt(e,Ct)),n=new Ip(Zi.SHA256,r).expand(Ro);return It(n,Ct)}function cg(t){const e=Zi.hash(Pt(t,Ct));return It(e,Ct)}function yn(t){const e=Zi.hash(Pt(t,$o));return It(e,Ct)}function lg(t){return Pt(`${t}`,Jl)}function Xn(t){return Number(It(t,Jl))}function ug(t){const e=lg(typeof t.type<"u"?t.type:Zl);if(Xn(e)===Kr&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Pt(t.senderPublicKey,Ct):void 0,n=typeof t.iv<"u"?Pt(t.iv,Ct):mn.randomBytes(To),i=new Eo.ChaCha20Poly1305(Pt(t.symKey,Ct)).seal(n,Pt(t.message,$o));return dg({type:e,sealed:i,iv:n,senderPublicKey:r})}function hg(t){const e=new Eo.ChaCha20Poly1305(Pt(t.symKey,Ct)),{sealed:r,iv:n}=Qi(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return It(i,$o)}function dg(t){if(Xn(t.type)===Kr){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return It(bo([t.type,t.senderPublicKey,t.iv,t.sealed]),Ao)}return It(bo([t.type,t.iv,t.sealed]),Ao)}function Qi(t){const e=Pt(t,Ao),r=e.slice(sg,Ql),n=Ql;if(Xn(r)===Kr){const a=n+Ro,l=a+To,h=e.slice(n,a),d=e.slice(a,l),m=e.slice(l);return{type:r,sealed:m,iv:d,senderPublicKey:h}}const i=n+To,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function fg(t,e){const r=Qi(t);return Xl({type:Xn(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?It(r.senderPublicKey,Ct):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Xl(t){const e=(t==null?void 0:t.type)||Zl;if(e===Kr){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function eu(t){return t.type===Kr&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var pg=Object.defineProperty,tu=Object.getOwnPropertySymbols,gg=Object.prototype.hasOwnProperty,mg=Object.prototype.propertyIsEnumerable,ru=(t,e,r)=>e in t?pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nu=(t,e)=>{for(var r in e||(e={}))gg.call(e,r)&&ru(t,r,e[r]);if(tu)for(var r of tu(e))mg.call(e,r)&&ru(t,r,e[r]);return t};const wg="ReactNative",Bt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},yg="js";function No(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Xi(){return!zl()&&!!Oo()&&navigator.product===wg}function ei(){return!No()&&!!Oo()}function ti(){return Xi()?Bt.reactNative:No()?Bt.node:ei()?Bt.browser:Bt.unknown}function vg(t,e){let r=Qn.parse(t);return r=nu(nu({},r),e),t=Qn.stringify(r),t}function bg(){return Hl()||{name:"",description:"",url:"",icons:[""]}}function _g(){if(ti()===Bt.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=Mp();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Eg(){var t;const e=ti();return e===Bt.browser?[e,((t=ql())==null?void 0:t.host)||"unknown"].join(":"):e}function Sg(t,e,r){const n=_g(),i=Eg();return[[t,e].join("-"),[yg,r].join("-"),n,i].join("/")}function xg({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),l=Sg(t,e,n),h={auth:i,ua:l,projectId:s,useOnCloseEvent:o||void 0},d=vg(a[1]||"",h);return a[0]+"?"+d}function Gr(t,e){return t.filter(r=>e.includes(r)).length===t.length}function iu(t){return Object.fromEntries(t.entries())}function su(t){return new Map(Object.entries(t))}function vn(t=X.FIVE_MINUTES,e){const r=X.toMiliseconds(t||X.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function ri(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function ou(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Dg(t){return ou("topic",t)}function Og(t){return ou("id",t)}function au(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Jt(t,e){return X.fromMiliseconds((e||Date.now())+X.toMiliseconds(t))}function Sr(t){return Date.now()>=X.toMiliseconds(t)}function Ze(t,e){return`${t}${e?`:${e}`:""}`}async function Ig({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=ti();o===Bt.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===Bt.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}const Cg="irn";function Lo(t){return(t==null?void 0:t.relay)||{protocol:Cg}}function es(t){const e=ig[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Ag=Object.defineProperty,cu=Object.getOwnPropertySymbols,$g=Object.prototype.hasOwnProperty,Tg=Object.prototype.propertyIsEnumerable,lu=(t,e,r)=>e in t?Ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rg=(t,e)=>{for(var r in e||(e={}))$g.call(e,r)&&lu(t,r,e[r]);if(cu)for(var r of cu(e))Tg.call(e,r)&&lu(t,r,e[r]);return t};function Pg(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Ng(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=Qn.parse(s);return{protocol:n,topic:Lg(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:Pg(o)}}function Lg(t){return t.startsWith("//")?t.substring(2):t}function Mg(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Ug(t){return`${t.protocol}:${t.topic}@${t.version}?`+Qn.stringify(Rg({symKey:t.symKey},Mg(t.relay)))}function bn(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Fg(t){const e=[];return Object.values(t).forEach(r=>{e.push(...bn(r.accounts))}),e}function jg(t,e){const r=[];return Object.values(t).forEach(n=>{bn(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Bg(t,e){const r=[];return Object.values(t).forEach(n=>{bn(n.accounts).includes(e)&&r.push(...n.events)}),r}function kg(t,e){const r=rs(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}const zg={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},qg={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Y(t,e){const{message:r,code:n}=qg[t];return{message:e?`${r} ${e}`:r,code:n}}function nt(t,e){const{message:r,code:n}=zg[t];return{message:e?`${r} ${e}`:r,code:n}}function ni(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function ii(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function At(t){return typeof t>"u"}function at(t,e){return e&&At(t)?!0:typeof t=="string"&&!!t.trim().length}function Mo(t,e){return e&&At(t)?!0:typeof t=="number"&&!isNaN(t)}function Hg(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return Gr(i,n)?(n.forEach(o=>{const{accounts:a,methods:l,events:h}=t.namespaces[o],d=bn(a),m=r[o];(!Gr(Yl(o,m),d)||!Gr(m.methods,l)||!Gr(m.events,h))&&(s=!1)}),s):!1}function ts(t){return at(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Wg(t){if(at(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&ts(r)}}return!1}function Vg(t){if(at(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Kg(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Gg(t){return t==null?void 0:t.topic}function Yg(t,e){let r=null;return at(t==null?void 0:t.publicKey,!1)||(r=Y("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function uu(t){let e=!0;return ni(t)?t.length&&(e=t.every(r=>at(r,!1))):e=!1,e}function Jg(t,e,r){let n=null;return ni(e)&&e.length?e.forEach(i=>{n||ts(i)||(n=nt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):ts(t)||(n=nt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Zg(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=Jg(i,Yl(i,s),`${e} ${r}`);o&&(n=o)}),n}function Qg(t,e){let r=null;return ni(t)?t.forEach(n=>{r||Wg(n)||(r=nt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=nt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Xg(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Qg(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function em(t,e){let r=null;return uu(t==null?void 0:t.methods)?uu(t==null?void 0:t.events)||(r=nt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=nt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function hu(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=em(n,`${e}, namespace`);i&&(r=i)}),r}function tm(t,e,r){let n=null;if(t&&ii(t)){const i=hu(t,e);i&&(n=i);const s=Zg(t,e,r);s&&(n=s)}else n=Y("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function rs(t,e){let r=null;if(t&&ii(t)){const n=hu(t,e);n&&(r=n);const i=Xg(t,e);i&&(r=i)}else r=Y("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function du(t){return at(t.protocol,!0)}function rm(t,e){let r=!1;return e&&!t?r=!0:t&&ni(t)&&t.length&&t.forEach(n=>{r=du(n)}),r}function nm(t){return typeof t=="number"}function Nt(t){return typeof t<"u"&&typeof t!==null}function im(t){return!(!t||typeof t!="object"||!t.code||!Mo(t.code,!1)||!t.message||!at(t.message,!1))}function sm(t){return!(At(t)||!at(t.method,!1))}function om(t){return!(At(t)||At(t.result)&&At(t.error)||!Mo(t.id,!1)||!at(t.jsonrpc,!1))}function am(t){return!(At(t)||!at(t.name,!1))}function fu(t,e){return!(!ts(e)||!Fg(t).includes(e))}function cm(t,e,r){return at(r,!1)?jg(t,e).includes(r):!1}function lm(t,e,r){return at(r,!1)?Bg(t,e).includes(r):!1}function pu(t,e,r){let n=null;const i=um(t),s=hm(e),o=Object.keys(i),a=Object.keys(s),l=gu(Object.keys(t)),h=gu(Object.keys(e)),d=l.filter(m=>!h.includes(m));return d.length&&(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),Gr(o,a)||(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(m=>{if(!m.includes(":")||n)return;const w=bn(e[m].accounts);w.includes(m)||(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${m}
        Required: ${m}
        Approved: ${w.toString()}`))}),o.forEach(m=>{n||(Gr(i[m].methods,s[m].methods)?Gr(i[m].events,s[m].events)||(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${m}`)):n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${m}`))}),n}function um(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function gu(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function hm(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=bn(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function dm(t,e){return Mo(t,!1)&&t<=e.max&&t>=e.min}function mu(){const t=ti();return new Promise(e=>{switch(t){case Bt.browser:e(fm());break;case Bt.reactNative:e(pm());break;case Bt.node:e(gm());break;default:e(!0)}})}function fm(){return ei()&&(navigator==null?void 0:navigator.onLine)}async function pm(){if(Xi()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function gm(){return!0}function mm(t){switch(ti()){case Bt.browser:wm(t);break;case Bt.reactNative:ym(t);break}}function wm(t){ei()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function ym(t){Xi()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const Uo={};let ns=class{static get(e){return Uo[e]}static set(e,r){Uo[e]=r}static delete(e){delete Uo[e]}};const vm="PARSE_ERROR",bm="INVALID_REQUEST",_m="METHOD_NOT_FOUND",Em="INVALID_PARAMS",wu="INTERNAL_ERROR",Fo="SERVER_ERROR",Sm=[-32700,-32600,-32601,-32602,-32603],si={[vm]:{code:-32700,message:"Parse error"},[bm]:{code:-32600,message:"Invalid Request"},[_m]:{code:-32601,message:"Method not found"},[Em]:{code:-32602,message:"Invalid params"},[wu]:{code:-32603,message:"Internal error"},[Fo]:{code:-32e3,message:"Server error"}},yu=Fo;function xm(t){return Sm.includes(t)}function vu(t){return Object.keys(si).includes(t)?si[t]:si[yu]}function Dm(t){const e=Object.values(si).find(r=>r.code===t);return e||si[yu]}function Om(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var bu={},cr={},_u;function Im(){if(_u)return cr;_u=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.isBrowserCryptoAvailable=cr.getSubtleCrypto=cr.getBrowerCrypto=void 0;function t(){return(Ft==null?void 0:Ft.crypto)||(Ft==null?void 0:Ft.msCrypto)||{}}cr.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}cr.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return cr.isBrowserCryptoAvailable=r,cr}var lr={},Eu;function Cm(){if(Eu)return lr;Eu=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.isBrowser=lr.isNode=lr.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}lr.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}lr.isNode=e;function r(){return!t()&&!e()}return lr.isBrowser=r,lr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ht;e.__exportStar(Im(),t),e.__exportStar(Cm(),t)})(bu);function jo(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Su(t=6){return BigInt(jo(t))}function oi(t,e,r){return{id:r||jo(),jsonrpc:"2.0",method:t,params:e}}function Bo(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ko(t,e,r){return{id:t,jsonrpc:"2.0",error:Am(e,r)}}function Am(t,e){return typeof t>"u"?vu(wu):(typeof t=="string"&&(t=Object.assign(Object.assign({},vu(Fo)),{message:t})),typeof e<"u"&&(t.data=e),xm(t.code)&&(t=Dm(t.code)),t)}class $m{}class Tm extends $m{constructor(){super()}}class Rm extends Tm{constructor(e){super()}}const Pm="^wss?:";function Nm(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Lm(t,e){const r=Nm(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function xu(t){return Lm(t,Pm)}function Mm(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Du(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function zo(t){return Du(t)&&"method"in t}function is(t){return Du(t)&&(ur(t)||Zt(t))}function ur(t){return"result"in t}function Zt(t){return"error"in t}class Um extends Rm{constructor(e){super(e),this.events=new Yt.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(oi(e.method,e.params||[],e.id||Su().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Zt(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),is(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Fm=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),jm=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Ou=t=>t.split("?")[0],Iu=10,Bm=Fm();class km{constructor(e){if(this.url=e,this.events=new Yt.EventEmitter,this.registering=!1,!xu(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(fo(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!xu(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=bu.isReactNative()?void 0:{rejectUnauthorized:!Mm(e)},s=new Bm(e,[],i);jm()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?ul(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=ko(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Om(e,Ou(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Iu&&this.events.setMaxListeners(Iu)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Ou(this.url)}`));return this.events.emit("register_error",r),r}}var ss={exports:{}};ss.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",h="[object AsyncFunction]",d="[object Boolean]",m="[object Date]",w="[object Error]",y="[object Function]",b="[object GeneratorFunction]",_="[object Map]",D="[object Number]",I="[object Null]",v="[object Object]",E="[object Promise]",g="[object Proxy]",x="[object RegExp]",f="[object Set]",c="[object String]",p="[object Symbol]",R="[object Undefined]",C="[object WeakMap]",M="[object ArrayBuffer]",B="[object DataView]",W="[object Float32Array]",A="[object Float64Array]",N="[object Int8Array]",V="[object Int16Array]",z="[object Int32Array]",F="[object Uint8Array]",k="[object Uint8ClampedArray]",U="[object Uint16Array]",q="[object Uint32Array]",ie=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,Z={};Z[W]=Z[A]=Z[N]=Z[V]=Z[z]=Z[F]=Z[k]=Z[U]=Z[q]=!0,Z[a]=Z[l]=Z[M]=Z[d]=Z[B]=Z[m]=Z[w]=Z[y]=Z[_]=Z[D]=Z[v]=Z[x]=Z[f]=Z[c]=Z[C]=!1;var re=typeof Ft=="object"&&Ft&&Ft.Object===Object&&Ft,L=typeof self=="object"&&self&&self.Object===Object&&self,P=re||L||Function("return this")(),$=e&&!e.nodeType&&e,u=$&&!0&&t&&!t.nodeType&&t,O=u&&u.exports===$,K=O&&re.process,J=function(){try{return K&&K.binding&&K.binding("util")}catch{}}(),we=J&&J.isTypedArray;function Oe(S,T){for(var j=-1,Q=S==null?0:S.length,je=0,le=[];++j<Q;){var Ge=S[j];T(Ge,j,S)&&(le[je++]=Ge)}return le}function be(S,T){for(var j=-1,Q=T.length,je=S.length;++j<Q;)S[je+j]=T[j];return S}function $e(S,T){for(var j=-1,Q=S==null?0:S.length;++j<Q;)if(T(S[j],j,S))return!0;return!1}function Je(S,T){for(var j=-1,Q=Array(S);++j<S;)Q[j]=T(j);return Q}function We(S){return function(T){return S(T)}}function xe(S,T){return S.has(T)}function _e(S,T){return S==null?void 0:S[T]}function ye(S){var T=-1,j=Array(S.size);return S.forEach(function(Q,je){j[++T]=[je,Q]}),j}function ge(S,T){return function(j){return S(T(j))}}function fe(S){var T=-1,j=Array(S.size);return S.forEach(function(Q){j[++T]=Q}),j}var he=Array.prototype,ue=Function.prototype,se=Object.prototype,me=P["__core-js_shared__"],Ee=ue.toString,ae=se.hasOwnProperty,Ie=function(){var S=/[^.]+$/.exec(me&&me.keys&&me.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),Ce=se.toString,Pe=RegExp("^"+Ee.call(ae).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=O?P.Buffer:void 0,Te=P.Symbol,Qt=P.Uint8Array,ar=se.propertyIsEnumerable,Pr=he.splice,zt=Te?Te.toStringTag:void 0,an=Object.getOwnPropertySymbols,Ni=Ne?Ne.isBuffer:void 0,js=ge(Object.keys,Object),Qe=jn(P,"DataView"),Ve=jn(P,"Map"),Xe=jn(P,"Promise"),et=jn(P,"Set"),tt=jn(P,"WeakMap"),Ke=jn(Object,"create"),lt=ln(Qe),ut=ln(Ve),ht=ln(Xe),dt=ln(et),ft=ln(tt),st=Te?Te.prototype:void 0,rt=st?st.valueOf:void 0;function ke(S){var T=-1,j=S==null?0:S.length;for(this.clear();++T<j;){var Q=S[T];this.set(Q[0],Q[1])}}function pt(){this.__data__=Ke?Ke(null):{},this.size=0}function gt(S){var T=this.has(S)&&delete this.__data__[S];return this.size-=T?1:0,T}function S6(S){var T=this.__data__;if(Ke){var j=T[S];return j===n?void 0:j}return ae.call(T,S)?T[S]:void 0}function x6(S){var T=this.__data__;return Ke?T[S]!==void 0:ae.call(T,S)}function D6(S,T){var j=this.__data__;return this.size+=this.has(S)?0:1,j[S]=Ke&&T===void 0?n:T,this}ke.prototype.clear=pt,ke.prototype.delete=gt,ke.prototype.get=S6,ke.prototype.has=x6,ke.prototype.set=D6;function mr(S){var T=-1,j=S==null?0:S.length;for(this.clear();++T<j;){var Q=S[T];this.set(Q[0],Q[1])}}function O6(){this.__data__=[],this.size=0}function I6(S){var T=this.__data__,j=ks(T,S);if(j<0)return!1;var Q=T.length-1;return j==Q?T.pop():Pr.call(T,j,1),--this.size,!0}function C6(S){var T=this.__data__,j=ks(T,S);return j<0?void 0:T[j][1]}function A6(S){return ks(this.__data__,S)>-1}function $6(S,T){var j=this.__data__,Q=ks(j,S);return Q<0?(++this.size,j.push([S,T])):j[Q][1]=T,this}mr.prototype.clear=O6,mr.prototype.delete=I6,mr.prototype.get=C6,mr.prototype.has=A6,mr.prototype.set=$6;function cn(S){var T=-1,j=S==null?0:S.length;for(this.clear();++T<j;){var Q=S[T];this.set(Q[0],Q[1])}}function T6(){this.size=0,this.__data__={hash:new ke,map:new(Ve||mr),string:new ke}}function R6(S){var T=zs(this,S).delete(S);return this.size-=T?1:0,T}function P6(S){return zs(this,S).get(S)}function N6(S){return zs(this,S).has(S)}function L6(S,T){var j=zs(this,S),Q=j.size;return j.set(S,T),this.size+=j.size==Q?0:1,this}cn.prototype.clear=T6,cn.prototype.delete=R6,cn.prototype.get=P6,cn.prototype.has=N6,cn.prototype.set=L6;function Bs(S){var T=-1,j=S==null?0:S.length;for(this.__data__=new cn;++T<j;)this.add(S[T])}function M6(S){return this.__data__.set(S,n),this}function U6(S){return this.__data__.has(S)}Bs.prototype.add=Bs.prototype.push=M6,Bs.prototype.has=U6;function Nr(S){var T=this.__data__=new mr(S);this.size=T.size}function F6(){this.__data__=new mr,this.size=0}function j6(S){var T=this.__data__,j=T.delete(S);return this.size=T.size,j}function B6(S){return this.__data__.get(S)}function k6(S){return this.__data__.has(S)}function z6(S,T){var j=this.__data__;if(j instanceof mr){var Q=j.__data__;if(!Ve||Q.length<r-1)return Q.push([S,T]),this.size=++j.size,this;j=this.__data__=new cn(Q)}return j.set(S,T),this.size=j.size,this}Nr.prototype.clear=F6,Nr.prototype.delete=j6,Nr.prototype.get=B6,Nr.prototype.has=k6,Nr.prototype.set=z6;function q6(S,T){var j=qs(S),Q=!j&&i_(S),je=!j&&!Q&&fc(S),le=!j&&!Q&&!je&&Yd(S),Ge=j||Q||je||le,mt=Ge?Je(S.length,String):[],vt=mt.length;for(var qe in S)(T||ae.call(S,qe))&&!(Ge&&(qe=="length"||je&&(qe=="offset"||qe=="parent")||le&&(qe=="buffer"||qe=="byteLength"||qe=="byteOffset")||X6(qe,vt)))&&mt.push(qe);return mt}function ks(S,T){for(var j=S.length;j--;)if(Wd(S[j][0],T))return j;return-1}function H6(S,T,j){var Q=T(S);return qs(S)?Q:be(Q,j(S))}function Li(S){return S==null?S===void 0?R:I:zt&&zt in Object(S)?Z6(S):n_(S)}function kd(S){return Mi(S)&&Li(S)==a}function zd(S,T,j,Q,je){return S===T?!0:S==null||T==null||!Mi(S)&&!Mi(T)?S!==S&&T!==T:W6(S,T,j,Q,zd,je)}function W6(S,T,j,Q,je,le){var Ge=qs(S),mt=qs(T),vt=Ge?l:Lr(S),qe=mt?l:Lr(T);vt=vt==a?v:vt,qe=qe==a?v:qe;var qt=vt==v,Xt=qe==v,Dt=vt==qe;if(Dt&&fc(S)){if(!fc(T))return!1;Ge=!0,qt=!1}if(Dt&&!qt)return le||(le=new Nr),Ge||Yd(S)?qd(S,T,j,Q,je,le):Y6(S,T,vt,j,Q,je,le);if(!(j&i)){var Kt=qt&&ae.call(S,"__wrapped__"),Gt=Xt&&ae.call(T,"__wrapped__");if(Kt||Gt){var Mr=Kt?S.value():S,wr=Gt?T.value():T;return le||(le=new Nr),je(Mr,wr,j,Q,le)}}return Dt?(le||(le=new Nr),J6(S,T,j,Q,je,le)):!1}function V6(S){if(!Gd(S)||t_(S))return!1;var T=Vd(S)?Pe:H;return T.test(ln(S))}function K6(S){return Mi(S)&&Kd(S.length)&&!!Z[Li(S)]}function G6(S){if(!r_(S))return js(S);var T=[];for(var j in Object(S))ae.call(S,j)&&j!="constructor"&&T.push(j);return T}function qd(S,T,j,Q,je,le){var Ge=j&i,mt=S.length,vt=T.length;if(mt!=vt&&!(Ge&&vt>mt))return!1;var qe=le.get(S);if(qe&&le.get(T))return qe==T;var qt=-1,Xt=!0,Dt=j&s?new Bs:void 0;for(le.set(S,T),le.set(T,S);++qt<mt;){var Kt=S[qt],Gt=T[qt];if(Q)var Mr=Ge?Q(Gt,Kt,qt,T,S,le):Q(Kt,Gt,qt,S,T,le);if(Mr!==void 0){if(Mr)continue;Xt=!1;break}if(Dt){if(!$e(T,function(wr,un){if(!xe(Dt,un)&&(Kt===wr||je(Kt,wr,j,Q,le)))return Dt.push(un)})){Xt=!1;break}}else if(!(Kt===Gt||je(Kt,Gt,j,Q,le))){Xt=!1;break}}return le.delete(S),le.delete(T),Xt}function Y6(S,T,j,Q,je,le,Ge){switch(j){case B:if(S.byteLength!=T.byteLength||S.byteOffset!=T.byteOffset)return!1;S=S.buffer,T=T.buffer;case M:return!(S.byteLength!=T.byteLength||!le(new Qt(S),new Qt(T)));case d:case m:case D:return Wd(+S,+T);case w:return S.name==T.name&&S.message==T.message;case x:case c:return S==T+"";case _:var mt=ye;case f:var vt=Q&i;if(mt||(mt=fe),S.size!=T.size&&!vt)return!1;var qe=Ge.get(S);if(qe)return qe==T;Q|=s,Ge.set(S,T);var qt=qd(mt(S),mt(T),Q,je,le,Ge);return Ge.delete(S),qt;case p:if(rt)return rt.call(S)==rt.call(T)}return!1}function J6(S,T,j,Q,je,le){var Ge=j&i,mt=Hd(S),vt=mt.length,qe=Hd(T),qt=qe.length;if(vt!=qt&&!Ge)return!1;for(var Xt=vt;Xt--;){var Dt=mt[Xt];if(!(Ge?Dt in T:ae.call(T,Dt)))return!1}var Kt=le.get(S);if(Kt&&le.get(T))return Kt==T;var Gt=!0;le.set(S,T),le.set(T,S);for(var Mr=Ge;++Xt<vt;){Dt=mt[Xt];var wr=S[Dt],un=T[Dt];if(Q)var Jd=Ge?Q(un,wr,Dt,T,S,le):Q(wr,un,Dt,S,T,le);if(!(Jd===void 0?wr===un||je(wr,un,j,Q,le):Jd)){Gt=!1;break}Mr||(Mr=Dt=="constructor")}if(Gt&&!Mr){var Hs=S.constructor,Ws=T.constructor;Hs!=Ws&&"constructor"in S&&"constructor"in T&&!(typeof Hs=="function"&&Hs instanceof Hs&&typeof Ws=="function"&&Ws instanceof Ws)&&(Gt=!1)}return le.delete(S),le.delete(T),Gt}function Hd(S){return H6(S,a_,Q6)}function zs(S,T){var j=S.__data__;return e_(T)?j[typeof T=="string"?"string":"hash"]:j.map}function jn(S,T){var j=_e(S,T);return V6(j)?j:void 0}function Z6(S){var T=ae.call(S,zt),j=S[zt];try{S[zt]=void 0;var Q=!0}catch{}var je=Ce.call(S);return Q&&(T?S[zt]=j:delete S[zt]),je}var Q6=an?function(S){return S==null?[]:(S=Object(S),Oe(an(S),function(T){return ar.call(S,T)}))}:c_,Lr=Li;(Qe&&Lr(new Qe(new ArrayBuffer(1)))!=B||Ve&&Lr(new Ve)!=_||Xe&&Lr(Xe.resolve())!=E||et&&Lr(new et)!=f||tt&&Lr(new tt)!=C)&&(Lr=function(S){var T=Li(S),j=T==v?S.constructor:void 0,Q=j?ln(j):"";if(Q)switch(Q){case lt:return B;case ut:return _;case ht:return E;case dt:return f;case ft:return C}return T});function X6(S,T){return T=T??o,!!T&&(typeof S=="number"||te.test(S))&&S>-1&&S%1==0&&S<T}function e_(S){var T=typeof S;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?S!=="__proto__":S===null}function t_(S){return!!Ie&&Ie in S}function r_(S){var T=S&&S.constructor,j=typeof T=="function"&&T.prototype||se;return S===j}function n_(S){return Ce.call(S)}function ln(S){if(S!=null){try{return Ee.call(S)}catch{}try{return S+""}catch{}}return""}function Wd(S,T){return S===T||S!==S&&T!==T}var i_=kd(function(){return arguments}())?kd:function(S){return Mi(S)&&ae.call(S,"callee")&&!ar.call(S,"callee")},qs=Array.isArray;function s_(S){return S!=null&&Kd(S.length)&&!Vd(S)}var fc=Ni||l_;function o_(S,T){return zd(S,T)}function Vd(S){if(!Gd(S))return!1;var T=Li(S);return T==y||T==b||T==h||T==g}function Kd(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=o}function Gd(S){var T=typeof S;return S!=null&&(T=="object"||T=="function")}function Mi(S){return S!=null&&typeof S=="object"}var Yd=we?We(we):K6;function a_(S){return s_(S)?q6(S):G6(S)}function c_(){return[]}function l_(){return!1}t.exports=o_}(ss,ss.exports);var zm=ss.exports;const qm=Zs(zm);function Hm(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,l=t.charAt(0),h=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function m(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var _=0,D=0,I=0,v=b.length;I!==v&&b[I]===0;)I++,_++;for(var E=(v-I)*d+1>>>0,g=new Uint8Array(E);I!==v;){for(var x=b[I],f=0,c=E-1;(x!==0||f<D)&&c!==-1;c--,f++)x+=256*g[c]>>>0,g[c]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");D=f,I++}for(var p=E-D;p!==E&&g[p]===0;)p++;for(var R=l.repeat(_);p<E;++p)R+=t.charAt(g[p]);return R}function w(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var _=0;if(b[_]!==" "){for(var D=0,I=0;b[_]===l;)D++,_++;for(var v=(b.length-_)*h+1>>>0,E=new Uint8Array(v);b[_];){var g=r[b.charCodeAt(_)];if(g===255)return;for(var x=0,f=v-1;(g!==0||x<I)&&f!==-1;f--,x++)g+=a*E[f]>>>0,E[f]=g%256>>>0,g=g/256>>>0;if(g!==0)throw new Error("Non-zero carry");I=x,_++}if(b[_]!==" "){for(var c=v-I;c!==v&&E[c]===0;)c++;for(var p=new Uint8Array(D+(v-c)),R=D;c!==v;)p[R++]=E[c++];return p}}}function y(b){var _=w(b);if(_)return _;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:w,decode:y}}var Wm=Hm,Vm=Wm;const Cu=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Km=t=>new TextEncoder().encode(t),Gm=t=>new TextDecoder().decode(t);class Ym{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Jm{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Au(this,e)}}class Zm{constructor(e){this.decoders=e}or(e){return Au(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Au=(t,e)=>new Zm({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Qm{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Ym(e,r,n),this.decoder=new Jm(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const os=({name:t,prefix:e,encode:r,decode:n})=>new Qm(t,e,r,n),ai=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Vm(r,e);return os({prefix:t,name:e,encode:n,decode:s=>Cu(i(s))})},Xm=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,l=0,h=0;for(let d=0;d<s;++d){const m=i[t[d]];if(m===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|m,a+=r,a>=8&&(a-=8,o[h++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},ew=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},yt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>os({prefix:e,name:t,encode(i){return ew(i,n,r)},decode(i){return Xm(i,n,r,t)}}),tw=os({prefix:"\0",name:"identity",encode:t=>Gm(t),decode:t=>Km(t)});var rw=Object.freeze({__proto__:null,identity:tw});const nw=yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var iw=Object.freeze({__proto__:null,base2:nw});const sw=yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ow=Object.freeze({__proto__:null,base8:sw});const aw=ai({prefix:"9",name:"base10",alphabet:"0123456789"});var cw=Object.freeze({__proto__:null,base10:aw});const lw=yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),uw=yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var hw=Object.freeze({__proto__:null,base16:lw,base16upper:uw});const dw=yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),fw=yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pw=yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gw=yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),mw=yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ww=yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),yw=yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vw=yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bw=yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var _w=Object.freeze({__proto__:null,base32:dw,base32upper:fw,base32pad:pw,base32padupper:gw,base32hex:mw,base32hexupper:ww,base32hexpad:yw,base32hexpadupper:vw,base32z:bw});const Ew=ai({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Sw=ai({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var xw=Object.freeze({__proto__:null,base36:Ew,base36upper:Sw});const Dw=ai({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ow=ai({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Iw=Object.freeze({__proto__:null,base58btc:Dw,base58flickr:Ow});const Cw=yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Aw=yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$w=yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Tw=yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Rw=Object.freeze({__proto__:null,base64:Cw,base64pad:Aw,base64url:$w,base64urlpad:Tw});const $u=Array.from(""),Pw=$u.reduce((t,e,r)=>(t[r]=e,t),[]),Nw=$u.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Lw(t){return t.reduce((e,r)=>(e+=Pw[r],e),"")}function Mw(t){const e=[];for(const r of t){const n=Nw[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Uw=os({prefix:"",name:"base256emoji",encode:Lw,decode:Mw});var Fw=Object.freeze({__proto__:null,base256emoji:Uw}),jw=Ru,Tu=128,Bw=127,kw=~Bw,zw=Math.pow(2,31);function Ru(t,e,r){e=e||[],r=r||0;for(var n=r;t>=zw;)e[r++]=t&255|Tu,t/=128;for(;t&kw;)e[r++]=t&255|Tu,t>>>=7;return e[r]=t|0,Ru.bytes=r-n+1,e}var qw=qo,Hw=128,Pu=127;function qo(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw qo.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Pu)<<i:(o&Pu)*Math.pow(2,i),i+=7}while(o>=Hw);return qo.bytes=s-n,r}var Ww=Math.pow(2,7),Vw=Math.pow(2,14),Kw=Math.pow(2,21),Gw=Math.pow(2,28),Yw=Math.pow(2,35),Jw=Math.pow(2,42),Zw=Math.pow(2,49),Qw=Math.pow(2,56),Xw=Math.pow(2,63),ey=function(t){return t<Ww?1:t<Vw?2:t<Kw?3:t<Gw?4:t<Yw?5:t<Jw?6:t<Zw?7:t<Qw?8:t<Xw?9:10},ty={encode:jw,decode:qw,encodingLength:ey},Nu=ty;const Lu=(t,e,r=0)=>(Nu.encode(t,e,r),e),Mu=t=>Nu.encodingLength(t),Ho=(t,e)=>{const r=e.byteLength,n=Mu(t),i=n+Mu(r),s=new Uint8Array(i+r);return Lu(t,s,0),Lu(r,s,n),s.set(e,i),new ry(t,r,e,s)};class ry{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Uu=({name:t,code:e,encode:r})=>new ny(t,e,r);class ny{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Ho(this.code,r):r.then(n=>Ho(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Fu=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),iy=Uu({name:"sha2-256",code:18,encode:Fu("SHA-256")}),sy=Uu({name:"sha2-512",code:19,encode:Fu("SHA-512")});var oy=Object.freeze({__proto__:null,sha256:iy,sha512:sy});const ju=0,ay="identity",Bu=Cu;var cy=Object.freeze({__proto__:null,identity:{code:ju,name:ay,encode:Bu,digest:t=>Ho(ju,Bu(t))}});new TextEncoder,new TextDecoder;const ku={...rw,...iw,...ow,...cw,...hw,..._w,...xw,...Iw,...Rw,...Fw};({...oy,...cy});function zu(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ly(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?zu(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function qu(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Hu=qu("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Wo=qu("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=ly(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),uy={utf8:Hu,"utf-8":Hu,hex:ku.base16,latin1:Wo,ascii:Wo,binary:Wo,...ku};function hy(t,e="utf8"){const r=uy[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?zu(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Wu="wc",dy=2,Vo="core",xr=`${Wu}@2:${Vo}:`,fy={name:Vo,logger:"error"},py={database:":memory:"},gy="crypto",Vu="client_ed25519_seed",my=X.ONE_DAY,wy="keychain",yy="0.3",vy="messages",by="0.3",_y=X.SIX_HOURS,Ey="publisher",Ku="irn",Sy="error",Gu="wss://relay.walletconnect.com",Yu="wss://relay.walletconnect.org",xy="relayer",Et={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Dy="_subscription",hr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Oy=X.ONE_SECOND,Iy="2.10.0",Cy=1e4,Ay="0.3",$y="WALLETCONNECT_CLIENT_ID",nr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Ty="subscription",Ry="0.3",Py=X.FIVE_SECONDS*1e3,Ny="pairing",Ly="0.3",ci={wc_pairingDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:X.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:X.ONE_DAY,prompt:!1,tag:0},res:{ttl:X.ONE_DAY,prompt:!1,tag:0}}},ir={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},My="history",Uy="0.3",Fy="expirer",Wt={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},jy="0.3",Ko="verify-api",as="https://verify.walletconnect.com",Ju="https://verify.walletconnect.org";let By=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=wy,this.version=yy,this.initialized=!1,this.storagePrefix=xr,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=Y("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,iu(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?su(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},ky=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=gy,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=$l(i);return Al(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=og();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=$l(s),a=Po();return await pp(a,i,my,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),l=ag(a,s);return this.setSymKey(l,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||cg(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=Xl(o),l=fo(s);if(eu(a)){const w=a.senderPublicKey,y=a.receiverPublicKey;i=await this.generateSharedKey(w,y)}const h=this.getSymKey(i),{type:d,senderPublicKey:m}=a;return ug({type:d,symKey:h,message:l,senderPublicKey:m})},this.decode=async(i,s,o)=>{this.isInitialized();const a=fg(s,o);if(eu(a)){const l=a.receiverPublicKey,h=a.senderPublicKey;i=await this.generateSharedKey(l,h)}try{const l=this.getSymKey(i),h=hg({symKey:l,encoded:s});return ul(h)}catch(l){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(l)}},this.getPayloadType=i=>{const s=Qi(i);return Xn(s.type)},this.getPayloadSenderPublicKey=i=>{const s=Qi(i);return s.senderPublicKey?It(s.senderPublicKey,Ct):void 0},this.core=e,this.logger=De.generateChildLogger(r,this.name),this.keychain=n||new By(this.core,this.logger)}get context(){return De.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Vu)}catch{e=Po(),await this.keychain.set(Vu,e)}return hy(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},zy=class extends v0{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=vy,this.version=by,this.initialized=!1,this.storagePrefix=xr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=yn(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=yn(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=De.generateChildLogger(e,this.name),this.core=r}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,iu(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?su(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}};class qy extends b0{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Yt.EventEmitter,this.name=Ey,this.queue=new Map,this.publishTimeout=X.toMiliseconds(X.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const a=(s==null?void 0:s.ttl)||_y,l=Lo(s),h=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,m=(s==null?void 0:s.id)||Su().toString(),w={topic:n,message:i,opts:{ttl:a,relay:l,prompt:h,tag:d,id:m}},y=setTimeout(()=>this.queue.set(m,w),this.publishTimeout);try{await await ri(this.rpcPublish(n,i,a,l,h,d,m),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(m),this.relayer.events.emit(Et.publish,w)}catch(b){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(m),b;return}finally{clearTimeout(y)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=De.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return De.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var l,h,d,m;const w={method:es(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return At((l=w.params)==null?void 0:l.prompt)&&((h=w.params)==null||delete h.prompt),At((d=w.params)==null?void 0:d.tag)&&((m=w.params)==null||delete m.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:w}),this.relayer.request(w)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(pn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Et.connection_stalled);return}this.checkQueue()}),this.relayer.on(Et.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class Hy{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Wy=Object.defineProperty,Vy=Object.defineProperties,Ky=Object.getOwnPropertyDescriptors,Zu=Object.getOwnPropertySymbols,Gy=Object.prototype.hasOwnProperty,Yy=Object.prototype.propertyIsEnumerable,Qu=(t,e,r)=>e in t?Wy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,li=(t,e)=>{for(var r in e||(e={}))Gy.call(e,r)&&Qu(t,r,e[r]);if(Zu)for(var r of Zu(e))Yy.call(e,r)&&Qu(t,r,e[r]);return t},Go=(t,e)=>Vy(t,Ky(e));let Jy=class extends S0{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new Hy,this.events=new Yt.EventEmitter,this.name=Ty,this.version=Ry,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=xr,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Lo(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const o=new X.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=Py&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=De.generateChildLogger(r,this.name),this.clientId=""}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Lo(n);await this.rpcUnsubscribe(e,r,i);const s=nt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:es(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await ri(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Et.connection_stalled)}return yn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:es(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await ri(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Et.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:es(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Go(li({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,li({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,li({},r)),this.topicMap.set(r.topic,e),this.events.emit(nr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(nr.deleted,Go(li({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(nr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(nr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);ni(r)&&this.onBatchSubscribe(r.map((n,i)=>Go(li({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(pn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Et.connect,async()=>{await this.onConnect()}),this.relayer.on(Et.disconnect,()=>{this.onDisconnect()}),this.events.on(nr.created,async e=>{const r=nr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(nr.deleted,async e=>{const r=nr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var Zy=Object.defineProperty,Xu=Object.getOwnPropertySymbols,Qy=Object.prototype.hasOwnProperty,Xy=Object.prototype.propertyIsEnumerable,eh=(t,e,r)=>e in t?Zy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ev=(t,e)=>{for(var r in e||(e={}))Qy.call(e,r)&&eh(t,r,e[r]);if(Xu)for(var r of Xu(e))Xy.call(e,r)&&eh(t,r,e[r]);return t};let tv=class extends _0{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Yt.EventEmitter,this.name=xy,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Et.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Et.error,r)},this.registerProviderListeners=()=>{this.provider.on(hr.payload,this.onPayloadHandler),this.provider.on(hr.connect,this.onConnectHandler),this.provider.on(hr.disconnect,this.onDisconnectHandler),this.provider.on(hr.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?De.generateChildLogger(e.logger,this.name):De.pino(De.getDefaultLoggerOptions({level:e.logger||Sy})),this.messages=new zy(this.logger,e.core),this.subscriber=new Jy(this,this.logger),this.publisher=new qy(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Gu,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Yu}...`),await this.restartTransport(Yu)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},Cy)}get context(){return De.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(s=>{this.subscriber.once(nr.created,o=>{o.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,r),s()})]),i)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await ri(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(nr.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await ri(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(hr.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await mu())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Um(new km(xg({sdkVersion:Iy,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),zo(e)){if(!e.method.endsWith(Dy))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(ev({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else is(e)&&this.events.emit(Et.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Et.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Bo(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(hr.payload,this.onPayloadHandler),this.provider.off(hr.connect,this.onConnectHandler),this.provider.off(hr.disconnect,this.onDisconnectHandler),this.provider.off(hr.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Et.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await mu();mm(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Et.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},X.toMiliseconds(Oy)))}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var rv=Object.defineProperty,th=Object.getOwnPropertySymbols,nv=Object.prototype.hasOwnProperty,iv=Object.prototype.propertyIsEnumerable,rh=(t,e,r)=>e in t?rv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nh=(t,e)=>{for(var r in e||(e={}))nv.call(e,r)&&rh(t,r,e[r]);if(th)for(var r of th(e))iv.call(e,r)&&rh(t,r,e[r]);return t};let cs=class extends E0{constructor(e,r,n,i=xr,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=Ay,this.cached=[],this.initialized=!1,this.storagePrefix=xr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!At(o)?this.map.set(this.getKey(o),o):Kg(o)?this.map.set(o.id,o):Gg(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(l=>qm(a[l],o[l]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const l=nh(nh({},this.getData(o)),a);this.map.set(o,l),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=De.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},sv=class{constructor(e,r){this.core=e,this.logger=r,this.name=Ny,this.version=Ly,this.events=new Nc,this.initialized=!1,this.storagePrefix=xr,this.ignoredPayloadTypes=[Kr],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Po(),i=await this.core.crypto.setSymKey(n),s=Jt(X.FIVE_MINUTES),o={protocol:Ku},a={topic:i,expiry:s,relay:o,active:!1},l=Ug({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:l}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o}=Ng(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const a=Jt(X.FIVE_MINUTES),l={topic:i,relay:o,expiry:a,active:!1};return await this.pairings.set(i,l),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),l},this.activate=async({topic:n})=>{this.isInitialized();const i=Jt(X.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:l}=vn();this.events.once(Ze("pairing_ping",s),({error:h})=>{h?l(h):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",nt("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=oi(i,s),a=await this.core.crypto.encode(n,o),l=ci[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,l),o.id},this.sendResult=async(n,i,s)=>{const o=Bo(n,s),a=await this.core.crypto.encode(i,o),l=await this.core.history.get(i,n),h=ci[l.request.method].res;await this.core.relayer.publish(i,a,h),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=ko(n,s),a=await this.core.crypto.encode(i,o),l=await this.core.history.get(i,n),h=ci[l.request.method]?ci[l.request.method].res:ci.unregistered_method.res;await this.core.relayer.publish(i,a,h),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,nt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Sr(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{ur(i)?this.events.emit(Ze("pairing_ping",s),{}):Zt(i)&&this.events.emit(Ze("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=nt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(nt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Nt(n)){const{message:i}=Y("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!Vg(n.uri)){const{message:i}=Y("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Nt(n)){const{message:s}=Y("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Nt(n)){const{message:s}=Y("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!at(n,!1)){const{message:i}=Y("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=Y("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Sr(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=Y("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=De.generateChildLogger(r,this.name),this.pairings=new cs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return De.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Et.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{zo(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):is(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Wt.expired,async e=>{const{topic:r}=au(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},ov=class extends y0{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Yt.EventEmitter,this.name=My,this.version=Uy,this.cached=[],this.initialized=!1,this.storagePrefix=xr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Jt(X.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(ir.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Zt(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(ir.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(ir.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:oi(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ir.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ir.created,e=>{const r=ir.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ir.updated,e=>{const r=ir.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ir.deleted,e=>{const r=ir.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(pn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{X.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},av=class extends x0{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Yt.EventEmitter,this.name=Fy,this.version=jy,this.cached=[],this.initialized=!1,this.storagePrefix=xr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Wt.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Wt.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Dg(e);if(typeof e=="number")return Og(e);const{message:r}=Y("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Wt.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;X.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Wt.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(pn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Wt.created,e=>{const r=Wt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Wt.expired,e=>{const r=Wt.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Wt.deleted,e=>{const r=Wt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},cv=class extends D0{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Ko,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||Xi()||!ei())return;const i=(n==null?void 0:n.verifyUrl)||as;this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Ju;try{await this.createIframe()}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=(n==null?void 0:n.verifyUrl)||as;let s="";try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.warn(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.warn(o),s=await this.fetchAttestation(n.attestationId,Ju)}return s},this.fetchAttestation=async(n,i)=>{var s;this.logger.info(`resolving attestation: ${n} from url: ${i}`);const o=this.startAbortTimer(X.ONE_SECOND*2),a=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?(s=await a.json())==null?void 0:s.origin:""},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(Ko))return s();window.addEventListener("message",i);const o=document.createElement("iframe");o.id=Ko,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},X.toMiliseconds(X.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=De.generateChildLogger(r,this.name),this.verifyUrl=as,this.abortController=new AbortController,this.isDevEnv=No()&&process.env.IS_VITEST}get context(){return De.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),X.toMiliseconds(e))}};var lv=Object.defineProperty,ih=Object.getOwnPropertySymbols,uv=Object.prototype.hasOwnProperty,hv=Object.prototype.propertyIsEnumerable,sh=(t,e,r)=>e in t?lv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oh=(t,e)=>{for(var r in e||(e={}))uv.call(e,r)&&sh(t,r,e[r]);if(ih)for(var r of ih(e))hv.call(e,r)&&sh(t,r,e[r]);return t};const dv=class Zd extends w0{constructor(e){super(e),this.protocol=Wu,this.version=dy,this.name=Vo,this.events=new Yt.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Gu;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:De.pino(De.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||fy.logger}));this.logger=De.generateChildLogger(r,this.name),this.heartbeat=new pn.HeartBeat,this.crypto=new ky(this,this.logger,e==null?void 0:e.keychain),this.history=new ov(this,this.logger),this.expirer=new av(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new t0(oh(oh({},py),e==null?void 0:e.storageOptions)),this.relayer=new tv({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new sv(this,this.logger),this.verify=new cv(this.projectId||"",this.logger)}static async init(e){const r=new Zd(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem($y,n),r}get context(){return De.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},ah="wc",ch=2,lh="client",Yo=`${ah}@${ch}:${lh}:`,Jo={name:lh,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},uh="WALLETCONNECT_DEEPLINK_CHOICE",fv="proposal",pv="Proposal expired",gv="session",ls=X.SEVEN_DAYS,mv="engine",ui={wc_sessionPropose:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1104},res:{ttl:X.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1106},res:{ttl:X.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1112},res:{ttl:X.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1115}}},Zo={min:X.FIVE_MINUTES,max:X.SEVEN_DAYS},dr={idle:"IDLE",active:"ACTIVE"},wv="request",yv=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var vv=Object.defineProperty,bv=Object.defineProperties,_v=Object.getOwnPropertyDescriptors,hh=Object.getOwnPropertySymbols,Ev=Object.prototype.hasOwnProperty,Sv=Object.prototype.propertyIsEnumerable,dh=(t,e,r)=>e in t?vv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lt=(t,e)=>{for(var r in e||(e={}))Ev.call(e,r)&&dh(t,r,e[r]);if(hh)for(var r of hh(e))Sv.call(e,r)&&dh(t,r,e[r]);return t},hi=(t,e)=>bv(t,_v(e));class xv extends I0{constructor(e){super(e),this.name=mv,this.events=new Nc,this.initialized=!1,this.ignoredPayloadTypes=[Kr],this.requestQueue={state:dr.idle,queue:[]},this.sessionRequestQueue={state:dr.idle,queue:[]},this.requestQueueDelay=X.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ui)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},X.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=hi(Lt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:l}=n;let h=i,d,m=!1;if(h&&(m=this.client.core.pairing.pairings.get(h).active),!h||!m){const{topic:E,uri:g}=await this.client.core.pairing.create();h=E,d=g}const w=await this.client.core.crypto.generateKeyPair(),y=Lt({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:Ku}],proposer:{publicKey:w,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:b,resolve:_,done:D}=vn(X.FIVE_MINUTES,pv);if(this.events.once(Ze("session_connect"),async({error:E,session:g})=>{if(E)b(E);else if(g){g.self.publicKey=w;const x=hi(Lt({},g),{requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces});await this.client.session.set(g.topic,x),await this.setExpiry(g.topic,g.expiry),h&&await this.client.core.pairing.updateMetadata({topic:h,metadata:g.peer.metadata}),_(x)}}),!h){const{message:E}=Y("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(E)}const I=await this.sendRequest({topic:h,method:"wc_sessionPropose",params:y}),v=Jt(X.FIVE_MINUTES);return await this.setProposal(I,Lt({id:I,expiry:v},y)),{uri:d,approval:D}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:l,proposer:h,requiredNamespaces:d,optionalNamespaces:m}=a;l=l||"",ii(d)||(d=kg(s,"approve()"));const w=await this.client.core.crypto.generateKeyPair(),y=h.publicKey,b=await this.client.core.crypto.generateSharedKey(w,y);l&&n&&(await this.client.core.pairing.updateMetadata({topic:l,metadata:h.metadata}),await this.sendResult({id:n,topic:l,result:{relay:{protocol:i??"irn"},responderPublicKey:w}}),await this.client.proposal.delete(n,nt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:l}));const _=Lt({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:d,optionalNamespaces:m,pairingTopic:l,controller:{publicKey:w,metadata:this.client.metadata},expiry:Jt(ls)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(b),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:_,throwOnFailedPublish:!0});const D=hi(Lt({},_),{topic:b,pairingTopic:l,acknowledged:!1,self:_.controller,peer:{publicKey:h.publicKey,metadata:h.metadata},controller:w});return await this.client.session.set(b,D),await this.setExpiry(b,Jt(ls)),{topic:b,acknowledged:()=>new Promise(I=>setTimeout(()=>I(this.client.session.get(b)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,nt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:a,reject:l}=vn();return this.events.once(Ze("session_update",s),({error:h})=>{h?l(h):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=vn();return this.events.once(Ze("session_extend",i),({error:l})=>{l?a(l):o()}),await this.setExpiry(n,Jt(ls)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o}=r,a=jo(),{done:l,resolve:h,reject:d}=vn(o);return this.events.once(Ze("session_request",a),({error:m,result:w})=>{m?d(m):h(w)}),await Promise.all([new Promise(async m=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:i,chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(w=>d(w)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),m()}),new Promise(async m=>{const w=await this.client.core.storage.getItem(uh);Ig({id:a,topic:s,wcDeepLink:w}),m()}),l()]).then(m=>m[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;ur(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):Zt(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=vn();this.events.once(Ze("session_ping",i),({error:l})=>{l?a(l):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:nt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Hg(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,nt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(uh).catch(s=>this.client.logger.warn(s))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,nt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=dr.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=ui.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o}),n&&this.client.core.expirer.set(i,Jt(n))},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:l,throwOnFailedPublish:h}=r,d=oi(i,s,l);if(ei()&&yv.includes(i)){const y=yn(JSON.stringify(d));this.client.core.verify.register({attestationId:y})}const m=await this.client.core.crypto.encode(n,d),w=ui[i].req;return o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(n,d),h?(w.internal=hi(Lt({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,m,w)):this.client.core.relayer.publish(n,m,w).catch(y=>this.client.logger.error(y)),d.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o}=r,a=Bo(n,s),l=await this.client.core.crypto.encode(i,a),h=await this.client.core.history.get(i,n),d=ui[h.request.method].res;o?(d.internal=hi(Lt({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,l,d)):this.client.core.relayer.publish(i,l,d).catch(m=>this.client.logger.error(m)),await this.client.core.history.resolve(a)},this.sendError=async(r,n,i)=>{const s=ko(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),l=ui[a.request.method].res;this.client.core.relayer.publish(n,o,l),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{Sr(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Sr(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===dr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=dr.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=dr.idle},this.processRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=Y("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(Lt({},n.params));const o=Jt(X.FIVE_MINUTES),a=Lt({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);const l=yn(JSON.stringify(n)),h=await this.getVerifyContext(l,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:h})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(ur(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const l=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const h=await this.client.core.crypto.generateSharedKey(a,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:h});const d=await this.client.core.relayer.subscribe(h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else Zt(n)&&(await this.client.proposal.delete(i,nt("USER_DISCONNECTED")),this.events.emit(Ze("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:l,namespaces:h,requiredNamespaces:d,optionalNamespaces:m,sessionProperties:w,pairingTopic:y}=n.params,b=Lt({topic:r,relay:o,expiry:l,namespaces:h,acknowledged:!0,pairingTopic:y,requiredNamespaces:d,optionalNamespaces:m,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},w&&{sessionProperties:w});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(Ze("session_connect"),{session:b}),this.cleanupDuplicatePairings(b)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;ur(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ze("session_approve",i),{})):Zt(n)&&(await this.client.session.delete(r,nt("USER_DISCONNECTED")),this.events.emit(Ze("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=ns.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(Lt({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),ns.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;ur(n)?this.events.emit(Ze("session_update",i),{}):Zt(n)&&this.events.emit(Ze("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Jt(ls)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;ur(n)?this.events.emit(Ze("session_extend",i),{}):Zt(n)&&this.events.emit(Ze("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{ur(n)?this.events.emit(Ze("session_ping",i),{}):Zt(n)&&this.events.emit(Ze("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Et.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult({id:i,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(Lt({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.addSessionRequestToSessionRequestQueue({id:i,topic:r,params:s}),await this.processSessionRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;ur(n)?this.events.emit(Ze("session_request",i),{result:n.result}):Zt(n)&&this.events.emit(Ze("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=ns.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Lt({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),ns.set(o,i)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=dr.idle,this.processSessionRequestQueue()},X.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===dr.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:s}=r,o=yn(JSON.stringify(oi("wc_sessionRequest",s,n))),a=this.client.session.get(i),l=await this.getVerifyContext(o,a.peer.metadata);this.sessionRequestQueue.state=dr.active,this.client.events.emit("session_request",{id:n,topic:i,params:s,verifyContext:l})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!Nt(r)){const{message:l}=Y("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(At(n)||await this.isValidPairingTopic(n),!rm(a,!0)){const{message:l}=Y("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(l)}!At(i)&&ii(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!At(s)&&ii(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),At(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=tm(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Nt(r))throw new Error(Y("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),l=rs(i,"approve()");if(l)throw new Error(l.message);const h=pu(a.requiredNamespaces,i,"approve()");if(h)throw new Error(h.message);if(!at(s,!0)){const{message:d}=Y("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}At(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Nt(r)){const{message:s}=Y("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!im(i)){const{message:s}=Y("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Nt(r)){const{message:h}=Y("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(h)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!du(n)){const{message:h}=Y("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const a=Yg(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const l=rs(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(Sr(o)){const{message:h}=Y("EXPIRED","onSessionSettleRequest()");throw new Error(h)}},this.isValidUpdate=async r=>{if(!Nt(r)){const{message:l}=Y("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(l)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=rs(i,"update()");if(o)throw new Error(o.message);const a=pu(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Nt(r)){const{message:i}=Y("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Nt(r)){const{message:l}=Y("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(l)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!fu(a,s)){const{message:l}=Y("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(l)}if(!sm(i)){const{message:l}=Y("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(l)}if(!cm(a,s,i.method)){const{message:l}=Y("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(l)}if(o&&!dm(o,Zo)){const{message:l}=Y("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Zo.min} and ${Zo.max}`);throw new Error(l)}},this.isValidRespond=async r=>{if(!Nt(r)){const{message:s}=Y("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!om(i)){const{message:s}=Y("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Nt(r)){const{message:i}=Y("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Nt(r)){const{message:a}=Y("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!fu(o,s)){const{message:a}=Y("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!am(i)){const{message:a}=Y("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!lm(o,s,i.name)){const{message:a}=Y("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Nt(r)){const{message:i}=Y("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||as,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s,i.verified.validation=s===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!at(i,!1)){const{message:s}=Y("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Et.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);try{zo(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):is(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(Wt.expired,async e=>{const{topic:r,id:n}=au(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Y("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!at(e,!1)){const{message:r}=Y("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Y("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Sr(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Y("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!at(e,!1)){const{message:r}=Y("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=Y("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Sr(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=Y("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(at(e,!1)){const{message:r}=Y("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Y("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!nm(e)){const{message:r}=Y("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Y("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Sr(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=Y("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class Dv extends cs{constructor(e,r){super(e,r,fv,Yo),this.core=e,this.logger=r}}class Ov extends cs{constructor(e,r){super(e,r,gv,Yo),this.core=e,this.logger=r}}class Iv extends cs{constructor(e,r){super(e,r,wv,Yo,n=>n.id),this.core=e,this.logger=r}}let Cv=class Qd extends O0{constructor(e){super(e),this.protocol=ah,this.version=ch,this.name=Jo.name,this.events=new Yt.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||Jo.name,this.metadata=(e==null?void 0:e.metadata)||bg();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:De.pino(De.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Jo.logger}));this.core=(e==null?void 0:e.core)||new dv(e),this.logger=De.generateChildLogger(r,this.name),this.session=new Ov(this.core,this.logger),this.proposal=new Dv(this.core,this.logger),this.pendingRequest=new Iv(this.core,this.logger),this.engine=new xv(this)}static async init(e){const r=new Qd(e);return await r.initialize(),r}get context(){return De.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Av=Object.defineProperty,$v=Object.defineProperties,Tv=Object.getOwnPropertyDescriptors,fh=Object.getOwnPropertySymbols,Rv=Object.prototype.hasOwnProperty,Pv=Object.prototype.propertyIsEnumerable,ph=(t,e,r)=>e in t?Av(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nv=(t,e)=>{for(var r in e||(e={}))Rv.call(e,r)&&ph(t,r,e[r]);if(fh)for(var r of fh(e))Pv.call(e,r)&&ph(t,r,e[r]);return t},Lv=(t,e)=>$v(t,Tv(e)),Qo=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Be=(t,e,r)=>(Qo(t,e,"read from private field"),r?r.call(t):e.get(t)),Yr=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},us=(t,e,r,n)=>(Qo(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),St=(t,e,r)=>(Qo(t,e,"access private method"),r),Jr,_n,di,ct,Xo,gh,xt,$t,ea,mh;let Mv=class{constructor(e){Yr(this,Xo),Yr(this,xt),Yr(this,ea),Yr(this,Jr,void 0),Yr(this,_n,void 0),Yr(this,di,void 0),Yr(this,ct,void 0),us(this,Jr,e),us(this,_n,St(this,Xo,gh).call(this)),St(this,xt,$t).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await St(this,xt,$t).call(this);const o=Be(this,_n).subscribeModal(h=>{h.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:l}=await Be(this,ct).connect(e);if(a){const h=new Set;r&&Object.values(r).forEach(({chains:d})=>{d&&d.forEach(m=>h.add(m))}),n&&Object.values(n).forEach(({chains:d})=>{d&&d.forEach(m=>h.add(m))}),await Be(this,_n).openModal({uri:a,chains:Array.from(h)})}try{const h=await l();i(h)}catch(h){s(h)}finally{o(),Be(this,_n).closeModal()}})}async disconnect(e){await St(this,xt,$t).call(this),await Be(this,ct).disconnect(e)}async request(e){return await St(this,xt,$t).call(this),await Be(this,ct).request(e)}async getSessions(){return await St(this,xt,$t).call(this),Be(this,ct).session.getAll()}async getSession(){return await St(this,xt,$t).call(this),Be(this,ct).session.getAll().at(-1)}async onSessionEvent(e){await St(this,xt,$t).call(this),Be(this,ct).on("session_event",e)}async offSessionEvent(e){await St(this,xt,$t).call(this),Be(this,ct).off("session_event",e)}async onSessionUpdate(e){await St(this,xt,$t).call(this),Be(this,ct).on("session_update",e)}async offSessionUpdate(e){await St(this,xt,$t).call(this),Be(this,ct).off("session_update",e)}async onSessionDelete(e){await St(this,xt,$t).call(this),Be(this,ct).on("session_delete",e)}async offSessionDelete(e){await St(this,xt,$t).call(this),Be(this,ct).off("session_delete",e)}async onSessionExpire(e){await St(this,xt,$t).call(this),Be(this,ct).on("session_expire",e)}async offSessionExpire(e){await St(this,xt,$t).call(this),Be(this,ct).off("session_expire",e)}};Jr=new WeakMap,_n=new WeakMap,di=new WeakMap,ct=new WeakMap,Xo=new WeakSet,gh=function(){const{modalOptions:t,projectId:e}=Be(this,Jr);return new _f(Lv(Nv({},t),{projectId:e}))},xt=new WeakSet,$t=async function(){return Be(this,ct)?!0:(!Be(this,di)&&typeof window<"u"&&us(this,di,St(this,ea,mh).call(this)),Be(this,di))},ea=new WeakSet,mh=async function(){us(this,ct,await Cv.init({metadata:Be(this,Jr).metadata,projectId:Be(this,Jr).projectId,relayUrl:Be(this,Jr).relayUrl}));const t=await Be(this,ct).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};const hs=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent","getEvents","createSharedState","importSharedState","requestSignature"],fi=["aleo:1"],ds=["chainChanged","accountSelected","accountSynced"],wh="f0aaeffe71b636da453fce042d79d723",yh={standaloneChains:fi,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"puzzleapp://",universal:"https://jigsaw-dev.puzzle.online/"}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:"https://walletconnect.puzzle.online/"}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},Uv={requiredNamespaces:{aleo:{methods:hs,chains:fi,events:ds}}};function Fv(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(i){i(r)}),(n=t.get("*"))&&n.slice().map(function(i){i(e,r)})}}}const vh=t=>{let e;const r=new Set,n=(l,h)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const m=e;e=h??typeof d!="object"?d:Object.assign({},e,d),r.forEach(w=>w(e,m))}},i=()=>e,a={setState:n,getState:i,subscribe:l=>(r.add(l),()=>r.delete(l)),destroy:()=>{r.clear()}};return e=t(n,i,a),a},jv=t=>t?vh(t):vh;var ta={exports:{}},ra={},fs={exports:{}},na={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh;function Bv(){if(bh)return na;bh=1;var t=Me;function e(m,w){return m===w&&(m!==0||1/m===1/w)||m!==m&&w!==w}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(m,w){var y=w(),b=n({inst:{value:y,getSnapshot:w}}),_=b[0].inst,D=b[1];return s(function(){_.value=y,_.getSnapshot=w,l(_)&&D({inst:_})},[m,y,w]),i(function(){return l(_)&&D({inst:_}),m(function(){l(_)&&D({inst:_})})},[m]),o(y),y}function l(m){var w=m.getSnapshot;m=m.value;try{var y=w();return!r(m,y)}catch{return!0}}function h(m,w){return w()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:a;return na.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,na}var ia={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _h;function kv(){return _h||(_h=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=Me,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(E){{for(var g=arguments.length,x=new Array(g>1?g-1:0),f=1;f<g;f++)x[f-1]=arguments[f];n("error",E,x)}}function n(E,g,x){{var f=e.ReactDebugCurrentFrame,c=f.getStackAddendum();c!==""&&(g+="%s",x=x.concat([c]));var p=x.map(function(R){return String(R)});p.unshift("Warning: "+g),Function.prototype.apply.call(console[E],console,p)}}function i(E,g){return E===g&&(E!==0||1/E===1/g)||E!==E&&g!==g}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,l=t.useLayoutEffect,h=t.useDebugValue,d=!1,m=!1;function w(E,g,x){d||t.startTransition!==void 0&&(d=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var f=g();if(!m){var c=g();s(f,c)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),m=!0)}var p=o({inst:{value:f,getSnapshot:g}}),R=p[0].inst,C=p[1];return l(function(){R.value=f,R.getSnapshot=g,y(R)&&C({inst:R})},[E,f,g]),a(function(){y(R)&&C({inst:R});var M=function(){y(R)&&C({inst:R})};return E(M)},[E]),h(f),f}function y(E){var g=E.getSnapshot,x=E.value;try{var f=g();return!s(x,f)}catch{return!0}}function b(E,g,x){return g()}var _=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",D=!_,I=D?b:w,v=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:I;ia.useSyncExternalStore=v,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),ia}var Eh;function Sh(){return Eh||(Eh=1,process.env.NODE_ENV==="production"?fs.exports=Bv():fs.exports=kv()),fs.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh;function zv(){if(xh)return ra;xh=1;var t=Me,e=Sh();function r(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return ra.useSyncExternalStoreWithSelector=function(h,d,m,w,y){var b=s(null);if(b.current===null){var _={hasValue:!1,value:null};b.current=_}else _=b.current;b=a(function(){function I(f){if(!v){if(v=!0,E=f,f=w(f),y!==void 0&&_.hasValue){var c=_.value;if(y(c,f))return g=c}return g=f}if(c=g,n(E,f))return c;var p=w(f);return y!==void 0&&y(c,p)?c:(E=f,g=p)}var v=!1,E,g,x=m===void 0?null:m;return[function(){return I(d())},x===null?void 0:function(){return I(x())}]},[d,m,w,y]);var D=i(h,b[0],b[1]);return o(function(){_.hasValue=!0,_.value=D},[D]),l(D),D},ra}var sa={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh;function qv(){return Dh||(Dh=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=Me,e=Sh();function r(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;function h(d,m,w,y,b){var _=s(null),D;_.current===null?(D={hasValue:!1,value:null},_.current=D):D=_.current;var I=a(function(){var x=!1,f,c,p=function(B){if(!x){x=!0,f=B;var W=y(B);if(b!==void 0&&D.hasValue){var A=D.value;if(b(A,W))return c=A,A}return c=W,W}var N=f,V=c;if(n(N,B))return V;var z=y(B);return b!==void 0&&b(V,z)?V:(f=B,c=z,z)},R=w===void 0?null:w,C=function(){return p(m())},M=R===null?void 0:function(){return p(R())};return[C,M]},[m,w,y,b]),v=I[0],E=I[1],g=i(d,v,E);return o(function(){D.hasValue=!0,D.value=g},[g]),l(g),g}sa.useSyncExternalStoreWithSelector=h,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),sa}process.env.NODE_ENV==="production"?ta.exports=zv():ta.exports=qv();var Hv=ta.exports;const Wv=Zs(Hv),{useSyncExternalStoreWithSelector:Vv}=Wv;function Kv(t,e=t.getState,r){const n=Vv(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return Me.useDebugValue(n),n}const Oh=t=>{const e=typeof t=="function"?jv(t):t,r=(n,i)=>Kv(e,n,i);return Object.assign(r,e),r},Gv=t=>t?Oh(t):Oh;function Yv(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,e==null?void 0:e.reviver),a=(s=r.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>r.setItem(i,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:i=>r.removeItem(i)}}const pi=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return pi(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return pi(n)(r)}}}},Jv=(t,e)=>(r,n,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:D=>D,version:0,merge:(D,I)=>({...I,...D}),...e},o=!1;const a=new Set,l=new Set;let h;try{h=s.getStorage()}catch{}if(!h)return t((...D)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...D)},n,i);const d=pi(s.serialize),m=()=>{const D=s.partialize({...n()});let I;const v=d({state:D,version:s.version}).then(E=>h.setItem(s.name,E)).catch(E=>{I=E});if(I)throw I;return v},w=i.setState;i.setState=(D,I)=>{w(D,I),m()};const y=t((...D)=>{r(...D),m()},n,i);let b;const _=()=>{var D;if(!h)return;o=!1,a.forEach(v=>v(n()));const I=((D=s.onRehydrateStorage)==null?void 0:D.call(s,n()))||void 0;return pi(h.getItem.bind(h))(s.name).then(v=>{if(v)return s.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return s.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var E;return b=s.merge(v,(E=n())!=null?E:y),r(b,!0),m()}).then(()=>{I==null||I(b,void 0),o=!0,l.forEach(v=>v(b))}).catch(v=>{I==null||I(void 0,v)})};return i.persist={setOptions:D=>{s={...s,...D},D.getStorage&&(h=D.getStorage())},clearStorage:()=>{h==null||h.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:D=>(a.add(D),()=>{a.delete(D)}),onFinishHydration:D=>(l.add(D),()=>{l.delete(D)})},_(),b||y},Zv=(t,e)=>(r,n,i)=>{let s={storage:Yv(()=>localStorage),partialize:_=>_,version:0,merge:(_,D)=>({...D,..._}),...e},o=!1;const a=new Set,l=new Set;let h=s.storage;if(!h)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(..._)},n,i);const d=()=>{const _=s.partialize({...n()});return h.setItem(s.name,{state:_,version:s.version})},m=i.setState;i.setState=(_,D)=>{m(_,D),d()};const w=t((..._)=>{r(..._),d()},n,i);let y;const b=()=>{var _,D;if(!h)return;o=!1,a.forEach(v=>{var E;return v((E=n())!=null?E:w)});const I=((D=s.onRehydrateStorage)==null?void 0:D.call(s,(_=n())!=null?_:w))||void 0;return pi(h.getItem.bind(h))(s.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return s.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var E;return y=s.merge(v,(E=n())!=null?E:w),r(y,!0),d()}).then(()=>{I==null||I(y,void 0),y=n(),o=!0,l.forEach(v=>v(y))}).catch(v=>{I==null||I(void 0,v)})};return i.persist={setOptions:_=>{s={...s,..._},_.storage&&(h=_.storage)},clearStorage:()=>{h==null||h.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},s.skipHydration||b(),y||w},Qv=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?Jv(t,e):Zv(t,e),ps=Gv()(Qv((t,e)=>({account:void 0,chainId:"aleo:1",setAccount:r=>{t({account:r})},setChainId:r=>{t({chainId:r})},disconnect:()=>{t({account:void 0,chainId:void 0})}}),{name:"puzzle-wallet-store"})),Zr=Fv();let gi;function Xv(t){gi=new Mv({projectId:wh,metadata:{name:t.dAppName,description:t.dAppDescription,url:t.dAppUrl,icons:[t.dAppIconURL]},modalOptions:{...yh}}),ps.setState({account:void 0}),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")}async function Fe(){return new Promise(t=>{if(gi)t(gi);else{const e=setInterval(()=>{gi&&(clearInterval(e),t(gi))},200)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}function gs(t){Me.useEffect(()=>(Fe().then(e=>{e.onSessionDelete(t)}),()=>{Fe().then(e=>{e.offSessionDelete(t)})}),[t])}function Ih(t){Me.useEffect(()=>(Fe().then(e=>{e.onSessionExpire(t)}),()=>{Fe().then(e=>{e.offSessionExpire(t)})}),[t])}function oa(t){Me.useEffect(()=>(Fe().then(e=>{e.onSessionUpdate(t)}),()=>{Fe().then(e=>{e.offSessionUpdate(t)})}),[t])}function aa(){const[t,e]=Me.useState(void 0);return gs(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),oa(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:n}=r.params,i={...t,namespaces:n};e(i)}}),Ih(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),Me.useEffect(()=>{async function r(){const i=await(await Fe()).getSession();e(i)}return r(),Zr.on("session_change",r),()=>{Zr.off("session_change",r)}},[]),t}function ca(t){Me.useEffect(()=>(Fe().then(e=>{e.onSessionEvent(t)}),()=>{Fe().then(e=>{e.offSessionEvent(t)})}),[t])}const la=t=>t.length<5*2?t:`${t.slice(0,5+5)}...${t.slice(t.length-5,t.length)}`,e2=()=>{const t="aleo:1",[e,r]=ps(h=>[h.account,h.setAccount]),[n,i]=Me.useState(void 0),[s,o]=Me.useState(!1),a=aa(),l=async()=>{if(!a){o(!1);return}try{o(!0);const d=await(await Fe()).request({topic:a==null?void 0:a.topic,chainId:t,request:{id:1,jsonrpc:"2.0",method:"getSelectedAccount"}});r(d.account),i(d.error)}catch(h){i(h.message)}finally{o(!1)}};return ca(({params:h,topic:d})=>{if(h.event.name==="accountSelected"&&a&&a.topic===d){const w=h.event.data,y=h.chainId.split(":")[0],b=h.chainId.split(":")[1];r({network:y,chainId:b,address:w,shortenedAddress:la(w)})}}),oa(({params:h,topic:d})=>{const m=h.event.data,w=h.chainId.split(":")[0],y=h.chainId.split(":")[1];r({network:w,chainId:y,address:m,shortenedAddress:la(m)})}),gs(({params:h,topic:d})=>{r(void 0)}),Me.useEffect(()=>{a&&!s&&l()},[a]),{account:e,error:n,loading:s}},t2=()=>{const t="aleo:1",[e,r]=Me.useState(void 0),[n,i]=Me.useState(void 0),[s,o]=Me.useState(!1),a=aa(),l=async()=>{try{o(!0);const d=await(await Fe()).request({topic:a==null?void 0:a.topic,chainId:t,request:{id:1,jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0}}});r(d.balances),i(d.error)}catch(h){i(h.message)}finally{o(!1)}};return ca(({params:h,topic:d})=>{const m=h.event.name;(m==="accountSynced"||m==="accountSelected")&&a&&a.topic===d&&!s&&l()}),gs(({params:h,topic:d})=>{r(void 0)}),Me.useEffect(()=>{a&&!s&&l(),a||r(void 0)},[a]),{balances:e,error:n,loading:s}};function r2(){const[t,e]=Me.useState(void 0),[r,n]=Me.useState(),[i,s]=Me.useState(!1);async function o(){try{s(!0),n(void 0);const l=await(await Fe()).connect({requiredNamespaces:{aleo:{methods:hs,chains:fi,events:ds}}});return e(l),Zr.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),l}catch(a){throw n(a),a}finally{s(!1)}}return{data:t,error:r,loading:i,connect:o}}function n2(){const[t,e]=Me.useState(),[r,n]=Me.useState(!1);async function i(){try{n(!0),e(void 0),await(await Fe()).disconnect(),Zr.emit("session_change")}catch(s){throw e(s),s}finally{n(!1)}}return{error:t,loading:r,disconnect:i}}const i2=async()=>{const t=await Fe(),e=await t.getSession(),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{const n=await t.request({topic:e==null?void 0:e.topic,chainId:r,request:{id:1,jsonrpc:"2.0",method:"getSelectedAccount"}});return ps.setState({account:n.account}),n}catch(n){const i=n.message;return console.error("getAccount error",i),{error:i}}},s2=async()=>{const t=await Fe(),e=await t.getSession(),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e==null?void 0:e.topic,chainId:r,request:{id:1,jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0}}})}catch(n){const i=n.message;return console.error("getBalance error",i),{error:i}}},o2=async()=>{const t=await Fe();if(!t)throw new Error("call setConnection() first!");try{const e=await t.connect({requiredNamespaces:{aleo:{methods:hs,chains:fi,events:ds}}});return Zr.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),e}catch(e){console.error("connect error",e.message)}},a2=async t=>{const e=await Fe(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};const i=t==null?void 0:t.inputs.map(s=>typeof s=="string"?s:s.plaintext);try{return await e.request({topic:r.topic,chainId:n,request:{id:1,jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:i}}})}catch(s){const o=s.message;return console.error("createEvent error",o),{error:o}}},c2=async()=>{const t=await Fe(),e=await(t==null?void 0:t.getSession()),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e.topic,chainId:r,request:{id:1,jsonrpc:"2.0",method:"createSharedState",params:{}}})}catch(n){const i=n.message;return console.error("createSharedState error",i),{error:i}}},l2=async t=>{const e=await Fe(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r.topic,chainId:n,request:{id:1,jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}})}catch(i){return console.error("decrypt error",i.message),{error:i.message}}},u2=async()=>{const t=await Fe(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session, or connection"};try{return await t.disconnect({reason:nt("USER_DISCONNECTED"),topic:e.topic}),Zr.emit("session_change"),ps.setState({account:void 0}),{}}catch(r){const n=r.message;return console.error("error disconnecting",n),{error:n}}},h2=async t=>{const e=await Fe(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{events:void 0,error:"no session, chainId, or connection"};(t==null?void 0:t.programId)===""&&(t.programId=void 0);const i=async(s=0)=>await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{id:1,jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:s}}});try{return await i()}catch(s){const o=s.message;return console.error("getEvents error",o),{error:o}}},d2=async t=>{const e=await Fe(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{id:1,jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}})}catch(i){const s=i.message;return console.error("importSharedState error",s),{error:s}}},f2=async({address:t,filter:e,page:r=0})=>{const n=await Fe(),i=await(n==null?void 0:n.getSession()),s="aleo:1";if(!i||!s||!n)return{error:"no session, chainId, or connection"};(e==null?void 0:e.programId)===""&&(e.programId=void 0);const o=async(a=0)=>await n.request({topic:i.topic,chainId:s,request:{id:1,jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:a}}});try{return await o()}catch(a){const l=a.message;return console.error("getRecords error",l),{error:l}}},p2=async({message:t,address:e})=>{const r=await Fe(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{error:"no session, chainId, or connection"};try{return await r.request({topic:n.topic,chainId:i,request:{id:1,jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}})}catch(s){const o=s.message;return console.error("signature error",o),{error:o}}},g2=50,m2=["wc@2:client:0.3//proposal","wc@2:core:0.3//subscription","wc@2:core:0.3//keychain","wc@2:core:0.3//messages","wc@2:core:0.3//history","wc@2:client:0.3//session","wc@2:core:0.3//expirer","WCM_WALLETCONNECT_CLIENT_ID","wc@2:core:0.3//pairing","debug"],Ch=Xd.version;try{const t=localStorage.getItem("puzzle-sdk-version");Ch!==t&&(m2.forEach(e=>{localStorage.removeItem(e)}),localStorage.setItem("puzzle-sdk-version",Ch))}catch(t){console.error(t)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ms=window,ua=ms.ShadowRoot&&(ms.ShadyCSS===void 0||ms.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ha=Symbol(),Ah=new WeakMap;let $h=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==ha)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(ua&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Ah.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Ah.set(r,e))}return e}toString(){return this.cssText}};const w2=t=>new $h(typeof t=="string"?t:t+"",void 0,ha),Ae=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new $h(r,t,ha)},y2=(t,e)=>{ua?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=ms.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},Th=ua?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return w2(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var da;const ws=window,Rh=ws.trustedTypes,v2=Rh?Rh.emptyScript:"",Ph=ws.reactiveElementPolyfillSupport,fa={toAttribute(t,e){switch(e){case Boolean:t=t?v2:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Nh=(t,e)=>e!==t&&(e==e||t==t),pa={attribute:!0,type:String,converter:fa,reflect:!1,hasChanged:Nh},ga="finalized";let En=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=pa){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||pa}static finalize(){if(this.hasOwnProperty(ga))return!1;this[ga]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(Th(i))}else e!==void 0&&r.push(Th(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return y2(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=pa){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:fa).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:fa;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||Nh)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};En[ga]=!0,En.elementProperties=new Map,En.elementStyles=[],En.shadowRootOptions={mode:"open"},Ph==null||Ph({ReactiveElement:En}),((da=ws.reactiveElementVersions)!==null&&da!==void 0?da:ws.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ma;const ys=window,Sn=ys.trustedTypes,Lh=Sn?Sn.createPolicy("lit-html",{createHTML:t=>t}):void 0,wa="$lit$",Dr=`lit$${(Math.random()+"").slice(9)}$`,Mh="?"+Dr,b2=`<${Mh}>`,Qr=document,mi=()=>Qr.createComment(""),wi=t=>t===null||typeof t!="object"&&typeof t!="function",Uh=Array.isArray,_2=t=>Uh(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",ya=`[ 	
\f\r]`,yi=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Fh=/-->/g,jh=/>/g,Xr=RegExp(`>|${ya}(?:([^\\s"'>=/]+)(${ya}*=${ya}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Bh=/'/g,kh=/"/g,zh=/^(?:script|style|textarea|title)$/i,qh=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),G=qh(1),He=qh(2),en=Symbol.for("lit-noChange"),it=Symbol.for("lit-nothing"),Hh=new WeakMap,tn=Qr.createTreeWalker(Qr,129,null,!1);function Wh(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Lh!==void 0?Lh.createHTML(e):e}const E2=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=yi;for(let a=0;a<r;a++){const l=t[a];let h,d,m=-1,w=0;for(;w<l.length&&(o.lastIndex=w,d=o.exec(l),d!==null);)w=o.lastIndex,o===yi?d[1]==="!--"?o=Fh:d[1]!==void 0?o=jh:d[2]!==void 0?(zh.test(d[2])&&(i=RegExp("</"+d[2],"g")),o=Xr):d[3]!==void 0&&(o=Xr):o===Xr?d[0]===">"?(o=i??yi,m=-1):d[1]===void 0?m=-2:(m=o.lastIndex-d[2].length,h=d[1],o=d[3]===void 0?Xr:d[3]==='"'?kh:Bh):o===kh||o===Bh?o=Xr:o===Fh||o===jh?o=yi:(o=Xr,i=void 0);const y=o===Xr&&t[a+1].startsWith("/>")?" ":"";s+=o===yi?l+b2:m>=0?(n.push(h),l.slice(0,m)+wa+l.slice(m)+Dr+y):l+Dr+(m===-2?(n.push(void 0),a):y)}return[Wh(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class vi{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[h,d]=E2(e,r);if(this.el=vi.createElement(h,n),tn.currentNode=this.el.content,r===2){const m=this.el.content,w=m.firstChild;w.remove(),m.append(...w.childNodes)}for(;(i=tn.nextNode())!==null&&l.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const m=[];for(const w of i.getAttributeNames())if(w.endsWith(wa)||w.startsWith(Dr)){const y=d[o++];if(m.push(w),y!==void 0){const b=i.getAttribute(y.toLowerCase()+wa).split(Dr),_=/([.?@])?(.*)/.exec(y);l.push({type:1,index:s,name:_[2],strings:b,ctor:_[1]==="."?x2:_[1]==="?"?O2:_[1]==="@"?I2:vs})}else l.push({type:6,index:s})}for(const w of m)i.removeAttribute(w)}if(zh.test(i.tagName)){const m=i.textContent.split(Dr),w=m.length-1;if(w>0){i.textContent=Sn?Sn.emptyScript:"";for(let y=0;y<w;y++)i.append(m[y],mi()),tn.nextNode(),l.push({type:2,index:++s});i.append(m[w],mi())}}}else if(i.nodeType===8)if(i.data===Mh)l.push({type:2,index:s});else{let m=-1;for(;(m=i.data.indexOf(Dr,m+1))!==-1;)l.push({type:7,index:s}),m+=Dr.length-1}s++}}static createElement(e,r){const n=Qr.createElement("template");return n.innerHTML=e,n}}function xn(t,e,r=t,n){var i,s,o,a;if(e===en)return e;let l=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const h=wi(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==h&&((s=l==null?void 0:l._$AO)===null||s===void 0||s.call(l,!1),h===void 0?l=void 0:(l=new h(t),l._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=l:r._$Cl=l),l!==void 0&&(e=xn(t,l._$AS(t,e.values),l,n)),e}class S2{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:Qr).importNode(n,!0);tn.currentNode=s;let o=tn.nextNode(),a=0,l=0,h=i[0];for(;h!==void 0;){if(a===h.index){let d;h.type===2?d=new bi(o,o.nextSibling,this,e):h.type===1?d=new h.ctor(o,h.name,h.strings,this,e):h.type===6&&(d=new C2(o,this,e)),this._$AV.push(d),h=i[++l]}a!==(h==null?void 0:h.index)&&(o=tn.nextNode(),a++)}return tn.currentNode=Qr,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class bi{constructor(e,r,n,i){var s;this.type=2,this._$AH=it,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=xn(this,e,r),wi(e)?e===it||e==null||e===""?(this._$AH!==it&&this._$AR(),this._$AH=it):e!==this._$AH&&e!==en&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):_2(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==it&&wi(this._$AH)?this._$AA.nextSibling.data=e:this.$(Qr.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=vi.createElement(Wh(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new S2(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=Hh.get(e.strings);return r===void 0&&Hh.set(e.strings,r=new vi(e)),r}T(e){Uh(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new bi(this.k(mi()),this.k(mi()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class vs{constructor(e,r,n,i,s){this.type=1,this._$AH=it,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=it}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=xn(this,e,r,0),o=!wi(e)||e!==this._$AH&&e!==en,o&&(this._$AH=e);else{const a=e;let l,h;for(e=s[0],l=0;l<s.length-1;l++)h=xn(this,a[n+l],r,l),h===en&&(h=this._$AH[l]),o||(o=!wi(h)||h!==this._$AH[l]),h===it?e=it:e!==it&&(e+=(h??"")+s[l+1]),this._$AH[l]=h}o&&!i&&this.j(e)}j(e){e===it?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class x2 extends vs{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===it?void 0:e}}const D2=Sn?Sn.emptyScript:"";let O2=class extends vs{constructor(){super(...arguments),this.type=4}j(e){e&&e!==it?this.element.setAttribute(this.name,D2):this.element.removeAttribute(this.name)}};class I2 extends vs{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=xn(this,e,r,0))!==null&&n!==void 0?n:it)===en)return;const i=this._$AH,s=e===it&&i!==it||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==it&&(i===it||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let C2=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){xn(this,e)}};const Vh=ys.litHtmlPolyfillSupport;Vh==null||Vh(vi,bi),((ma=ys.litHtmlVersions)!==null&&ma!==void 0?ma:ys.litHtmlVersions=[]).push("2.8.0");const A2=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new bi(e.insertBefore(mi(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var va,ba;class de extends En{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=A2(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return en}}de.finalized=!0,de._$litElement$=!0,(va=globalThis.litElementHydrateSupport)===null||va===void 0||va.call(globalThis,{LitElement:de});const Kh=globalThis.litElementPolyfillSupport;Kh==null||Kh({LitElement:de}),((ba=globalThis.litElementVersions)!==null&&ba!==void 0?ba:globalThis.litElementVersions=[]).push("3.3.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Se=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $2=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},T2=(t,e,r)=>{e.constructor.createProperty(r,t)};function ce(t){return(e,r)=>r!==void 0?T2(t,e,r):$2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Mt(t){return ce({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var _a;((_a=window.HTMLSlotElement)===null||_a===void 0?void 0:_a.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const R2={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},P2=t=>(...e)=>({_$litDirective$:t,values:e});class N2{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fr=P2(class extends N2{constructor(t){var e;if(super(t),t.type!==R2.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return en}});function L2(t,e){t.indexOf(e)===-1&&t.push(e)}const Gh=(t,e,r)=>Math.min(Math.max(r,t),e),Vt={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},bs=t=>typeof t=="number",Dn=t=>Array.isArray(t)&&!bs(t[0]),M2=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function U2(t,e){return Dn(t)?t[M2(0,t.length,e)]:t}const Yh=(t,e,r)=>-r*t+r*e+t,Jh=()=>{},Or=t=>t,Ea=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function Zh(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=Ea(0,e,n);t.push(Yh(r,1,i))}}function F2(t){const e=[0];return Zh(e,t-1),e}function j2(t,e=F2(t.length),r=Or){const n=t.length,i=n-e.length;return i>0&&Zh(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=Gh(0,1,Ea(e[o],e[o+1],s));return a=U2(r,o)(a),Yh(t[o],t[o+1],a)}}const Qh=t=>Array.isArray(t)&&bs(t[0]),Sa=t=>typeof t=="object"&&!!t.createAnimation,On=t=>typeof t=="function",B2=t=>typeof t=="string",_i={ms:t=>t*1e3,s:t=>t/1e3},Xh=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,k2=1e-7,z2=12;function q2(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=Xh(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>k2&&++a<z2);return o}function Ei(t,e,r,n){if(t===e&&r===n)return Or;const i=s=>q2(s,0,1,t,r);return s=>s===0||s===1?s:Xh(i(s),e,n)}const H2=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return Gh(0,1,i/t)},ed={ease:Ei(.25,.1,.25,1),"ease-in":Ei(.42,0,1,1),"ease-in-out":Ei(.42,0,.58,1),"ease-out":Ei(0,0,.58,1)},W2=/\((.*?)\)/;function td(t){if(On(t))return t;if(Qh(t))return Ei(...t);if(ed[t])return ed[t];if(t.startsWith("steps")){const e=W2.exec(t);if(e){const r=e[1].split(",");return H2(parseFloat(r[0]),r[1].trim())}}return Or}class rd{constructor(e,r=[0,1],{easing:n,duration:i=Vt.duration,delay:s=Vt.delay,endDelay:o=Vt.endDelay,repeat:a=Vt.repeat,offset:l,direction:h="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Or,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((m,w)=>{this.resolve=m,this.reject=w}),n=n||Vt.easing,Sa(n)){const m=n.createAnimation(r);n=m.easing,r=m.keyframes||r,i=m.duration||i}this.repeat=a,this.easing=Dn(n)?Or:td(n),this.updateDuration(i);const d=j2(r,l,Dn(n)?n.map(td):Or);this.tick=m=>{var w;s=s;let y=0;this.pauseTime!==void 0?y=this.pauseTime:y=(m-this.startTime)*this.rate,this.t=y,y/=1e3,y=Math.max(y-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(y=this.totalDuration);const b=y/this.duration;let _=Math.floor(b),D=b%1;!D&&b>=1&&(D=1),D===1&&_--;const I=_%2;(h==="reverse"||h==="alternate"&&I||h==="alternate-reverse"&&!I)&&(D=1-D);const v=y>=this.totalDuration?1:Math.min(D,1),E=d(this.easing(v));e(E),this.pauseTime===void 0&&(this.playState==="finished"||y>=this.totalDuration+o)?(this.playState="finished",(w=this.resolve)===null||w===void 0||w.call(this,E)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var xa=function(){};process.env.NODE_ENV!=="production"&&(xa=function(t,e){if(!t)throw new Error(e)});class V2{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Da=new WeakMap;function nd(t){return Da.has(t)||Da.set(t,{transforms:[],values:new Map}),Da.get(t)}function K2(t,e){return t.has(e)||t.set(e,new V2),t.get(e)}const G2=["","X","Y","Z"],Y2=["translate","scale","rotate","skew"],_s={x:"translateX",y:"translateY",z:"translateZ"},id={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},J2={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:id,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Or},skew:id},Si=new Map,Oa=t=>`--motion-${t}`,Es=["x","y","z"];Y2.forEach(t=>{G2.forEach(e=>{Es.push(t+e),Si.set(Oa(t+e),J2[t])})});const Z2=(t,e)=>Es.indexOf(t)-Es.indexOf(e),Q2=new Set(Es),sd=t=>Q2.has(t),X2=(t,e)=>{_s[e]&&(e=_s[e]);const{transforms:r}=nd(t);L2(r,e),t.style.transform=eb(r)},eb=t=>t.sort(Z2).reduce(tb,"").trim(),tb=(t,e)=>`${t} ${e}(var(${Oa(e)}))`,Ia=t=>t.startsWith("--"),od=new Set;function rb(t){if(!od.has(t)){od.add(t);try{const{syntax:e,initialValue:r}=Si.has(t)?Si.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const Ca=(t,e)=>document.createElement("div").animate(t,e),ad={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Ca({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Ca({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Ca({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},Aa={},In={};for(const t in ad)In[t]=()=>(Aa[t]===void 0&&(Aa[t]=ad[t]()),Aa[t]);const nb=.015,ib=(t,e)=>{let r="";const n=Math.round(e/nb);for(let i=0;i<n;i++)r+=t(Ea(0,n-1,i))+", ";return r.substring(0,r.length-2)},cd=(t,e)=>On(t)?In.linearEasing()?`linear(${ib(t,e)})`:Vt.easing:Qh(t)?sb(t):t,sb=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function ob(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const ab=t=>Array.isArray(t)?t:[t];function $a(t){return _s[t]&&(t=_s[t]),sd(t)?Oa(t):t}const Ss={get:(t,e)=>{e=$a(e);let r=Ia(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=Si.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=$a(e),Ia(e)?t.style.setProperty(e,r):t.style[e]=r}};function ld(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function cb(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||Or;const i=t[t.length-1];if(B2(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function lb(){return window.__MOTION_DEV_TOOLS_RECORD}function ub(t,e,r,n={},i){const s=lb(),o=n.record!==!1&&s;let a,{duration:l=Vt.duration,delay:h=Vt.delay,endDelay:d=Vt.endDelay,repeat:m=Vt.repeat,easing:w=Vt.easing,persist:y=!1,direction:b,offset:_,allowWebkitAcceleration:D=!1}=n;const I=nd(t),v=sd(e);let E=In.waapi();v&&X2(t,e);const g=$a(e),x=K2(I.values,g),f=Si.get(g);return ld(x.animation,!(Sa(w)&&x.generator)&&n.record!==!1),()=>{const c=()=>{var C,M;return(M=(C=Ss.get(t,g))!==null&&C!==void 0?C:f==null?void 0:f.initialValue)!==null&&M!==void 0?M:0};let p=ob(ab(r),c);const R=cb(p,f);if(Sa(w)){const C=w.createAnimation(p,e!=="opacity",c,g,x);w=C.easing,p=C.keyframes||p,l=C.duration||l}if(Ia(g)&&(In.cssRegisterProperty()?rb(g):E=!1),v&&!In.linearEasing()&&(On(w)||Dn(w)&&w.some(On))&&(E=!1),E){f&&(p=p.map(B=>bs(B)?f.toDefaultUnit(B):B)),p.length===1&&(!In.partialKeyframes()||o)&&p.unshift(c());const C={delay:_i.ms(h),duration:_i.ms(l),endDelay:_i.ms(d),easing:Dn(w)?void 0:cd(w,l),direction:b,iterations:m+1,fill:"both"};a=t.animate({[g]:p,offset:_,easing:Dn(w)?w.map(B=>cd(B,l)):void 0},C),a.finished||(a.finished=new Promise((B,W)=>{a.onfinish=B,a.oncancel=W}));const M=p[p.length-1];a.finished.then(()=>{y||(Ss.set(t,g,M),a.cancel())}).catch(Jh),D||(a.playbackRate=1.000001)}else if(i&&v)p=p.map(C=>typeof C=="string"?parseFloat(C):C),p.length===1&&p.unshift(parseFloat(c())),a=new i(C=>{Ss.set(t,g,R?R(C):C)},p,Object.assign(Object.assign({},n),{duration:l,easing:w}));else{const C=p[p.length-1];Ss.set(t,g,f&&bs(C)?f.toDefaultUnit(C):C)}return o&&s(t,e,p,{duration:l,delay:h,easing:w,repeat:m,offset:_},"motion-one"),x.setAnimation(a),a}}const hb=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function db(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const fb=t=>t(),ud=(t,e,r=Vt.duration)=>new Proxy({animations:t.map(fb).filter(Boolean),duration:r,options:e},gb),pb=t=>t.animations[0],gb={get:(t,e)=>{const r=pb(t);switch(e){case"duration":return t.duration;case"currentTime":return _i.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(mb)).catch(Jh)),t.finished;case"stop":return()=>{t.animations.forEach(n=>ld(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=_i.ms(r);case"currentTime":case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},mb=t=>t.finished;function wb(t,e,r){return On(t)?t(e,r):t}function yb(t){return function(r,n,i={}){r=db(r);const s=r.length;xa(!!s,"No valid element provided."),xa(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const l=r[a];for(const h in n){const d=hb(i,h);d.delay=wb(d.delay,a,s);const m=ub(l,h,n[h],d,t);o.push(m)}}return ud(o,i,i.duration)}}const vb=yb(rd);function bb(t,e={}){return ud([()=>{const r=new rd(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function rn(t,e,r){return(On(t)?bb:vb)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Tt=t=>t??it;var xi={},_b=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},hd={},kt={};let Ta;const Eb=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];kt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},kt.getSymbolTotalCodewords=function(e){return Eb[e]},kt.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},kt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Ta=e},kt.isKanjiModeEnabled=function(){return typeof Ta<"u"},kt.toSJIS=function(e){return Ta(e)};var xs={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(xs);function dd(){this.buffer=[],this.length=0}dd.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Sb=dd;function Di(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Di.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},Di.prototype.get=function(t,e){return this.data[t*this.size+e]},Di.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},Di.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var xb=Di,fd={};(function(t){const e=kt.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let l=1;l<i-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||i.push([s[a],s[l]]);return i}})(fd);var pd={};const Db=kt.getSymbolSize,gd=7;pd.getPositions=function(e){const r=Db(e);return[[0,0],[r-gd,0],[0,r-gd]]};var md={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,l=0,h=null,d=null;for(let m=0;m<s;m++){a=l=0,h=d=null;for(let w=0;w<s;w++){let y=i.get(m,w);y===h?a++:(a>=5&&(o+=e.N1+(a-5)),h=y,a=1),y=i.get(w,m),y===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=y,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const h=i.get(a,l)+i.get(a,l+1)+i.get(a+1,l)+i.get(a+1,l+1);(h===4||h===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,l=0;for(let h=0;h<s;h++){a=l=0;for(let d=0;d<s;d++)a=a<<1&2047|i.get(h,d),d>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|i.get(d,h),d>=10&&(l===1488||l===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let l=0;l<o;l++)s+=i.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,r(i,l,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let h=0;h<o;h++){s(h),t.applyMask(h,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(h,i),d<l&&(l=d,a=h)}return a}})(md);var Ds={};const Ir=xs,Os=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Is=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ds.getBlocksCount=function(e,r){switch(r){case Ir.L:return Os[(e-1)*4+0];case Ir.M:return Os[(e-1)*4+1];case Ir.Q:return Os[(e-1)*4+2];case Ir.H:return Os[(e-1)*4+3];default:return}},Ds.getTotalCodewordsCount=function(e,r){switch(r){case Ir.L:return Is[(e-1)*4+0];case Ir.M:return Is[(e-1)*4+1];case Ir.Q:return Is[(e-1)*4+2];case Ir.H:return Is[(e-1)*4+3];default:return}};var wd={},Cs={};const Oi=new Uint8Array(512),As=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Oi[r]=e,As[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Oi[r]=Oi[r-255]})(),Cs.log=function(e){if(e<1)throw new Error("log("+e+")");return As[e]},Cs.exp=function(e){return Oi[e]},Cs.mul=function(e,r){return e===0||r===0?0:Oi[As[e]+As[r]]},function(t){const e=Cs;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let l=0;l<i.length;l++)s[l]^=e.mul(i[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(wd);const yd=wd;function Ra(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Ra.prototype.initialize=function(e){this.degree=e,this.genPoly=yd.generateECPolynomial(this.degree)},Ra.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=yd.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var Ob=Ra,vd={},Cr={},Pa={};Pa.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var sr={};const bd="[0-9]+",Ib="[A-Z $%*+\\-./:]+";let Ii="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ii=Ii.replace(/u/g,"\\u");const Cb="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ii+`)(?:.|[\r
]))+`;sr.KANJI=new RegExp(Ii,"g"),sr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),sr.BYTE=new RegExp(Cb,"g"),sr.NUMERIC=new RegExp(bd,"g"),sr.ALPHANUMERIC=new RegExp(Ib,"g");const Ab=new RegExp("^"+Ii+"$"),$b=new RegExp("^"+bd+"$"),Tb=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");sr.testKanji=function(e){return Ab.test(e)},sr.testNumeric=function(e){return $b.test(e)},sr.testAlphanumeric=function(e){return Tb.test(e)},function(t){const e=Pa,r=sr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(Cr),function(t){const e=kt,r=Ds,n=xs,i=Cr,s=Pa,o=7973,a=e.getBCHDigit(o);function l(w,y,b){for(let _=1;_<=40;_++)if(y<=t.getCapacity(_,b,w))return _}function h(w,y){return i.getCharCountIndicator(w,y)+4}function d(w,y){let b=0;return w.forEach(function(_){const D=h(_.mode,y);b+=D+_.getBitsLength()}),b}function m(w,y){for(let b=1;b<=40;b++)if(d(w,b)<=t.getCapacity(b,y,i.MIXED))return b}t.from=function(y,b){return s.isValid(y)?parseInt(y,10):b},t.getCapacity=function(y,b,_){if(!s.isValid(y))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=i.BYTE);const D=e.getSymbolTotalCodewords(y),I=r.getTotalCodewordsCount(y,b),v=(D-I)*8;if(_===i.MIXED)return v;const E=v-h(_,y);switch(_){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},t.getBestVersionForData=function(y,b){let _;const D=n.from(b,n.M);if(Array.isArray(y)){if(y.length>1)return m(y,D);if(y.length===0)return 1;_=y[0]}else _=y;return l(_.mode,_.getLength(),D)},t.getEncodedBits=function(y){if(!s.isValid(y)||y<7)throw new Error("Invalid QR Code version");let b=y<<12;for(;e.getBCHDigit(b)-a>=0;)b^=o<<e.getBCHDigit(b)-a;return y<<12|b}}(vd);var _d={};const Na=kt,Ed=1335,Rb=21522,Sd=Na.getBCHDigit(Ed);_d.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;Na.getBCHDigit(i)-Sd>=0;)i^=Ed<<Na.getBCHDigit(i)-Sd;return(n<<10|i)^Rb};var xd={};const Pb=Cr;function Cn(t){this.mode=Pb.NUMERIC,this.data=t.toString()}Cn.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Cn.prototype.getLength=function(){return this.data.length},Cn.prototype.getBitsLength=function(){return Cn.getBitsLength(this.data.length)},Cn.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var Nb=Cn;const Lb=Cr,La=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function An(t){this.mode=Lb.ALPHANUMERIC,this.data=t}An.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},An.prototype.getLength=function(){return this.data.length},An.prototype.getBitsLength=function(){return An.getBitsLength(this.data.length)},An.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=La.indexOf(this.data[r])*45;n+=La.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(La.indexOf(this.data[r]),6)};var Mb=An,Ub=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const Fb=Ub,jb=Cr;function $n(t){this.mode=jb.BYTE,typeof t=="string"&&(t=Fb(t)),this.data=new Uint8Array(t)}$n.getBitsLength=function(e){return e*8},$n.prototype.getLength=function(){return this.data.length},$n.prototype.getBitsLength=function(){return $n.getBitsLength(this.data.length)},$n.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var Bb=$n;const kb=Cr,zb=kt;function Tn(t){this.mode=kb.KANJI,this.data=t}Tn.getBitsLength=function(e){return e*13},Tn.prototype.getLength=function(){return this.data.length},Tn.prototype.getBitsLength=function(){return Tn.getBitsLength(this.data.length)},Tn.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=zb.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var qb=Tn,Dd={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var l,h,d,m,w,y,b,_,D;!a.empty();){l=a.pop(),h=l.value,m=l.cost,w=r[h]||{};for(d in w)w.hasOwnProperty(d)&&(y=w[d],b=m+y,_=o[d],D=typeof o[d]>"u",(D||_>b)&&(o[d]=b,a.push(d,b),s[d]=h))}if(typeof i<"u"&&typeof o[i]>"u"){var I=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(I)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Dd);var Hb=Dd.exports;(function(t){const e=Cr,r=Nb,n=Mb,i=Bb,s=qb,o=sr,a=kt,l=Hb;function h(I){return unescape(encodeURIComponent(I)).length}function d(I,v,E){const g=[];let x;for(;(x=I.exec(E))!==null;)g.push({data:x[0],index:x.index,mode:v,length:x[0].length});return g}function m(I){const v=d(o.NUMERIC,e.NUMERIC,I),E=d(o.ALPHANUMERIC,e.ALPHANUMERIC,I);let g,x;return a.isKanjiModeEnabled()?(g=d(o.BYTE,e.BYTE,I),x=d(o.KANJI,e.KANJI,I)):(g=d(o.BYTE_KANJI,e.BYTE,I),x=[]),v.concat(E,g,x).sort(function(c,p){return c.index-p.index}).map(function(c){return{data:c.data,mode:c.mode,length:c.length}})}function w(I,v){switch(v){case e.NUMERIC:return r.getBitsLength(I);case e.ALPHANUMERIC:return n.getBitsLength(I);case e.KANJI:return s.getBitsLength(I);case e.BYTE:return i.getBitsLength(I)}}function y(I){return I.reduce(function(v,E){const g=v.length-1>=0?v[v.length-1]:null;return g&&g.mode===E.mode?(v[v.length-1].data+=E.data,v):(v.push(E),v)},[])}function b(I){const v=[];for(let E=0;E<I.length;E++){const g=I[E];switch(g.mode){case e.NUMERIC:v.push([g,{data:g.data,mode:e.ALPHANUMERIC,length:g.length},{data:g.data,mode:e.BYTE,length:g.length}]);break;case e.ALPHANUMERIC:v.push([g,{data:g.data,mode:e.BYTE,length:g.length}]);break;case e.KANJI:v.push([g,{data:g.data,mode:e.BYTE,length:h(g.data)}]);break;case e.BYTE:v.push([{data:g.data,mode:e.BYTE,length:h(g.data)}])}}return v}function _(I,v){const E={},g={start:{}};let x=["start"];for(let f=0;f<I.length;f++){const c=I[f],p=[];for(let R=0;R<c.length;R++){const C=c[R],M=""+f+R;p.push(M),E[M]={node:C,lastCount:0},g[M]={};for(let B=0;B<x.length;B++){const W=x[B];E[W]&&E[W].node.mode===C.mode?(g[W][M]=w(E[W].lastCount+C.length,C.mode)-w(E[W].lastCount,C.mode),E[W].lastCount+=C.length):(E[W]&&(E[W].lastCount=C.length),g[W][M]=w(C.length,C.mode)+4+e.getCharCountIndicator(C.mode,v))}}x=p}for(let f=0;f<x.length;f++)g[x[f]].end=0;return{map:g,table:E}}function D(I,v){let E;const g=e.getBestModeForData(I);if(E=e.from(v,g),E!==e.BYTE&&E.bit<g.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(g));switch(E===e.KANJI&&!a.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new r(I);case e.ALPHANUMERIC:return new n(I);case e.KANJI:return new s(I);case e.BYTE:return new i(I)}}t.fromArray=function(v){return v.reduce(function(E,g){return typeof g=="string"?E.push(D(g,null)):g.data&&E.push(D(g.data,g.mode)),E},[])},t.fromString=function(v,E){const g=m(v,a.isKanjiModeEnabled()),x=b(g),f=_(x,E),c=l.find_path(f.map,"start","end"),p=[];for(let R=1;R<c.length-1;R++)p.push(f.table[c[R]].node);return t.fromArray(y(p))},t.rawSplit=function(v){return t.fromArray(m(v,a.isKanjiModeEnabled()))}})(xd);const $s=kt,Ma=xs,Wb=Sb,Vb=xb,Kb=fd,Gb=pd,Ua=md,Fa=Ds,Yb=Ob,Ts=vd,Jb=_d,Zb=Cr,ja=xd;function Qb(t,e){const r=t.size,n=Gb.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let l=-1;l<=7;l++)o+l<=-1||r<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?t.set(s+a,o+l,!0,!0):t.set(s+a,o+l,!1,!0))}}function Xb(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function e3(t,e){const r=Kb.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function t3(t,e){const r=t.size,n=Ts.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Ba(t,e,r){const n=t.size,i=Jb.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function r3(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!t.isReserved(i,a-l)){let h=!1;o<e.length&&(h=(e[o]>>>s&1)===1),t.set(i,a-l,h),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function n3(t,e,r){const n=new Wb;r.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),Zb.getCharCountIndicator(l.mode,t)),l.write(n)});const i=$s.getSymbolTotalCodewords(t),s=Fa.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let l=0;l<a;l++)n.put(l%2?17:236,8);return i3(n,t,e)}function i3(t,e,r){const n=$s.getSymbolTotalCodewords(e),i=Fa.getTotalCodewordsCount(e,r),s=n-i,o=Fa.getBlocksCount(e,r),a=n%o,l=o-a,h=Math.floor(n/o),d=Math.floor(s/o),m=d+1,w=h-d,y=new Yb(w);let b=0;const _=new Array(o),D=new Array(o);let I=0;const v=new Uint8Array(t.buffer);for(let c=0;c<o;c++){const p=c<l?d:m;_[c]=v.slice(b,b+p),D[c]=y.encode(_[c]),b+=p,I=Math.max(I,p)}const E=new Uint8Array(n);let g=0,x,f;for(x=0;x<I;x++)for(f=0;f<o;f++)x<_[f].length&&(E[g++]=_[f][x]);for(x=0;x<w;x++)for(f=0;f<o;f++)E[g++]=D[f][x];return E}function s3(t,e,r,n){let i;if(Array.isArray(t))i=ja.fromArray(t);else if(typeof t=="string"){let h=e;if(!h){const d=ja.rawSplit(t);h=Ts.getBestVersionForData(d,r)}i=ja.fromString(t,h||40)}else throw new Error("Invalid data");const s=Ts.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=n3(e,r,i),a=$s.getSymbolSize(e),l=new Vb(a);return Qb(l,e),Xb(l),e3(l,e),Ba(l,r,0),e>=7&&t3(l,e),r3(l,o),isNaN(n)&&(n=Ua.getBestMask(l,Ba.bind(null,l,r))),Ua.applyMask(n,l),Ba(l,r,n),{modules:l,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}hd.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Ma.M,i,s;return typeof r<"u"&&(n=Ma.from(r.errorCorrectionLevel,Ma.M),i=Ts.from(r.version),s=Ua.from(r.maskPattern),r.toSJISFunc&&$s.setToSJISFunction(r.toSJISFunc)),s3(e,i,n,s)};var Od={},ka={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,l=t.getScale(o,s),h=Math.floor((o+s.margin*2)*l),d=s.margin*l,m=[s.color.light,s.color.dark];for(let w=0;w<h;w++)for(let y=0;y<h;y++){let b=(w*h+y)*4,_=s.color.light;if(w>=d&&y>=d&&w<h-d&&y<h-d){const D=Math.floor((w-d)/l),I=Math.floor((y-d)/l);_=m[a[D*o+I]?1:0]}n[b++]=_.r,n[b++]=_.g,n[b++]=_.b,n[b]=_.a}}})(ka),function(t){const e=ka;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let l=a,h=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(h=n()),l=e.getOptions(l);const d=e.getImageWidth(s.modules.size,l),m=h.getContext("2d"),w=m.createImageData(d,d);return e.qrToImageData(w.data,s,l),r(m,h,d),m.putImageData(w,0,0),h},t.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const h=t.render(s,o,l),d=l.type||"image/png",m=l.rendererOpts||{};return h.toDataURL(d,m.quality)}}(Od);var Id={};const o3=ka;function Cd(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function za(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function a3(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const l=Math.floor(a%e),h=Math.floor(a/e);!l&&!s&&(s=!0),t[a]?(o++,a>0&&l>0&&t[a-1]||(n+=s?za("M",l+r,.5+h+r):za("m",i,0),i=0,s=!1),l+1<e&&t[a+1]||(n+=za("h",o),o=0)):i++}return n}Id.render=function(e,r,n){const i=o3.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,l=i.color.light.a?"<path "+Cd(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",h="<path "+Cd(i.color.dark,"stroke")+' d="'+a3(o,s,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',w='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+l+h+`</svg>
`;return typeof n=="function"&&n(null,w),w};const c3=_b,qa=hd,Ad=Od,l3=Id;function Ha(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!c3())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(l,h){try{const d=qa.create(r,n);l(t(d,e,n))}catch(d){h(d)}})}try{const l=qa.create(r,n);i(null,t(l,e,n))}catch(l){i(l)}}xi.create=qa.create,xi.toCanvas=Ha.bind(null,Ad.render),xi.toDataURL=Ha.bind(null,Ad.renderToDataURL),xi.toString=Ha.bind(null,function(t,e,r){return l3.render(t,r)});var u3=Object.defineProperty,$d=Object.getOwnPropertySymbols,h3=Object.prototype.hasOwnProperty,d3=Object.prototype.propertyIsEnumerable,Td=(t,e,r)=>e in t?u3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wa=(t,e)=>{for(var r in e||(e={}))h3.call(e,r)&&Td(t,r,e[r]);if($d)for(var r of $d(e))d3.call(e,r)&&Td(t,r,e[r]);return t};function f3(){var t;const e=(t=br.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function Rd(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const ve={getPreset(t){return Rd()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=br.state;if(t){const r=Wa(Wa(Wa({},f3()),Rd()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:Ae`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},p3=Ae`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var g3=Object.defineProperty,m3=Object.getOwnPropertyDescriptor,Rn=(t,e,r,n)=>{for(var i=n>1?void 0:n?m3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&g3(e,r,i),i};let Ar=class extends de{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),G`<button class="${fr(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};Ar.styles=[ve.globalCss,p3],Rn([ce({type:Boolean})],Ar.prototype,"disabled",2),Rn([ce()],Ar.prototype,"iconLeft",2),Rn([ce()],Ar.prototype,"iconRight",2),Rn([ce()],Ar.prototype,"onClick",2),Rn([ce()],Ar.prototype,"variant",2),Ar=Rn([Se("wcm-button")],Ar);const w3=Ae`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var y3=Object.defineProperty,v3=Object.getOwnPropertyDescriptor,Va=(t,e,r,n)=>{for(var i=n>1?void 0:n?v3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&y3(e,r,i),i};let Ci=class extends de{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return G`<button ?disabled="${this.disabled}" class="${fr(t)}"><slot></slot></button>`}};Ci.styles=[ve.globalCss,w3],Va([ce({type:Boolean})],Ci.prototype,"disabled",2),Va([ce()],Ci.prototype,"variant",2),Ci=Va([Se("wcm-button-big")],Ci);const b3=Ae`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var _3=Object.defineProperty,E3=Object.getOwnPropertyDescriptor,S3=(t,e,r,n)=>{for(var i=n>1?void 0:n?E3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&_3(e,r,i),i};let Ka=class extends de{render(){return G`<div><slot></slot></div>`}};Ka.styles=[ve.globalCss,b3],Ka=S3([Se("wcm-info-footer")],Ka);const Re={CROSS_ICON:He`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:He`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:He`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:He`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:He`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:He`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:He`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:He`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:He`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:He`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:He`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:He`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:He`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:He`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:He`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:He`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:He`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:He`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},x3=Ae`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var D3=Object.defineProperty,O3=Object.getOwnPropertyDescriptor,I3=(t,e,r,n)=>{for(var i=n>1?void 0:n?O3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&D3(e,r,i),i};let Ga=class extends de{render(){return G`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${Re.WALLET_CONNECT_LOGO} <button @click="${jr.close}">${Re.CROSS_ICON}</button></div>`}};Ga.styles=[ve.globalCss,x3],Ga=I3([Se("wcm-modal-backcard")],Ga);const C3=Ae`main{padding:20px;padding-top:0;width:100%}`;var A3=Object.defineProperty,$3=Object.getOwnPropertyDescriptor,T3=(t,e,r,n)=>{for(var i=n>1?void 0:n?$3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&A3(e,r,i),i};let Ya=class extends de{render(){return G`<main><slot></slot></main>`}};Ya.styles=[ve.globalCss,C3],Ya=T3([Se("wcm-modal-content")],Ya);const R3=Ae`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var P3=Object.defineProperty,N3=Object.getOwnPropertyDescriptor,L3=(t,e,r,n)=>{for(var i=n>1?void 0:n?N3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&P3(e,r,i),i};let Ja=class extends de{render(){return G`<footer><slot></slot></footer>`}};Ja.styles=[ve.globalCss,R3],Ja=L3([Se("wcm-modal-footer")],Ja);const M3=Ae`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var U3=Object.defineProperty,F3=Object.getOwnPropertyDescriptor,Ai=(t,e,r,n)=>{for(var i=n>1?void 0:n?F3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&U3(e,r,i),i};let nn=class extends de{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return G`<button class="wcm-back-btn" @click="${ze.goBack}">${Re.BACK_ICON}</button>`}actionBtnTemplate(){return G`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=ze.state.history.length>1,r=this.title?G`<wcm-text variant="big-bold">${this.title}</wcm-text>`:G`<slot></slot>`;return G`<header class="${fr(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};nn.styles=[ve.globalCss,M3],Ai([ce()],nn.prototype,"title",2),Ai([ce()],nn.prototype,"onAction",2),Ai([ce()],nn.prototype,"actionIcon",2),Ai([ce({type:Boolean})],nn.prototype,"border",2),nn=Ai([Se("wcm-modal-header")],nn);const ne={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Ut.state;return r!=null&&r[t]?r[t]:e?Rt.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=ne.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,ee.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=Ye.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;ne.setRecentWallet(t);function o(a){let l="";i?l=ee.formatUniversalUrl(i,a,n):s&&(l=ee.formatNativeUrl(s,a,n)),ee.openHref(l,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=Ye.state;t&&(ee.setWalletConnectAndroidDeepLink(t),ee.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=Ye.state;if(t)try{await navigator.clipboard.writeText(t),_r.openToast("Link copied","success")}catch{_r.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Ut.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(ne.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(ne.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){ee.openHref(ne.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=ee.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){ze.setData({Wallet:t});const e=ee.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=ne.getCachedRouterWalletPlatforms();e?i?ze.push("MobileConnecting"):n?ze.push("WebConnecting"):ze.push("InstallWallet"):r?ze.push("DesktopConnecting"):n?ze.push("WebConnecting"):i?ze.push("MobileQrcodeConnecting"):ze.push("InstallWallet")}},j3=Ae`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var B3=Object.defineProperty,k3=Object.getOwnPropertyDescriptor,Za=(t,e,r,n)=>{for(var i=n>1?void 0:n?k3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&B3(e,r,i),i};let $i=class extends de{constructor(){super(),this.view=ze.state.view,this.prevView=ze.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=ze.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&rn(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return ne.getShadowRootElement(this,".wcm-router")}get contentEl(){return ne.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return G`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return G`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return G`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return G`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return G`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return G`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return G`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return G`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return G`<div>Not Found</div>`}}async onChangeRoute(){await rn(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=ze.state.view,rn(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return G`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};$i.styles=[ve.globalCss,j3],Za([Mt()],$i.prototype,"view",2),Za([Mt()],$i.prototype,"prevView",2),$i=Za([Se("wcm-modal-router")],$i);const z3=Ae`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var q3=Object.defineProperty,H3=Object.getOwnPropertyDescriptor,Pd=(t,e,r,n)=>{for(var i=n>1?void 0:n?H3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&q3(e,r,i),i};let Rs=class extends de{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=_r.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>_r.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),_r.closeToast()}render(){const{message:t,variant:e}=_r.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?G`<div class="${fr(r)}">${e==="success"?Re.CHECKMARK_ICON:null} ${e==="error"?Re.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};Rs.styles=[ve.globalCss,z3],Pd([Mt()],Rs.prototype,"open",2),Rs=Pd([Se("wcm-modal-toast")],Rs);const W3=.1,Nd=2.5,pr=7;function Qa(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+W3}function V3(t,e){const r=Array.prototype.slice.call(xi.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const K3={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=V3(t,"Q"),a=e/o.length,l=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];l.forEach(({x:b,y:_})=>{const D=(o.length-pr)*a*b,I=(o.length-pr)*a*_,v=.45;for(let E=0;E<l.length;E+=1){const g=a*(pr-E*2);s.push(He`<rect fill="${E%2===0?n:i}" height="${g}" rx="${g*v}" ry="${g*v}" width="${g}" x="${D+a*E}" y="${I+a*E}">`)}});const h=Math.floor((r+25)/a),d=o.length/2-h/2,m=o.length/2+h/2-1,w=[];o.forEach((b,_)=>{b.forEach((D,I)=>{if(o[_][I]&&!(_<pr&&I<pr||_>o.length-(pr+1)&&I<pr||_<pr&&I>o.length-(pr+1))&&!(_>d&&_<m&&I>d&&I<m)){const v=_*a+a/2,E=I*a+a/2;w.push([v,E])}})});const y={};return w.forEach(([b,_])=>{y[b]?y[b].push(_):y[b]=[_]}),Object.entries(y).map(([b,_])=>{const D=_.filter(I=>_.every(v=>!Qa(I,v,a)));return[Number(b),D]}).forEach(([b,_])=>{_.forEach(D=>{s.push(He`<circle cx="${b}" cy="${D}" fill="${n}" r="${a/Nd}">`)})}),Object.entries(y).filter(([b,_])=>_.length>1).map(([b,_])=>{const D=_.filter(I=>_.some(v=>Qa(I,v,a)));return[Number(b),D]}).map(([b,_])=>{_.sort((I,v)=>I<v?-1:1);const D=[];for(const I of _){const v=D.find(E=>E.some(g=>Qa(I,g,a)));v?v.push(I):D.push([I])}return[b,D.map(I=>[I[0],I[I.length-1]])]}).forEach(([b,_])=>{_.forEach(([D,I])=>{s.push(He`<line x1="${b}" x2="${b}" y1="${D}" y2="${I}" stroke="${n}" stroke-width="${a/(Nd/2)}" stroke-linecap="round">`)})}),s}},G3=Ae`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var Y3=Object.defineProperty,J3=Object.getOwnPropertyDescriptor,Pn=(t,e,r,n)=>{for(var i=n>1?void 0:n?J3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Y3(e,r,i),i};let gr=class extends de{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=br.state.themeMode==="light"?this.size:this.size-36;return He`<svg height="${t}" width="${t}">${K3.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":br.state.themeMode==="dark"};return G`<div style="${`width: ${this.size}px`}" class="${fr(t)}">${this.walletId||this.imageUrl?G`<wcm-wallet-image walletId="${Tt(this.walletId)}" imageId="${Tt(this.imageId)}" imageUrl="${Tt(this.imageUrl)}"></wcm-wallet-image>`:Re.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};gr.styles=[ve.globalCss,G3],Pn([ce()],gr.prototype,"uri",2),Pn([ce({type:Number})],gr.prototype,"size",2),Pn([ce()],gr.prototype,"imageId",2),Pn([ce()],gr.prototype,"walletId",2),Pn([ce()],gr.prototype,"imageUrl",2),gr=Pn([Se("wcm-qrcode")],gr);const Z3=Ae`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var Q3=Object.defineProperty,X3=Object.getOwnPropertyDescriptor,Ld=(t,e,r,n)=>{for(var i=n>1?void 0:n?X3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Q3(e,r,i),i};let Ps=class extends de{constructor(){super(...arguments),this.onChange=()=>null}render(){return G`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${Re.SEARCH_ICON}`}};Ps.styles=[ve.globalCss,Z3],Ld([ce()],Ps.prototype,"onChange",2),Ps=Ld([Se("wcm-search-input")],Ps);const e5=Ae`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var t5=Object.defineProperty,r5=Object.getOwnPropertyDescriptor,n5=(t,e,r,n)=>{for(var i=n>1?void 0:n?r5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&t5(e,r,i),i};let Xa=class extends de{render(){return G`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};Xa.styles=[ve.globalCss,e5],Xa=n5([Se("wcm-spinner")],Xa);const i5=Ae`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var s5=Object.defineProperty,o5=Object.getOwnPropertyDescriptor,ec=(t,e,r,n)=>{for(var i=n>1?void 0:n?o5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&s5(e,r,i),i};let Ti=class extends de{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return G`<span><slot class="${fr(t)}"></slot></span>`}};Ti.styles=[ve.globalCss,i5],ec([ce()],Ti.prototype,"variant",2),ec([ce()],Ti.prototype,"color",2),Ti=ec([Se("wcm-text")],Ti);const a5=Ae`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var c5=Object.defineProperty,l5=Object.getOwnPropertyDescriptor,$r=(t,e,r,n)=>{for(var i=n>1?void 0:n?l5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&c5(e,r,i),i};let or=class extends de{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?G`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?G`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){mc.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return G`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${Tt(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:ne.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};or.styles=[ve.globalCss,a5],$r([ce()],or.prototype,"onClick",2),$r([ce()],or.prototype,"name",2),$r([ce()],or.prototype,"walletId",2),$r([ce()],or.prototype,"label",2),$r([ce()],or.prototype,"imageId",2),$r([ce({type:Boolean})],or.prototype,"installed",2),$r([ce({type:Boolean})],or.prototype,"recent",2),or=$r([Se("wcm-wallet-button")],or);const u5=Ae`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var h5=Object.defineProperty,d5=Object.getOwnPropertyDescriptor,Ns=(t,e,r,n)=>{for(var i=n>1?void 0:n?d5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&h5(e,r,i),i};let Nn=class extends de{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:ne.getWalletIcon({id:this.walletId,image_id:this.imageId});return G`${e.length?G`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:Re.WALLET_PLACEHOLDER}`}};Nn.styles=[ve.globalCss,u5],Ns([ce()],Nn.prototype,"walletId",2),Ns([ce()],Nn.prototype,"imageId",2),Ns([ce()],Nn.prototype,"imageUrl",2),Nn=Ns([Se("wcm-wallet-image")],Nn);var f5=Object.defineProperty,p5=Object.getOwnPropertyDescriptor,Md=(t,e,r,n)=>{for(var i=n>1?void 0:n?p5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&f5(e,r,i),i};let tc=class extends de{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>ne.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Ut.state.enableExplorer){await Rt.getRecomendedWallets(),Ye.setIsDataLoaded(!0);const{recomendedWallets:t}=Rt.state,e=t.map(r=>ne.getWalletIcon(r));await this.loadImages(e)}else Ye.setIsDataLoaded(!0)}async preloadCustomImages(){const t=ne.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),_r.openToast("Failed preloading","error")}}};Md([Mt()],tc.prototype,"preload",2),tc=Md([Se("wcm-explorer-context")],tc);var g5=Object.defineProperty,m5=Object.getOwnPropertyDescriptor,w5=(t,e,r,n)=>{for(var i=n>1?void 0:n?m5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&g5(e,r,i),i};let Ud=class extends de{constructor(){super(),this.unsubscribeTheme=void 0,ve.setTheme(),this.unsubscribeTheme=br.subscribe(ve.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};Ud=w5([Se("wcm-theme-context")],Ud);const y5=Ae`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var v5=Object.defineProperty,b5=Object.getOwnPropertyDescriptor,_5=(t,e,r,n)=>{for(var i=n>1?void 0:n?b5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&v5(e,r,i),i};let rc=class extends de{onGoToQrcode(){ze.push("Qrcode")}render(){const{recomendedWallets:t}=Rt.state,e=[...t,...t],r=ee.RECOMMENDED_WALLET_AMOUNT*2;return G`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${Re.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${Re.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?G`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:Re.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${ne.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};rc.styles=[ve.globalCss,y5],rc=_5([Se("wcm-android-wallet-selection")],rc);const E5=Ae`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var S5=Object.defineProperty,x5=Object.getOwnPropertyDescriptor,Ln=(t,e,r,n)=>{for(var i=n>1?void 0:n?x5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&S5(e,r,i),i};let Tr=class extends de{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=br.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:ve.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return G`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return G`<div class="${fr(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${Tt(this.walletId)}" imageId="${Tt(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Tr.styles=[ve.globalCss,E5],Ln([ce()],Tr.prototype,"walletId",2),Ln([ce()],Tr.prototype,"imageId",2),Ln([ce({type:Boolean})],Tr.prototype,"isError",2),Ln([ce({type:Boolean})],Tr.prototype,"isStale",2),Ln([ce()],Tr.prototype,"label",2),Tr=Ln([Se("wcm-connector-waiting")],Tr);const Mn={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=Ut.state,i=(t=Mn.recentWallet())==null?void 0:t.id,s=ee.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=ee.isMobile()?o==null?void 0:o.map(({id:a,name:l,links:h})=>({id:a,name:l,mobile:h,links:h})):o==null?void 0:o.map(({id:a,name:l,links:h})=>({id:a,name:l,desktop:h,links:h})))!=null?e:[]},recentWallet(){return ne.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=Mn.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=Rt.state;return n.filter(i=>r!==i.id)}},Rr={onConnecting(t){ne.goToConnectingView(t)},manualWalletsTemplate(){return Mn.manualWallets().map(t=>G`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return Mn.recomendedWallets(t).map(e=>G`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=Mn.recentWallet();if(t)return G`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${Tt(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},D5=Ae`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var O5=Object.defineProperty,I5=Object.getOwnPropertyDescriptor,C5=(t,e,r,n)=>{for(var i=n>1?void 0:n?I5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&O5(e,r,i),i};let nc=class extends de{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Ut.state,r=t!=="ALL"&&e,n=Rr.manualWalletsTemplate(),i=Rr.recomendedWalletsTemplate();let s=[Rr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const l=!!a.length;return G`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${ne.handleUriCopy}" .actionIcon="${Re.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${Re.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${Re.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${l?G`<wcm-modal-footer><div class="wcm-desktop-title">${Re.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?G`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};nc.styles=[ve.globalCss,D5],nc=C5([Se("wcm-desktop-wallet-selection")],nc);const A5=Ae`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var $5=Object.defineProperty,T5=Object.getOwnPropertyDescriptor,R5=(t,e,r,n)=>{for(var i=n>1?void 0:n?T5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&$5(e,r,i),i};let ic=class extends de{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Ut.state;return t??e?G`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?G`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?G`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};ic.styles=[ve.globalCss,A5],ic=R5([Se("wcm-legal-notice")],ic);const P5=Ae`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var N5=Object.defineProperty,L5=Object.getOwnPropertyDescriptor,M5=(t,e,r,n)=>{for(var i=n>1?void 0:n?L5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&N5(e,r,i),i};let sc=class extends de{onQrcode(){ze.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Ut.state,r=t!=="ALL"&&e,n=Rr.manualWalletsTemplate(),i=Rr.recomendedWalletsTemplate();let s=[Rr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const l=!!a.length;return G`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${Re.QRCODE_ICON}"></wcm-modal-header>${l?G`<wcm-modal-content><div>${a} ${o?G`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};sc.styles=[ve.globalCss,P5],sc=M5([Se("wcm-mobile-wallet-selection")],sc);const U5=Ae`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var F5=Object.defineProperty,j5=Object.getOwnPropertyDescriptor,oc=(t,e,r,n)=>{for(var i=n>1?void 0:n?j5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&F5(e,r,i),i};let Un=class extends de{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=jr.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return ne.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return ne.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&jr.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=ne.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([rn(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,rn(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=ne.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([rn(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,rn(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?jr.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return G`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${fr(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?G`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};Un.styles=[ve.globalCss,U5],oc([Mt()],Un.prototype,"open",2),oc([Mt()],Un.prototype,"active",2),Un=oc([Se("wcm-modal")],Un);const B5=Ae`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var k5=Object.defineProperty,z5=Object.getOwnPropertyDescriptor,Ri=(t,e,r,n)=>{for(var i=n>1?void 0:n?z5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&k5(e,r,i),i};let sn=class extends de{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){ee.isMobile()?ze.replace("MobileConnecting"):ze.replace("MobileQrcodeConnecting")}onDesktop(){ze.replace("DesktopConnecting")}onWeb(){ze.replace("WebConnecting")}render(){return G`<div>${this.isRetry?G`<slot></slot>`:null} ${this.isMobile?G`<wcm-button .onClick="${this.onMobile}" .iconLeft="${Re.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?G`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${Re.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?G`<wcm-button .onClick="${this.onWeb}" .iconLeft="${Re.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};sn.styles=[ve.globalCss,B5],Ri([ce({type:Boolean})],sn.prototype,"isMobile",2),Ri([ce({type:Boolean})],sn.prototype,"isDesktop",2),Ri([ce({type:Boolean})],sn.prototype,"isWeb",2),Ri([ce({type:Boolean})],sn.prototype,"isRetry",2),sn=Ri([Se("wcm-platform-selection")],sn);const q5=Ae`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var H5=Object.defineProperty,W5=Object.getOwnPropertyDescriptor,V5=(t,e,r,n)=>{for(var i=n>1?void 0:n?W5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&H5(e,r,i),i};let ac=class extends de{onClick(){ze.push("WalletExplorer")}render(){const{recomendedWallets:t}=Rt.state,e=Mn.manualWallets(),r=[...t,...e].reverse().slice(0,4);return G`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=ne.getWalletIcon(n);if(i)return G`<img crossorigin="anonymous" src="${i}">`;const s=ne.getWalletIcon({id:n.id});return s?G`<img crossorigin="anonymous" src="${s}">`:Re.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>Re.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};ac.styles=[ve.globalCss,q5],ac=V5([Se("wcm-view-all-wallets-button")],ac);const K5=Ae`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var G5=Object.defineProperty,Y5=Object.getOwnPropertyDescriptor,Ls=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G5(e,r,i),i};let Fn=class extends de{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=Ye.state;this.uri=t},0)}get overlayEl(){return ne.getShadowRootElement(this,".wcm-qr-container")}render(){return G`<div class="wcm-qr-container">${this.uri?G`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${Tt(this.walletId)}" imageId="${Tt(this.imageId)}"></wcm-qrcode>`:G`<wcm-spinner></wcm-spinner>`}</div>`}};Fn.styles=[ve.globalCss,K5],Ls([ce()],Fn.prototype,"walletId",2),Ls([ce()],Fn.prototype,"imageId",2),Ls([Mt()],Fn.prototype,"uri",2),Fn=Ls([Se("wcm-walletconnect-qr")],Fn);var J5=Object.defineProperty,Z5=Object.getOwnPropertyDescriptor,Q5=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&J5(e,r,i),i};let cc=class extends de{viewTemplate(){return ee.isAndroid()?G`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:ee.isMobile()?G`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:G`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return G`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};cc.styles=[ve.globalCss],cc=Q5([Se("wcm-connect-wallet-view")],cc);const X5=Ae`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var e6=Object.defineProperty,t6=Object.getOwnPropertyDescriptor,Fd=(t,e,r,n)=>{for(var i=n>1?void 0:n?t6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&e6(e,r,i),i};let Ms=class extends de{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=ee.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=ee.formatNativeUrl(n,t,r);ee.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=Ye.state,e=ee.getWalletRouterData();ne.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ee.getWalletRouterData(),{isMobile:n,isWeb:i}=ne.getCachedRouterWalletPlatforms();return G`<wcm-modal-header title="${t}" .onAction="${ne.handleUriCopy}" .actionIcon="${Re.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${Re.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Ms.styles=[ve.globalCss,X5],Fd([Mt()],Ms.prototype,"isError",2),Ms=Fd([Se("wcm-desktop-connecting-view")],Ms);const r6=Ae`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var n6=Object.defineProperty,i6=Object.getOwnPropertyDescriptor,s6=(t,e,r,n)=>{for(var i=n>1?void 0:n?i6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&n6(e,r,i),i};let lc=class extends de{onInstall(t){t&&ee.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=ee.getWalletRouterData();return G`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${Re.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};lc.styles=[ve.globalCss,r6],lc=s6([Se("wcm-install-wallet-view")],lc);const o6=Ae`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var a6=Object.defineProperty,c6=Object.getOwnPropertyDescriptor,jd=(t,e,r,n)=>{for(var i=n>1?void 0:n?c6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&a6(e,r,i),i};let Us=class extends de{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=ee.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=ee.formatNativeUrl(i,t,n);ee.openHref(o,"_self")}else if(s){const o=ee.formatUniversalUrl(s,t,n);ee.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=Ye.state,r=ee.getWalletRouterData();ne.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&ee.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=ee.getWalletRouterData(),{isWeb:s}=ne.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return G`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="Tap 'Open' to continue" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${Re.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?G`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${Tt(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${Re.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};Us.styles=[ve.globalCss,o6],jd([Mt()],Us.prototype,"isError",2),Us=jd([Se("wcm-mobile-connecting-view")],Us);const l6=Ae`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var u6=Object.defineProperty,h6=Object.getOwnPropertyDescriptor,d6=(t,e,r,n)=>{for(var i=n>1?void 0:n?h6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&u6(e,r,i),i};let uc=class extends de{render(){const{name:t,id:e,image_id:r}=ee.getWalletRouterData(),{isDesktop:n,isWeb:i}=ne.getCachedRouterWalletPlatforms();return G`<wcm-modal-header title="${t}" .onAction="${ne.handleUriCopy}" .actionIcon="${Re.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${Tt(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};uc.styles=[ve.globalCss,l6],uc=d6([Se("wcm-mobile-qr-connecting-view")],uc);var f6=Object.defineProperty,p6=Object.getOwnPropertyDescriptor,g6=(t,e,r,n)=>{for(var i=n>1?void 0:n?p6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&f6(e,r,i),i};let hc=class extends de{render(){return G`<wcm-modal-header title="Scan the code" .onAction="${ne.handleUriCopy}" .actionIcon="${Re.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};hc.styles=[ve.globalCss],hc=g6([Se("wcm-qrcode-view")],hc);const m6=Ae`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var w6=Object.defineProperty,y6=Object.getOwnPropertyDescriptor,Pi=(t,e,r,n)=>{for(var i=n>1?void 0:n?y6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&w6(e,r,i),i};const dc=40;let on=class extends de{constructor(){super(...arguments),this.loading=!Rt.state.wallets.listings.length,this.firstFetch=!Rt.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=ne.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,Rt.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),Rt.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return ne.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=Rt.state,{listings:r,total:n}=this.search?e:t;return n<=dc||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=Rt.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>dc&&n.length<i))try{this.loading=!0;const o=(t=Ye.state.chains)==null?void 0:t.join(","),{listings:a}=await Rt.getWallets({page:this.firstFetch?1:s+1,entries:dc,search:this.search,version:2,chains:o}),l=a.map(h=>ne.getWalletIcon(h));await Promise.all([...l.map(async h=>ne.preloadImage(h)),ee.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),_r.openToast(ne.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){ee.isAndroid()?ne.handleMobileLinking(t):ne.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=Rt.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=Rr.manualWalletsTemplate(),o=Rr.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:h})=>ne.caseSafeIncludes(h[0],this.search)),o=o.filter(({values:h})=>ne.caseSafeIncludes(h[0],this.search)));const a=!this.loading&&!r.length&&!o.length,l={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return G`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${fr(l)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(h=>G`${h?G`<wcm-wallet-button imageId="${h.image_id}" name="${h.name}" walletId="${h.id}" .onClick="${()=>this.onConnect(h)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?G`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?G`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};on.styles=[ve.globalCss,m6],Pi([Mt()],on.prototype,"loading",2),Pi([Mt()],on.prototype,"firstFetch",2),Pi([Mt()],on.prototype,"search",2),Pi([Mt()],on.prototype,"endReached",2),on=Pi([Se("wcm-wallet-explorer-view")],on);const v6=Ae`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var b6=Object.defineProperty,_6=Object.getOwnPropertyDescriptor,Bd=(t,e,r,n)=>{for(var i=n>1?void 0:n?_6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&b6(e,r,i),i};let Fs=class extends de{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=ee.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=ee.formatUniversalUrl(n,t,r);ee.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=Ye.state,e=ee.getWalletRouterData();ne.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ee.getWalletRouterData(),{isMobile:n,isDesktop:i}=ne.getCachedRouterWalletPlatforms(),s=ee.isMobile();return G`<wcm-modal-header title="${t}" .onAction="${ne.handleUriCopy}" .actionIcon="${Re.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${Re.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Fs.styles=[ve.globalCss,v6],Bd([Mt()],Fs.prototype,"isError",2),Fs=Bd([Se("wcm-web-connecting-view")],Fs);const E6=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return Un},get WcmQrCode(){return gr}},Symbol.toStringTag,{value:"Module"}));pe.PAGE_SIZE=g2,pe.configureConnection=Xv,pe.connect=o2,pe.createSharedState=c2,pe.decrypt=l2,pe.disconnect=u2,pe.emitter=Zr,pe.getAccount=i2,pe.getBalance=s2,pe.getEvents=h2,pe.getRecords=f2,pe.getWalletConnectModalSignClient=Fe,pe.importSharedState=d2,pe.projectId=wh,pe.requestCreateEvent=a2,pe.requestSignature=p2,pe.shortenAddress=la,pe.signClient_puzzleProps=Uv,pe.useAccount=e2,pe.useBalance=t2,pe.useConnect=r2,pe.useDisconnect=n2,pe.useOnSessionDelete=gs,pe.useOnSessionEvent=ca,pe.useOnSessionExpire=Ih,pe.useOnSessionUpdate=oa,pe.useSession=aa,pe.wc_aleo_chains=fi,pe.wc_aleo_methods=hs,pe.wc_events=ds,pe.web3modal_puzzle_props=yh,Object.defineProperty(pe,Symbol.toStringTag,{value:"Module"})});
