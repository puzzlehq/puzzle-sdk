(function(me,st){typeof exports=="object"&&typeof module<"u"?st(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],st):(me=typeof globalThis<"u"?globalThis:me||self,st(me["@puzzlehq/sdk"]={},me.React))})(this,function(me,st){"use strict";const Fd={name:"@puzzlehq/sdk",displayName:"Puzzle SDK",version:"0.1.16",description:"Your portal to privacy",main:"./dist/puzzle.umd.js",module:"./dist/puzzle.es.js",types:"./dist/types/index.d.ts",exports:{".":{import:"./dist/puzzle.es.js",require:"./dist/puzzle.umd.js",types:"./dist/types/index.d.ts"}},type:"module",scripts:{build:"vite build && tsc --declaration --emitDeclarationOnly --outDir dist/types"},dependencies:{"@tanstack/react-query":"^4.29.5","@trpc/client":"^10.9.0","@trpc/react-query":"^10.9.0","@trpc/server":"^10.8.1","@types/debug":"^4.1.7","@walletconnect/modal-sign-html":"^2.6.2","@walletconnect/types":"^2.9.0","@walletconnect/utils":"^2.9.2",debug:"^4.3.4",immer:"^9.0.19",mitt:"^3.0.1",react:"^18.2.0",ws:"^8.13.0",zustand:"^4.3.9"},devDependencies:{"@puzzlehq/types":"1.0.3","@types/chrome":"^0.0.228","@types/node":"^18.11.18","@types/react":"^18.0.27","@types/react-dom":"^18.0.10",typescript:"^4.9.4",vite:"^4.4.7"},repository:{type:"git",url:"git+https://github.com/puzzlehq/puzzle-sdk.git"},keywords:["puzzle","aleo","aztec","web3","crypto\\"],author:"Puzzle",license:"ISC",bugs:{url:"https://github.com/puzzlehq/puzzle-sdk/issues"},homepage:"https://github.com/puzzlehq/puzzle-sdk#readme"},jd=Symbol(),oc=Object.getPrototypeOf,Bs=new WeakMap,kd=t=>t&&(Bs.has(t)?Bs.get(t):oc(t)===Object.prototype||oc(t)===Array.prototype),Bd=t=>kd(t)&&t[jd]||null,ac=(t,e=!0)=>{Bs.set(t,e)},zs=t=>typeof t=="object"&&t!==null,yr=new WeakMap,Ln=new WeakSet,zd=(t=Object.is,e=(h,d)=>new Proxy(h,d),r=h=>zs(h)&&!Ln.has(h)&&(Array.isArray(h)||!(Symbol.iterator in h))&&!(h instanceof WeakMap)&&!(h instanceof WeakSet)&&!(h instanceof Error)&&!(h instanceof Number)&&!(h instanceof Date)&&!(h instanceof String)&&!(h instanceof RegExp)&&!(h instanceof ArrayBuffer),i=h=>{switch(h.status){case"fulfilled":return h.value;case"rejected":throw h.reason;default:throw h}},n=new WeakMap,s=(h,d,b=i)=>{const m=n.get(h);if((m==null?void 0:m[0])===d)return m[1];const w=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h));return ac(w,!0),n.set(h,[d,w]),Reflect.ownKeys(h).forEach(_=>{if(Object.getOwnPropertyDescriptor(w,_))return;const S=Reflect.get(h,_),A={value:S,enumerable:!0,configurable:!0};if(Ln.has(S))ac(S,!1);else if(S instanceof Promise)delete A.value,A.get=()=>b(S);else if(yr.has(S)){const[T,v]=yr.get(S);A.value=s(T,v(),b)}Object.defineProperty(w,_,A)}),Object.preventExtensions(w)},o=new WeakMap,a=[1,1],l=h=>{if(!zs(h))throw new Error("object required");const d=o.get(h);if(d)return d;let b=a[0];const m=new Set,w=(P,I=++a[0])=>{b!==I&&(b=I,m.forEach(M=>M(P,I)))};let _=a[1];const S=(P=++a[1])=>(_!==P&&!m.size&&(_=P,T.forEach(([I])=>{const M=I[1](P);M>b&&(b=M)})),b),A=P=>(I,M)=>{const B=[...I];B[1]=[P,...B[1]],w(B,M)},T=new Map,v=(P,I)=>{if(m.size){const M=I[3](A(P));T.set(P,[I,M])}else T.set(P,[I])},x=P=>{var I;const M=T.get(P);M&&(T.delete(P),(I=M[1])==null||I.call(M))},g=P=>(m.add(P),m.size===1&&T.forEach(([M,B],H)=>{const C=M[3](A(H));T.set(H,[M,C])}),()=>{m.delete(P),m.size===0&&T.forEach(([M,B],H)=>{B&&(B(),T.set(H,[M]))})}),E=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h)),c=e(E,{deleteProperty(P,I){const M=Reflect.get(P,I);x(I);const B=Reflect.deleteProperty(P,I);return B&&w(["delete",[I],M]),B},set(P,I,M,B){const H=Reflect.has(P,I),C=Reflect.get(P,I,B);if(H&&(t(C,M)||o.has(M)&&t(C,o.get(M))))return!0;x(I),zs(M)&&(M=Bd(M)||M);let L=M;if(M instanceof Promise)M.then(K=>{M.status="fulfilled",M.value=K,w(["resolve",[I],K])}).catch(K=>{M.status="rejected",M.reason=K,w(["reject",[I],K])});else{!yr.has(M)&&r(M)&&(L=l(M));const K=!Ln.has(L)&&yr.get(L);K&&v(I,K)}return Reflect.set(P,I,L,B),w(["set",[I],M,C]),!0}});o.set(h,c);const f=[E,S,s,g];return yr.set(c,f),Reflect.ownKeys(h).forEach(P=>{const I=Object.getOwnPropertyDescriptor(h,P);"value"in I&&(c[P]=h[P],delete I.value,delete I.writable),Object.defineProperty(E,P,I)}),c})=>[l,yr,Ln,t,e,r,i,n,s,o,a],[qd]=zd();function br(t={}){return qd(t)}function Ur(t,e,r){const i=yr.get(t);let n;const s=[],o=i[3];let a=!1;const h=o(d=>{if(s.push(d),r){e(s.splice(0));return}n||(n=Promise.resolve().then(()=>{n=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,h()}}function Wd(t,e){const r=yr.get(t),[i,n,s]=r;return s(i,n(),e)}const ot=br({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),ke={state:ot,subscribe(t){return Ur(ot,()=>t(ot))},push(t,e){t!==ot.view&&(ot.view=t,e&&(ot.data=e),ot.history.push(t))},reset(t){ot.view=t,ot.history=[t]},replace(t){ot.history.length>1&&(ot.history[ot.history.length-1]=t,ot.view=t)},goBack(){if(ot.history.length>1){ot.history.pop();const[t]=ot.history.slice(-1);ot.view=t}},setData(t){ot.data=t}},ee={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return ee.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return ee.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(ee.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let i=t;i.includes("://")||(i=t.replaceAll("/","").replaceAll(":",""),i=`${i}://`),i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);const n=encodeURIComponent(e);return`${i}wc?uri=${n}`},formatUniversalUrl(t,e,r){if(!ee.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let i=t;i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);const n=encodeURIComponent(e);return`${i}wc?uri=${n}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(ee.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(ee.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(ee.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(ee.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=ke.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},Hd=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),vt=br({enabled:Hd,userSessionId:"",events:[],connectedWalletId:void 0}),cc={state:vt,subscribe(t){return Ur(vt.events,()=>t(Wd(vt.events[vt.events.length-1])))},initialize(){vt.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(vt.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){vt.connectedWalletId=t},click(t){if(vt.enabled){const e={type:"CLICK",name:t.name,userSessionId:vt.userSessionId,timestamp:Date.now(),data:t};vt.events.push(e)}},track(t){if(vt.enabled){const e={type:"TRACK",name:t.name,userSessionId:vt.userSessionId,timestamp:Date.now(),data:t};vt.events.push(e)}},view(t){if(vt.enabled){const e={type:"VIEW",name:t.name,userSessionId:vt.userSessionId,timestamp:Date.now(),data:t};vt.events.push(e)}}},er=br({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),Ge={state:er,subscribe(t){return Ur(er,()=>t(er))},setChains(t){er.chains=t},setWalletConnectUri(t){er.walletConnectUri=t},setIsCustomDesktop(t){er.isCustomDesktop=t},setIsCustomMobile(t){er.isCustomMobile=t},setIsDataLoaded(t){er.isDataLoaded=t},setIsUiLoaded(t){er.isUiLoaded=t},setIsAuth(t){er.isAuth=t}},Mn=br({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Ut={state:Mn,subscribe(t){return Ur(Mn,()=>t(Mn))},setConfig(t){var e,r;cc.initialize(),Ge.setChains(t.chains),Ge.setIsAuth(!!t.enableAuthMode),Ge.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),Ge.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),ee.setModalVersionInStorage(),Object.assign(Mn,t)}};var Vd=Object.defineProperty,lc=Object.getOwnPropertySymbols,Kd=Object.prototype.hasOwnProperty,Gd=Object.prototype.propertyIsEnumerable,uc=(t,e,r)=>e in t?Vd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yd=(t,e)=>{for(var r in e||(e={}))Kd.call(e,r)&&uc(t,r,e[r]);if(lc)for(var r of lc(e))Gd.call(e,r)&&uc(t,r,e[r]);return t};const qs="https://explorer-api.walletconnect.com",Ws="wcm",Hs="js-2.6.2";async function Un(t,e){const r=Yd({sdkType:Ws,sdkVersion:Hs},e),i=new URL(t,qs);return i.searchParams.append("projectId",Ut.state.projectId),Object.entries(r).forEach(([n,s])=>{s&&i.searchParams.append(n,String(s))}),(await fetch(i)).json()}const Fr={async getDesktopListings(t){return Un("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return Un("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return Un("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return Un("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${qs}/w3m/v1/getWalletImage/${t}?projectId=${Ut.state.projectId}&sdkType=${Ws}&sdkVersion=${Hs}`},getAssetImageUrl(t){return`${qs}/w3m/v1/getAssetImage/${t}?projectId=${Ut.state.projectId}&sdkType=${Ws}&sdkVersion=${Hs}`}};var Zd=Object.defineProperty,hc=Object.getOwnPropertySymbols,Jd=Object.prototype.hasOwnProperty,Qd=Object.prototype.propertyIsEnumerable,dc=(t,e,r)=>e in t?Zd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xd=(t,e)=>{for(var r in e||(e={}))Jd.call(e,r)&&dc(t,r,e[r]);if(hc)for(var r of hc(e))Qd.call(e,r)&&dc(t,r,e[r]);return t};const fc=ee.isMobile(),tr=br({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),Pt={state:tr,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Ut.state;if(t==="NONE"||e==="ALL"&&!t)return tr.recomendedWallets;if(ee.isArray(t)){const r={recommendedIds:t.join(",")},{listings:i}=await Fr.getAllListings(r),n=Object.values(i);n.sort((s,o)=>{const a=t.indexOf(s.id),l=t.indexOf(o.id);return a-l}),tr.recomendedWallets=n}else{const{chains:r,isAuth:i}=Ge.state,n=r==null?void 0:r.join(","),s=ee.isArray(e),o={page:1,sdks:i?"auth_v1":void 0,entries:ee.RECOMMENDED_WALLET_AMOUNT,chains:n,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=fc?await Fr.getMobileListings(o):await Fr.getDesktopListings(o);tr.recomendedWallets=Object.values(a)}return tr.recomendedWallets},async getWallets(t){const e=Xd({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:i}=Ut.state,{recomendedWallets:n}=tr;if(i==="ALL")return tr.wallets;n.length?e.excludedIds=n.map(b=>b.id).join(","):ee.isArray(r)&&(e.excludedIds=r.join(",")),ee.isArray(i)&&(e.excludedIds=[e.excludedIds,i].filter(Boolean).join(",")),Ge.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:l}=fc?await Fr.getMobileListings(e):await Fr.getDesktopListings(e),h=Object.values(a),d=o?"search":"wallets";return tr[d]={listings:[...tr[d].listings,...h],total:l,page:s??1},{listings:h,total:l}},getWalletImageUrl(t){return Fr.getWalletImageUrl(t)},getAssetImageUrl(t){return Fr.getAssetImageUrl(t)},resetSearch(){tr.search={listings:[],total:0,page:1}}},li=br({open:!1}),jr={state:li,subscribe(t){return Ur(li,()=>t(li))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:i}=Ge.state;if(ee.removeWalletConnectDeepLink(),Ge.setWalletConnectUri(t==null?void 0:t.uri),Ge.setChains(t==null?void 0:t.chains),ke.reset("ConnectWallet"),r&&i)li.open=!0,e();else{const n=setInterval(()=>{const s=Ge.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(n),li.open=!0,e())},200)}})},close(){li.open=!1}};var ef=Object.defineProperty,pc=Object.getOwnPropertySymbols,tf=Object.prototype.hasOwnProperty,rf=Object.prototype.propertyIsEnumerable,gc=(t,e,r)=>e in t?ef(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nf=(t,e)=>{for(var r in e||(e={}))tf.call(e,r)&&gc(t,r,e[r]);if(pc)for(var r of pc(e))rf.call(e,r)&&gc(t,r,e[r]);return t};function sf(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Fi=br({themeMode:sf()?"dark":"light"}),vr={state:Fi,subscribe(t){return Ur(Fi,()=>t(Fi))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(Fi.themeMode=e),r&&(Fi.themeVariables=nf({},r))}},kr=br({open:!1,message:"",variant:"success"}),_r={state:kr,subscribe(t){return Ur(kr,()=>t(kr))},openToast(t,e){kr.open=!0,kr.message=t,kr.variant=e},closeToast(){kr.open=!1}};let of=class{constructor(e){this.openModal=jr.open,this.closeModal=jr.close,this.subscribeModal=jr.subscribe,this.setTheme=vr.setThemeConfig,vr.setThemeConfig(e),Ut.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>V5);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),Ge.setIsUiLoaded(!0)}}};var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vs(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}),r}var Ks={exports:{}},ui=typeof Reflect=="object"?Reflect:null,wc=ui&&typeof ui.apply=="function"?ui.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Fn;ui&&typeof ui.ownKeys=="function"?Fn=ui.ownKeys:Object.getOwnPropertySymbols?Fn=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Fn=function(e){return Object.getOwnPropertyNames(e)};function af(t){console&&console.warn&&console.warn(t)}var yc=Number.isNaN||function(e){return e!==e};function Le(){Le.init.call(this)}Ks.exports=Le,Ks.exports.once=hf,Le.EventEmitter=Le,Le.prototype._events=void 0,Le.prototype._eventsCount=0,Le.prototype._maxListeners=void 0;var bc=10;function jn(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Le,"defaultMaxListeners",{enumerable:!0,get:function(){return bc},set:function(t){if(typeof t!="number"||t<0||yc(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");bc=t}}),Le.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Le.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||yc(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function vc(t){return t._maxListeners===void 0?Le.defaultMaxListeners:t._maxListeners}Le.prototype.getMaxListeners=function(){return vc(this)},Le.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")wc(l,this,r);else for(var h=l.length,d=Dc(l,h),i=0;i<h;++i)wc(d[i],this,r);return!0};function _c(t,e,r,i){var n,s,o;if(jn(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=vc(t),n>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,af(a)}return t}Le.prototype.addListener=function(e,r){return _c(this,e,r,!1)},Le.prototype.on=Le.prototype.addListener,Le.prototype.prependListener=function(e,r){return _c(this,e,r,!0)};function cf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ec(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=cf.bind(i);return n.listener=r,i.wrapFn=n,n}Le.prototype.once=function(e,r){return jn(r),this.on(e,Ec(this,e,r)),this},Le.prototype.prependOnceListener=function(e,r){return jn(r),this.prependListener(e,Ec(this,e,r)),this},Le.prototype.removeListener=function(e,r){var i,n,s,o,a;if(jn(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():lf(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},Le.prototype.off=Le.prototype.removeListener,Le.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(n=0;n<s.length;++n)o=s[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function xc(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?uf(n):Dc(n,n.length)}Le.prototype.listeners=function(e){return xc(this,e,!0)},Le.prototype.rawListeners=function(e){return xc(this,e,!1)},Le.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Sc.call(t,e)},Le.prototype.listenerCount=Sc;function Sc(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Le.prototype.eventNames=function(){return this._eventsCount>0?Fn(this._events):[]};function Dc(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function lf(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function uf(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function hf(t,e){return new Promise(function(r,i){function n(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}Ic(t,e,s,{once:!0}),e!=="error"&&df(t,n,{once:!0})})}function df(t,e,r){typeof t.on=="function"&&Ic(t,"error",e,r)}function Ic(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Yt=Ks.exports;const Cc=mc(Yt);var kn={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Gs=function(t,e){return Gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Gs(t,e)};function ff(t,e){Gs(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ys=function(){return Ys=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ys.apply(this,arguments)};function pf(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function gf(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function mf(t,e){return function(r,i){e(r,i,t)}}function wf(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function yf(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{h(i.next(d))}catch(b){o(b)}}function l(d){try{h(i.throw(d))}catch(b){o(b)}}function h(d){d.done?s(d.value):n(d.value).then(a,l)}h((i=i.apply(t,e||[])).next())})}function bf(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(d){return l([h,d])}}function l(h){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=h[0]&2?n.return:h[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,h[1])).done)return s;switch(n=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(d){h=[6,d],n=0}finally{i=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function vf(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function _f(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Zs(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oc(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function Ef(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Oc(arguments[e]));return t}function xf(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function ji(t){return this instanceof ji?(this.v=t,this):new ji(t)}function Sf(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(m){i[m]&&(n[m]=function(w){return new Promise(function(_,S){s.push([m,w,_,S])>1||a(m,w)})})}function a(m,w){try{l(i[m](w))}catch(_){b(s[0][3],_)}}function l(m){m.value instanceof ji?Promise.resolve(m.value.v).then(h,d):b(s[0][2],m)}function h(m){a("next",m)}function d(m){a("throw",m)}function b(m,w){m(w),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Df(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(o){return(r=!r)?{value:ji(t[n](o)),done:n==="return"}:s?s(o):o}:s}}function If(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Zs=="function"?Zs(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),n(a,l,o.done,o.value)})}}function n(s,o,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},o)}}function Cf(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Of(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function $f(t){return t&&t.__esModule?t:{default:t}}function Af(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Tf(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const Wt=Vs(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ys},__asyncDelegator:Df,__asyncGenerator:Sf,__asyncValues:If,__await:ji,__awaiter:yf,__classPrivateFieldGet:Af,__classPrivateFieldSet:Tf,__createBinding:vf,__decorate:gf,__exportStar:_f,__extends:ff,__generator:bf,__importDefault:$f,__importStar:Of,__makeTemplateObject:Cf,__metadata:wf,__param:mf,__read:Oc,__rest:pf,__spread:Ef,__spreadArrays:xf,__values:Zs},Symbol.toStringTag,{value:"Module"})));var ki={};Object.defineProperty(ki,"__esModule",{value:!0});function Pf(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}ki.safeJsonParse=Pf;function Rf(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}ki.safeJsonStringify=Rf;var Bi={exports:{}},$c;function Nf(){return $c||($c=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,i){this[r]=String(i)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ft<"u"&&Ft.localStorage?Bi.exports=Ft.localStorage:typeof window<"u"&&window.localStorage?Bi.exports=window.localStorage:Bi.exports=new e}()),Bi.exports}var Js={},zi={},Ac;function Lf(){if(Ac)return zi;Ac=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.IKeyValueStorage=void 0;class t{}return zi.IKeyValueStorage=t,zi}var qi={},Tc;function Mf(){if(Tc)return qi;Tc=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.parseEntry=void 0;const t=ki;function e(r){var i;return[r[0],t.safeJsonParse((i=r[1])!==null&&i!==void 0?i:"")]}return qi.parseEntry=e,qi}var Pc;function Uf(){return Pc||(Pc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wt;e.__exportStar(Lf(),t),e.__exportStar(Mf(),t)}(Js)),Js}Object.defineProperty(kn,"__esModule",{value:!0}),kn.KeyValueStorage=void 0;const hi=Wt,Rc=ki,Ff=hi.__importDefault(Nf()),jf=Uf();class Nc{constructor(){this.localStorage=Ff.default}getKeys(){return hi.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return hi.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(jf.parseEntry)})}getItem(e){return hi.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return Rc.safeJsonParse(r)})}setItem(e,r){return hi.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Rc.safeJsonStringify(r))})}removeItem(e){return hi.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}kn.KeyValueStorage=Nc;var kf=kn.default=Nc,di={},Wi={},X={},Qs={},Hi={},Lc;function Bf(){if(Lc)return Hi;Lc=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Hi.delay=t,Hi}var Br={},Xs={},zr={},Mc;function zf(){return Mc||(Mc=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.ONE_THOUSAND=zr.ONE_HUNDRED=void 0,zr.ONE_HUNDRED=100,zr.ONE_THOUSAND=1e3),zr}var eo={},Uc;function qf(){return Uc||(Uc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(eo)),eo}var Fc;function jc(){return Fc||(Fc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wt;e.__exportStar(zf(),t),e.__exportStar(qf(),t)}(Xs)),Xs}var kc;function Wf(){if(kc)return Br;kc=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.fromMiliseconds=Br.toMiliseconds=void 0;const t=jc();function e(i){return i*t.ONE_THOUSAND}Br.toMiliseconds=e;function r(i){return Math.floor(i/t.ONE_THOUSAND)}return Br.fromMiliseconds=r,Br}var Bc;function Hf(){return Bc||(Bc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wt;e.__exportStar(Bf(),t),e.__exportStar(Wf(),t)}(Qs)),Qs}var fi={},zc;function Vf(){if(zc)return fi;zc=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const n=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:n})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return fi.Watch=t,fi.default=t,fi}var to={},Vi={},qc;function Kf(){if(qc)return Vi;qc=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.IWatch=void 0;class t{}return Vi.IWatch=t,Vi}var Wc;function Gf(){return Wc||(Wc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Wt.__exportStar(Kf(),t)}(to)),to}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wt;e.__exportStar(Hf(),t),e.__exportStar(Vf(),t),e.__exportStar(Gf(),t),e.__exportStar(jc(),t)})(X);var ro={},Ki={};let qr=class{};const Yf=Vs(Object.freeze(Object.defineProperty({__proto__:null,IEvents:qr},Symbol.toStringTag,{value:"Module"})));var Hc;function Zf(){if(Hc)return Ki;Hc=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.IHeartBeat=void 0;const t=Yf;class e extends t.IEvents{constructor(i){super()}}return Ki.IHeartBeat=e,Ki}var Vc;function Kc(){return Vc||(Vc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Wt.__exportStar(Zf(),t)}(ro)),ro}var io={},Wr={},Gc;function Jf(){if(Gc)return Wr;Gc=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.HEARTBEAT_EVENTS=Wr.HEARTBEAT_INTERVAL=void 0;const t=X;return Wr.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,Wr.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Wr}var Yc;function Zc(){return Yc||(Yc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Wt.__exportStar(Jf(),t)}(io)),io}var Jc;function Qf(){if(Jc)return Wi;Jc=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.HeartBeat=void 0;const t=Wt,e=Yt,r=X,i=Kc(),n=Zc();class s extends i.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=n.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||n.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const l=new s(a);return yield l.init(),l})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,l){this.events.on(a,l)}once(a,l){this.events.once(a,l)}off(a,l){this.events.off(a,l)}removeListener(a,l){this.events.removeListener(a,l)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(n.HEARTBEAT_EVENTS.pulse)}}return Wi.HeartBeat=s,Wi}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wt;e.__exportStar(Qf(),t),e.__exportStar(Kc(),t),e.__exportStar(Zc(),t)})(di);var De={},no,Qc;function Xf(){if(Qc)return no;Qc=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}no=e;function e(r,i,n){var s=n&&n.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=i.length+o;if(a===1)return r;var l=new Array(a);l[0]=s(r);for(var h=1;h<a;h++)l[h]=s(i[h]);return l.join(" ")}if(typeof r!="string")return r;var d=i.length;if(d===0)return r;for(var b="",m=1-o,w=-1,_=r&&r.length||0,S=0;S<_;){if(r.charCodeAt(S)===37&&S+1<_){switch(w=w>-1?w:0,r.charCodeAt(S+1)){case 100:case 102:if(m>=d||i[m]==null)break;w<S&&(b+=r.slice(w,S)),b+=Number(i[m]),w=S+2,S++;break;case 105:if(m>=d||i[m]==null)break;w<S&&(b+=r.slice(w,S)),b+=Math.floor(Number(i[m])),w=S+2,S++;break;case 79:case 111:case 106:if(m>=d||i[m]===void 0)break;w<S&&(b+=r.slice(w,S));var A=typeof i[m];if(A==="string"){b+="'"+i[m]+"'",w=S+2,S++;break}if(A==="function"){b+=i[m].name||"<anonymous>",w=S+2,S++;break}b+=s(i[m]),w=S+2,S++;break;case 115:if(m>=d)break;w<S&&(b+=r.slice(w,S)),b+=String(i[m]),w=S+2,S++;break;case 37:w<S&&(b+=r.slice(w,S)),b+="%",w=S+2,S++,m--;break}++m}++S}return w===-1?r:(w<_&&(b+=r.slice(w)),b)}return no}var so,Xc;function e0(){if(Xc)return so;Xc=1;const t=Xf();so=n;const e=E().console||{},r={mapHttpRequest:_,mapHttpResponse:_,wrapRequestSerializer:S,wrapResponseSerializer:S,wrapErrorSerializer:S,req:_,res:_,err:m};function i(p,c){return Array.isArray(p)?p.filter(function(P){return P!=="!stdSerializers.err"}):p===!0?Object.keys(c):!1}function n(p){p=p||{},p.browser=p.browser||{};const c=p.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const f=p.browser.write||e;p.browser.write&&(p.browser.asObject=!0);const P=p.serializers||{},I=i(p.browser.serialize,P);let M=p.browser.serialize;Array.isArray(p.browser.serialize)&&p.browser.serialize.indexOf("!stdSerializers.err")>-1&&(M=!1);const B=["error","fatal","warn","info","debug","trace"];typeof f=="function"&&(f.error=f.fatal=f.warn=f.info=f.debug=f.trace=f),p.enabled===!1&&(p.level="silent");const H=p.level||"info",C=Object.create(f);C.log||(C.log=A),Object.defineProperty(C,"levelVal",{get:K}),Object.defineProperty(C,"level",{get:z,set:F});const L={transmit:c,serialize:I,asObject:p.browser.asObject,levels:B,timestamp:w(p)};C.levels=n.levels,C.level=H,C.setMaxListeners=C.getMaxListeners=C.emit=C.addListener=C.on=C.prependListener=C.once=C.prependOnceListener=C.removeListener=C.removeAllListeners=C.listeners=C.listenerCount=C.eventNames=C.write=C.flush=A,C.serializers=P,C._serialize=I,C._stdErrSerialize=M,C.child=k,c&&(C._logEvent=b());function K(){return this.level==="silent"?1/0:this.levels.values[this.level]}function z(){return this._level}function F(U){if(U!=="silent"&&!this.levels.values[U])throw Error("unknown level "+U);this._level=U,s(L,C,"error","log"),s(L,C,"fatal","error"),s(L,C,"warn","error"),s(L,C,"info","log"),s(L,C,"debug","log"),s(L,C,"trace","log")}function k(U,q){if(!U)throw new Error("missing bindings for child Pino");q=q||{},I&&U.serializers&&(q.serializers=U.serializers);const ne=q.serializers;if(I&&ne){var W=Object.assign({},P,ne),te=p.browser.serialize===!0?Object.keys(W):I;delete U.serializers,l([U],te,W,this._stdErrSerialize)}function J(re){this._childLevel=(re._childLevel|0)+1,this.error=h(re,U,"error"),this.fatal=h(re,U,"fatal"),this.warn=h(re,U,"warn"),this.info=h(re,U,"info"),this.debug=h(re,U,"debug"),this.trace=h(re,U,"trace"),W&&(this.serializers=W,this._serialize=te),c&&(this._logEvent=b([].concat(re._logEvent.bindings,U)))}return J.prototype=this,new J(this)}return C}n.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},n.stdSerializers=r,n.stdTimeFunctions=Object.assign({},{nullTime:T,epochTime:v,unixTime:x,isoTime:g});function s(p,c,f,P){const I=Object.getPrototypeOf(c);c[f]=c.levelVal>c.levels.values[f]?A:I[f]?I[f]:e[f]||e[P]||A,o(p,c,f)}function o(p,c,f){!p.transmit&&c[f]===A||(c[f]=function(P){return function(){const M=p.timestamp(),B=new Array(arguments.length),H=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var C=0;C<B.length;C++)B[C]=arguments[C];if(p.serialize&&!p.asObject&&l(B,this._serialize,this.serializers,this._stdErrSerialize),p.asObject?P.call(H,a(this,f,B,M)):P.apply(H,B),p.transmit){const L=p.transmit.level||c.level,K=n.levels.values[L],z=n.levels.values[f];if(z<K)return;d(this,{ts:M,methodLevel:f,methodValue:z,transmitLevel:L,transmitValue:n.levels.values[p.transmit.level||c.level],send:p.transmit.send,val:c.levelVal},B)}}}(c[f]))}function a(p,c,f,P){p._serialize&&l(f,p._serialize,p.serializers,p._stdErrSerialize);const I=f.slice();let M=I[0];const B={};P&&(B.time=P),B.level=n.levels.values[c];let H=(p._childLevel|0)+1;if(H<1&&(H=1),M!==null&&typeof M=="object"){for(;H--&&typeof I[0]=="object";)Object.assign(B,I.shift());M=I.length?t(I.shift(),I):void 0}else typeof M=="string"&&(M=t(I.shift(),I));return M!==void 0&&(B.msg=M),B}function l(p,c,f,P){for(const I in p)if(P&&p[I]instanceof Error)p[I]=n.stdSerializers.err(p[I]);else if(typeof p[I]=="object"&&!Array.isArray(p[I]))for(const M in p[I])c&&c.indexOf(M)>-1&&M in f&&(p[I][M]=f[M](p[I][M]))}function h(p,c,f){return function(){const P=new Array(1+arguments.length);P[0]=c;for(var I=1;I<P.length;I++)P[I]=arguments[I-1];return p[f].apply(this,P)}}function d(p,c,f){const P=c.send,I=c.ts,M=c.methodLevel,B=c.methodValue,H=c.val,C=p._logEvent.bindings;l(f,p._serialize||Object.keys(p.serializers),p.serializers,p._stdErrSerialize===void 0?!0:p._stdErrSerialize),p._logEvent.ts=I,p._logEvent.messages=f.filter(function(L){return C.indexOf(L)===-1}),p._logEvent.level.label=M,p._logEvent.level.value=B,P(M,p._logEvent,H),p._logEvent=b(C)}function b(p){return{ts:0,messages:[],bindings:p||[],level:{label:"",value:0}}}function m(p){const c={type:p.constructor.name,msg:p.message,stack:p.stack};for(const f in p)c[f]===void 0&&(c[f]=p[f]);return c}function w(p){return typeof p.timestamp=="function"?p.timestamp:p.timestamp===!1?T:v}function _(){return{}}function S(p){return p}function A(){}function T(){return!1}function v(){return Date.now()}function x(){return Math.round(Date.now()/1e3)}function g(){return new Date(Date.now()).toISOString()}function E(){function p(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return p(self)||p(window)||p(this)||{}}}return so}var Hr={},el;function tl(){return el||(el=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.PINO_CUSTOM_CONTEXT_KEY=Hr.PINO_LOGGER_DEFAULTS=void 0,Hr.PINO_LOGGER_DEFAULTS={level:"info"},Hr.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Hr}var It={},rl;function t0(){if(rl)return It;rl=1,Object.defineProperty(It,"__esModule",{value:!0}),It.generateChildLogger=It.formatChildLoggerContext=It.getLoggerContext=It.setBrowserLoggerContext=It.getBrowserLoggerContext=It.getDefaultLoggerOptions=void 0;const t=tl();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}It.getDefaultLoggerOptions=e;function r(a,l=t.PINO_CUSTOM_CONTEXT_KEY){return a[l]||""}It.getBrowserLoggerContext=r;function i(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){return a[h]=l,a}It.setBrowserLoggerContext=i;function n(a,l=t.PINO_CUSTOM_CONTEXT_KEY){let h="";return typeof a.bindings>"u"?h=r(a,l):h=a.bindings().context||"",h}It.getLoggerContext=n;function s(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){const d=n(a,h);return d.trim()?`${d}/${l}`:l}It.formatChildLoggerContext=s;function o(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(a,l,h),b=a.child({context:d});return i(b,d,h)}return It.generateChildLogger=o,It}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=Wt,r=e.__importDefault(e0());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(tl(),t),e.__exportStar(t0(),t)})(De);let r0=class extends qr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},i0=class extends qr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},n0=class{constructor(e,r){this.logger=e,this.core=r}},s0=class extends qr{constructor(e,r){super(),this.relayer=e,this.logger=r}},o0=class extends qr{constructor(e){super()}},a0=class{constructor(e,r,i,n){this.core=e,this.logger=r,this.name=i}},c0=class extends qr{constructor(e,r){super(),this.relayer=e,this.logger=r}},l0=class extends qr{constructor(e,r){super(),this.core=e,this.logger=r}},u0=class{constructor(e,r){this.projectId=e,this.logger=r}},h0=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},d0=class{constructor(e){this.client=e}};const f0=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),p0=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function il(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return p0(t)}catch{return t}}function oo(t){return typeof t=="string"?t:f0(t)||""}var ao={},pi={},Bn={},zn={};Object.defineProperty(zn,"__esModule",{value:!0}),zn.BrowserRandomSource=void 0;const nl=65536;class g0{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let i=0;i<r.length;i+=nl)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,nl)));return r}}zn.BrowserRandomSource=g0;function m0(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qn={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});function w0(t){for(var e=0;e<t.length;e++)t[e]=0;return t}jt.wipe=w0;const y0=Vs(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(qn,"__esModule",{value:!0}),qn.NodeRandomSource=void 0;const b0=jt;class v0{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof m0<"u"){const e=y0;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(e);for(let n=0;n<i.length;n++)i[n]=r[n];return(0,b0.wipe)(r),i}}qn.NodeRandomSource=v0,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.SystemRandomSource=void 0;const _0=zn,E0=qn;class x0{constructor(){if(this.isAvailable=!1,this.name="",this._source=new _0.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new E0.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Bn.SystemRandomSource=x0;var oe={},sl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,l){var h=a>>>16&65535,d=a&65535,b=l>>>16&65535,m=l&65535;return d*m+(h*m+d*b<<16>>>0)|0}t.mul=Math.imul||e;function r(a,l){return a+l|0}t.add=r;function i(a,l){return a-l|0}t.sub=i;function n(a,l){return a<<l|a>>>32-l}t.rotl=n;function s(a,l){return a<<32-l|a>>>l}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(sl),Object.defineProperty(oe,"__esModule",{value:!0});var ol=sl;function S0(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}oe.readInt16BE=S0;function D0(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}oe.readUint16BE=D0;function I0(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}oe.readInt16LE=I0;function C0(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}oe.readUint16LE=C0;function al(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}oe.writeUint16BE=al,oe.writeInt16BE=al;function cl(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}oe.writeUint16LE=cl,oe.writeInt16LE=cl;function co(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}oe.readInt32BE=co;function lo(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}oe.readUint32BE=lo;function uo(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}oe.readInt32LE=uo;function ho(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}oe.readUint32LE=ho;function Wn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}oe.writeUint32BE=Wn,oe.writeInt32BE=Wn;function Hn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}oe.writeUint32LE=Hn,oe.writeInt32LE=Hn;function O0(t,e){e===void 0&&(e=0);var r=co(t,e),i=co(t,e+4);return r*4294967296+i-(i>>31)*4294967296}oe.readInt64BE=O0;function $0(t,e){e===void 0&&(e=0);var r=lo(t,e),i=lo(t,e+4);return r*4294967296+i}oe.readUint64BE=$0;function A0(t,e){e===void 0&&(e=0);var r=uo(t,e),i=uo(t,e+4);return i*4294967296+r-(r>>31)*4294967296}oe.readInt64LE=A0;function T0(t,e){e===void 0&&(e=0);var r=ho(t,e),i=ho(t,e+4);return i*4294967296+r}oe.readUint64LE=T0;function ll(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Wn(t/4294967296>>>0,e,r),Wn(t>>>0,e,r+4),e}oe.writeUint64BE=ll,oe.writeInt64BE=ll;function ul(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Hn(t>>>0,e,r),Hn(t/4294967296>>>0,e,r+4),e}oe.writeUint64LE=ul,oe.writeInt64LE=ul;function P0(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,s=t/8+r-1;s>=r;s--)i+=e[s]*n,n*=256;return i}oe.readUintBE=P0;function R0(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,s=r;s<r+t/8;s++)i+=e[s]*n,n*=256;return i}oe.readUintLE=R0;function N0(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ol.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var n=1,s=t/8+i-1;s>=i;s--)r[s]=e/n&255,n*=256;return r}oe.writeUintBE=N0;function L0(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ol.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var n=1,s=i;s<i+t/8;s++)r[s]=e/n&255,n*=256;return r}oe.writeUintLE=L0;function M0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}oe.readFloat32BE=M0;function U0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}oe.readFloat32LE=U0;function F0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}oe.readFloat64BE=F0;function j0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}oe.readFloat64LE=j0;function k0(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t),e}oe.writeFloat32BE=k0;function B0(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t,!0),e}oe.writeFloat32LE=B0;function z0(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t),e}oe.writeFloat64BE=z0;function q0(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t,!0),e}oe.writeFloat64LE=q0,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=Bn,r=oe,i=jt;t.defaultRandomSource=new e.SystemRandomSource;function n(h,d=t.defaultRandomSource){return d.randomBytes(h)}t.randomBytes=n;function s(h=t.defaultRandomSource){const d=n(4,h),b=(0,r.readUint32LE)(d);return(0,i.wipe)(d),b}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(h,d=o,b=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let m="";const w=d.length,_=256-256%w;for(;h>0;){const S=n(Math.ceil(h*256/_),b);for(let A=0;A<S.length&&h>0;A++){const T=S[A];T<_&&(m+=d.charAt(T%w),h--)}(0,i.wipe)(S)}return m}t.randomString=a;function l(h,d=o,b=t.defaultRandomSource){const m=Math.ceil(h/(Math.log(d.length)/Math.LN2));return a(m,d,b)}t.randomStringForEntropy=l}(pi);var hl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=oe,r=jt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var i=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&h>0;)this._buffer[this._bufferLength++]=l[d++],h--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,l,d,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[d++],h--;return this},a.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,d=this._bufferLength,b=h/536870912|0,m=h<<3,w=h%128<112?128:256;this._buffer[d]=128;for(var _=d+1;_<w-8;_++)this._buffer[_]=0;e.writeUint32BE(b,this._buffer,w-8),e.writeUint32BE(m,this._buffer,w-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,w),this._finished=!0}for(var _=0;_<this.digestLength/8;_++)e.writeUint32BE(this._stateHi[_],l,_*8),e.writeUint32BE(this._stateLo[_],l,_*8+4);return this},a.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(l){return this._stateHi.set(l.stateHi),this._stateLo.set(l.stateLo),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(l){r.wipe(l.stateHi),r.wipe(l.stateLo),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},a}();t.SHA512=i;var n=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,l,h,d,b,m,w){for(var _=h[0],S=h[1],A=h[2],T=h[3],v=h[4],x=h[5],g=h[6],E=h[7],p=d[0],c=d[1],f=d[2],P=d[3],I=d[4],M=d[5],B=d[6],H=d[7],C,L,K,z,F,k,U,q;w>=128;){for(var ne=0;ne<16;ne++){var W=8*ne+m;a[ne]=e.readUint32BE(b,W),l[ne]=e.readUint32BE(b,W+4)}for(var ne=0;ne<80;ne++){var te=_,J=S,re=A,N=T,R=v,O=x,u=g,D=E,V=p,Z=c,we=f,Ie=P,ve=I,Ae=M,Ye=B,We=H;if(C=E,L=H,F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=(v>>>14|I<<32-14)^(v>>>18|I<<32-18)^(I>>>41-32|v<<32-(41-32)),L=(I>>>14|v<<32-14)^(I>>>18|v<<32-18)^(v>>>41-32|I<<32-(41-32)),F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,C=v&x^~v&g,L=I&M^~I&B,F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,C=n[ne*2],L=n[ne*2+1],F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,C=a[ne%16],L=l[ne%16],F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,K=U&65535|q<<16,z=F&65535|k<<16,C=K,L=z,F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=(_>>>28|p<<32-28)^(p>>>34-32|_<<32-(34-32))^(p>>>39-32|_<<32-(39-32)),L=(p>>>28|_<<32-28)^(_>>>34-32|p<<32-(34-32))^(_>>>39-32|p<<32-(39-32)),F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,C=_&S^_&A^S&A,L=p&c^p&f^c&f,F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,D=U&65535|q<<16,We=F&65535|k<<16,C=N,L=Ie,F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=K,L=z,F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,N=U&65535|q<<16,Ie=F&65535|k<<16,S=te,A=J,T=re,v=N,x=R,g=O,E=u,_=D,c=V,f=Z,P=we,I=Ie,M=ve,B=Ae,H=Ye,p=We,ne%16===15)for(var W=0;W<16;W++)C=a[W],L=l[W],F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=a[(W+9)%16],L=l[(W+9)%16],F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,K=a[(W+1)%16],z=l[(W+1)%16],C=(K>>>1|z<<32-1)^(K>>>8|z<<32-8)^K>>>7,L=(z>>>1|K<<32-1)^(z>>>8|K<<32-8)^(z>>>7|K<<32-7),F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,K=a[(W+14)%16],z=l[(W+14)%16],C=(K>>>19|z<<32-19)^(z>>>61-32|K<<32-(61-32))^K>>>6,L=(z>>>19|K<<32-19)^(K>>>61-32|z<<32-(61-32))^(z>>>6|K<<32-6),F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,a[W]=U&65535|q<<16,l[W]=F&65535|k<<16}C=_,L=p,F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=h[0],L=d[0],F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[0]=_=U&65535|q<<16,d[0]=p=F&65535|k<<16,C=S,L=c,F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=h[1],L=d[1],F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[1]=S=U&65535|q<<16,d[1]=c=F&65535|k<<16,C=A,L=f,F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=h[2],L=d[2],F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[2]=A=U&65535|q<<16,d[2]=f=F&65535|k<<16,C=T,L=P,F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=h[3],L=d[3],F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[3]=T=U&65535|q<<16,d[3]=P=F&65535|k<<16,C=v,L=I,F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=h[4],L=d[4],F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[4]=v=U&65535|q<<16,d[4]=I=F&65535|k<<16,C=x,L=M,F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=h[5],L=d[5],F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[5]=x=U&65535|q<<16,d[5]=M=F&65535|k<<16,C=g,L=B,F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=h[6],L=d[6],F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[6]=g=U&65535|q<<16,d[6]=B=F&65535|k<<16,C=E,L=H,F=L&65535,k=L>>>16,U=C&65535,q=C>>>16,C=h[7],L=d[7],F+=L&65535,k+=L>>>16,U+=C&65535,q+=C>>>16,k+=F>>>16,U+=k>>>16,q+=U>>>16,h[7]=E=U&65535|q<<16,d[7]=H=F&65535|k<<16,m+=128,w-=128}return m}function o(a){var l=new i;l.update(a);var h=l.digest();return l.clean(),h}t.hash=o})(hl),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=pi,r=hl,i=jt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function n(N){const R=new Float64Array(16);if(N)for(let O=0;O<N.length;O++)R[O]=N[O];return R}const s=new Uint8Array(32);s[0]=9;const o=n(),a=n([1]),l=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),b=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(N,R){for(let O=0;O<16;O++)N[O]=R[O]|0}function _(N){let R=1;for(let O=0;O<16;O++){let u=N[O]+R+65535;R=Math.floor(u/65536),N[O]=u-R*65536}N[0]+=R-1+37*(R-1)}function S(N,R,O){const u=~(O-1);for(let D=0;D<16;D++){const V=u&(N[D]^R[D]);N[D]^=V,R[D]^=V}}function A(N,R){const O=n(),u=n();for(let D=0;D<16;D++)u[D]=R[D];_(u),_(u),_(u);for(let D=0;D<2;D++){O[0]=u[0]-65517;for(let Z=1;Z<15;Z++)O[Z]=u[Z]-65535-(O[Z-1]>>16&1),O[Z-1]&=65535;O[15]=u[15]-32767-(O[14]>>16&1);const V=O[15]>>16&1;O[14]&=65535,S(u,O,1-V)}for(let D=0;D<16;D++)N[2*D]=u[D]&255,N[2*D+1]=u[D]>>8}function T(N,R){let O=0;for(let u=0;u<32;u++)O|=N[u]^R[u];return(1&O-1>>>8)-1}function v(N,R){const O=new Uint8Array(32),u=new Uint8Array(32);return A(O,N),A(u,R),T(O,u)}function x(N){const R=new Uint8Array(32);return A(R,N),R[0]&1}function g(N,R){for(let O=0;O<16;O++)N[O]=R[2*O]+(R[2*O+1]<<8);N[15]&=32767}function E(N,R,O){for(let u=0;u<16;u++)N[u]=R[u]+O[u]}function p(N,R,O){for(let u=0;u<16;u++)N[u]=R[u]-O[u]}function c(N,R,O){let u,D,V=0,Z=0,we=0,Ie=0,ve=0,Ae=0,Ye=0,We=0,Se=0,_e=0,ye=0,pe=0,fe=0,he=0,ue=0,se=0,ge=0,Ee=0,ae=0,Ce=0,Oe=0,Re=0,Ne=0,Te=0,Qt=0,ar=0,Rr=0,zt=0,si=0,Pn=0,Ns=0,Je=O[0],He=O[1],Qe=O[2],Xe=O[3],et=O[4],Ve=O[5],lt=O[6],ut=O[7],ht=O[8],dt=O[9],ft=O[10],nt=O[11],tt=O[12],je=O[13],pt=O[14],gt=O[15];u=R[0],V+=u*Je,Z+=u*He,we+=u*Qe,Ie+=u*Xe,ve+=u*et,Ae+=u*Ve,Ye+=u*lt,We+=u*ut,Se+=u*ht,_e+=u*dt,ye+=u*ft,pe+=u*nt,fe+=u*tt,he+=u*je,ue+=u*pt,se+=u*gt,u=R[1],Z+=u*Je,we+=u*He,Ie+=u*Qe,ve+=u*Xe,Ae+=u*et,Ye+=u*Ve,We+=u*lt,Se+=u*ut,_e+=u*ht,ye+=u*dt,pe+=u*ft,fe+=u*nt,he+=u*tt,ue+=u*je,se+=u*pt,ge+=u*gt,u=R[2],we+=u*Je,Ie+=u*He,ve+=u*Qe,Ae+=u*Xe,Ye+=u*et,We+=u*Ve,Se+=u*lt,_e+=u*ut,ye+=u*ht,pe+=u*dt,fe+=u*ft,he+=u*nt,ue+=u*tt,se+=u*je,ge+=u*pt,Ee+=u*gt,u=R[3],Ie+=u*Je,ve+=u*He,Ae+=u*Qe,Ye+=u*Xe,We+=u*et,Se+=u*Ve,_e+=u*lt,ye+=u*ut,pe+=u*ht,fe+=u*dt,he+=u*ft,ue+=u*nt,se+=u*tt,ge+=u*je,Ee+=u*pt,ae+=u*gt,u=R[4],ve+=u*Je,Ae+=u*He,Ye+=u*Qe,We+=u*Xe,Se+=u*et,_e+=u*Ve,ye+=u*lt,pe+=u*ut,fe+=u*ht,he+=u*dt,ue+=u*ft,se+=u*nt,ge+=u*tt,Ee+=u*je,ae+=u*pt,Ce+=u*gt,u=R[5],Ae+=u*Je,Ye+=u*He,We+=u*Qe,Se+=u*Xe,_e+=u*et,ye+=u*Ve,pe+=u*lt,fe+=u*ut,he+=u*ht,ue+=u*dt,se+=u*ft,ge+=u*nt,Ee+=u*tt,ae+=u*je,Ce+=u*pt,Oe+=u*gt,u=R[6],Ye+=u*Je,We+=u*He,Se+=u*Qe,_e+=u*Xe,ye+=u*et,pe+=u*Ve,fe+=u*lt,he+=u*ut,ue+=u*ht,se+=u*dt,ge+=u*ft,Ee+=u*nt,ae+=u*tt,Ce+=u*je,Oe+=u*pt,Re+=u*gt,u=R[7],We+=u*Je,Se+=u*He,_e+=u*Qe,ye+=u*Xe,pe+=u*et,fe+=u*Ve,he+=u*lt,ue+=u*ut,se+=u*ht,ge+=u*dt,Ee+=u*ft,ae+=u*nt,Ce+=u*tt,Oe+=u*je,Re+=u*pt,Ne+=u*gt,u=R[8],Se+=u*Je,_e+=u*He,ye+=u*Qe,pe+=u*Xe,fe+=u*et,he+=u*Ve,ue+=u*lt,se+=u*ut,ge+=u*ht,Ee+=u*dt,ae+=u*ft,Ce+=u*nt,Oe+=u*tt,Re+=u*je,Ne+=u*pt,Te+=u*gt,u=R[9],_e+=u*Je,ye+=u*He,pe+=u*Qe,fe+=u*Xe,he+=u*et,ue+=u*Ve,se+=u*lt,ge+=u*ut,Ee+=u*ht,ae+=u*dt,Ce+=u*ft,Oe+=u*nt,Re+=u*tt,Ne+=u*je,Te+=u*pt,Qt+=u*gt,u=R[10],ye+=u*Je,pe+=u*He,fe+=u*Qe,he+=u*Xe,ue+=u*et,se+=u*Ve,ge+=u*lt,Ee+=u*ut,ae+=u*ht,Ce+=u*dt,Oe+=u*ft,Re+=u*nt,Ne+=u*tt,Te+=u*je,Qt+=u*pt,ar+=u*gt,u=R[11],pe+=u*Je,fe+=u*He,he+=u*Qe,ue+=u*Xe,se+=u*et,ge+=u*Ve,Ee+=u*lt,ae+=u*ut,Ce+=u*ht,Oe+=u*dt,Re+=u*ft,Ne+=u*nt,Te+=u*tt,Qt+=u*je,ar+=u*pt,Rr+=u*gt,u=R[12],fe+=u*Je,he+=u*He,ue+=u*Qe,se+=u*Xe,ge+=u*et,Ee+=u*Ve,ae+=u*lt,Ce+=u*ut,Oe+=u*ht,Re+=u*dt,Ne+=u*ft,Te+=u*nt,Qt+=u*tt,ar+=u*je,Rr+=u*pt,zt+=u*gt,u=R[13],he+=u*Je,ue+=u*He,se+=u*Qe,ge+=u*Xe,Ee+=u*et,ae+=u*Ve,Ce+=u*lt,Oe+=u*ut,Re+=u*ht,Ne+=u*dt,Te+=u*ft,Qt+=u*nt,ar+=u*tt,Rr+=u*je,zt+=u*pt,si+=u*gt,u=R[14],ue+=u*Je,se+=u*He,ge+=u*Qe,Ee+=u*Xe,ae+=u*et,Ce+=u*Ve,Oe+=u*lt,Re+=u*ut,Ne+=u*ht,Te+=u*dt,Qt+=u*ft,ar+=u*nt,Rr+=u*tt,zt+=u*je,si+=u*pt,Pn+=u*gt,u=R[15],se+=u*Je,ge+=u*He,Ee+=u*Qe,ae+=u*Xe,Ce+=u*et,Oe+=u*Ve,Re+=u*lt,Ne+=u*ut,Te+=u*ht,Qt+=u*dt,ar+=u*ft,Rr+=u*nt,zt+=u*tt,si+=u*je,Pn+=u*pt,Ns+=u*gt,V+=38*ge,Z+=38*Ee,we+=38*ae,Ie+=38*Ce,ve+=38*Oe,Ae+=38*Re,Ye+=38*Ne,We+=38*Te,Se+=38*Qt,_e+=38*ar,ye+=38*Rr,pe+=38*zt,fe+=38*si,he+=38*Pn,ue+=38*Ns,D=1,u=V+D+65535,D=Math.floor(u/65536),V=u-D*65536,u=Z+D+65535,D=Math.floor(u/65536),Z=u-D*65536,u=we+D+65535,D=Math.floor(u/65536),we=u-D*65536,u=Ie+D+65535,D=Math.floor(u/65536),Ie=u-D*65536,u=ve+D+65535,D=Math.floor(u/65536),ve=u-D*65536,u=Ae+D+65535,D=Math.floor(u/65536),Ae=u-D*65536,u=Ye+D+65535,D=Math.floor(u/65536),Ye=u-D*65536,u=We+D+65535,D=Math.floor(u/65536),We=u-D*65536,u=Se+D+65535,D=Math.floor(u/65536),Se=u-D*65536,u=_e+D+65535,D=Math.floor(u/65536),_e=u-D*65536,u=ye+D+65535,D=Math.floor(u/65536),ye=u-D*65536,u=pe+D+65535,D=Math.floor(u/65536),pe=u-D*65536,u=fe+D+65535,D=Math.floor(u/65536),fe=u-D*65536,u=he+D+65535,D=Math.floor(u/65536),he=u-D*65536,u=ue+D+65535,D=Math.floor(u/65536),ue=u-D*65536,u=se+D+65535,D=Math.floor(u/65536),se=u-D*65536,V+=D-1+37*(D-1),D=1,u=V+D+65535,D=Math.floor(u/65536),V=u-D*65536,u=Z+D+65535,D=Math.floor(u/65536),Z=u-D*65536,u=we+D+65535,D=Math.floor(u/65536),we=u-D*65536,u=Ie+D+65535,D=Math.floor(u/65536),Ie=u-D*65536,u=ve+D+65535,D=Math.floor(u/65536),ve=u-D*65536,u=Ae+D+65535,D=Math.floor(u/65536),Ae=u-D*65536,u=Ye+D+65535,D=Math.floor(u/65536),Ye=u-D*65536,u=We+D+65535,D=Math.floor(u/65536),We=u-D*65536,u=Se+D+65535,D=Math.floor(u/65536),Se=u-D*65536,u=_e+D+65535,D=Math.floor(u/65536),_e=u-D*65536,u=ye+D+65535,D=Math.floor(u/65536),ye=u-D*65536,u=pe+D+65535,D=Math.floor(u/65536),pe=u-D*65536,u=fe+D+65535,D=Math.floor(u/65536),fe=u-D*65536,u=he+D+65535,D=Math.floor(u/65536),he=u-D*65536,u=ue+D+65535,D=Math.floor(u/65536),ue=u-D*65536,u=se+D+65535,D=Math.floor(u/65536),se=u-D*65536,V+=D-1+37*(D-1),N[0]=V,N[1]=Z,N[2]=we,N[3]=Ie,N[4]=ve,N[5]=Ae,N[6]=Ye,N[7]=We,N[8]=Se,N[9]=_e,N[10]=ye,N[11]=pe,N[12]=fe,N[13]=he,N[14]=ue,N[15]=se}function f(N,R){c(N,R,R)}function P(N,R){const O=n();let u;for(u=0;u<16;u++)O[u]=R[u];for(u=253;u>=0;u--)f(O,O),u!==2&&u!==4&&c(O,O,R);for(u=0;u<16;u++)N[u]=O[u]}function I(N,R){const O=n();let u;for(u=0;u<16;u++)O[u]=R[u];for(u=250;u>=0;u--)f(O,O),u!==1&&c(O,O,R);for(u=0;u<16;u++)N[u]=O[u]}function M(N,R){const O=n(),u=n(),D=n(),V=n(),Z=n(),we=n(),Ie=n(),ve=n(),Ae=n();p(O,N[1],N[0]),p(Ae,R[1],R[0]),c(O,O,Ae),E(u,N[0],N[1]),E(Ae,R[0],R[1]),c(u,u,Ae),c(D,N[3],R[3]),c(D,D,h),c(V,N[2],R[2]),E(V,V,V),p(Z,u,O),p(we,V,D),E(Ie,V,D),E(ve,u,O),c(N[0],Z,we),c(N[1],ve,Ie),c(N[2],Ie,we),c(N[3],Z,ve)}function B(N,R,O){for(let u=0;u<4;u++)S(N[u],R[u],O)}function H(N,R){const O=n(),u=n(),D=n();P(D,R[2]),c(O,R[0],D),c(u,R[1],D),A(N,u),N[31]^=x(O)<<7}function C(N,R,O){w(N[0],o),w(N[1],a),w(N[2],a),w(N[3],o);for(let u=255;u>=0;--u){const D=O[u/8|0]>>(u&7)&1;B(N,R,D),M(R,N),M(N,N),B(N,R,D)}}function L(N,R){const O=[n(),n(),n(),n()];w(O[0],d),w(O[1],b),w(O[2],a),c(O[3],d,b),C(N,O,R)}function K(N){if(N.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const R=(0,r.hash)(N);R[0]&=248,R[31]&=127,R[31]|=64;const O=new Uint8Array(32),u=[n(),n(),n(),n()];L(u,R),H(O,u);const D=new Uint8Array(64);return D.set(N),D.set(O,32),{publicKey:O,secretKey:D}}t.generateKeyPairFromSeed=K;function z(N){const R=(0,e.randomBytes)(32,N),O=K(R);return(0,i.wipe)(R),O}t.generateKeyPair=z;function F(N){if(N.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(N.subarray(32))}t.extractPublicKeyFromSecretKey=F;const k=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function U(N,R){let O,u,D,V;for(u=63;u>=32;--u){for(O=0,D=u-32,V=u-12;D<V;++D)R[D]+=O-16*R[u]*k[D-(u-32)],O=Math.floor((R[D]+128)/256),R[D]-=O*256;R[D]+=O,R[u]=0}for(O=0,D=0;D<32;D++)R[D]+=O-(R[31]>>4)*k[D],O=R[D]>>8,R[D]&=255;for(D=0;D<32;D++)R[D]-=O*k[D];for(u=0;u<32;u++)R[u+1]+=R[u]>>8,N[u]=R[u]&255}function q(N){const R=new Float64Array(64);for(let O=0;O<64;O++)R[O]=N[O];for(let O=0;O<64;O++)N[O]=0;U(N,R)}function ne(N,R){const O=new Float64Array(64),u=[n(),n(),n(),n()],D=(0,r.hash)(N.subarray(0,32));D[0]&=248,D[31]&=127,D[31]|=64;const V=new Uint8Array(64);V.set(D.subarray(32),32);const Z=new r.SHA512;Z.update(V.subarray(32)),Z.update(R);const we=Z.digest();Z.clean(),q(we),L(u,we),H(V,u),Z.reset(),Z.update(V.subarray(0,32)),Z.update(N.subarray(32)),Z.update(R);const Ie=Z.digest();q(Ie);for(let ve=0;ve<32;ve++)O[ve]=we[ve];for(let ve=0;ve<32;ve++)for(let Ae=0;Ae<32;Ae++)O[ve+Ae]+=Ie[ve]*D[Ae];return U(V.subarray(32),O),V}t.sign=ne;function W(N,R){const O=n(),u=n(),D=n(),V=n(),Z=n(),we=n(),Ie=n();return w(N[2],a),g(N[1],R),f(D,N[1]),c(V,D,l),p(D,D,N[2]),E(V,N[2],V),f(Z,V),f(we,Z),c(Ie,we,Z),c(O,Ie,D),c(O,O,V),I(O,O),c(O,O,D),c(O,O,V),c(O,O,V),c(N[0],O,V),f(u,N[0]),c(u,u,V),v(u,D)&&c(N[0],N[0],m),f(u,N[0]),c(u,u,V),v(u,D)?-1:(x(N[0])===R[31]>>7&&p(N[0],o,N[0]),c(N[3],N[0],N[1]),0)}function te(N,R,O){const u=new Uint8Array(32),D=[n(),n(),n(),n()],V=[n(),n(),n(),n()];if(O.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(W(V,N))return!1;const Z=new r.SHA512;Z.update(O.subarray(0,32)),Z.update(N),Z.update(R);const we=Z.digest();return q(we),C(D,V,we),L(V,O.subarray(32)),M(D,V),H(u,D),!T(O,u)}t.verify=te;function J(N){let R=[n(),n(),n(),n()];if(W(R,N))throw new Error("Ed25519: invalid public key");let O=n(),u=n(),D=R[1];E(O,a,D),p(u,a,D),P(u,u),c(O,O,u);let V=new Uint8Array(32);return A(V,O),V}t.convertPublicKeyToX25519=J;function re(N){const R=(0,r.hash)(N.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const O=new Uint8Array(R.subarray(0,32));return(0,i.wipe)(R),O}t.convertSecretKeyToX25519=re}(ao);const W0="EdDSA",H0="JWT",dl=".",fl="base64url",V0="utf8",K0="utf8",G0=":",Y0="did",Z0="key",pl="base58btc",J0="z",Q0="K36",X0=32;function fo(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function gl(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?fo(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function po(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));const r=gl(e);let i=0;for(const n of t)r.set(n,i),i+=n.length;return fo(r)}function e1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,l=t.charAt(0),h=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function b(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var S=0,A=0,T=0,v=_.length;T!==v&&_[T]===0;)T++,S++;for(var x=(v-T)*d+1>>>0,g=new Uint8Array(x);T!==v;){for(var E=_[T],p=0,c=x-1;(E!==0||p<A)&&c!==-1;c--,p++)E+=256*g[c]>>>0,g[c]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");A=p,T++}for(var f=x-A;f!==x&&g[f]===0;)f++;for(var P=l.repeat(S);f<x;++f)P+=t.charAt(g[f]);return P}function m(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var S=0;if(_[S]!==" "){for(var A=0,T=0;_[S]===l;)A++,S++;for(var v=(_.length-S)*h+1>>>0,x=new Uint8Array(v);_[S];){var g=r[_.charCodeAt(S)];if(g===255)return;for(var E=0,p=v-1;(g!==0||E<T)&&p!==-1;p--,E++)g+=a*x[p]>>>0,x[p]=g%256>>>0,g=g/256>>>0;if(g!==0)throw new Error("Non-zero carry");T=E,S++}if(_[S]!==" "){for(var c=v-T;c!==v&&x[c]===0;)c++;for(var f=new Uint8Array(A+(v-c)),P=A;c!==v;)f[P++]=x[c++];return f}}}function w(_){var S=m(_);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:m,decode:w}}var t1=e1,r1=t1;const i1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},n1=t=>new TextEncoder().encode(t),s1=t=>new TextDecoder().decode(t);class o1{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class a1{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ml(this,e)}}class c1{constructor(e){this.decoders=e}or(e){return ml(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ml=(t,e)=>new c1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class l1{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new o1(e,r,i),this.decoder=new a1(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Vn=({name:t,prefix:e,encode:r,decode:i})=>new l1(t,e,r,i),Gi=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=r1(r,e);return Vn({prefix:t,name:e,encode:i,decode:s=>i1(n(s))})},u1=(t,e,r,i)=>{const n={};for(let d=0;d<e.length;++d)n[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,l=0,h=0;for(let d=0;d<s;++d){const b=n[t[d]];if(b===void 0)throw new SyntaxError(`Non-${i} character`);l=l<<r|b,a+=r,a>=8&&(a-=8,o[h++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},h1=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},wt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>Vn({prefix:e,name:t,encode(n){return h1(n,i,r)},decode(n){return u1(n,i,r,t)}}),d1=Vn({prefix:"\0",name:"identity",encode:t=>s1(t),decode:t=>n1(t)}),f1=Object.freeze(Object.defineProperty({__proto__:null,identity:d1},Symbol.toStringTag,{value:"Module"})),p1=wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),g1=Object.freeze(Object.defineProperty({__proto__:null,base2:p1},Symbol.toStringTag,{value:"Module"})),m1=wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),w1=Object.freeze(Object.defineProperty({__proto__:null,base8:m1},Symbol.toStringTag,{value:"Module"})),y1=Gi({prefix:"9",name:"base10",alphabet:"0123456789"}),b1=Object.freeze(Object.defineProperty({__proto__:null,base10:y1},Symbol.toStringTag,{value:"Module"})),v1=wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_1=wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),E1=Object.freeze(Object.defineProperty({__proto__:null,base16:v1,base16upper:_1},Symbol.toStringTag,{value:"Module"})),x1=wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),S1=wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),D1=wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),I1=wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),C1=wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),O1=wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$1=wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),A1=wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),T1=wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),P1=Object.freeze(Object.defineProperty({__proto__:null,base32:x1,base32hex:C1,base32hexpad:$1,base32hexpadupper:A1,base32hexupper:O1,base32pad:D1,base32padupper:I1,base32upper:S1,base32z:T1},Symbol.toStringTag,{value:"Module"})),R1=Gi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),N1=Gi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),L1=Object.freeze(Object.defineProperty({__proto__:null,base36:R1,base36upper:N1},Symbol.toStringTag,{value:"Module"})),M1=Gi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),U1=Gi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),F1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:M1,base58flickr:U1},Symbol.toStringTag,{value:"Module"})),j1=wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),k1=wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),B1=wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),z1=wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),q1=Object.freeze(Object.defineProperty({__proto__:null,base64:j1,base64pad:k1,base64url:B1,base64urlpad:z1},Symbol.toStringTag,{value:"Module"})),wl=Array.from(""),W1=wl.reduce((t,e,r)=>(t[r]=e,t),[]),H1=wl.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function V1(t){return t.reduce((e,r)=>(e+=W1[r],e),"")}function K1(t){const e=[];for(const r of t){const i=H1[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const G1=Vn({prefix:"",name:"base256emoji",encode:V1,decode:K1}),Y1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:G1},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const yl={...f1,...g1,...w1,...b1,...E1,...P1,...L1,...F1,...q1,...Y1};function bl(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const vl=bl("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),go=bl("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=gl(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),_l={utf8:vl,"utf-8":vl,hex:yl.base16,latin1:go,ascii:go,binary:go,...yl};function Ct(t,e="utf8"){const r=_l[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Rt(t,e="utf8"){const r=_l[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?fo(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Kn(t){return Ct(Rt(oo(t),V0),fl)}function El(t){const e=Rt(Q0,pl),r=J0+Ct(po([e,t]),pl);return[Y0,Z0,r].join(G0)}function Z1(t){return Ct(t,fl)}function J1(t){return Rt([Kn(t.header),Kn(t.payload)].join(dl),K0)}function Q1(t){return[Kn(t.header),Kn(t.payload),Z1(t.signature)].join(dl)}function xl(t=pi.randomBytes(X0)){return ao.generateKeyPairFromSeed(t)}async function X1(t,e,r,i,n=X.fromMiliseconds(Date.now())){const s={alg:W0,typ:H0},o=El(i.publicKey),a=n+r,l={iss:o,sub:t,aud:e,iat:n,exp:a},h=J1({header:s,payload:l}),d=ao.sign(i.secretKey,h);return Q1({header:s,payload:l,signature:d})}var mo={},Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});var _t=oe,wo=jt,ep=20;function tp(t,e,r){for(var i=1634760805,n=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],b=r[19]<<24|r[18]<<16|r[17]<<8|r[16],m=r[23]<<24|r[22]<<16|r[21]<<8|r[20],w=r[27]<<24|r[26]<<16|r[25]<<8|r[24],_=r[31]<<24|r[30]<<16|r[29]<<8|r[28],S=e[3]<<24|e[2]<<16|e[1]<<8|e[0],A=e[7]<<24|e[6]<<16|e[5]<<8|e[4],T=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],x=i,g=n,E=s,p=o,c=a,f=l,P=h,I=d,M=b,B=m,H=w,C=_,L=S,K=A,z=T,F=v,k=0;k<ep;k+=2)x=x+c|0,L^=x,L=L>>>32-16|L<<16,M=M+L|0,c^=M,c=c>>>32-12|c<<12,g=g+f|0,K^=g,K=K>>>32-16|K<<16,B=B+K|0,f^=B,f=f>>>32-12|f<<12,E=E+P|0,z^=E,z=z>>>32-16|z<<16,H=H+z|0,P^=H,P=P>>>32-12|P<<12,p=p+I|0,F^=p,F=F>>>32-16|F<<16,C=C+F|0,I^=C,I=I>>>32-12|I<<12,E=E+P|0,z^=E,z=z>>>32-8|z<<8,H=H+z|0,P^=H,P=P>>>32-7|P<<7,p=p+I|0,F^=p,F=F>>>32-8|F<<8,C=C+F|0,I^=C,I=I>>>32-7|I<<7,g=g+f|0,K^=g,K=K>>>32-8|K<<8,B=B+K|0,f^=B,f=f>>>32-7|f<<7,x=x+c|0,L^=x,L=L>>>32-8|L<<8,M=M+L|0,c^=M,c=c>>>32-7|c<<7,x=x+f|0,F^=x,F=F>>>32-16|F<<16,H=H+F|0,f^=H,f=f>>>32-12|f<<12,g=g+P|0,L^=g,L=L>>>32-16|L<<16,C=C+L|0,P^=C,P=P>>>32-12|P<<12,E=E+I|0,K^=E,K=K>>>32-16|K<<16,M=M+K|0,I^=M,I=I>>>32-12|I<<12,p=p+c|0,z^=p,z=z>>>32-16|z<<16,B=B+z|0,c^=B,c=c>>>32-12|c<<12,E=E+I|0,K^=E,K=K>>>32-8|K<<8,M=M+K|0,I^=M,I=I>>>32-7|I<<7,p=p+c|0,z^=p,z=z>>>32-8|z<<8,B=B+z|0,c^=B,c=c>>>32-7|c<<7,g=g+P|0,L^=g,L=L>>>32-8|L<<8,C=C+L|0,P^=C,P=P>>>32-7|P<<7,x=x+f|0,F^=x,F=F>>>32-8|F<<8,H=H+F|0,f^=H,f=f>>>32-7|f<<7;_t.writeUint32LE(x+i|0,t,0),_t.writeUint32LE(g+n|0,t,4),_t.writeUint32LE(E+s|0,t,8),_t.writeUint32LE(p+o|0,t,12),_t.writeUint32LE(c+a|0,t,16),_t.writeUint32LE(f+l|0,t,20),_t.writeUint32LE(P+h|0,t,24),_t.writeUint32LE(I+d|0,t,28),_t.writeUint32LE(M+b|0,t,32),_t.writeUint32LE(B+m|0,t,36),_t.writeUint32LE(H+w|0,t,40),_t.writeUint32LE(C+_|0,t,44),_t.writeUint32LE(L+S|0,t,48),_t.writeUint32LE(K+A|0,t,52),_t.writeUint32LE(z+T|0,t,56),_t.writeUint32LE(F+v|0,t,60)}function Sl(t,e,r,i,n){if(n===void 0&&(n=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(n===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=n}for(var a=new Uint8Array(64),l=0;l<r.length;l+=64){tp(a,s,t);for(var h=l;h<l+64&&h<r.length;h++)i[h]=r[h]^a[h-l];ip(s,0,o)}return wo.wipe(a),n===0&&wo.wipe(s),i}Gn.streamXOR=Sl;function rp(t,e,r,i){return i===void 0&&(i=0),wo.wipe(r),Sl(t,e,r,r,i)}Gn.stream=rp;function ip(t,e,r){for(var i=1;r--;)i=i+(t[e]&255)|0,t[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}var Dl={},Er={};Object.defineProperty(Er,"__esModule",{value:!0});function np(t,e,r){return~(t-1)&e|t-1&r}Er.select=np;function sp(t,e){return(t|0)-(e|0)-1>>>31&1}Er.lessOrEqual=sp;function Il(t,e){if(t.length!==e.length)return 0;for(var r=0,i=0;i<t.length;i++)r|=t[i]^e[i];return 1&r-1>>>8}Er.compare=Il;function op(t,e){return t.length===0||e.length===0?!1:Il(t,e)!==0}Er.equal=op,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Er,r=jt;t.DIGEST_LENGTH=16;var i=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var l=a[0]|a[1]<<8;this._r[0]=l&8191;var h=a[2]|a[3]<<8;this._r[1]=(l>>>13|h<<3)&8191;var d=a[4]|a[5]<<8;this._r[2]=(h>>>10|d<<6)&7939;var b=a[6]|a[7]<<8;this._r[3]=(d>>>7|b<<9)&8191;var m=a[8]|a[9]<<8;this._r[4]=(b>>>4|m<<12)&255,this._r[5]=m>>>1&8190;var w=a[10]|a[11]<<8;this._r[6]=(m>>>14|w<<2)&8191;var _=a[12]|a[13]<<8;this._r[7]=(w>>>11|_<<5)&8065;var S=a[14]|a[15]<<8;this._r[8]=(_>>>8|S<<8)&8191,this._r[9]=S>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,l,h){for(var d=this._fin?0:2048,b=this._h[0],m=this._h[1],w=this._h[2],_=this._h[3],S=this._h[4],A=this._h[5],T=this._h[6],v=this._h[7],x=this._h[8],g=this._h[9],E=this._r[0],p=this._r[1],c=this._r[2],f=this._r[3],P=this._r[4],I=this._r[5],M=this._r[6],B=this._r[7],H=this._r[8],C=this._r[9];h>=16;){var L=a[l+0]|a[l+1]<<8;b+=L&8191;var K=a[l+2]|a[l+3]<<8;m+=(L>>>13|K<<3)&8191;var z=a[l+4]|a[l+5]<<8;w+=(K>>>10|z<<6)&8191;var F=a[l+6]|a[l+7]<<8;_+=(z>>>7|F<<9)&8191;var k=a[l+8]|a[l+9]<<8;S+=(F>>>4|k<<12)&8191,A+=k>>>1&8191;var U=a[l+10]|a[l+11]<<8;T+=(k>>>14|U<<2)&8191;var q=a[l+12]|a[l+13]<<8;v+=(U>>>11|q<<5)&8191;var ne=a[l+14]|a[l+15]<<8;x+=(q>>>8|ne<<8)&8191,g+=ne>>>5|d;var W=0,te=W;te+=b*E,te+=m*(5*C),te+=w*(5*H),te+=_*(5*B),te+=S*(5*M),W=te>>>13,te&=8191,te+=A*(5*I),te+=T*(5*P),te+=v*(5*f),te+=x*(5*c),te+=g*(5*p),W+=te>>>13,te&=8191;var J=W;J+=b*p,J+=m*E,J+=w*(5*C),J+=_*(5*H),J+=S*(5*B),W=J>>>13,J&=8191,J+=A*(5*M),J+=T*(5*I),J+=v*(5*P),J+=x*(5*f),J+=g*(5*c),W+=J>>>13,J&=8191;var re=W;re+=b*c,re+=m*p,re+=w*E,re+=_*(5*C),re+=S*(5*H),W=re>>>13,re&=8191,re+=A*(5*B),re+=T*(5*M),re+=v*(5*I),re+=x*(5*P),re+=g*(5*f),W+=re>>>13,re&=8191;var N=W;N+=b*f,N+=m*c,N+=w*p,N+=_*E,N+=S*(5*C),W=N>>>13,N&=8191,N+=A*(5*H),N+=T*(5*B),N+=v*(5*M),N+=x*(5*I),N+=g*(5*P),W+=N>>>13,N&=8191;var R=W;R+=b*P,R+=m*f,R+=w*c,R+=_*p,R+=S*E,W=R>>>13,R&=8191,R+=A*(5*C),R+=T*(5*H),R+=v*(5*B),R+=x*(5*M),R+=g*(5*I),W+=R>>>13,R&=8191;var O=W;O+=b*I,O+=m*P,O+=w*f,O+=_*c,O+=S*p,W=O>>>13,O&=8191,O+=A*E,O+=T*(5*C),O+=v*(5*H),O+=x*(5*B),O+=g*(5*M),W+=O>>>13,O&=8191;var u=W;u+=b*M,u+=m*I,u+=w*P,u+=_*f,u+=S*c,W=u>>>13,u&=8191,u+=A*p,u+=T*E,u+=v*(5*C),u+=x*(5*H),u+=g*(5*B),W+=u>>>13,u&=8191;var D=W;D+=b*B,D+=m*M,D+=w*I,D+=_*P,D+=S*f,W=D>>>13,D&=8191,D+=A*c,D+=T*p,D+=v*E,D+=x*(5*C),D+=g*(5*H),W+=D>>>13,D&=8191;var V=W;V+=b*H,V+=m*B,V+=w*M,V+=_*I,V+=S*P,W=V>>>13,V&=8191,V+=A*f,V+=T*c,V+=v*p,V+=x*E,V+=g*(5*C),W+=V>>>13,V&=8191;var Z=W;Z+=b*C,Z+=m*H,Z+=w*B,Z+=_*M,Z+=S*I,W=Z>>>13,Z&=8191,Z+=A*P,Z+=T*f,Z+=v*c,Z+=x*p,Z+=g*E,W+=Z>>>13,Z&=8191,W=(W<<2)+W|0,W=W+te|0,te=W&8191,W=W>>>13,J+=W,b=te,m=J,w=re,_=N,S=R,A=O,T=u,v=D,x=V,g=Z,l+=16,h-=16}this._h[0]=b,this._h[1]=m,this._h[2]=w,this._h[3]=_,this._h[4]=S,this._h[5]=A,this._h[6]=T,this._h[7]=v,this._h[8]=x,this._h[9]=g},o.prototype.finish=function(a,l){l===void 0&&(l=0);var h=new Uint16Array(10),d,b,m,w;if(this._leftover){for(w=this._leftover,this._buffer[w++]=1;w<16;w++)this._buffer[w]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,w=2;w<10;w++)this._h[w]+=d,d=this._h[w]>>>13,this._h[w]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,h[0]=this._h[0]+5,d=h[0]>>>13,h[0]&=8191,w=1;w<10;w++)h[w]=this._h[w]+d,d=h[w]>>>13,h[w]&=8191;for(h[9]-=8192,b=(d^1)-1,w=0;w<10;w++)h[w]&=b;for(b=~b,w=0;w<10;w++)this._h[w]=this._h[w]&b|h[w];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,m=this._h[0]+this._pad[0],this._h[0]=m&65535,w=1;w<8;w++)m=(this._h[w]+this._pad[w]|0)+(m>>>16)|0,this._h[w]=m&65535;return a[l+0]=this._h[0]>>>0,a[l+1]=this._h[0]>>>8,a[l+2]=this._h[1]>>>0,a[l+3]=this._h[1]>>>8,a[l+4]=this._h[2]>>>0,a[l+5]=this._h[2]>>>8,a[l+6]=this._h[3]>>>0,a[l+7]=this._h[3]>>>8,a[l+8]=this._h[4]>>>0,a[l+9]=this._h[4]>>>8,a[l+10]=this._h[5]>>>0,a[l+11]=this._h[5]>>>8,a[l+12]=this._h[6]>>>0,a[l+13]=this._h[6]>>>8,a[l+14]=this._h[7]>>>0,a[l+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var l=0,h=a.length,d;if(this._leftover){d=16-this._leftover,d>h&&(d=h);for(var b=0;b<d;b++)this._buffer[this._leftover+b]=a[l+b];if(h-=d,l+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(h>=16&&(d=h-h%16,this._blocks(a,l,d),l+=d,h-=d),h){for(var b=0;b<h;b++)this._buffer[this._leftover+b]=a[l+b];this._leftover+=h}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=i;function n(o,a){var l=new i(o);l.update(a);var h=l.digest();return l.clean(),h}t.oneTimeAuth=n;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Dl),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Gn,r=Dl,i=jt,n=oe,s=Er;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function l(h){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,h.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(h)}return l.prototype.seal=function(h,d,b,m){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var w=new Uint8Array(16);w.set(h,w.length-h.length);var _=new Uint8Array(32);e.stream(this._key,w,_,4);var S=d.length+this.tagLength,A;if(m){if(m.length!==S)throw new Error("ChaCha20Poly1305: incorrect destination length");A=m}else A=new Uint8Array(S);return e.streamXOR(this._key,w,d,A,4),this._authenticate(A.subarray(A.length-this.tagLength,A.length),_,A.subarray(0,A.length-this.tagLength),b),i.wipe(w),A},l.prototype.open=function(h,d,b,m){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var w=new Uint8Array(16);w.set(h,w.length-h.length);var _=new Uint8Array(32);e.stream(this._key,w,_,4);var S=new Uint8Array(this.tagLength);if(this._authenticate(S,_,d.subarray(0,d.length-this.tagLength),b),!s.equal(S,d.subarray(d.length-this.tagLength,d.length)))return null;var A=d.length-this.tagLength,T;if(m){if(m.length!==A)throw new Error("ChaCha20Poly1305: incorrect destination length");T=m}else T=new Uint8Array(A);return e.streamXOR(this._key,w,d.subarray(0,d.length-this.tagLength),T,4),i.wipe(w),T},l.prototype.clean=function(){return i.wipe(this._key),this},l.prototype._authenticate=function(h,d,b,m){var w=new r.Poly1305(d);m&&(w.update(m),m.length%16>0&&w.update(o.subarray(m.length%16))),w.update(b),b.length%16>0&&w.update(o.subarray(b.length%16));var _=new Uint8Array(8);m&&n.writeUint64LE(m.length,_),w.update(_),n.writeUint64LE(b.length,_),w.update(_);for(var S=w.digest(),A=0;A<S.length;A++)h[A]=S[A];w.clean(),i.wipe(S),i.wipe(_)},l}();t.ChaCha20Poly1305=a}(mo);var Cl={},Yi={},yo={};Object.defineProperty(yo,"__esModule",{value:!0});function ap(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}yo.isSerializableHash=ap,Object.defineProperty(Yi,"__esModule",{value:!0});var rr=yo,cp=Er,lp=jt,Ol=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var n=0;n<i.length;n++)i[n]^=54;this._inner.update(i);for(var n=0;n<i.length;n++)i[n]^=106;this._outer.update(i),rr.isSerializableHash(this._inner)&&rr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),lp.wipe(i)}return t.prototype.reset=function(){if(!rr.isSerializableHash(this._inner)||!rr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){rr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),rr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!rr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!rr.isSerializableHash(this._inner)||!rr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!rr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();Yi.HMAC=Ol;function up(t,e,r){var i=new Ol(t,e);i.update(r);var n=i.digest();return i.clean(),n}Yi.hmac=up,Yi.equal=cp.equal,Object.defineProperty(Cl,"__esModule",{value:!0});var $l=Yi,Al=jt,hp=function(){function t(e,r,i,n){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=n;var s=$l.hmac(this._hash,i,r);this._hmac=new $l.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Al.wipe(this._buffer),Al.wipe(this._counter),this._bufpos=0},t}(),dp=Cl.HKDF=hp,Yn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=oe,r=jt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var i=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&h>0;)this._buffer[this._bufferLength++]=l[d++],h--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(d=s(this._temp,this._state,l,d,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[d++],h--;return this},a.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,d=this._bufferLength,b=h/536870912|0,m=h<<3,w=h%64<56?64:128;this._buffer[d]=128;for(var _=d+1;_<w-8;_++)this._buffer[_]=0;e.writeUint32BE(b,this._buffer,w-8),e.writeUint32BE(m,this._buffer,w-4),s(this._temp,this._state,this._buffer,0,w),this._finished=!0}for(var _=0;_<this.digestLength/4;_++)e.writeUint32BE(this._state[_],l,_*4);return this},a.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(l){return this._state.set(l.state),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(l){r.wipe(l.state),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},a}();t.SHA256=i;var n=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,l,h,d,b){for(;b>=64;){for(var m=l[0],w=l[1],_=l[2],S=l[3],A=l[4],T=l[5],v=l[6],x=l[7],g=0;g<16;g++){var E=d+g*4;a[g]=e.readUint32BE(h,E)}for(var g=16;g<64;g++){var p=a[g-2],c=(p>>>17|p<<32-17)^(p>>>19|p<<32-19)^p>>>10;p=a[g-15];var f=(p>>>7|p<<32-7)^(p>>>18|p<<32-18)^p>>>3;a[g]=(c+a[g-7]|0)+(f+a[g-16]|0)}for(var g=0;g<64;g++){var c=(((A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&T^~A&v)|0)+(x+(n[g]+a[g]|0)|0)|0,f=((m>>>2|m<<32-2)^(m>>>13|m<<32-13)^(m>>>22|m<<32-22))+(m&w^m&_^w&_)|0;x=v,v=T,T=A,A=S+c|0,S=_,_=w,w=m,m=c+f|0}l[0]+=m,l[1]+=w,l[2]+=_,l[3]+=S,l[4]+=A,l[5]+=T,l[6]+=v,l[7]+=x,d+=64,b-=64}return d}function o(a){var l=new i;l.update(a);var h=l.digest();return l.clean(),h}t.hash=o})(Yn);var bo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=pi,r=jt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function i(g){const E=new Float64Array(16);if(g)for(let p=0;p<g.length;p++)E[p]=g[p];return E}const n=new Uint8Array(32);n[0]=9;const s=i([56129,1]);function o(g){let E=1;for(let p=0;p<16;p++){let c=g[p]+E+65535;E=Math.floor(c/65536),g[p]=c-E*65536}g[0]+=E-1+37*(E-1)}function a(g,E,p){const c=~(p-1);for(let f=0;f<16;f++){const P=c&(g[f]^E[f]);g[f]^=P,E[f]^=P}}function l(g,E){const p=i(),c=i();for(let f=0;f<16;f++)c[f]=E[f];o(c),o(c),o(c);for(let f=0;f<2;f++){p[0]=c[0]-65517;for(let I=1;I<15;I++)p[I]=c[I]-65535-(p[I-1]>>16&1),p[I-1]&=65535;p[15]=c[15]-32767-(p[14]>>16&1);const P=p[15]>>16&1;p[14]&=65535,a(c,p,1-P)}for(let f=0;f<16;f++)g[2*f]=c[f]&255,g[2*f+1]=c[f]>>8}function h(g,E){for(let p=0;p<16;p++)g[p]=E[2*p]+(E[2*p+1]<<8);g[15]&=32767}function d(g,E,p){for(let c=0;c<16;c++)g[c]=E[c]+p[c]}function b(g,E,p){for(let c=0;c<16;c++)g[c]=E[c]-p[c]}function m(g,E,p){let c,f,P=0,I=0,M=0,B=0,H=0,C=0,L=0,K=0,z=0,F=0,k=0,U=0,q=0,ne=0,W=0,te=0,J=0,re=0,N=0,R=0,O=0,u=0,D=0,V=0,Z=0,we=0,Ie=0,ve=0,Ae=0,Ye=0,We=0,Se=p[0],_e=p[1],ye=p[2],pe=p[3],fe=p[4],he=p[5],ue=p[6],se=p[7],ge=p[8],Ee=p[9],ae=p[10],Ce=p[11],Oe=p[12],Re=p[13],Ne=p[14],Te=p[15];c=E[0],P+=c*Se,I+=c*_e,M+=c*ye,B+=c*pe,H+=c*fe,C+=c*he,L+=c*ue,K+=c*se,z+=c*ge,F+=c*Ee,k+=c*ae,U+=c*Ce,q+=c*Oe,ne+=c*Re,W+=c*Ne,te+=c*Te,c=E[1],I+=c*Se,M+=c*_e,B+=c*ye,H+=c*pe,C+=c*fe,L+=c*he,K+=c*ue,z+=c*se,F+=c*ge,k+=c*Ee,U+=c*ae,q+=c*Ce,ne+=c*Oe,W+=c*Re,te+=c*Ne,J+=c*Te,c=E[2],M+=c*Se,B+=c*_e,H+=c*ye,C+=c*pe,L+=c*fe,K+=c*he,z+=c*ue,F+=c*se,k+=c*ge,U+=c*Ee,q+=c*ae,ne+=c*Ce,W+=c*Oe,te+=c*Re,J+=c*Ne,re+=c*Te,c=E[3],B+=c*Se,H+=c*_e,C+=c*ye,L+=c*pe,K+=c*fe,z+=c*he,F+=c*ue,k+=c*se,U+=c*ge,q+=c*Ee,ne+=c*ae,W+=c*Ce,te+=c*Oe,J+=c*Re,re+=c*Ne,N+=c*Te,c=E[4],H+=c*Se,C+=c*_e,L+=c*ye,K+=c*pe,z+=c*fe,F+=c*he,k+=c*ue,U+=c*se,q+=c*ge,ne+=c*Ee,W+=c*ae,te+=c*Ce,J+=c*Oe,re+=c*Re,N+=c*Ne,R+=c*Te,c=E[5],C+=c*Se,L+=c*_e,K+=c*ye,z+=c*pe,F+=c*fe,k+=c*he,U+=c*ue,q+=c*se,ne+=c*ge,W+=c*Ee,te+=c*ae,J+=c*Ce,re+=c*Oe,N+=c*Re,R+=c*Ne,O+=c*Te,c=E[6],L+=c*Se,K+=c*_e,z+=c*ye,F+=c*pe,k+=c*fe,U+=c*he,q+=c*ue,ne+=c*se,W+=c*ge,te+=c*Ee,J+=c*ae,re+=c*Ce,N+=c*Oe,R+=c*Re,O+=c*Ne,u+=c*Te,c=E[7],K+=c*Se,z+=c*_e,F+=c*ye,k+=c*pe,U+=c*fe,q+=c*he,ne+=c*ue,W+=c*se,te+=c*ge,J+=c*Ee,re+=c*ae,N+=c*Ce,R+=c*Oe,O+=c*Re,u+=c*Ne,D+=c*Te,c=E[8],z+=c*Se,F+=c*_e,k+=c*ye,U+=c*pe,q+=c*fe,ne+=c*he,W+=c*ue,te+=c*se,J+=c*ge,re+=c*Ee,N+=c*ae,R+=c*Ce,O+=c*Oe,u+=c*Re,D+=c*Ne,V+=c*Te,c=E[9],F+=c*Se,k+=c*_e,U+=c*ye,q+=c*pe,ne+=c*fe,W+=c*he,te+=c*ue,J+=c*se,re+=c*ge,N+=c*Ee,R+=c*ae,O+=c*Ce,u+=c*Oe,D+=c*Re,V+=c*Ne,Z+=c*Te,c=E[10],k+=c*Se,U+=c*_e,q+=c*ye,ne+=c*pe,W+=c*fe,te+=c*he,J+=c*ue,re+=c*se,N+=c*ge,R+=c*Ee,O+=c*ae,u+=c*Ce,D+=c*Oe,V+=c*Re,Z+=c*Ne,we+=c*Te,c=E[11],U+=c*Se,q+=c*_e,ne+=c*ye,W+=c*pe,te+=c*fe,J+=c*he,re+=c*ue,N+=c*se,R+=c*ge,O+=c*Ee,u+=c*ae,D+=c*Ce,V+=c*Oe,Z+=c*Re,we+=c*Ne,Ie+=c*Te,c=E[12],q+=c*Se,ne+=c*_e,W+=c*ye,te+=c*pe,J+=c*fe,re+=c*he,N+=c*ue,R+=c*se,O+=c*ge,u+=c*Ee,D+=c*ae,V+=c*Ce,Z+=c*Oe,we+=c*Re,Ie+=c*Ne,ve+=c*Te,c=E[13],ne+=c*Se,W+=c*_e,te+=c*ye,J+=c*pe,re+=c*fe,N+=c*he,R+=c*ue,O+=c*se,u+=c*ge,D+=c*Ee,V+=c*ae,Z+=c*Ce,we+=c*Oe,Ie+=c*Re,ve+=c*Ne,Ae+=c*Te,c=E[14],W+=c*Se,te+=c*_e,J+=c*ye,re+=c*pe,N+=c*fe,R+=c*he,O+=c*ue,u+=c*se,D+=c*ge,V+=c*Ee,Z+=c*ae,we+=c*Ce,Ie+=c*Oe,ve+=c*Re,Ae+=c*Ne,Ye+=c*Te,c=E[15],te+=c*Se,J+=c*_e,re+=c*ye,N+=c*pe,R+=c*fe,O+=c*he,u+=c*ue,D+=c*se,V+=c*ge,Z+=c*Ee,we+=c*ae,Ie+=c*Ce,ve+=c*Oe,Ae+=c*Re,Ye+=c*Ne,We+=c*Te,P+=38*J,I+=38*re,M+=38*N,B+=38*R,H+=38*O,C+=38*u,L+=38*D,K+=38*V,z+=38*Z,F+=38*we,k+=38*Ie,U+=38*ve,q+=38*Ae,ne+=38*Ye,W+=38*We,f=1,c=P+f+65535,f=Math.floor(c/65536),P=c-f*65536,c=I+f+65535,f=Math.floor(c/65536),I=c-f*65536,c=M+f+65535,f=Math.floor(c/65536),M=c-f*65536,c=B+f+65535,f=Math.floor(c/65536),B=c-f*65536,c=H+f+65535,f=Math.floor(c/65536),H=c-f*65536,c=C+f+65535,f=Math.floor(c/65536),C=c-f*65536,c=L+f+65535,f=Math.floor(c/65536),L=c-f*65536,c=K+f+65535,f=Math.floor(c/65536),K=c-f*65536,c=z+f+65535,f=Math.floor(c/65536),z=c-f*65536,c=F+f+65535,f=Math.floor(c/65536),F=c-f*65536,c=k+f+65535,f=Math.floor(c/65536),k=c-f*65536,c=U+f+65535,f=Math.floor(c/65536),U=c-f*65536,c=q+f+65535,f=Math.floor(c/65536),q=c-f*65536,c=ne+f+65535,f=Math.floor(c/65536),ne=c-f*65536,c=W+f+65535,f=Math.floor(c/65536),W=c-f*65536,c=te+f+65535,f=Math.floor(c/65536),te=c-f*65536,P+=f-1+37*(f-1),f=1,c=P+f+65535,f=Math.floor(c/65536),P=c-f*65536,c=I+f+65535,f=Math.floor(c/65536),I=c-f*65536,c=M+f+65535,f=Math.floor(c/65536),M=c-f*65536,c=B+f+65535,f=Math.floor(c/65536),B=c-f*65536,c=H+f+65535,f=Math.floor(c/65536),H=c-f*65536,c=C+f+65535,f=Math.floor(c/65536),C=c-f*65536,c=L+f+65535,f=Math.floor(c/65536),L=c-f*65536,c=K+f+65535,f=Math.floor(c/65536),K=c-f*65536,c=z+f+65535,f=Math.floor(c/65536),z=c-f*65536,c=F+f+65535,f=Math.floor(c/65536),F=c-f*65536,c=k+f+65535,f=Math.floor(c/65536),k=c-f*65536,c=U+f+65535,f=Math.floor(c/65536),U=c-f*65536,c=q+f+65535,f=Math.floor(c/65536),q=c-f*65536,c=ne+f+65535,f=Math.floor(c/65536),ne=c-f*65536,c=W+f+65535,f=Math.floor(c/65536),W=c-f*65536,c=te+f+65535,f=Math.floor(c/65536),te=c-f*65536,P+=f-1+37*(f-1),g[0]=P,g[1]=I,g[2]=M,g[3]=B,g[4]=H,g[5]=C,g[6]=L,g[7]=K,g[8]=z,g[9]=F,g[10]=k,g[11]=U,g[12]=q,g[13]=ne,g[14]=W,g[15]=te}function w(g,E){m(g,E,E)}function _(g,E){const p=i();for(let c=0;c<16;c++)p[c]=E[c];for(let c=253;c>=0;c--)w(p,p),c!==2&&c!==4&&m(p,p,E);for(let c=0;c<16;c++)g[c]=p[c]}function S(g,E){const p=new Uint8Array(32),c=new Float64Array(80),f=i(),P=i(),I=i(),M=i(),B=i(),H=i();for(let z=0;z<31;z++)p[z]=g[z];p[31]=g[31]&127|64,p[0]&=248,h(c,E);for(let z=0;z<16;z++)P[z]=c[z];f[0]=M[0]=1;for(let z=254;z>=0;--z){const F=p[z>>>3]>>>(z&7)&1;a(f,P,F),a(I,M,F),d(B,f,I),b(f,f,I),d(I,P,M),b(P,P,M),w(M,B),w(H,f),m(f,I,f),m(I,P,B),d(B,f,I),b(f,f,I),w(P,f),b(I,M,H),m(f,I,s),d(f,f,M),m(I,I,f),m(f,M,H),m(M,P,c),w(P,B),a(f,P,F),a(I,M,F)}for(let z=0;z<16;z++)c[z+16]=f[z],c[z+32]=I[z],c[z+48]=P[z],c[z+64]=M[z];const C=c.subarray(32),L=c.subarray(16);_(C,C),m(L,L,C);const K=new Uint8Array(32);return l(K,L),K}t.scalarMult=S;function A(g){return S(g,n)}t.scalarMultBase=A;function T(g){if(g.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const E=new Uint8Array(g);return{publicKey:A(E),secretKey:E}}t.generateKeyPairFromSeed=T;function v(g){const E=(0,e.randomBytes)(32,g),p=T(E);return(0,r.wipe)(E),p}t.generateKeyPair=v;function x(g,E,p=!1){if(g.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(E.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=S(g,E);if(p){let f=0;for(let P=0;P<c.length;P++)f|=c[P];if(f===0)throw new Error("X25519: invalid shared key")}return c}t.sharedKey=x})(bo);var Tl=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,s;i<n;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))},fp=function(){function t(e,r,i){this.name=e,this.version=r,this.os=i,this.type="browser"}return t}(),pp=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),gp=function(){function t(e,r,i,n){this.name=e,this.version=r,this.os=i,this.bot=n,this.type="bot-device"}return t}(),mp=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),wp=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),yp=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,bp=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Pl=3,vp=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",yp]],Rl=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function _p(t){return t?Nl(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new wp:typeof navigator<"u"?Nl(navigator.userAgent):Sp()}function Ep(t){return t!==""&&vp.reduce(function(e,r){var i=r[0],n=r[1];if(e)return e;var s=n.exec(t);return!!s&&[i,s]},!1)}function Nl(t){var e=Ep(t);if(!e)return null;var r=e[0],i=e[1];if(r==="searchbot")return new mp;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<Pl&&(n=Tl(Tl([],n,!0),Dp(Pl-n.length),!0)):n=[];var s=n.join("."),o=xp(t),a=bp.exec(t);return a&&a[1]?new gp(r,s,o,a[1]):new fp(r,s,o)}function xp(t){for(var e=0,r=Rl.length;e<r;e++){var i=Rl[e],n=i[0],s=i[1],o=s.exec(t);if(o)return n}return null}function Sp(){var t=typeof process<"u"&&process.version;return t?new pp(process.version.slice(1)):null}function Dp(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Me={};Object.defineProperty(Me,"__esModule",{value:!0}),Me.getLocalStorage=Me.getLocalStorageOrThrow=Me.getCrypto=Me.getCryptoOrThrow=Ml=Me.getLocation=Me.getLocationOrThrow=vo=Me.getNavigator=Me.getNavigatorOrThrow=Ll=Me.getDocument=Me.getDocumentOrThrow=Me.getFromWindowOrThrow=Me.getFromWindow=void 0;function Vr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Me.getFromWindow=Vr;function gi(t){const e=Vr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Me.getFromWindowOrThrow=gi;function Ip(){return gi("document")}Me.getDocumentOrThrow=Ip;function Cp(){return Vr("document")}var Ll=Me.getDocument=Cp;function Op(){return gi("navigator")}Me.getNavigatorOrThrow=Op;function $p(){return Vr("navigator")}var vo=Me.getNavigator=$p;function Ap(){return gi("location")}Me.getLocationOrThrow=Ap;function Tp(){return Vr("location")}var Ml=Me.getLocation=Tp;function Pp(){return gi("crypto")}Me.getCryptoOrThrow=Pp;function Rp(){return Vr("crypto")}Me.getCrypto=Rp;function Np(){return gi("localStorage")}Me.getLocalStorageOrThrow=Np;function Lp(){return Vr("localStorage")}Me.getLocalStorage=Lp;var _o={};Object.defineProperty(_o,"__esModule",{value:!0});var Ul=_o.getWindowMetadata=void 0;const Fl=Me;function Mp(){let t,e;try{t=Fl.getDocumentOrThrow(),e=Fl.getLocationOrThrow()}catch{return null}function r(){const b=t.getElementsByTagName("link"),m=[];for(let w=0;w<b.length;w++){const _=b[w],S=_.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const A=_.getAttribute("href");if(A)if(A.toLowerCase().indexOf("https:")===-1&&A.toLowerCase().indexOf("http:")===-1&&A.indexOf("//")!==0){let T=e.protocol+"//"+e.host;if(A.indexOf("/")===0)T+=A;else{const v=e.pathname.split("/");v.pop();const x=v.join("/");T+=x+"/"+A}m.push(T)}else if(A.indexOf("//")===0){const T=e.protocol+A;m.push(T)}else m.push(A)}}return m}function i(...b){const m=t.getElementsByTagName("meta");for(let w=0;w<m.length;w++){const _=m[w],S=["itemprop","property","name"].map(A=>_.getAttribute(A)).filter(A=>A?b.includes(A):!1);if(S.length&&S){const A=_.getAttribute("content");if(A)return A}}return""}function n(){let b=i("name","og:site_name","og:title","twitter:title");return b||(b=t.title),b}function s(){return i("description","og:description","twitter:description","keywords")}const o=n(),a=s(),l=e.origin,h=r();return{description:a,url:l,icons:h,name:o}}Ul=_o.getWindowMetadata=Mp;var Zi={},Up=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),jl="%[a-f0-9]{2}",kl=new RegExp("("+jl+")|([^%]+?)","gi"),Bl=new RegExp("("+jl+")+","gi");function Eo(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),i=t.slice(e);return Array.prototype.concat.call([],Eo(r),Eo(i))}function Fp(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(kl)||[],r=1;r<e.length;r++)t=Eo(e,r).join(""),e=t.match(kl)||[];return t}}function jp(t){for(var e={"%FE%FF":"","%FF%FE":""},r=Bl.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var i=Fp(r[0]);i!==r[0]&&(e[r[0]]=i)}r=Bl.exec(t)}e["%C2"]="";for(var n=Object.keys(e),s=0;s<n.length;s++){var o=n[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var kp=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return jp(t)}},Bp=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},zp=function(t,e){for(var r={},i=Object.keys(t),n=Array.isArray(e),s=0;s<i.length;s++){var o=i[s],a=t[o];(n?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=Up,r=kp,i=Bp,n=zp,s=v=>v==null,o=Symbol("encodeFragmentIdentifier");function a(v){switch(v.arrayFormat){case"index":return x=>(g,E)=>{const p=g.length;return E===void 0||v.skipNull&&E===null||v.skipEmptyString&&E===""?g:E===null?[...g,[d(x,v),"[",p,"]"].join("")]:[...g,[d(x,v),"[",d(p,v),"]=",d(E,v)].join("")]};case"bracket":return x=>(g,E)=>E===void 0||v.skipNull&&E===null||v.skipEmptyString&&E===""?g:E===null?[...g,[d(x,v),"[]"].join("")]:[...g,[d(x,v),"[]=",d(E,v)].join("")];case"colon-list-separator":return x=>(g,E)=>E===void 0||v.skipNull&&E===null||v.skipEmptyString&&E===""?g:E===null?[...g,[d(x,v),":list="].join("")]:[...g,[d(x,v),":list=",d(E,v)].join("")];case"comma":case"separator":case"bracket-separator":{const x=v.arrayFormat==="bracket-separator"?"[]=":"=";return g=>(E,p)=>p===void 0||v.skipNull&&p===null||v.skipEmptyString&&p===""?E:(p=p===null?"":p,E.length===0?[[d(g,v),x,d(p,v)].join("")]:[[E,d(p,v)].join(v.arrayFormatSeparator)])}default:return x=>(g,E)=>E===void 0||v.skipNull&&E===null||v.skipEmptyString&&E===""?g:E===null?[...g,d(x,v)]:[...g,[d(x,v),"=",d(E,v)].join("")]}}function l(v){let x;switch(v.arrayFormat){case"index":return(g,E,p)=>{if(x=/\[(\d*)\]$/.exec(g),g=g.replace(/\[\d*\]$/,""),!x){p[g]=E;return}p[g]===void 0&&(p[g]={}),p[g][x[1]]=E};case"bracket":return(g,E,p)=>{if(x=/(\[\])$/.exec(g),g=g.replace(/\[\]$/,""),!x){p[g]=E;return}if(p[g]===void 0){p[g]=[E];return}p[g]=[].concat(p[g],E)};case"colon-list-separator":return(g,E,p)=>{if(x=/(:list)$/.exec(g),g=g.replace(/:list$/,""),!x){p[g]=E;return}if(p[g]===void 0){p[g]=[E];return}p[g]=[].concat(p[g],E)};case"comma":case"separator":return(g,E,p)=>{const c=typeof E=="string"&&E.includes(v.arrayFormatSeparator),f=typeof E=="string"&&!c&&b(E,v).includes(v.arrayFormatSeparator);E=f?b(E,v):E;const P=c||f?E.split(v.arrayFormatSeparator).map(I=>b(I,v)):E===null?E:b(E,v);p[g]=P};case"bracket-separator":return(g,E,p)=>{const c=/(\[\])$/.test(g);if(g=g.replace(/\[\]$/,""),!c){p[g]=E&&b(E,v);return}const f=E===null?[]:E.split(v.arrayFormatSeparator).map(P=>b(P,v));if(p[g]===void 0){p[g]=f;return}p[g]=[].concat(p[g],f)};default:return(g,E,p)=>{if(p[g]===void 0){p[g]=E;return}p[g]=[].concat(p[g],E)}}}function h(v){if(typeof v!="string"||v.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(v,x){return x.encode?x.strict?e(v):encodeURIComponent(v):v}function b(v,x){return x.decode?r(v):v}function m(v){return Array.isArray(v)?v.sort():typeof v=="object"?m(Object.keys(v)).sort((x,g)=>Number(x)-Number(g)).map(x=>v[x]):v}function w(v){const x=v.indexOf("#");return x!==-1&&(v=v.slice(0,x)),v}function _(v){let x="";const g=v.indexOf("#");return g!==-1&&(x=v.slice(g)),x}function S(v){v=w(v);const x=v.indexOf("?");return x===-1?"":v.slice(x+1)}function A(v,x){return x.parseNumbers&&!Number.isNaN(Number(v))&&typeof v=="string"&&v.trim()!==""?v=Number(v):x.parseBooleans&&v!==null&&(v.toLowerCase()==="true"||v.toLowerCase()==="false")&&(v=v.toLowerCase()==="true"),v}function T(v,x){x=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},x),h(x.arrayFormatSeparator);const g=l(x),E=Object.create(null);if(typeof v!="string"||(v=v.trim().replace(/^[?#&]/,""),!v))return E;for(const p of v.split("&")){if(p==="")continue;let[c,f]=i(x.decode?p.replace(/\+/g," "):p,"=");f=f===void 0?null:["comma","separator","bracket-separator"].includes(x.arrayFormat)?f:b(f,x),g(b(c,x),f,E)}for(const p of Object.keys(E)){const c=E[p];if(typeof c=="object"&&c!==null)for(const f of Object.keys(c))c[f]=A(c[f],x);else E[p]=A(c,x)}return x.sort===!1?E:(x.sort===!0?Object.keys(E).sort():Object.keys(E).sort(x.sort)).reduce((p,c)=>{const f=E[c];return f&&typeof f=="object"&&!Array.isArray(f)?p[c]=m(f):p[c]=f,p},Object.create(null))}t.extract=S,t.parse=T,t.stringify=(v,x)=>{if(!v)return"";x=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},x),h(x.arrayFormatSeparator);const g=f=>x.skipNull&&s(v[f])||x.skipEmptyString&&v[f]==="",E=a(x),p={};for(const f of Object.keys(v))g(f)||(p[f]=v[f]);const c=Object.keys(p);return x.sort!==!1&&c.sort(x.sort),c.map(f=>{const P=v[f];return P===void 0?"":P===null?d(f,x):Array.isArray(P)?P.length===0&&x.arrayFormat==="bracket-separator"?d(f,x)+"[]":P.reduce(E(f),[]).join("&"):d(f,x)+"="+d(P,x)}).filter(f=>f.length>0).join("&")},t.parseUrl=(v,x)=>{x=Object.assign({decode:!0},x);const[g,E]=i(v,"#");return Object.assign({url:g.split("?")[0]||"",query:T(S(v),x)},x&&x.parseFragmentIdentifier&&E?{fragmentIdentifier:b(E,x)}:{})},t.stringifyUrl=(v,x)=>{x=Object.assign({encode:!0,strict:!0,[o]:!0},x);const g=w(v.url).split("?")[0]||"",E=t.extract(v.url),p=t.parse(E,{sort:!1}),c=Object.assign(p,v.query);let f=t.stringify(c,x);f&&(f=`?${f}`);let P=_(v.url);return v.fragmentIdentifier&&(P=`#${x[o]?d(v.fragmentIdentifier,x):v.fragmentIdentifier}`),`${g}${f}${P}`},t.pick=(v,x,g)=>{g=Object.assign({parseFragmentIdentifier:!0,[o]:!1},g);const{url:E,query:p,fragmentIdentifier:c}=t.parseUrl(v,g);return t.stringifyUrl({url:E,query:n(p,x),fragmentIdentifier:c},g)},t.exclude=(v,x,g)=>{const E=Array.isArray(x)?p=>!x.includes(p):(p,c)=>!x(p,c);return t.pick(v,E,g)}})(Zi);const qp={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function zl(t,e){return t.includes(":")?[t]:e.chains||[]}const ql="base10",Ot="base16",xo="base64pad",So="utf8",Wl=0,Kr=1,Wp=0,Hl=1,Do=12,Io=32;function Hp(){const t=bo.generateKeyPair();return{privateKey:Ct(t.secretKey,Ot),publicKey:Ct(t.publicKey,Ot)}}function Co(){const t=pi.randomBytes(Io);return Ct(t,Ot)}function Vp(t,e){const r=bo.sharedKey(Rt(t,Ot),Rt(e,Ot)),i=new dp(Yn.SHA256,r).expand(Io);return Ct(i,Ot)}function Kp(t){const e=Yn.hash(Rt(t,Ot));return Ct(e,Ot)}function mi(t){const e=Yn.hash(Rt(t,So));return Ct(e,Ot)}function Gp(t){return Rt(`${t}`,ql)}function Ji(t){return Number(Ct(t,ql))}function Yp(t){const e=Gp(typeof t.type<"u"?t.type:Wl);if(Ji(e)===Kr&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Rt(t.senderPublicKey,Ot):void 0,i=typeof t.iv<"u"?Rt(t.iv,Ot):pi.randomBytes(Do),n=new mo.ChaCha20Poly1305(Rt(t.symKey,Ot)).seal(i,Rt(t.message,So));return Jp({type:e,sealed:n,iv:i,senderPublicKey:r})}function Zp(t){const e=new mo.ChaCha20Poly1305(Rt(t.symKey,Ot)),{sealed:r,iv:i}=Zn(t.encoded),n=e.open(i,r);if(n===null)throw new Error("Failed to decrypt");return Ct(n,So)}function Jp(t){if(Ji(t.type)===Kr){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ct(po([t.type,t.senderPublicKey,t.iv,t.sealed]),xo)}return Ct(po([t.type,t.iv,t.sealed]),xo)}function Zn(t){const e=Rt(t,xo),r=e.slice(Wp,Hl),i=Hl;if(Ji(r)===Kr){const a=i+Io,l=a+Do,h=e.slice(i,a),d=e.slice(a,l),b=e.slice(l);return{type:r,sealed:b,iv:d,senderPublicKey:h}}const n=i+Do,s=e.slice(i,n),o=e.slice(n);return{type:r,sealed:o,iv:s}}function Qp(t,e){const r=Zn(t);return Vl({type:Ji(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Ct(r.senderPublicKey,Ot):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Vl(t){const e=(t==null?void 0:t.type)||Wl;if(e===Kr){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Kl(t){return t.type===Kr&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Xp=Object.defineProperty,Gl=Object.getOwnPropertySymbols,eg=Object.prototype.hasOwnProperty,tg=Object.prototype.propertyIsEnumerable,Yl=(t,e,r)=>e in t?Xp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zl=(t,e)=>{for(var r in e||(e={}))eg.call(e,r)&&Yl(t,r,e[r]);if(Gl)for(var r of Gl(e))tg.call(e,r)&&Yl(t,r,e[r]);return t};const rg="ReactNative",kt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},ig="js";function Oo(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Jn(){return!Ll()&&!!vo()&&navigator.product===rg}function Qi(){return!Oo()&&!!vo()}function Xi(){return Jn()?kt.reactNative:Oo()?kt.node:Qi()?kt.browser:kt.unknown}function ng(t,e){let r=Zi.parse(t);return r=Zl(Zl({},r),e),t=Zi.stringify(r),t}function sg(){return Ul()||{name:"",description:"",url:"",icons:[""]}}function og(){if(Xi()===kt.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:i}=global.Platform;return[r,i].join("-")}const t=_p();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function ag(){var t;const e=Xi();return e===kt.browser?[e,((t=Ml())==null?void 0:t.host)||"unknown"].join(":"):e}function cg(t,e,r){const i=og(),n=ag();return[[t,e].join("-"),[ig,r].join("-"),i,n].join("/")}function lg({protocol:t,version:e,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),l=cg(t,e,i),h={auth:n,ua:l,projectId:s,useOnCloseEvent:o||void 0},d=ng(a[1]||"",h);return a[0]+"?"+d}function Gr(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Jl(t){return Object.fromEntries(t.entries())}function Ql(t){return new Map(Object.entries(t))}function wi(t=X.FIVE_MINUTES,e){const r=X.toMiliseconds(t||X.FIVE_MINUTES);let i,n,s;return{resolve:o=>{s&&i&&(clearTimeout(s),i(o))},reject:o=>{s&&n&&(clearTimeout(s),n(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),i=o,n=a})}}function en(t,e,r){return new Promise(async(i,n)=>{const s=setTimeout(()=>n(new Error(r)),e);try{const o=await t;i(o)}catch(o){n(o)}clearTimeout(s)})}function Xl(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function ug(t){return Xl("topic",t)}function hg(t){return Xl("id",t)}function eu(t){const[e,r]=t.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")i.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return i}function Zt(t,e){return X.fromMiliseconds((e||Date.now())+X.toMiliseconds(t))}function xr(t){return Date.now()>=X.toMiliseconds(t)}function Ze(t,e){return`${t}${e?`:${e}`:""}`}async function dg({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r;let n=i==null?void 0:i.href;if(typeof n!="string")return;n.endsWith("/")&&(n=n.slice(0,-1));const s=`${n}/wc?requestId=${t}&sessionTopic=${e}`,o=Xi();o===kt.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===kt.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(i){console.error(i)}}const fg="irn";function $o(t){return(t==null?void 0:t.relay)||{protocol:fg}}function Qn(t){const e=qp[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var pg=Object.defineProperty,tu=Object.getOwnPropertySymbols,gg=Object.prototype.hasOwnProperty,mg=Object.prototype.propertyIsEnumerable,ru=(t,e,r)=>e in t?pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wg=(t,e)=>{for(var r in e||(e={}))gg.call(e,r)&&ru(t,r,e[r]);if(tu)for(var r of tu(e))mg.call(e,r)&&ru(t,r,e[r]);return t};function yg(t,e="-"){const r={},i="relay"+e;return Object.keys(t).forEach(n=>{if(n.startsWith(i)){const s=n.replace(i,""),o=t[n];r[s]=o}}),r}function bg(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,i=t.substring(0,e),n=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=Zi.parse(s);return{protocol:i,topic:vg(n[0]),version:parseInt(n[1],10),symKey:o.symKey,relay:yg(o)}}function vg(t){return t.startsWith("//")?t.substring(2):t}function _g(t,e="-"){const r="relay",i={};return Object.keys(t).forEach(n=>{const s=r+e+n;t[n]&&(i[s]=t[n])}),i}function Eg(t){return`${t.protocol}:${t.topic}@${t.version}?`+Zi.stringify(wg({symKey:t.symKey},_g(t.relay)))}function yi(t){const e=[];return t.forEach(r=>{const[i,n]=r.split(":");e.push(`${i}:${n}`)}),e}function xg(t){const e=[];return Object.values(t).forEach(r=>{e.push(...yi(r.accounts))}),e}function Sg(t,e){const r=[];return Object.values(t).forEach(i=>{yi(i.accounts).includes(e)&&r.push(...i.methods)}),r}function Dg(t,e){const r=[];return Object.values(t).forEach(i=>{yi(i.accounts).includes(e)&&r.push(...i.events)}),r}function Ig(t,e){const r=es(t,e);if(r)throw new Error(r.message);const i={};for(const[n,s]of Object.entries(t))i[n]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return i}const Cg={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Og={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Y(t,e){const{message:r,code:i}=Og[t];return{message:e?`${r} ${e}`:r,code:i}}function rt(t,e){const{message:r,code:i}=Cg[t];return{message:e?`${r} ${e}`:r,code:i}}function tn(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function rn(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function $t(t){return typeof t>"u"}function at(t,e){return e&&$t(t)?!0:typeof t=="string"&&!!t.trim().length}function Ao(t,e){return e&&$t(t)?!0:typeof t=="number"&&!isNaN(t)}function $g(t,e){const{requiredNamespaces:r}=e,i=Object.keys(t.namespaces),n=Object.keys(r);let s=!0;return Gr(n,i)?(i.forEach(o=>{const{accounts:a,methods:l,events:h}=t.namespaces[o],d=yi(a),b=r[o];(!Gr(zl(o,b),d)||!Gr(b.methods,l)||!Gr(b.events,h))&&(s=!1)}),s):!1}function Xn(t){return at(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Ag(t){if(at(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Xn(r)}}return!1}function Tg(t){if(at(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Pg(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Rg(t){return t==null?void 0:t.topic}function Ng(t,e){let r=null;return at(t==null?void 0:t.publicKey,!1)||(r=Y("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function iu(t){let e=!0;return tn(t)?t.length&&(e=t.every(r=>at(r,!1))):e=!1,e}function Lg(t,e,r){let i=null;return tn(e)&&e.length?e.forEach(n=>{i||Xn(n)||(i=rt("UNSUPPORTED_CHAINS",`${r}, chain ${n} should be a string and conform to "namespace:chainId" format`))}):Xn(t)||(i=rt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function Mg(t,e,r){let i=null;return Object.entries(t).forEach(([n,s])=>{if(i)return;const o=Lg(n,zl(n,s),`${e} ${r}`);o&&(i=o)}),i}function Ug(t,e){let r=null;return tn(t)?t.forEach(i=>{r||Ag(i)||(r=rt("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=rt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Fg(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=Ug(i==null?void 0:i.accounts,`${e} namespace`);n&&(r=n)}),r}function jg(t,e){let r=null;return iu(t==null?void 0:t.methods)?iu(t==null?void 0:t.events)||(r=rt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=rt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function nu(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=jg(i,`${e}, namespace`);n&&(r=n)}),r}function kg(t,e,r){let i=null;if(t&&rn(t)){const n=nu(t,e);n&&(i=n);const s=Mg(t,e,r);s&&(i=s)}else i=Y("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return i}function es(t,e){let r=null;if(t&&rn(t)){const i=nu(t,e);i&&(r=i);const n=Fg(t,e);n&&(r=n)}else r=Y("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function su(t){return at(t.protocol,!0)}function Bg(t,e){let r=!1;return e&&!t?r=!0:t&&tn(t)&&t.length&&t.forEach(i=>{r=su(i)}),r}function zg(t){return typeof t=="number"}function Nt(t){return typeof t<"u"&&typeof t!==null}function qg(t){return!(!t||typeof t!="object"||!t.code||!Ao(t.code,!1)||!t.message||!at(t.message,!1))}function Wg(t){return!($t(t)||!at(t.method,!1))}function Hg(t){return!($t(t)||$t(t.result)&&$t(t.error)||!Ao(t.id,!1)||!at(t.jsonrpc,!1))}function Vg(t){return!($t(t)||!at(t.name,!1))}function ou(t,e){return!(!Xn(e)||!xg(t).includes(e))}function Kg(t,e,r){return at(r,!1)?Sg(t,e).includes(r):!1}function Gg(t,e,r){return at(r,!1)?Dg(t,e).includes(r):!1}function au(t,e,r){let i=null;const n=Yg(t),s=Zg(e),o=Object.keys(n),a=Object.keys(s),l=cu(Object.keys(t)),h=cu(Object.keys(e)),d=l.filter(b=>!h.includes(b));return d.length&&(i=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),Gr(o,a)||(i=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(b=>{if(!b.includes(":")||i)return;const m=yi(e[b].accounts);m.includes(b)||(i=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${b}
        Required: ${b}
        Approved: ${m.toString()}`))}),o.forEach(b=>{i||(Gr(n[b].methods,s[b].methods)?Gr(n[b].events,s[b].events)||(i=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${b}`)):i=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${b}`))}),i}function Yg(t){const e={};return Object.keys(t).forEach(r=>{var i;r.includes(":")?e[r]=t[r]:(i=t[r].chains)==null||i.forEach(n=>{e[n]={methods:t[r].methods,events:t[r].events}})}),e}function cu(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Zg(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const i=yi(t[r].accounts);i==null||i.forEach(n=>{e[n]={accounts:t[r].accounts.filter(s=>s.includes(`${n}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function Jg(t,e){return Ao(t,!1)&&t<=e.max&&t>=e.min}function lu(){const t=Xi();return new Promise(e=>{switch(t){case kt.browser:e(Qg());break;case kt.reactNative:e(Xg());break;case kt.node:e(em());break;default:e(!0)}})}function Qg(){return Qi()&&(navigator==null?void 0:navigator.onLine)}async function Xg(){if(Jn()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function em(){return!0}function tm(t){switch(Xi()){case kt.browser:rm(t);break;case kt.reactNative:im(t);break}}function rm(t){Qi()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function im(t){Jn()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const To={};let ts=class{static get(e){return To[e]}static set(e,r){To[e]=r}static delete(e){delete To[e]}};const nm="PARSE_ERROR",sm="INVALID_REQUEST",om="METHOD_NOT_FOUND",am="INVALID_PARAMS",uu="INTERNAL_ERROR",Po="SERVER_ERROR",cm=[-32700,-32600,-32601,-32602,-32603],nn={[nm]:{code:-32700,message:"Parse error"},[sm]:{code:-32600,message:"Invalid Request"},[om]:{code:-32601,message:"Method not found"},[am]:{code:-32602,message:"Invalid params"},[uu]:{code:-32603,message:"Internal error"},[Po]:{code:-32e3,message:"Server error"}},hu=Po;function lm(t){return cm.includes(t)}function du(t){return Object.keys(nn).includes(t)?nn[t]:nn[hu]}function um(t){const e=Object.values(nn).find(r=>r.code===t);return e||nn[hu]}function hm(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var fu={},cr={},pu;function dm(){if(pu)return cr;pu=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.isBrowserCryptoAvailable=cr.getSubtleCrypto=cr.getBrowerCrypto=void 0;function t(){return(Ft==null?void 0:Ft.crypto)||(Ft==null?void 0:Ft.msCrypto)||{}}cr.getBrowerCrypto=t;function e(){const i=t();return i.subtle||i.webkitSubtle}cr.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return cr.isBrowserCryptoAvailable=r,cr}var lr={},gu;function fm(){if(gu)return lr;gu=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.isBrowser=lr.isNode=lr.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}lr.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}lr.isNode=e;function r(){return!t()&&!e()}return lr.isBrowser=r,lr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wt;e.__exportStar(dm(),t),e.__exportStar(fm(),t)})(fu);function Ro(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function mu(t=6){return BigInt(Ro(t))}function sn(t,e,r){return{id:r||Ro(),jsonrpc:"2.0",method:t,params:e}}function No(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Lo(t,e,r){return{id:t,jsonrpc:"2.0",error:pm(e,r)}}function pm(t,e){return typeof t>"u"?du(uu):(typeof t=="string"&&(t=Object.assign(Object.assign({},du(Po)),{message:t})),typeof e<"u"&&(t.data=e),lm(t.code)&&(t=um(t.code)),t)}class gm{}class mm extends gm{constructor(){super()}}class wm extends mm{constructor(e){super()}}const ym="^wss?:";function bm(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function vm(t,e){const r=bm(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function wu(t){return vm(t,ym)}function _m(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function yu(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Mo(t){return yu(t)&&"method"in t}function rs(t){return yu(t)&&(ur(t)||Jt(t))}function ur(t){return"result"in t}function Jt(t){return"error"in t}class Em extends wm{constructor(e){super(e),this.events=new Yt.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(sn(e.method,e.params||[],e.id||mu().toString()),r)}async requestStrict(e,r){return new Promise(async(i,n)=>{if(!this.connection.connected)try{await this.open()}catch(s){n(s)}this.events.on(`${e.id}`,s=>{Jt(s)?n(s.error):i(s.result)});try{await this.connection.send(e,r)}catch(s){n(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),rs(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const xm=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Sm=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",bu=t=>t.split("?")[0],vu=10,Dm=xm();class Im{constructor(e){if(this.url=e,this.events=new Yt.EventEmitter,this.registering=!1,!wu(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(oo(e))}catch(i){this.onError(e.id,i)}}register(e=this.url){if(!wu(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),n(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,i)=>{const n=fu.isReactNative()?void 0:{rejectUnauthorized:!_m(e)},s=new Dm(e,[],n);Sm()?s.onerror=o=>{const a=o;i(this.emitError(a.error))}:s.on("error",o=>{i(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?il(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const i=this.parseError(r),n=i.message||i.toString(),s=Lo(e,n);this.events.emit("payload",s)}parseError(e,r=this.url){return hm(e,bu(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>vu&&this.events.setMaxListeners(vu)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${bu(this.url)}`));return this.events.emit("register_error",r),r}}var is={exports:{}};is.exports,function(t,e){var r=200,i="__lodash_hash_undefined__",n=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",h="[object AsyncFunction]",d="[object Boolean]",b="[object Date]",m="[object Error]",w="[object Function]",_="[object GeneratorFunction]",S="[object Map]",A="[object Number]",T="[object Null]",v="[object Object]",x="[object Promise]",g="[object Proxy]",E="[object RegExp]",p="[object Set]",c="[object String]",f="[object Symbol]",P="[object Undefined]",I="[object WeakMap]",M="[object ArrayBuffer]",B="[object DataView]",H="[object Float32Array]",C="[object Float64Array]",L="[object Int8Array]",K="[object Int16Array]",z="[object Int32Array]",F="[object Uint8Array]",k="[object Uint8ClampedArray]",U="[object Uint16Array]",q="[object Uint32Array]",ne=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,J={};J[H]=J[C]=J[L]=J[K]=J[z]=J[F]=J[k]=J[U]=J[q]=!0,J[a]=J[l]=J[M]=J[d]=J[B]=J[b]=J[m]=J[w]=J[S]=J[A]=J[v]=J[E]=J[p]=J[c]=J[I]=!1;var re=typeof Ft=="object"&&Ft&&Ft.Object===Object&&Ft,N=typeof self=="object"&&self&&self.Object===Object&&self,R=re||N||Function("return this")(),O=e&&!e.nodeType&&e,u=O&&!0&&t&&!t.nodeType&&t,D=u&&u.exports===O,V=D&&re.process,Z=function(){try{return V&&V.binding&&V.binding("util")}catch{}}(),we=Z&&Z.isTypedArray;function Ie(y,$){for(var j=-1,Q=y==null?0:y.length,Ue=0,le=[];++j<Q;){var Ke=y[j];$(Ke,j,y)&&(le[Ue++]=Ke)}return le}function ve(y,$){for(var j=-1,Q=$.length,Ue=y.length;++j<Q;)y[Ue+j]=$[j];return y}function Ae(y,$){for(var j=-1,Q=y==null?0:y.length;++j<Q;)if($(y[j],j,y))return!0;return!1}function Ye(y,$){for(var j=-1,Q=Array(y);++j<y;)Q[j]=$(j);return Q}function We(y){return function($){return y($)}}function Se(y,$){return y.has($)}function _e(y,$){return y==null?void 0:y[$]}function ye(y){var $=-1,j=Array(y.size);return y.forEach(function(Q,Ue){j[++$]=[Ue,Q]}),j}function pe(y,$){return function(j){return y($(j))}}function fe(y){var $=-1,j=Array(y.size);return y.forEach(function(Q){j[++$]=Q}),j}var he=Array.prototype,ue=Function.prototype,se=Object.prototype,ge=R["__core-js_shared__"],Ee=ue.toString,ae=se.hasOwnProperty,Ce=function(){var y=/[^.]+$/.exec(ge&&ge.keys&&ge.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Oe=se.toString,Re=RegExp("^"+Ee.call(ae).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=D?R.Buffer:void 0,Te=R.Symbol,Qt=R.Uint8Array,ar=se.propertyIsEnumerable,Rr=he.splice,zt=Te?Te.toStringTag:void 0,si=Object.getOwnPropertySymbols,Pn=Ne?Ne.isBuffer:void 0,Ns=pe(Object.keys,Object),Je=Ui(R,"DataView"),He=Ui(R,"Map"),Qe=Ui(R,"Promise"),Xe=Ui(R,"Set"),et=Ui(R,"WeakMap"),Ve=Ui(Object,"create"),lt=ai(Je),ut=ai(He),ht=ai(Qe),dt=ai(Xe),ft=ai(et),nt=Te?Te.prototype:void 0,tt=nt?nt.valueOf:void 0;function je(y){var $=-1,j=y==null?0:y.length;for(this.clear();++$<j;){var Q=y[$];this.set(Q[0],Q[1])}}function pt(){this.__data__=Ve?Ve(null):{},this.size=0}function gt(y){var $=this.has(y)&&delete this.__data__[y];return this.size-=$?1:0,$}function K5(y){var $=this.__data__;if(Ve){var j=$[y];return j===i?void 0:j}return ae.call($,y)?$[y]:void 0}function G5(y){var $=this.__data__;return Ve?$[y]!==void 0:ae.call($,y)}function Y5(y,$){var j=this.__data__;return this.size+=this.has(y)?0:1,j[y]=Ve&&$===void 0?i:$,this}je.prototype.clear=pt,je.prototype.delete=gt,je.prototype.get=K5,je.prototype.has=G5,je.prototype.set=Y5;function mr(y){var $=-1,j=y==null?0:y.length;for(this.clear();++$<j;){var Q=y[$];this.set(Q[0],Q[1])}}function Z5(){this.__data__=[],this.size=0}function J5(y){var $=this.__data__,j=Ms($,y);if(j<0)return!1;var Q=$.length-1;return j==Q?$.pop():Rr.call($,j,1),--this.size,!0}function Q5(y){var $=this.__data__,j=Ms($,y);return j<0?void 0:$[j][1]}function X5(y){return Ms(this.__data__,y)>-1}function e6(y,$){var j=this.__data__,Q=Ms(j,y);return Q<0?(++this.size,j.push([y,$])):j[Q][1]=$,this}mr.prototype.clear=Z5,mr.prototype.delete=J5,mr.prototype.get=Q5,mr.prototype.has=X5,mr.prototype.set=e6;function oi(y){var $=-1,j=y==null?0:y.length;for(this.clear();++$<j;){var Q=y[$];this.set(Q[0],Q[1])}}function t6(){this.size=0,this.__data__={hash:new je,map:new(He||mr),string:new je}}function r6(y){var $=Us(this,y).delete(y);return this.size-=$?1:0,$}function i6(y){return Us(this,y).get(y)}function n6(y){return Us(this,y).has(y)}function s6(y,$){var j=Us(this,y),Q=j.size;return j.set(y,$),this.size+=j.size==Q?0:1,this}oi.prototype.clear=t6,oi.prototype.delete=r6,oi.prototype.get=i6,oi.prototype.has=n6,oi.prototype.set=s6;function Ls(y){var $=-1,j=y==null?0:y.length;for(this.__data__=new oi;++$<j;)this.add(y[$])}function o6(y){return this.__data__.set(y,i),this}function a6(y){return this.__data__.has(y)}Ls.prototype.add=Ls.prototype.push=o6,Ls.prototype.has=a6;function Nr(y){var $=this.__data__=new mr(y);this.size=$.size}function c6(){this.__data__=new mr,this.size=0}function l6(y){var $=this.__data__,j=$.delete(y);return this.size=$.size,j}function u6(y){return this.__data__.get(y)}function h6(y){return this.__data__.has(y)}function d6(y,$){var j=this.__data__;if(j instanceof mr){var Q=j.__data__;if(!He||Q.length<r-1)return Q.push([y,$]),this.size=++j.size,this;j=this.__data__=new oi(Q)}return j.set(y,$),this.size=j.size,this}Nr.prototype.clear=c6,Nr.prototype.delete=l6,Nr.prototype.get=u6,Nr.prototype.has=h6,Nr.prototype.set=d6;function f6(y,$){var j=Fs(y),Q=!j&&O6(y),Ue=!j&&!Q&&sc(y),le=!j&&!Q&&!Ue&&Nd(y),Ke=j||Q||Ue||le,mt=Ke?Ye(y.length,String):[],bt=mt.length;for(var ze in y)($||ae.call(y,ze))&&!(Ke&&(ze=="length"||Ue&&(ze=="offset"||ze=="parent")||le&&(ze=="buffer"||ze=="byteLength"||ze=="byteOffset")||x6(ze,bt)))&&mt.push(ze);return mt}function Ms(y,$){for(var j=y.length;j--;)if(Ad(y[j][0],$))return j;return-1}function p6(y,$,j){var Q=$(y);return Fs(y)?Q:ve(Q,j(y))}function Rn(y){return y==null?y===void 0?P:T:zt&&zt in Object(y)?_6(y):C6(y)}function Id(y){return Nn(y)&&Rn(y)==a}function Cd(y,$,j,Q,Ue){return y===$?!0:y==null||$==null||!Nn(y)&&!Nn($)?y!==y&&$!==$:g6(y,$,j,Q,Cd,Ue)}function g6(y,$,j,Q,Ue,le){var Ke=Fs(y),mt=Fs($),bt=Ke?l:Lr(y),ze=mt?l:Lr($);bt=bt==a?v:bt,ze=ze==a?v:ze;var qt=bt==v,Xt=ze==v,Dt=bt==ze;if(Dt&&sc(y)){if(!sc($))return!1;Ke=!0,qt=!1}if(Dt&&!qt)return le||(le=new Nr),Ke||Nd(y)?Od(y,$,j,Q,Ue,le):b6(y,$,bt,j,Q,Ue,le);if(!(j&n)){var Kt=qt&&ae.call(y,"__wrapped__"),Gt=Xt&&ae.call($,"__wrapped__");if(Kt||Gt){var Mr=Kt?y.value():y,wr=Gt?$.value():$;return le||(le=new Nr),Ue(Mr,wr,j,Q,le)}}return Dt?(le||(le=new Nr),v6(y,$,j,Q,Ue,le)):!1}function m6(y){if(!Rd(y)||D6(y))return!1;var $=Td(y)?Re:W;return $.test(ai(y))}function w6(y){return Nn(y)&&Pd(y.length)&&!!J[Rn(y)]}function y6(y){if(!I6(y))return Ns(y);var $=[];for(var j in Object(y))ae.call(y,j)&&j!="constructor"&&$.push(j);return $}function Od(y,$,j,Q,Ue,le){var Ke=j&n,mt=y.length,bt=$.length;if(mt!=bt&&!(Ke&&bt>mt))return!1;var ze=le.get(y);if(ze&&le.get($))return ze==$;var qt=-1,Xt=!0,Dt=j&s?new Ls:void 0;for(le.set(y,$),le.set($,y);++qt<mt;){var Kt=y[qt],Gt=$[qt];if(Q)var Mr=Ke?Q(Gt,Kt,qt,$,y,le):Q(Kt,Gt,qt,y,$,le);if(Mr!==void 0){if(Mr)continue;Xt=!1;break}if(Dt){if(!Ae($,function(wr,ci){if(!Se(Dt,ci)&&(Kt===wr||Ue(Kt,wr,j,Q,le)))return Dt.push(ci)})){Xt=!1;break}}else if(!(Kt===Gt||Ue(Kt,Gt,j,Q,le))){Xt=!1;break}}return le.delete(y),le.delete($),Xt}function b6(y,$,j,Q,Ue,le,Ke){switch(j){case B:if(y.byteLength!=$.byteLength||y.byteOffset!=$.byteOffset)return!1;y=y.buffer,$=$.buffer;case M:return!(y.byteLength!=$.byteLength||!le(new Qt(y),new Qt($)));case d:case b:case A:return Ad(+y,+$);case m:return y.name==$.name&&y.message==$.message;case E:case c:return y==$+"";case S:var mt=ye;case p:var bt=Q&n;if(mt||(mt=fe),y.size!=$.size&&!bt)return!1;var ze=Ke.get(y);if(ze)return ze==$;Q|=s,Ke.set(y,$);var qt=Od(mt(y),mt($),Q,Ue,le,Ke);return Ke.delete(y),qt;case f:if(tt)return tt.call(y)==tt.call($)}return!1}function v6(y,$,j,Q,Ue,le){var Ke=j&n,mt=$d(y),bt=mt.length,ze=$d($),qt=ze.length;if(bt!=qt&&!Ke)return!1;for(var Xt=bt;Xt--;){var Dt=mt[Xt];if(!(Ke?Dt in $:ae.call($,Dt)))return!1}var Kt=le.get(y);if(Kt&&le.get($))return Kt==$;var Gt=!0;le.set(y,$),le.set($,y);for(var Mr=Ke;++Xt<bt;){Dt=mt[Xt];var wr=y[Dt],ci=$[Dt];if(Q)var Ld=Ke?Q(ci,wr,Dt,$,y,le):Q(wr,ci,Dt,y,$,le);if(!(Ld===void 0?wr===ci||Ue(wr,ci,j,Q,le):Ld)){Gt=!1;break}Mr||(Mr=Dt=="constructor")}if(Gt&&!Mr){var js=y.constructor,ks=$.constructor;js!=ks&&"constructor"in y&&"constructor"in $&&!(typeof js=="function"&&js instanceof js&&typeof ks=="function"&&ks instanceof ks)&&(Gt=!1)}return le.delete(y),le.delete($),Gt}function $d(y){return p6(y,T6,E6)}function Us(y,$){var j=y.__data__;return S6($)?j[typeof $=="string"?"string":"hash"]:j.map}function Ui(y,$){var j=_e(y,$);return m6(j)?j:void 0}function _6(y){var $=ae.call(y,zt),j=y[zt];try{y[zt]=void 0;var Q=!0}catch{}var Ue=Oe.call(y);return Q&&($?y[zt]=j:delete y[zt]),Ue}var E6=si?function(y){return y==null?[]:(y=Object(y),Ie(si(y),function($){return ar.call(y,$)}))}:P6,Lr=Rn;(Je&&Lr(new Je(new ArrayBuffer(1)))!=B||He&&Lr(new He)!=S||Qe&&Lr(Qe.resolve())!=x||Xe&&Lr(new Xe)!=p||et&&Lr(new et)!=I)&&(Lr=function(y){var $=Rn(y),j=$==v?y.constructor:void 0,Q=j?ai(j):"";if(Q)switch(Q){case lt:return B;case ut:return S;case ht:return x;case dt:return p;case ft:return I}return $});function x6(y,$){return $=$??o,!!$&&(typeof y=="number"||te.test(y))&&y>-1&&y%1==0&&y<$}function S6(y){var $=typeof y;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?y!=="__proto__":y===null}function D6(y){return!!Ce&&Ce in y}function I6(y){var $=y&&y.constructor,j=typeof $=="function"&&$.prototype||se;return y===j}function C6(y){return Oe.call(y)}function ai(y){if(y!=null){try{return Ee.call(y)}catch{}try{return y+""}catch{}}return""}function Ad(y,$){return y===$||y!==y&&$!==$}var O6=Id(function(){return arguments}())?Id:function(y){return Nn(y)&&ae.call(y,"callee")&&!ar.call(y,"callee")},Fs=Array.isArray;function $6(y){return y!=null&&Pd(y.length)&&!Td(y)}var sc=Pn||R6;function A6(y,$){return Cd(y,$)}function Td(y){if(!Rd(y))return!1;var $=Rn(y);return $==w||$==_||$==h||$==g}function Pd(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=o}function Rd(y){var $=typeof y;return y!=null&&($=="object"||$=="function")}function Nn(y){return y!=null&&typeof y=="object"}var Nd=we?We(we):w6;function T6(y){return $6(y)?f6(y):y6(y)}function P6(){return[]}function R6(){return!1}t.exports=A6}(is,is.exports);var Cm=is.exports;const Om=mc(Cm);function $m(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,l=t.charAt(0),h=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function b(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var S=0,A=0,T=0,v=_.length;T!==v&&_[T]===0;)T++,S++;for(var x=(v-T)*d+1>>>0,g=new Uint8Array(x);T!==v;){for(var E=_[T],p=0,c=x-1;(E!==0||p<A)&&c!==-1;c--,p++)E+=256*g[c]>>>0,g[c]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");A=p,T++}for(var f=x-A;f!==x&&g[f]===0;)f++;for(var P=l.repeat(S);f<x;++f)P+=t.charAt(g[f]);return P}function m(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var S=0;if(_[S]!==" "){for(var A=0,T=0;_[S]===l;)A++,S++;for(var v=(_.length-S)*h+1>>>0,x=new Uint8Array(v);_[S];){var g=r[_.charCodeAt(S)];if(g===255)return;for(var E=0,p=v-1;(g!==0||E<T)&&p!==-1;p--,E++)g+=a*x[p]>>>0,x[p]=g%256>>>0,g=g/256>>>0;if(g!==0)throw new Error("Non-zero carry");T=E,S++}if(_[S]!==" "){for(var c=v-T;c!==v&&x[c]===0;)c++;for(var f=new Uint8Array(A+(v-c)),P=A;c!==v;)f[P++]=x[c++];return f}}}function w(_){var S=m(_);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:m,decode:w}}var Am=$m,Tm=Am;const _u=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Pm=t=>new TextEncoder().encode(t),Rm=t=>new TextDecoder().decode(t);class Nm{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Lm{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Eu(this,e)}}class Mm{constructor(e){this.decoders=e}or(e){return Eu(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Eu=(t,e)=>new Mm({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Um{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new Nm(e,r,i),this.decoder=new Lm(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ns=({name:t,prefix:e,encode:r,decode:i})=>new Um(t,e,r,i),on=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=Tm(r,e);return ns({prefix:t,name:e,encode:i,decode:s=>_u(n(s))})},Fm=(t,e,r,i)=>{const n={};for(let d=0;d<e.length;++d)n[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,l=0,h=0;for(let d=0;d<s;++d){const b=n[t[d]];if(b===void 0)throw new SyntaxError(`Non-${i} character`);l=l<<r|b,a+=r,a>=8&&(a-=8,o[h++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},jm=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},yt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>ns({prefix:e,name:t,encode(n){return jm(n,i,r)},decode(n){return Fm(n,i,r,t)}}),km=ns({prefix:"\0",name:"identity",encode:t=>Rm(t),decode:t=>Pm(t)});var Bm=Object.freeze({__proto__:null,identity:km});const zm=yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var qm=Object.freeze({__proto__:null,base2:zm});const Wm=yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Hm=Object.freeze({__proto__:null,base8:Wm});const Vm=on({prefix:"9",name:"base10",alphabet:"0123456789"});var Km=Object.freeze({__proto__:null,base10:Vm});const Gm=yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ym=yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Zm=Object.freeze({__proto__:null,base16:Gm,base16upper:Ym});const Jm=yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Qm=yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Xm=yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ew=yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),tw=yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),rw=yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),iw=yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nw=yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),sw=yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ow=Object.freeze({__proto__:null,base32:Jm,base32upper:Qm,base32pad:Xm,base32padupper:ew,base32hex:tw,base32hexupper:rw,base32hexpad:iw,base32hexpadupper:nw,base32z:sw});const aw=on({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),cw=on({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var lw=Object.freeze({__proto__:null,base36:aw,base36upper:cw});const uw=on({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hw=on({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var dw=Object.freeze({__proto__:null,base58btc:uw,base58flickr:hw});const fw=yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pw=yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gw=yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mw=yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ww=Object.freeze({__proto__:null,base64:fw,base64pad:pw,base64url:gw,base64urlpad:mw});const xu=Array.from(""),yw=xu.reduce((t,e,r)=>(t[r]=e,t),[]),bw=xu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function vw(t){return t.reduce((e,r)=>(e+=yw[r],e),"")}function _w(t){const e=[];for(const r of t){const i=bw[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const Ew=ns({prefix:"",name:"base256emoji",encode:vw,decode:_w});var xw=Object.freeze({__proto__:null,base256emoji:Ew}),Sw=Du,Su=128,Dw=127,Iw=~Dw,Cw=Math.pow(2,31);function Du(t,e,r){e=e||[],r=r||0;for(var i=r;t>=Cw;)e[r++]=t&255|Su,t/=128;for(;t&Iw;)e[r++]=t&255|Su,t>>>=7;return e[r]=t|0,Du.bytes=r-i+1,e}var Ow=Uo,$w=128,Iu=127;function Uo(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw Uo.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&Iu)<<n:(o&Iu)*Math.pow(2,n),n+=7}while(o>=$w);return Uo.bytes=s-i,r}var Aw=Math.pow(2,7),Tw=Math.pow(2,14),Pw=Math.pow(2,21),Rw=Math.pow(2,28),Nw=Math.pow(2,35),Lw=Math.pow(2,42),Mw=Math.pow(2,49),Uw=Math.pow(2,56),Fw=Math.pow(2,63),jw=function(t){return t<Aw?1:t<Tw?2:t<Pw?3:t<Rw?4:t<Nw?5:t<Lw?6:t<Mw?7:t<Uw?8:t<Fw?9:10},kw={encode:Sw,decode:Ow,encodingLength:jw},Cu=kw;const Ou=(t,e,r=0)=>(Cu.encode(t,e,r),e),$u=t=>Cu.encodingLength(t),Fo=(t,e)=>{const r=e.byteLength,i=$u(t),n=i+$u(r),s=new Uint8Array(n+r);return Ou(t,s,0),Ou(r,s,i),s.set(e,n),new Bw(t,r,e,s)};class Bw{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}const Au=({name:t,code:e,encode:r})=>new zw(t,e,r);class zw{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Fo(this.code,r):r.then(i=>Fo(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Tu=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),qw=Au({name:"sha2-256",code:18,encode:Tu("SHA-256")}),Ww=Au({name:"sha2-512",code:19,encode:Tu("SHA-512")});var Hw=Object.freeze({__proto__:null,sha256:qw,sha512:Ww});const Pu=0,Vw="identity",Ru=_u;var Kw=Object.freeze({__proto__:null,identity:{code:Pu,name:Vw,encode:Ru,digest:t=>Fo(Pu,Ru(t))}});new TextEncoder,new TextDecoder;const Nu={...Bm,...qm,...Hm,...Km,...Zm,...ow,...lw,...dw,...ww,...xw};({...Hw,...Kw});function Lu(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Gw(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Lu(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Mu(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const Uu=Mu("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),jo=Mu("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Gw(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Yw={utf8:Uu,"utf-8":Uu,hex:Nu.base16,latin1:jo,ascii:jo,binary:jo,...Nu};function Zw(t,e="utf8"){const r=Yw[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Lu(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Fu="wc",Jw=2,ko="core",Sr=`${Fu}@2:${ko}:`,Qw={name:ko,logger:"error"},Xw={database:":memory:"},ey="crypto",ju="client_ed25519_seed",ty=X.ONE_DAY,ry="keychain",iy="0.3",ny="messages",sy="0.3",oy=X.SIX_HOURS,ay="publisher",ku="irn",cy="error",Bu="wss://relay.walletconnect.com",zu="wss://relay.walletconnect.org",ly="relayer",Et={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},uy="_subscription",hr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},hy=X.ONE_SECOND,dy="2.10.0",fy=1e4,py="0.3",gy="WALLETCONNECT_CLIENT_ID",ir={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},my="subscription",wy="0.3",yy=X.FIVE_SECONDS*1e3,by="pairing",vy="0.3",an={wc_pairingDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:X.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:X.ONE_DAY,prompt:!1,tag:0},res:{ttl:X.ONE_DAY,prompt:!1,tag:0}}},nr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},_y="history",Ey="0.3",xy="expirer",Ht={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Sy="0.3",Bo="verify-api",ss="https://verify.walletconnect.com",qu="https://verify.walletconnect.org";let Dy=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=ry,this.version=iy,this.initialized=!1,this.storagePrefix=Sr,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,n)=>{this.isInitialized(),this.keychain.set(i,n),await this.persist()},this.get=i=>{this.isInitialized();const n=this.keychain.get(i);if(typeof n>"u"){const{message:s}=Y("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return n},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Jl(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ql(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},Iy=class{constructor(e,r,i){this.core=e,this.logger=r,this.name=ey,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=n=>(this.isInitialized(),this.keychain.has(n)),this.getClientId=async()=>{this.isInitialized();const n=await this.getClientSeed(),s=xl(n);return El(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const n=Hp();return this.setPrivateKey(n.publicKey,n.privateKey)},this.signJWT=async n=>{this.isInitialized();const s=await this.getClientSeed(),o=xl(s),a=Co();return await X1(a,n,ty,o)},this.generateSharedKey=(n,s,o)=>{this.isInitialized();const a=this.getPrivateKey(n),l=Vp(a,s);return this.setSymKey(l,o)},this.setSymKey=async(n,s)=>{this.isInitialized();const o=s||Kp(n);return await this.keychain.set(o,n),o},this.deleteKeyPair=async n=>{this.isInitialized(),await this.keychain.del(n)},this.deleteSymKey=async n=>{this.isInitialized(),await this.keychain.del(n)},this.encode=async(n,s,o)=>{this.isInitialized();const a=Vl(o),l=oo(s);if(Kl(a)){const m=a.senderPublicKey,w=a.receiverPublicKey;n=await this.generateSharedKey(m,w)}const h=this.getSymKey(n),{type:d,senderPublicKey:b}=a;return Yp({type:d,symKey:h,message:l,senderPublicKey:b})},this.decode=async(n,s,o)=>{this.isInitialized();const a=Qp(s,o);if(Kl(a)){const l=a.receiverPublicKey,h=a.senderPublicKey;n=await this.generateSharedKey(l,h)}try{const l=this.getSymKey(n),h=Zp({symKey:l,encoded:s});return il(h)}catch(l){this.logger.error(`Failed to decode message from topic: '${n}', clientId: '${await this.getClientId()}'`),this.logger.error(l)}},this.getPayloadType=n=>{const s=Zn(n);return Ji(s.type)},this.getPayloadSenderPublicKey=n=>{const s=Zn(n);return s.senderPublicKey?Ct(s.senderPublicKey,Ot):void 0},this.core=e,this.logger=De.generateChildLogger(r,this.name),this.keychain=i||new Dy(this.core,this.logger)}get context(){return De.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ju)}catch{e=Co(),await this.keychain.set(ju,e)}return Zw(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},Cy=class extends n0{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=ny,this.version=sy,this.initialized=!1,this.storagePrefix=Sr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,n)=>{this.isInitialized();const s=mi(n);let o=this.messages.get(i);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=n,this.messages.set(i,o),await this.persist()),s},this.get=i=>{this.isInitialized();let n=this.messages.get(i);return typeof n>"u"&&(n={}),n},this.has=(i,n)=>{this.isInitialized();const s=this.get(i),o=mi(n);return typeof s[o]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=De.generateChildLogger(e,this.name),this.core=r}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Jl(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ql(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}};class Oy extends s0{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Yt.EventEmitter,this.name=ay,this.queue=new Map,this.publishTimeout=X.toMiliseconds(X.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(i,n,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:s}});try{const a=(s==null?void 0:s.ttl)||oy,l=$o(s),h=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,b=(s==null?void 0:s.id)||mu().toString(),m={topic:i,message:n,opts:{ttl:a,relay:l,prompt:h,tag:d,id:b}},w=setTimeout(()=>this.queue.set(b,m),this.publishTimeout);try{await await en(this.rpcPublish(i,n,a,l,h,d,b),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(b),this.relayer.events.emit(Et.publish,m)}catch(_){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(b),_;return}finally{clearTimeout(w)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.relayer=e,this.logger=De.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return De.getLoggerContext(this.logger)}rpcPublish(e,r,i,n,s,o,a){var l,h,d,b;const m={method:Qn(n.protocol).publish,params:{topic:e,message:r,ttl:i,prompt:s,tag:o},id:a};return $t((l=m.params)==null?void 0:l.prompt)&&((h=m.params)==null||delete h.prompt),$t((d=m.params)==null?void 0:d.tag)&&((b=m.params)==null||delete b.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:m}),this.relayer.request(m)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:i,opts:n}=e;await this.publish(r,i,n)})}registerEventListeners(){this.relayer.core.heartbeat.on(di.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Et.connection_stalled);return}this.checkQueue()}),this.relayer.on(Et.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class $y{constructor(){this.map=new Map,this.set=(e,r)=>{const i=this.get(e);this.exists(e,r)||this.map.set(e,[...i,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,r))return;const n=i.filter(s=>s!==r);if(!n.length){this.map.delete(e);return}this.map.set(e,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Ay=Object.defineProperty,Ty=Object.defineProperties,Py=Object.getOwnPropertyDescriptors,Wu=Object.getOwnPropertySymbols,Ry=Object.prototype.hasOwnProperty,Ny=Object.prototype.propertyIsEnumerable,Hu=(t,e,r)=>e in t?Ay(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cn=(t,e)=>{for(var r in e||(e={}))Ry.call(e,r)&&Hu(t,r,e[r]);if(Wu)for(var r of Wu(e))Ny.call(e,r)&&Hu(t,r,e[r]);return t},zo=(t,e)=>Ty(t,Py(e));let Ly=class extends c0{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new $y,this.events=new Yt.EventEmitter,this.name=my,this.version=wy,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Sr,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}});try{const s=$o(n),o={topic:i,relay:s};this.pending.set(i,o);const a=await this.rpcSubscribe(i,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),typeof(n==null?void 0:n.id)<"u"?await this.unsubscribeById(i,n.id,n):await this.unsubscribeByTopic(i,n)},this.isSubscribed=async i=>this.topics.includes(i)?!0:await new Promise((n,s)=>{const o=new X.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),n(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=yy&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=De.generateChildLogger(r,this.name),this.clientId=""}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let i=!1;try{i=this.getSubscription(e).topic===r}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const i=this.topicMap.get(e);await Promise.all(i.map(async n=>await this.unsubscribeById(e,n,r)))}async unsubscribeById(e,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}});try{const n=$o(i);await this.rpcUnsubscribe(e,r,n);const s=rt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}})}catch(n){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(n),n}}async rpcSubscribe(e,r){const i={method:Qn(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await en(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Et.connection_stalled)}return mi(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,i={method:Qn(r.protocol).batchSubscribe,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await en(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Et.connection_stalled)}}rpcUnsubscribe(e,r,i){const n={method:Qn(i.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,r){this.setSubscription(e,zo(cn({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,cn({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,cn({},r)),this.topicMap.set(r.topic,e),this.events.emit(ir.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:i}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(ir.deleted,zo(cn({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ir.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(ir.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);tn(r)&&this.onBatchSubscribe(r.map((i,n)=>zo(cn({},e[n]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(di.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Et.connect,async()=>{await this.onConnect()}),this.relayer.on(Et.disconnect,()=>{this.onDisconnect()}),this.events.on(ir.created,async e=>{const r=ir.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(ir.deleted,async e=>{const r=ir.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var My=Object.defineProperty,Vu=Object.getOwnPropertySymbols,Uy=Object.prototype.hasOwnProperty,Fy=Object.prototype.propertyIsEnumerable,Ku=(t,e,r)=>e in t?My(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jy=(t,e)=>{for(var r in e||(e={}))Uy.call(e,r)&&Ku(t,r,e[r]);if(Vu)for(var r of Vu(e))Fy.call(e,r)&&Ku(t,r,e[r]);return t};let ky=class extends o0{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Yt.EventEmitter,this.name=ly,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Et.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Et.error,r)},this.registerProviderListeners=()=>{this.provider.on(hr.payload,this.onPayloadHandler),this.provider.on(hr.connect,this.onConnectHandler),this.provider.on(hr.disconnect,this.onDisconnectHandler),this.provider.on(hr.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?De.generateChildLogger(e.logger,this.name):De.pino(De.getDefaultLoggerOptions({level:e.logger||cy})),this.messages=new Cy(this.logger,e.core),this.subscriber=new Ly(this,this.logger),this.publisher=new Oy(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Bu,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${zu}...`),await this.restartTransport(zu)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},fy)}get context(){return De.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,i){this.isInitialized(),await this.publisher.publish(e,r,i),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var i;this.isInitialized();let n=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"";return n||(await Promise.all([new Promise(s=>{this.subscriber.once(ir.created,o=>{o.topic===e&&s()})}),new Promise(async s=>{n=await this.subscriber.subscribe(e,r),s()})]),n)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await en(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(ir.resubscribed,()=>{r()})}),new Promise(async(r,i)=>{try{await en(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(n){i(n);return}r()})])}catch(r){this.logger.error(r);const i=r;if(!this.isConnectionStalled(i.message))throw r;this.provider.events.emit(hr.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await lu())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Em(new Im(lg({sdkVersion:dy,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:i}=e;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(e){const{topic:r,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const n=this.messages.has(r,i);return n&&this.logger.debug(`Ignoring duplicate message: ${i}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Mo(e)){if(!e.method.endsWith(uy))return;const r=e.params,{topic:i,message:n,publishedAt:s}=r.data,o={topic:i,message:n,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(jy({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else rs(e)&&this.events.emit(Et.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Et.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=No(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(hr.payload,this.onPayloadHandler),this.provider.off(hr.connect,this.onConnectHandler),this.provider.off(hr.disconnect,this.onDisconnectHandler),this.provider.off(hr.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Et.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await lu();tm(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(i=>this.logger.error(i))))})}onProviderDisconnect(){this.events.emit(Et.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},X.toMiliseconds(hy)))}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var By=Object.defineProperty,Gu=Object.getOwnPropertySymbols,zy=Object.prototype.hasOwnProperty,qy=Object.prototype.propertyIsEnumerable,Yu=(t,e,r)=>e in t?By(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zu=(t,e)=>{for(var r in e||(e={}))zy.call(e,r)&&Yu(t,r,e[r]);if(Gu)for(var r of Gu(e))qy.call(e,r)&&Yu(t,r,e[r]);return t};let os=class extends a0{constructor(e,r,i,n=Sr,s=void 0){super(e,r,i,n),this.core=e,this.logger=r,this.name=i,this.map=new Map,this.version=py,this.cached=[],this.initialized=!1,this.storagePrefix=Sr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!$t(o)?this.map.set(this.getKey(o),o):Pg(o)?this.map.set(o.id,o):Rg(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(l=>Om(a[l],o[l]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const l=Zu(Zu({},this.getData(o)),a);this.map.set(o,l),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=De.generateChildLogger(r,this.name),this.storagePrefix=n,this.getKey=s}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:i}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},Wy=class{constructor(e,r){this.core=e,this.logger=r,this.name=by,this.version=vy,this.events=new Cc,this.initialized=!1,this.storagePrefix=Sr,this.ignoredPayloadTypes=[Kr],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=Co(),n=await this.core.crypto.setSymKey(i),s=Zt(X.FIVE_MINUTES),o={protocol:ku},a={topic:n,expiry:s,relay:o,active:!1},l=Eg({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:i,relay:o});return await this.pairings.set(n,a),await this.core.relayer.subscribe(n),this.core.expirer.set(n,s),{topic:n,uri:l}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:n,symKey:s,relay:o}=bg(i.uri);if(this.pairings.keys.includes(n))throw new Error(`Pairing already exists: ${n}`);if(this.core.crypto.hasKeys(n))throw new Error(`Keychain already exists: ${n}`);const a=Zt(X.FIVE_MINUTES),l={topic:n,relay:o,expiry:a,active:!1};return await this.pairings.set(n,l),await this.core.crypto.setSymKey(s,n),await this.core.relayer.subscribe(n,{relay:o}),this.core.expirer.set(n,a),i.activatePairing&&await this.activate({topic:n}),l},this.activate=async({topic:i})=>{this.isInitialized();const n=Zt(X.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:n}),this.core.expirer.set(i,n)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:n}=i;if(this.pairings.keys.includes(n)){const s=await this.sendRequest(n,"wc_pairingPing",{}),{done:o,resolve:a,reject:l}=wi();this.events.once(Ze("pairing_ping",s),({error:h})=>{h?l(h):a()}),await o()}},this.updateExpiry=async({topic:i,expiry:n})=>{this.isInitialized(),await this.pairings.update(i,{expiry:n})},this.updateMetadata=async({topic:i,metadata:n})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:n})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:n}=i;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",rt("USER_DISCONNECTED")),await this.deletePairing(n))},this.sendRequest=async(i,n,s)=>{const o=sn(n,s),a=await this.core.crypto.encode(i,o),l=an[n].req;return this.core.history.set(i,o),this.core.relayer.publish(i,a,l),o.id},this.sendResult=async(i,n,s)=>{const o=No(i,s),a=await this.core.crypto.encode(n,o),l=await this.core.history.get(n,i),h=an[l.request.method].res;await this.core.relayer.publish(n,a,h),await this.core.history.resolve(o)},this.sendError=async(i,n,s)=>{const o=Lo(i,s),a=await this.core.crypto.encode(n,o),l=await this.core.history.get(n,i),h=an[l.request.method]?an[l.request.method].res:an.unregistered_method.res;await this.core.relayer.publish(n,a,h),await this.core.history.resolve(o)},this.deletePairing=async(i,n)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,rt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),n?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(n=>xr(n.expiry));await Promise.all(i.map(n=>this.deletePairing(n.topic)))},this.onRelayEventRequest=i=>{const{topic:n,payload:s}=i;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(n,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,s);default:return this.onUnknownRpcMethodRequest(n,s)}},this.onRelayEventResponse=async i=>{const{topic:n,payload:s}=i,o=(await this.core.history.get(n,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(n,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(i,n)=>{const{id:s}=n;try{this.isValidPing({topic:i}),await this.sendResult(s,i,!0),this.events.emit("pairing_ping",{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}},this.onPairingPingResponse=(i,n)=>{const{id:s}=n;setTimeout(()=>{ur(n)?this.events.emit(Ze("pairing_ping",s),{}):Jt(n)&&this.events.emit(Ze("pairing_ping",s),{error:n.error})},500)},this.onPairingDeleteRequest=async(i,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit("pairing_delete",{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(i,n)=>{const{id:s,method:o}=n;try{if(this.registeredMethods.includes(o))return;const a=rt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,i,a),this.logger.error(a)}catch(a){await this.sendError(s,i,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(rt("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!Nt(i)){const{message:n}=Y("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(n)}if(!Tg(i.uri)){const{message:n}=Y("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(n)}},this.isValidPing=async i=>{if(!Nt(i)){const{message:s}=Y("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidDisconnect=async i=>{if(!Nt(i)){const{message:s}=Y("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidPairingTopic=async i=>{if(!at(i,!1)){const{message:n}=Y("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(n)}if(!this.pairings.keys.includes(i)){const{message:n}=Y("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(n)}if(xr(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:n}=Y("EXPIRED",`pairing topic: ${i}`);throw new Error(n)}},this.core=e,this.logger=De.generateChildLogger(r,this.name),this.pairings=new os(this.core,this.logger,this.name,this.storagePrefix)}get context(){return De.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Et.message,async e=>{const{topic:r,message:i}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const n=await this.core.crypto.decode(r,i);try{Mo(n)?(this.core.history.set(r,n),this.onRelayEventRequest({topic:r,payload:n})):rs(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:r,payload:n}),this.core.history.delete(r,n.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Ht.expired,async e=>{const{topic:r}=eu(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},Hy=class extends i0{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Yt.EventEmitter,this.name=_y,this.version=Ey,this.cached=[],this.initialized=!1,this.storagePrefix=Sr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,n,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:n,chainId:s}),this.records.has(n.id))return;const o={id:n.id,topic:i,request:{method:n.method,params:n.params||null},chainId:s,expiry:Zt(X.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(nr.created,o)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const n=await this.getRecord(i.id);typeof n.response>"u"&&(n.response=Jt(i)?{error:i.error}:{result:i.result},this.records.set(n.id,n),this.events.emit(nr.updated,n))},this.get=async(i,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:n}),await this.getRecord(n)),this.delete=(i,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach(s=>{if(s.topic===i){if(typeof n<"u"&&s.id!==n)return;this.records.delete(s.id),this.events.emit(nr.deleted,s)}})},this.exists=async(i,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===i:!1),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const i={topic:r.topic,request:sn(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:i}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(nr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(nr.created,e=>{const r=nr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(nr.updated,e=>{const r=nr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(nr.deleted,e=>{const r=nr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(di.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{X.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},Vy=class extends l0{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Yt.EventEmitter,this.name=xy,this.version=Sy,this.cached=[],this.initialized=!1,this.storagePrefix=Sr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const n=this.formatTarget(i);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(i,n)=>{this.isInitialized();const s=this.formatTarget(i),o={target:s,expiry:n};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Ht.created,{target:s,expiration:o})},this.get=i=>{this.isInitialized();const n=this.formatTarget(i);return this.getExpiration(n)},this.del=i=>{if(this.isInitialized(),this.has(i)){const n=this.formatTarget(i),s=this.getExpiration(n);this.expirations.delete(n),this.events.emit(Ht.deleted,{target:n,expiration:s})}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return ug(e);if(typeof e=="number")return hg(e);const{message:r}=Y("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ht.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:i}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return r}checkExpiry(e,r){const{expiry:i}=r;X.toMiliseconds(i)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Ht.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(di.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Ht.created,e=>{const r=Ht.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ht.expired,e=>{const r=Ht.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ht.deleted,e=>{const r=Ht.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},Ky=class extends u0{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Bo,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async i=>{if(this.verifyDisabled||Jn()||!Qi())return;const n=(i==null?void 0:i.verifyUrl)||ss;this.verifyUrl!==n&&this.removeIframe(),this.verifyUrl=n;try{await this.createIframe()}catch(s){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=qu;try{await this.createIframe()}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s),this.verifyDisabled=!0}}},this.register=async i=>{this.initialized?this.sendPost(i.attestationId):(this.addToQueue(i.attestationId),await this.init())},this.resolve=async i=>{if(this.isDevEnv)return"";const n=(i==null?void 0:i.verifyUrl)||ss;let s="";try{s=await this.fetchAttestation(i.attestationId,n)}catch(o){this.logger.warn(`failed to resolve attestation: ${i.attestationId} from url: ${n}`),this.logger.warn(o),s=await this.fetchAttestation(i.attestationId,qu)}return s},this.fetchAttestation=async(i,n)=>{var s;this.logger.info(`resolving attestation: ${i} from url: ${n}`);const o=this.startAbortTimer(X.ONE_SECOND*2),a=await fetch(`${n}/attestation/${i}`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?(s=await a.json())==null?void 0:s.origin:""},this.addToQueue=i=>{this.queue.push(i)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(i=>this.sendPost(i)),this.queue=[])},this.sendPost=i=>{var n;try{if(!this.iframe)return;(n=this.iframe.contentWindow)==null||n.postMessage(i,"*"),this.logger.info(`postMessage sent: ${i} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let i;const n=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",n),i())};await Promise.race([new Promise(s=>{if(document.getElementById(Bo))return s();window.addEventListener("message",n);const o=document.createElement("iframe");o.id=Bo,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,i=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",n),o("verify iframe load timeout")},X.toMiliseconds(X.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=De.generateChildLogger(r,this.name),this.verifyUrl=ss,this.abortController=new AbortController,this.isDevEnv=Oo()&&process.env.IS_VITEST}get context(){return De.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),X.toMiliseconds(e))}};var Gy=Object.defineProperty,Ju=Object.getOwnPropertySymbols,Yy=Object.prototype.hasOwnProperty,Zy=Object.prototype.propertyIsEnumerable,Qu=(t,e,r)=>e in t?Gy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xu=(t,e)=>{for(var r in e||(e={}))Yy.call(e,r)&&Qu(t,r,e[r]);if(Ju)for(var r of Ju(e))Zy.call(e,r)&&Qu(t,r,e[r]);return t};const Jy=class Md extends r0{constructor(e){super(e),this.protocol=Fu,this.version=Jw,this.name=ko,this.events=new Yt.EventEmitter,this.initialized=!1,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Bu;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:De.pino(De.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Qw.logger}));this.logger=De.generateChildLogger(r,this.name),this.heartbeat=new di.HeartBeat,this.crypto=new Iy(this,this.logger,e==null?void 0:e.keychain),this.history=new Hy(this,this.logger),this.expirer=new Vy(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new kf(Xu(Xu({},Xw),e==null?void 0:e.storageOptions)),this.relayer=new ky({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Wy(this,this.logger),this.verify=new Ky(this.projectId||"",this.logger)}static async init(e){const r=new Md(e);await r.initialize();const i=await r.crypto.getClientId();return await r.storage.setItem(gy,i),r}get context(){return De.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},eh="wc",th=2,rh="client",qo=`${eh}@${th}:${rh}:`,Wo={name:rh,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},ih="WALLETCONNECT_DEEPLINK_CHOICE",Qy="proposal",Xy="Proposal expired",e2="session",as=X.SEVEN_DAYS,t2="engine",ln={wc_sessionPropose:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1104},res:{ttl:X.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1106},res:{ttl:X.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1112},res:{ttl:X.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1115}}},Ho={min:X.FIVE_MINUTES,max:X.SEVEN_DAYS},dr={idle:"IDLE",active:"ACTIVE"},r2="request",i2=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var n2=Object.defineProperty,s2=Object.defineProperties,o2=Object.getOwnPropertyDescriptors,nh=Object.getOwnPropertySymbols,a2=Object.prototype.hasOwnProperty,c2=Object.prototype.propertyIsEnumerable,sh=(t,e,r)=>e in t?n2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lt=(t,e)=>{for(var r in e||(e={}))a2.call(e,r)&&sh(t,r,e[r]);if(nh)for(var r of nh(e))c2.call(e,r)&&sh(t,r,e[r]);return t},un=(t,e)=>s2(t,o2(e));class l2 extends d0{constructor(e){super(e),this.name=t2,this.events=new Cc,this.initialized=!1,this.ignoredPayloadTypes=[Kr],this.requestQueue={state:dr.idle,queue:[]},this.sessionRequestQueue={state:dr.idle,queue:[]},this.requestQueueDelay=X.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ln)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},X.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const i=un(Lt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:l}=i;let h=n,d,b=!1;if(h&&(b=this.client.core.pairing.pairings.get(h).active),!h||!b){const{topic:x,uri:g}=await this.client.core.pairing.create();h=x,d=g}const m=await this.client.core.crypto.generateKeyPair(),w=Lt({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:ku}],proposer:{publicKey:m,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:_,resolve:S,done:A}=wi(X.FIVE_MINUTES,Xy);if(this.events.once(Ze("session_connect"),async({error:x,session:g})=>{if(x)_(x);else if(g){g.self.publicKey=m;const E=un(Lt({},g),{requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces});await this.client.session.set(g.topic,E),await this.setExpiry(g.topic,g.expiry),h&&await this.client.core.pairing.updateMetadata({topic:h,metadata:g.peer.metadata}),S(E)}}),!h){const{message:x}=Y("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(x)}const T=await this.sendRequest({topic:h,method:"wc_sessionPropose",params:w}),v=Zt(X.FIVE_MINUTES);return await this.setProposal(T,Lt({id:T,expiry:v},w)),{uri:d,approval:A}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:i,relayProtocol:n,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(i);let{pairingTopic:l,proposer:h,requiredNamespaces:d,optionalNamespaces:b}=a;l=l||"",rn(d)||(d=Ig(s,"approve()"));const m=await this.client.core.crypto.generateKeyPair(),w=h.publicKey,_=await this.client.core.crypto.generateSharedKey(m,w);l&&i&&(await this.client.core.pairing.updateMetadata({topic:l,metadata:h.metadata}),await this.sendResult({id:i,topic:l,result:{relay:{protocol:n??"irn"},responderPublicKey:m}}),await this.client.proposal.delete(i,rt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:l}));const S=Lt({relay:{protocol:n??"irn"},namespaces:s,requiredNamespaces:d,optionalNamespaces:b,pairingTopic:l,controller:{publicKey:m,metadata:this.client.metadata},expiry:Zt(as)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(_),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0});const A=un(Lt({},S),{topic:_,pairingTopic:l,acknowledged:!1,self:S.controller,peer:{publicKey:h.publicKey,metadata:h.metadata},controller:m});return await this.client.session.set(_,A),await this.setExpiry(_,Zt(as)),{topic:_,acknowledged:()=>new Promise(T=>setTimeout(()=>T(this.client.session.get(_)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:i,reason:n}=r,{pairingTopic:s}=this.client.proposal.get(i);s&&(await this.sendError(i,s,n),await this.client.proposal.delete(i,rt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:i,namespaces:n}=r,s=await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:n}}),{done:o,resolve:a,reject:l}=wi();return this.events.once(Ze("session_update",s),({error:h})=>{h?l(h):a()}),await this.client.session.update(i,{namespaces:n}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:i}=r,n=await this.sendRequest({topic:i,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=wi();return this.events.once(Ze("session_extend",n),({error:l})=>{l?a(l):o()}),await this.setExpiry(i,Zt(as)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:i,request:n,topic:s,expiry:o}=r,a=Ro(),{done:l,resolve:h,reject:d}=wi(o);return this.events.once(Ze("session_request",a),({error:b,result:m})=>{b?d(b):h(m)}),await Promise.all([new Promise(async b=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:n,chainId:i},expiry:o,throwOnFailedPublish:!0}).catch(m=>d(m)),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:a}),b()}),new Promise(async b=>{const m=await this.client.core.storage.getItem(ih);dg({id:a,topic:s,wcDeepLink:m}),b()}),l()]).then(b=>b[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:i,response:n}=r,{id:s}=n;ur(n)?await this.sendResult({id:s,topic:i,result:n.result,throwOnFailedPublish:!0}):Jt(n)&&await this.sendError(s,i,n.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:i}=r;if(this.client.session.keys.includes(i)){const n=await this.sendRequest({topic:i,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=wi();this.events.once(Ze("session_ping",n),({error:l})=>{l?a(l):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:i,event:n,chainId:s}=r;await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:n,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.client.session.keys.includes(i)?(await this.sendRequest({topic:i,method:"wc_sessionDelete",params:rt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(i)):await this.client.core.pairing.disconnect({topic:i})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(i=>$g(i,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const i=this.client.core.pairing.pairings.get(r.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==i.topic});if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async(r,i)=>{const{self:n}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,rt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(n.publicKey)&&await this.client.core.crypto.deleteKeyPair(n.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),i||this.client.core.expirer.del(r),this.client.core.storage.removeItem(ih).catch(s=>this.client.logger.warn(s))},this.deleteProposal=async(r,i)=>{await Promise.all([this.client.proposal.delete(r,rt("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,i,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),n&&(this.sessionRequestQueue.state=dr.idle)},this.setExpiry=async(r,i)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:i}),this.client.core.expirer.set(r,i)},this.setProposal=async(r,i)=>{await this.client.proposal.set(r,i),this.client.core.expirer.set(r,i.expiry)},this.setPendingSessionRequest=async r=>{const i=ln.wc_sessionRequest.req.ttl,{id:n,topic:s,params:o}=r;await this.client.pendingRequest.set(n,{id:n,topic:s,params:o}),i&&this.client.core.expirer.set(n,Zt(i))},this.sendRequest=async r=>{const{topic:i,method:n,params:s,expiry:o,relayRpcId:a,clientRpcId:l,throwOnFailedPublish:h}=r,d=sn(n,s,l);if(Qi()&&i2.includes(n)){const w=mi(JSON.stringify(d));this.client.core.verify.register({attestationId:w})}const b=await this.client.core.crypto.encode(i,d),m=ln[n].req;return o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(i,d),h?(m.internal=un(Lt({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,b,m)):this.client.core.relayer.publish(i,b,m).catch(w=>this.client.logger.error(w)),d.id},this.sendResult=async r=>{const{id:i,topic:n,result:s,throwOnFailedPublish:o}=r,a=No(i,s),l=await this.client.core.crypto.encode(n,a),h=await this.client.core.history.get(n,i),d=ln[h.request.method].res;o?(d.internal=un(Lt({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,l,d)):this.client.core.relayer.publish(n,l,d).catch(b=>this.client.logger.error(b)),await this.client.core.history.resolve(a)},this.sendError=async(r,i,n)=>{const s=Lo(r,n),o=await this.client.core.crypto.encode(i,s),a=await this.client.core.history.get(i,r),l=ln[a.request.method].res;this.client.core.relayer.publish(i,o,l),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],i=[];this.client.session.getAll().forEach(n=>{xr(n.expiry)&&r.push(n.topic)}),this.client.proposal.getAll().forEach(n=>{xr(n.expiry)&&i.push(n.id)}),await Promise.all([...r.map(n=>this.deleteSession(n)),...i.map(n=>this.deleteProposal(n))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===dr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=dr.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(i=>setTimeout(i,300))}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=dr.idle},this.processRequest=r=>{const{topic:i,payload:n}=r,s=n.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(i,n);case"wc_sessionSettle":return this.onSessionSettleRequest(i,n);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,n);case"wc_sessionExtend":return this.onSessionExtendRequest(i,n);case"wc_sessionPing":return this.onSessionPingRequest(i,n);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,n);case"wc_sessionRequest":return this.onSessionRequest(i,n);case"wc_sessionEvent":return this.onSessionEventRequest(i,n);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:i,payload:n}=r,s=(await this.client.core.history.get(i,n.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(i,n);case"wc_sessionSettle":return this.onSessionSettleResponse(i,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,n);case"wc_sessionExtend":return this.onSessionExtendResponse(i,n);case"wc_sessionPing":return this.onSessionPingResponse(i,n);case"wc_sessionRequest":return this.onSessionRequestResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:i}=r,{message:n}=Y("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.onSessionProposeRequest=async(r,i)=>{const{params:n,id:s}=i;try{this.isValidConnect(Lt({},i.params));const o=Zt(X.FIVE_MINUTES),a=Lt({id:s,pairingTopic:r,expiry:o},n);await this.setProposal(s,a);const l=mi(JSON.stringify(i)),h=await this.getVerifyContext(l,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:h})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,i)=>{const{id:n}=i;if(ur(i)){const{result:s}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const l=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const h=await this.client.core.crypto.generateSharedKey(a,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:h});const d=await this.client.core.relayer.subscribe(h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else Jt(i)&&(await this.client.proposal.delete(n,rt("USER_DISCONNECTED")),this.events.emit(Ze("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(r,i)=>{const{id:n,params:s}=i;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:l,namespaces:h,requiredNamespaces:d,optionalNamespaces:b,sessionProperties:m,pairingTopic:w}=i.params,_=Lt({topic:r,relay:o,expiry:l,namespaces:h,acknowledged:!0,pairingTopic:w,requiredNamespaces:d,optionalNamespaces:b,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},m&&{sessionProperties:m});await this.sendResult({id:i.id,topic:r,result:!0}),this.events.emit(Ze("session_connect"),{session:_}),this.cleanupDuplicatePairings(_)}catch(o){await this.sendError(n,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,i)=>{const{id:n}=i;ur(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ze("session_approve",n),{})):Jt(i)&&(await this.client.session.delete(r,rt("USER_DISCONNECTED")),this.events.emit(Ze("session_approve",n),{error:i.error}))},this.onSessionUpdateRequest=async(r,i)=>{const{params:n,id:s}=i;try{const o=`${r}_session_update`,a=ts.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(Lt({topic:r},n)),await this.client.session.update(r,{namespaces:n.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:n}),ts.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,i)=>{const{id:n}=i;ur(i)?this.events.emit(Ze("session_update",n),{}):Jt(i)&&this.events.emit(Ze("session_update",n),{error:i.error})},this.onSessionExtendRequest=async(r,i)=>{const{id:n}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Zt(as)),await this.sendResult({id:n,topic:r,result:!0}),this.client.events.emit("session_extend",{id:n,topic:r})}catch(s){await this.sendError(n,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,i)=>{const{id:n}=i;ur(i)?this.events.emit(Ze("session_extend",n),{}):Jt(i)&&this.events.emit(Ze("session_extend",n),{error:i.error})},this.onSessionPingRequest=async(r,i)=>{const{id:n}=i;try{this.isValidPing({topic:r}),await this.sendResult({id:n,topic:r,result:!0}),this.client.events.emit("session_ping",{id:n,topic:r})}catch(s){await this.sendError(n,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,i)=>{const{id:n}=i;setTimeout(()=>{ur(i)?this.events.emit(Ze("session_ping",n),{}):Jt(i)&&this.events.emit(Ze("session_ping",n),{error:i.error})},500)},this.onSessionDeleteRequest=async(r,i)=>{const{id:n}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Et.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult({id:n,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:n,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,i)=>{const{id:n,params:s}=i;try{this.isValidRequest(Lt({topic:r},s)),await this.setPendingSessionRequest({id:n,topic:r,params:s}),this.addSessionRequestToSessionRequestQueue({id:n,topic:r,params:s}),await this.processSessionRequestQueue()}catch(o){await this.sendError(n,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,i)=>{const{id:n}=i;ur(i)?this.events.emit(Ze("session_request",n),{result:i.result}):Jt(i)&&this.events.emit(Ze("session_request",n),{error:i.error})},this.onSessionEventRequest=async(r,i)=>{const{id:n,params:s}=i;try{const o=`${r}_session_event_${s.event.name}`,a=ts.get(o);if(a&&this.isRequestOutOfSync(a,n)){this.client.logger.info(`Discarding out of sync request - ${n}`);return}this.isValidEmit(Lt({topic:r},s)),this.client.events.emit("session_event",{id:n,topic:r,params:s}),ts.set(o,n)}catch(o){await this.sendError(n,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=dr.idle,this.processSessionRequestQueue()},X.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===dr.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:i,topic:n,params:s}=r,o=mi(JSON.stringify(sn("wc_sessionRequest",s,i))),a=this.client.session.get(n),l=await this.getVerifyContext(o,a.peer.metadata);this.sessionRequestQueue.state=dr.active,this.client.events.emit("session_request",{id:i,topic:n,params:s,verifyContext:l})}catch(i){this.client.logger.error(i)}},this.isValidConnect=async r=>{if(!Nt(r)){const{message:l}=Y("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if($t(i)||await this.isValidPairingTopic(i),!Bg(a,!0)){const{message:l}=Y("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(l)}!$t(n)&&rn(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!$t(s)&&rn(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),$t(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,i)=>{const n=kg(r,"connect()",i);if(n)throw new Error(n.message)},this.isValidApprove=async r=>{if(!Nt(r))throw new Error(Y("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:i,namespaces:n,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(i);const a=this.client.proposal.get(i),l=es(n,"approve()");if(l)throw new Error(l.message);const h=au(a.requiredNamespaces,n,"approve()");if(h)throw new Error(h.message);if(!at(s,!0)){const{message:d}=Y("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}$t(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Nt(r)){const{message:s}=Y("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:i,reason:n}=r;if(await this.isValidProposalId(i),!qg(n)){const{message:s}=Y("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Nt(r)){const{message:h}=Y("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(h)}const{relay:i,controller:n,namespaces:s,expiry:o}=r;if(!su(i)){const{message:h}=Y("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const a=Ng(n,"onSessionSettleRequest()");if(a)throw new Error(a.message);const l=es(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(xr(o)){const{message:h}=Y("EXPIRED","onSessionSettleRequest()");throw new Error(h)}},this.isValidUpdate=async r=>{if(!Nt(r)){const{message:l}=Y("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(l)}const{topic:i,namespaces:n}=r;await this.isValidSessionTopic(i);const s=this.client.session.get(i),o=es(n,"update()");if(o)throw new Error(o.message);const a=au(s.requiredNamespaces,n,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Nt(r)){const{message:n}=Y("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionTopic(i)},this.isValidRequest=async r=>{if(!Nt(r)){const{message:l}=Y("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(l)}const{topic:i,request:n,chainId:s,expiry:o}=r;await this.isValidSessionTopic(i);const{namespaces:a}=this.client.session.get(i);if(!ou(a,s)){const{message:l}=Y("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(l)}if(!Wg(n)){const{message:l}=Y("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(l)}if(!Kg(a,s,n.method)){const{message:l}=Y("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(l)}if(o&&!Jg(o,Ho)){const{message:l}=Y("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Ho.min} and ${Ho.max}`);throw new Error(l)}},this.isValidRespond=async r=>{if(!Nt(r)){const{message:s}=Y("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:i,response:n}=r;if(await this.isValidSessionTopic(i),!Hg(n)){const{message:s}=Y("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Nt(r)){const{message:n}=Y("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async r=>{if(!Nt(r)){const{message:a}=Y("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:i,event:n,chainId:s}=r;await this.isValidSessionTopic(i);const{namespaces:o}=this.client.session.get(i);if(!ou(o,s)){const{message:a}=Y("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!Vg(n)){const{message:a}=Y("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}if(!Gg(o,s,n.name)){const{message:a}=Y("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Nt(r)){const{message:n}=Y("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(r,i)=>{const n={verified:{verifyUrl:i.verifyUrl||ss,validation:"UNKNOWN",origin:i.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:i.verifyUrl});s&&(n.verified.origin=s,n.verified.validation=s===new URL(i.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(n)}`),n},this.validateSessionProps=(r,i)=>{Object.values(r).forEach(n=>{if(!at(n,!1)){const{message:s}=Y("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(n)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Et.message,async e=>{const{topic:r,message:i}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(i)))return;const n=await this.client.core.crypto.decode(r,i);try{Mo(n)?(this.client.core.history.set(r,n),this.onRelayEventRequest({topic:r,payload:n})):rs(n)?(await this.client.core.history.resolve(n),await this.onRelayEventResponse({topic:r,payload:n}),this.client.core.history.delete(r,n.id)):this.onRelayEventUnknownPayload({topic:r,payload:n})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(Ht.expired,async e=>{const{topic:r,id:i}=eu(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,Y("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}isValidPairingTopic(e){if(!at(e,!1)){const{message:r}=Y("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Y("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(xr(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Y("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!at(e,!1)){const{message:r}=Y("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=Y("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(xr(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=Y("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(at(e,!1)){const{message:r}=Y("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Y("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!zg(e)){const{message:r}=Y("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Y("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(xr(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=Y("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class u2 extends os{constructor(e,r){super(e,r,Qy,qo),this.core=e,this.logger=r}}class h2 extends os{constructor(e,r){super(e,r,e2,qo),this.core=e,this.logger=r}}class d2 extends os{constructor(e,r){super(e,r,r2,qo,i=>i.id),this.core=e,this.logger=r}}let f2=class Ud extends h0{constructor(e){super(e),this.protocol=eh,this.version=th,this.name=Wo.name,this.events=new Yt.EventEmitter,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(n){throw this.logger.error(n.message),n}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(n){throw this.logger.error(n.message),n}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(n){throw this.logger.error(n.message),n}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(n){throw this.logger.error(n.message),n}},this.update=async i=>{try{return await this.engine.update(i)}catch(n){throw this.logger.error(n.message),n}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(n){throw this.logger.error(n.message),n}},this.request=async i=>{try{return await this.engine.request(i)}catch(n){throw this.logger.error(n.message),n}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(n){throw this.logger.error(n.message),n}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(n){throw this.logger.error(n.message),n}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(n){throw this.logger.error(n.message),n}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(n){throw this.logger.error(n.message),n}},this.find=i=>{try{return this.engine.find(i)}catch(n){throw this.logger.error(n.message),n}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=(e==null?void 0:e.name)||Wo.name,this.metadata=(e==null?void 0:e.metadata)||sg();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:De.pino(De.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Wo.logger}));this.core=(e==null?void 0:e.core)||new Jy(e),this.logger=De.generateChildLogger(r,this.name),this.session=new h2(this.core,this.logger),this.proposal=new u2(this.core,this.logger),this.pendingRequest=new d2(this.core,this.logger),this.engine=new l2(this)}static async init(e){const r=new Ud(e);return await r.initialize(),r}get context(){return De.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var p2=Object.defineProperty,g2=Object.defineProperties,m2=Object.getOwnPropertyDescriptors,oh=Object.getOwnPropertySymbols,w2=Object.prototype.hasOwnProperty,y2=Object.prototype.propertyIsEnumerable,ah=(t,e,r)=>e in t?p2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b2=(t,e)=>{for(var r in e||(e={}))w2.call(e,r)&&ah(t,r,e[r]);if(oh)for(var r of oh(e))y2.call(e,r)&&ah(t,r,e[r]);return t},v2=(t,e)=>g2(t,m2(e)),Vo=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Fe=(t,e,r)=>(Vo(t,e,"read from private field"),r?r.call(t):e.get(t)),Yr=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},cs=(t,e,r,i)=>(Vo(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),xt=(t,e,r)=>(Vo(t,e,"access private method"),r),Zr,bi,hn,ct,Ko,ch,St,At,Go,lh;let _2=class{constructor(e){Yr(this,Ko),Yr(this,St),Yr(this,Go),Yr(this,Zr,void 0),Yr(this,bi,void 0),Yr(this,hn,void 0),Yr(this,ct,void 0),cs(this,Zr,e),cs(this,bi,xt(this,Ko,ch).call(this)),xt(this,St,At).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:i}=e;return new Promise(async(n,s)=>{await xt(this,St,At).call(this);const o=Fe(this,bi).subscribeModal(h=>{h.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:l}=await Fe(this,ct).connect(e);if(a){const h=new Set;r&&Object.values(r).forEach(({chains:d})=>{d&&d.forEach(b=>h.add(b))}),i&&Object.values(i).forEach(({chains:d})=>{d&&d.forEach(b=>h.add(b))}),await Fe(this,bi).openModal({uri:a,chains:Array.from(h)})}try{const h=await l();n(h)}catch(h){s(h)}finally{o(),Fe(this,bi).closeModal()}})}async disconnect(e){await xt(this,St,At).call(this),await Fe(this,ct).disconnect(e)}async request(e){return await xt(this,St,At).call(this),await Fe(this,ct).request(e)}async getSessions(){return await xt(this,St,At).call(this),Fe(this,ct).session.getAll()}async getSession(){return await xt(this,St,At).call(this),Fe(this,ct).session.getAll().at(-1)}async onSessionEvent(e){await xt(this,St,At).call(this),Fe(this,ct).on("session_event",e)}async offSessionEvent(e){await xt(this,St,At).call(this),Fe(this,ct).off("session_event",e)}async onSessionUpdate(e){await xt(this,St,At).call(this),Fe(this,ct).on("session_update",e)}async offSessionUpdate(e){await xt(this,St,At).call(this),Fe(this,ct).off("session_update",e)}async onSessionDelete(e){await xt(this,St,At).call(this),Fe(this,ct).on("session_delete",e)}async offSessionDelete(e){await xt(this,St,At).call(this),Fe(this,ct).off("session_delete",e)}async onSessionExpire(e){await xt(this,St,At).call(this),Fe(this,ct).on("session_expire",e)}async offSessionExpire(e){await xt(this,St,At).call(this),Fe(this,ct).off("session_expire",e)}};Zr=new WeakMap,bi=new WeakMap,hn=new WeakMap,ct=new WeakMap,Ko=new WeakSet,ch=function(){const{modalOptions:t,projectId:e}=Fe(this,Zr);return new of(v2(b2({},t),{projectId:e}))},St=new WeakSet,At=async function(){return Fe(this,ct)?!0:(!Fe(this,hn)&&typeof window<"u"&&cs(this,hn,xt(this,Go,lh).call(this)),Fe(this,hn))},Go=new WeakSet,lh=async function(){cs(this,ct,await f2.init({metadata:Fe(this,Zr).metadata,projectId:Fe(this,Zr).projectId,relayUrl:Fe(this,Zr).relayUrl}));const t=await Fe(this,ct).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};const Yo=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent","getEvents","createSharedState","importSharedState","requestSignature"],ls=["aleo:1"],Zo=["chainChanged","accountSelected","accountSynced"],uh="f0aaeffe71b636da453fce042d79d723",Jo="https://walletconnect.puzzle.online/",hh={standaloneChains:ls,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:Jo}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:Jo}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},E2={requiredNamespaces:{aleo:{methods:Yo,chains:ls,events:Zo}}};function x2(t){return{all:t=t||new Map,on:function(e,r){var i=t.get(e);i?i.push(r):t.set(e,[r])},off:function(e,r){var i=t.get(e);i&&(r?i.splice(i.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var i=t.get(e);i&&i.slice().map(function(n){n(r)}),(i=t.get("*"))&&i.slice().map(function(n){n(e,r)})}}}const dn=x2();let fn;function S2(t){fn=new _2({projectId:uh,metadata:{name:t.dAppName,description:t.dAppDescription,url:t.dAppUrl,icons:[t.dAppIconURL]},modalOptions:{...hh}}),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")}async function Be(){return new Promise(t=>{if(fn)t(fn);else{const e=setInterval(()=>{fn&&(clearInterval(e),t(fn))},200)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}function us(t){st.useEffect(()=>(Be().then(e=>{e.onSessionDelete(t)}),()=>{Be().then(e=>{e.offSessionDelete(t)})}),[t])}function dh(t){st.useEffect(()=>(Be().then(e=>{e.onSessionExpire(t)}),()=>{Be().then(e=>{e.offSessionExpire(t)})}),[t])}function Qo(t){st.useEffect(()=>(Be().then(e=>{e.onSessionUpdate(t)}),()=>{Be().then(e=>{e.offSessionUpdate(t)})}),[t])}function Xo(){const[t,e]=st.useState(void 0);return us(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),Qo(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:i}=r.params,n={...t,namespaces:i};e(n)}}),dh(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),st.useEffect(()=>{async function r(){const n=await(await Be()).getSession();e(n)}return r(),dn.on("session_change",r),()=>{dn.off("session_change",r)}},[]),t}function ea(t){st.useEffect(()=>(Be().then(e=>{e.onSessionEvent(t)}),()=>{Be().then(e=>{e.offSessionEvent(t)})}),[t])}const ta=t=>t.length<5*2?t:`${t.slice(0,5+5)}...${t.slice(t.length-5,t.length)}`,D2=()=>{const t="aleo:1",[e,r]=st.useState(void 0),[i,n]=st.useState(void 0),[s,o]=st.useState(!0),a=Xo(),l=async()=>{if(console.log("sdk request"),!a){console.log("no session"),o(!1);return}try{o(!0);const d=await(await Be()).request({topic:a==null?void 0:a.topic,chainId:t,request:{id:1,jsonrpc:"2.0",method:"getSelectedAccount"}});r(d.account),n(d.error)}catch(h){n(h.message)}finally{o(!1)}};return ea(({params:h,topic:d})=>{if(h.event.name==="accountSelected"&&a&&a.topic===d){const m=h.event.data,w=h.chainId.split(":")[0],_=h.chainId.split(":")[1];r({network:w,chainId:_,address:m,shortenedAddress:ta(m)})}}),Qo(({params:h,topic:d})=>{const b=h.event.data,m=h.chainId.split(":")[0],w=h.chainId.split(":")[1];r({network:m,chainId:w,address:b,shortenedAddress:ta(b)})}),us(({params:h,topic:d})=>{r(void 0)}),st.useEffect(()=>{a&&s&&l(),a||(r(void 0),o(!1))},[a]),{account:e,error:i,loading:s}},I2=()=>{const t="aleo:1",[e,r]=st.useState(void 0),[i,n]=st.useState(void 0),[s,o]=st.useState(!1),a=Xo(),l=async()=>{try{o(!0);const d=await(await Be()).request({topic:a==null?void 0:a.topic,chainId:t,request:{id:1,jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0}}});r(d.balances),n(d.error)}catch(h){n(h.message)}finally{o(!1)}};return ea(({params:h,topic:d})=>{h.event.name==="accountSynced"&&a&&a.topic===d&&!s&&l()}),us(({params:h,topic:d})=>{r(void 0)}),st.useEffect(()=>{a&&!s&&l(),a||r(void 0)},[a]),{balances:e,error:i,loading:s}},C2=async()=>{const t=await Be(),e=await t.getSession(),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e==null?void 0:e.topic,chainId:r,request:{id:1,jsonrpc:"2.0",method:"getSelectedAccount"}})}catch(i){const n=i.message;return console.error("getAccount error",n),{error:n}}},O2=async()=>{const t=await Be(),e=await t.getSession(),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e==null?void 0:e.topic,chainId:r,request:{id:1,jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0}}})}catch(i){const n=i.message;return console.error("getBalance error",n),{error:n}}},$2=async()=>{const t=await Be();if(!t)throw new Error("call setConnection() first!");try{const e=await t.connect({requiredNamespaces:{aleo:{methods:Yo,chains:ls,events:Zo}}});return dn.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),e}catch(e){console.error("connect error",e.message)}},A2=async t=>{const e=await Be(),r=await(e==null?void 0:e.getSession()),i="aleo:1";if(!r||!i||!e)return{error:"no session, chainId, or connection"};const n=t==null?void 0:t.inputs.map(s=>typeof s=="string"?s:s.plaintext);try{return await e.request({topic:r.topic,chainId:i,request:{id:1,jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:n}}})}catch(s){const o=s.message;return console.error("createEvent error",o),{error:o}}},T2=async()=>{const t=await Be(),e=await(t==null?void 0:t.getSession()),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e.topic,chainId:r,request:{id:1,jsonrpc:"2.0",method:"createSharedState",params:{}}})}catch(i){const n=i.message;return console.error("createSharedState error",n),{error:n}}},P2=async t=>{const e=await Be(),r=await(e==null?void 0:e.getSession()),i="aleo:1";if(!r||!i||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r.topic,chainId:i,request:{id:1,jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}})}catch(n){return console.error("decrypt error",n.message),{error:n.message}}},R2=async()=>{const t=await Be(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session, or connection"};try{return await t.disconnect({reason:rt("USER_DISCONNECTED"),topic:e.topic}),dn.emit("session_change"),{}}catch(r){const i=r.message;return console.error("error disconnecting",i),{error:i}}},N2=async t=>{const e=await Be(),r=await(e==null?void 0:e.getSession()),i="aleo:1";if(!r||!i||!e)return{events:void 0,error:"no session, chainId, or connection"};(t==null?void 0:t.programId)===""&&(t.programId=void 0);const n=async(s=0)=>await e.request({topic:(r==null?void 0:r.topic)??"",chainId:i,request:{id:1,jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:s}}});try{return await n()}catch(s){const o=s.message;return console.error("getEvents error",o),{error:o}}},L2=async t=>{const e=await Be(),r=await(e==null?void 0:e.getSession()),i="aleo:1";if(!r||!i||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:(r==null?void 0:r.topic)??"",chainId:i,request:{id:1,jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}})}catch(n){const s=n.message;return console.error("importSharedState error",s),{error:s}}},M2=async({address:t,filter:e,page:r=0})=>{const i=await Be(),n=await(i==null?void 0:i.getSession()),s="aleo:1";if(!n||!s||!i)return{error:"no session, chainId, or connection"};(e==null?void 0:e.programId)===""&&(e.programId=void 0);const o=async(a=0)=>await i.request({topic:n.topic,chainId:s,request:{id:1,jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:a}}});try{return await o()}catch(a){const l=a.message;return console.error("getRecords error",l),{error:l}}},U2=async(t,e)=>{const r=await Be(),i=await(r==null?void 0:r.getSession()),n="aleo:1";if(!i||!n||!r)return{error:"no session, chainId, or connection"};try{return await r.request({topic:i.topic,chainId:n,request:{id:1,jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}})}catch(s){const o=s.message;return console.error("signature error",o),{error:o}}},F2=50,j2=["wc@2:client:0.3//proposal","wc@2:core:0.3//subscription","wc@2:core:0.3//keychain","wc@2:core:0.3//messages","wc@2:core:0.3//history","wc@2:client:0.3//session","wc@2:core:0.3//expirer","WCM_WALLETCONNECT_CLIENT_ID","wc @2: core: 0.3//pairing","debug"],fh=Fd.version,k2=localStorage.getItem("puzzle-sdk-version");fh!==k2&&(j2.forEach(t=>{localStorage.removeItem(t)}),localStorage.setItem("puzzle-sdk-version",fh));/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const hs=window,ra=hs.ShadowRoot&&(hs.ShadyCSS===void 0||hs.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ia=Symbol(),ph=new WeakMap;let gh=class{constructor(e,r,i){if(this._$cssResult$=!0,i!==ia)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(ra&&e===void 0){const i=r!==void 0&&r.length===1;i&&(e=ph.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&ph.set(r,e))}return e}toString(){return this.cssText}};const B2=t=>new gh(typeof t=="string"?t:t+"",void 0,ia),$e=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((i,n,s)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1],t[0]);return new gh(r,t,ia)},z2=(t,e)=>{ra?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const i=document.createElement("style"),n=hs.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=r.cssText,t.appendChild(i)})},mh=ra?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const i of e.cssRules)r+=i.cssText;return B2(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var na;const ds=window,wh=ds.trustedTypes,q2=wh?wh.emptyScript:"",yh=ds.reactiveElementPolyfillSupport,sa={toAttribute(t,e){switch(e){case Boolean:t=t?q2:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},bh=(t,e)=>e!==t&&(e==e||t==t),oa={attribute:!0,type:String,converter:sa,reflect:!1,hasChanged:bh},aa="finalized";let vi=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,i)=>{const n=this._$Ep(i,r);n!==void 0&&(this._$Ev.set(n,i),e.push(n))}),e}static createProperty(e,r=oa){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,r);n!==void 0&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,r,i){return{get(){return this[r]},set(n){const s=this[e];this[r]=n,this.requestUpdate(e,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||oa}static finalize(){if(this.hasOwnProperty(aa))return!1;this[aa]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,i=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const n of i)this.createProperty(n,r[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const n of i)r.unshift(mh(n))}else e!==void 0&&r.push(mh(e));return r}static _$Ep(e,r){const i=r.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,i;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return z2(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var i;return(i=r.hostConnected)===null||i===void 0?void 0:i.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var i;return(i=r.hostDisconnected)===null||i===void 0?void 0:i.call(r)})}attributeChangedCallback(e,r,i){this._$AK(e,i)}_$EO(e,r,i=oa){var n;const s=this.constructor._$Ep(e,i);if(s!==void 0&&i.reflect===!0){const o=(((n=i.converter)===null||n===void 0?void 0:n.toAttribute)!==void 0?i.converter:sa).toAttribute(r,i.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var i;const n=this.constructor,s=n._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=n.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((i=o.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?o.converter:sa;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,i){let n=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||bh)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),i.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((n,s)=>this[s]=n),this._$Ei=void 0);let r=!1;const i=this._$AL;try{r=this.shouldUpdate(i),r?(this.willUpdate(i),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var s;return(s=n.hostUpdate)===null||s===void 0?void 0:s.call(n)}),this.update(i)):this._$Ek()}catch(n){throw r=!1,this._$Ek(),n}r&&this._$AE(i)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(i=>{var n;return(n=i.hostUpdated)===null||n===void 0?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,i)=>this._$EO(i,this[i],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};vi[aa]=!0,vi.elementProperties=new Map,vi.elementStyles=[],vi.shadowRootOptions={mode:"open"},yh==null||yh({ReactiveElement:vi}),((na=ds.reactiveElementVersions)!==null&&na!==void 0?na:ds.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ca;const fs=window,_i=fs.trustedTypes,vh=_i?_i.createPolicy("lit-html",{createHTML:t=>t}):void 0,la="$lit$",Dr=`lit$${(Math.random()+"").slice(9)}$`,_h="?"+Dr,W2=`<${_h}>`,Jr=document,pn=()=>Jr.createComment(""),gn=t=>t===null||typeof t!="object"&&typeof t!="function",Eh=Array.isArray,H2=t=>Eh(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",ua=`[ 	
\f\r]`,mn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,xh=/-->/g,Sh=/>/g,Qr=RegExp(`>|${ua}(?:([^\\s"'>=/]+)(${ua}*=${ua}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Dh=/'/g,Ih=/"/g,Ch=/^(?:script|style|textarea|title)$/i,Oh=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),G=Oh(1),qe=Oh(2),Xr=Symbol.for("lit-noChange"),it=Symbol.for("lit-nothing"),$h=new WeakMap,ei=Jr.createTreeWalker(Jr,129,null,!1);function Ah(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return vh!==void 0?vh.createHTML(e):e}const V2=(t,e)=>{const r=t.length-1,i=[];let n,s=e===2?"<svg>":"",o=mn;for(let a=0;a<r;a++){const l=t[a];let h,d,b=-1,m=0;for(;m<l.length&&(o.lastIndex=m,d=o.exec(l),d!==null);)m=o.lastIndex,o===mn?d[1]==="!--"?o=xh:d[1]!==void 0?o=Sh:d[2]!==void 0?(Ch.test(d[2])&&(n=RegExp("</"+d[2],"g")),o=Qr):d[3]!==void 0&&(o=Qr):o===Qr?d[0]===">"?(o=n??mn,b=-1):d[1]===void 0?b=-2:(b=o.lastIndex-d[2].length,h=d[1],o=d[3]===void 0?Qr:d[3]==='"'?Ih:Dh):o===Ih||o===Dh?o=Qr:o===xh||o===Sh?o=mn:(o=Qr,n=void 0);const w=o===Qr&&t[a+1].startsWith("/>")?" ":"";s+=o===mn?l+W2:b>=0?(i.push(h),l.slice(0,b)+la+l.slice(b)+Dr+w):l+Dr+(b===-2?(i.push(void 0),a):w)}return[Ah(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),i]};class wn{constructor({strings:e,_$litType$:r},i){let n;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[h,d]=V2(e,r);if(this.el=wn.createElement(h,i),ei.currentNode=this.el.content,r===2){const b=this.el.content,m=b.firstChild;m.remove(),b.append(...m.childNodes)}for(;(n=ei.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes()){const b=[];for(const m of n.getAttributeNames())if(m.endsWith(la)||m.startsWith(Dr)){const w=d[o++];if(b.push(m),w!==void 0){const _=n.getAttribute(w.toLowerCase()+la).split(Dr),S=/([.?@])?(.*)/.exec(w);l.push({type:1,index:s,name:S[2],strings:_,ctor:S[1]==="."?G2:S[1]==="?"?Z2:S[1]==="@"?J2:ps})}else l.push({type:6,index:s})}for(const m of b)n.removeAttribute(m)}if(Ch.test(n.tagName)){const b=n.textContent.split(Dr),m=b.length-1;if(m>0){n.textContent=_i?_i.emptyScript:"";for(let w=0;w<m;w++)n.append(b[w],pn()),ei.nextNode(),l.push({type:2,index:++s});n.append(b[m],pn())}}}else if(n.nodeType===8)if(n.data===_h)l.push({type:2,index:s});else{let b=-1;for(;(b=n.data.indexOf(Dr,b+1))!==-1;)l.push({type:7,index:s}),b+=Dr.length-1}s++}}static createElement(e,r){const i=Jr.createElement("template");return i.innerHTML=e,i}}function Ei(t,e,r=t,i){var n,s,o,a;if(e===Xr)return e;let l=i!==void 0?(n=r._$Co)===null||n===void 0?void 0:n[i]:r._$Cl;const h=gn(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==h&&((s=l==null?void 0:l._$AO)===null||s===void 0||s.call(l,!1),h===void 0?l=void 0:(l=new h(t),l._$AT(t,r,i)),i!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[i]=l:r._$Cl=l),l!==void 0&&(e=Ei(t,l._$AS(t,e.values),l,i)),e}class K2{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:i},parts:n}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:Jr).importNode(i,!0);ei.currentNode=s;let o=ei.nextNode(),a=0,l=0,h=n[0];for(;h!==void 0;){if(a===h.index){let d;h.type===2?d=new yn(o,o.nextSibling,this,e):h.type===1?d=new h.ctor(o,h.name,h.strings,this,e):h.type===6&&(d=new Q2(o,this,e)),this._$AV.push(d),h=n[++l]}a!==(h==null?void 0:h.index)&&(o=ei.nextNode(),a++)}return ei.currentNode=Jr,s}v(e){let r=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,r),r+=i.strings.length-2):i._$AI(e[r])),r++}}class yn{constructor(e,r,i,n){var s;this.type=2,this._$AH=it,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=i,this.options=n,this._$Cp=(s=n==null?void 0:n.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Ei(this,e,r),gn(e)?e===it||e==null||e===""?(this._$AH!==it&&this._$AR(),this._$AH=it):e!==this._$AH&&e!==Xr&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):H2(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==it&&gn(this._$AH)?this._$AA.nextSibling.data=e:this.$(Jr.createTextNode(e)),this._$AH=e}g(e){var r;const{values:i,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=wn.createElement(Ah(n.h,n.h[0]),this.options)),n);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(i);else{const o=new K2(s,this),a=o.u(this.options);o.v(i),this.$(a),this._$AH=o}}_$AC(e){let r=$h.get(e.strings);return r===void 0&&$h.set(e.strings,r=new wn(e)),r}T(e){Eh(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let i,n=0;for(const s of e)n===r.length?r.push(i=new yn(this.k(pn()),this.k(pn()),this,this.options)):i=r[n],i._$AI(s),n++;n<r.length&&(this._$AR(i&&i._$AB.nextSibling,n),r.length=n)}_$AR(e=this._$AA.nextSibling,r){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,r);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class ps{constructor(e,r,i,n,s){this.type=1,this._$AH=it,this._$AN=void 0,this.element=e,this.name=r,this._$AM=n,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=it}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,i,n){const s=this.strings;let o=!1;if(s===void 0)e=Ei(this,e,r,0),o=!gn(e)||e!==this._$AH&&e!==Xr,o&&(this._$AH=e);else{const a=e;let l,h;for(e=s[0],l=0;l<s.length-1;l++)h=Ei(this,a[i+l],r,l),h===Xr&&(h=this._$AH[l]),o||(o=!gn(h)||h!==this._$AH[l]),h===it?e=it:e!==it&&(e+=(h??"")+s[l+1]),this._$AH[l]=h}o&&!n&&this.j(e)}j(e){e===it?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class G2 extends ps{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===it?void 0:e}}const Y2=_i?_i.emptyScript:"";let Z2=class extends ps{constructor(){super(...arguments),this.type=4}j(e){e&&e!==it?this.element.setAttribute(this.name,Y2):this.element.removeAttribute(this.name)}};class J2 extends ps{constructor(e,r,i,n,s){super(e,r,i,n,s),this.type=5}_$AI(e,r=this){var i;if((e=(i=Ei(this,e,r,0))!==null&&i!==void 0?i:it)===Xr)return;const n=this._$AH,s=e===it&&n!==it||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==it&&(n===it||s);s&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,i;typeof this._$AH=="function"?this._$AH.call((i=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}let Q2=class{constructor(e,r,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Ei(this,e)}};const Th=fs.litHtmlPolyfillSupport;Th==null||Th(wn,yn),((ca=fs.litHtmlVersions)!==null&&ca!==void 0?ca:fs.litHtmlVersions=[]).push("2.8.0");const X2=(t,e,r)=>{var i,n;const s=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:e;let o=s._$litPart$;if(o===void 0){const a=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:null;s._$litPart$=o=new yn(e.insertBefore(pn(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ha,da;class de extends vi{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const i=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=i.firstChild),i}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=X2(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return Xr}}de.finalized=!0,de._$litElement$=!0,(ha=globalThis.litElementHydrateSupport)===null||ha===void 0||ha.call(globalThis,{LitElement:de});const Ph=globalThis.litElementPolyfillSupport;Ph==null||Ph({LitElement:de}),((da=globalThis.litElementVersions)!==null&&da!==void 0?da:globalThis.litElementVersions=[]).push("3.3.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xe=t=>e=>typeof e=="function"?((r,i)=>(customElements.define(r,i),i))(t,e):((r,i)=>{const{kind:n,elements:s}=i;return{kind:n,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const eb=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},tb=(t,e,r)=>{e.constructor.createProperty(r,t)};function ce(t){return(e,r)=>r!==void 0?tb(t,e,r):eb(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Mt(t){return ce({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var fa;((fa=window.HTMLSlotElement)===null||fa===void 0?void 0:fa.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rb={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},ib=t=>(...e)=>({_$litDirective$:t,values:e});class nb{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,i){this._$Ct=e,this._$AM=r,this._$Ci=i}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fr=ib(class extends nb{constructor(t){var e;if(super(t),t.type!==rb.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,i;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const n=t.element.classList;this.it.forEach(s=>{s in e||(n.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((i=this.nt)===null||i===void 0)&&i.has(s)||(o?(n.add(s),this.it.add(s)):(n.remove(s),this.it.delete(s)))}return Xr}});function sb(t,e){t.indexOf(e)===-1&&t.push(e)}const Rh=(t,e,r)=>Math.min(Math.max(r,t),e),Vt={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},gs=t=>typeof t=="number",xi=t=>Array.isArray(t)&&!gs(t[0]),ob=(t,e,r)=>{const i=e-t;return((r-t)%i+i)%i+t};function ab(t,e){return xi(t)?t[ob(0,t.length,e)]:t}const Nh=(t,e,r)=>-r*t+r*e+t,Lh=()=>{},Ir=t=>t,pa=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function Mh(t,e){const r=t[t.length-1];for(let i=1;i<=e;i++){const n=pa(0,e,i);t.push(Nh(r,1,n))}}function cb(t){const e=[0];return Mh(e,t-1),e}function lb(t,e=cb(t.length),r=Ir){const i=t.length,n=i-e.length;return n>0&&Mh(e,n),s=>{let o=0;for(;o<i-2&&!(s<e[o+1]);o++);let a=Rh(0,1,pa(e[o],e[o+1],s));return a=ab(r,o)(a),Nh(t[o],t[o+1],a)}}const Uh=t=>Array.isArray(t)&&gs(t[0]),ga=t=>typeof t=="object"&&!!t.createAnimation,Si=t=>typeof t=="function",ub=t=>typeof t=="string",bn={ms:t=>t*1e3,s:t=>t/1e3},Fh=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,hb=1e-7,db=12;function fb(t,e,r,i,n){let s,o,a=0;do o=e+(r-e)/2,s=Fh(o,i,n)-t,s>0?r=o:e=o;while(Math.abs(s)>hb&&++a<db);return o}function vn(t,e,r,i){if(t===e&&r===i)return Ir;const n=s=>fb(s,0,1,t,r);return s=>s===0||s===1?s:Fh(n(s),e,i)}const pb=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const i=r*t,n=e==="end"?Math.floor(i):Math.ceil(i);return Rh(0,1,n/t)},jh={ease:vn(.25,.1,.25,1),"ease-in":vn(.42,0,1,1),"ease-in-out":vn(.42,0,.58,1),"ease-out":vn(0,0,.58,1)},gb=/\((.*?)\)/;function kh(t){if(Si(t))return t;if(Uh(t))return vn(...t);if(jh[t])return jh[t];if(t.startsWith("steps")){const e=gb.exec(t);if(e){const r=e[1].split(",");return pb(parseFloat(r[0]),r[1].trim())}}return Ir}class Bh{constructor(e,r=[0,1],{easing:i,duration:n=Vt.duration,delay:s=Vt.delay,endDelay:o=Vt.endDelay,repeat:a=Vt.repeat,offset:l,direction:h="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Ir,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((b,m)=>{this.resolve=b,this.reject=m}),i=i||Vt.easing,ga(i)){const b=i.createAnimation(r);i=b.easing,r=b.keyframes||r,n=b.duration||n}this.repeat=a,this.easing=xi(i)?Ir:kh(i),this.updateDuration(n);const d=lb(r,l,xi(i)?i.map(kh):Ir);this.tick=b=>{var m;s=s;let w=0;this.pauseTime!==void 0?w=this.pauseTime:w=(b-this.startTime)*this.rate,this.t=w,w/=1e3,w=Math.max(w-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(w=this.totalDuration);const _=w/this.duration;let S=Math.floor(_),A=_%1;!A&&_>=1&&(A=1),A===1&&S--;const T=S%2;(h==="reverse"||h==="alternate"&&T||h==="alternate-reverse"&&!T)&&(A=1-A);const v=w>=this.totalDuration?1:Math.min(A,1),x=d(this.easing(v));e(x),this.pauseTime===void 0&&(this.playState==="finished"||w>=this.totalDuration+o)?(this.playState="finished",(m=this.resolve)===null||m===void 0||m.call(this,x)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var ma=function(){};process.env.NODE_ENV!=="production"&&(ma=function(t,e){if(!t)throw new Error(e)});class mb{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const wa=new WeakMap;function zh(t){return wa.has(t)||wa.set(t,{transforms:[],values:new Map}),wa.get(t)}function wb(t,e){return t.has(e)||t.set(e,new mb),t.get(e)}const yb=["","X","Y","Z"],bb=["translate","scale","rotate","skew"],ms={x:"translateX",y:"translateY",z:"translateZ"},qh={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},vb={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:qh,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Ir},skew:qh},_n=new Map,ya=t=>`--motion-${t}`,ws=["x","y","z"];bb.forEach(t=>{yb.forEach(e=>{ws.push(t+e),_n.set(ya(t+e),vb[t])})});const _b=(t,e)=>ws.indexOf(t)-ws.indexOf(e),Eb=new Set(ws),Wh=t=>Eb.has(t),xb=(t,e)=>{ms[e]&&(e=ms[e]);const{transforms:r}=zh(t);sb(r,e),t.style.transform=Sb(r)},Sb=t=>t.sort(_b).reduce(Db,"").trim(),Db=(t,e)=>`${t} ${e}(var(${ya(e)}))`,ba=t=>t.startsWith("--"),Hh=new Set;function Ib(t){if(!Hh.has(t)){Hh.add(t);try{const{syntax:e,initialValue:r}=_n.has(t)?_n.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const va=(t,e)=>document.createElement("div").animate(t,e),Vh={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{va({opacity:[1]})}catch{return!1}return!0},finished:()=>!!va({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{va({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},_a={},Di={};for(const t in Vh)Di[t]=()=>(_a[t]===void 0&&(_a[t]=Vh[t]()),_a[t]);const Cb=.015,Ob=(t,e)=>{let r="";const i=Math.round(e/Cb);for(let n=0;n<i;n++)r+=t(pa(0,i-1,n))+", ";return r.substring(0,r.length-2)},Kh=(t,e)=>Si(t)?Di.linearEasing()?`linear(${Ob(t,e)})`:Vt.easing:Uh(t)?$b(t):t,$b=([t,e,r,i])=>`cubic-bezier(${t}, ${e}, ${r}, ${i})`;function Ab(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const Tb=t=>Array.isArray(t)?t:[t];function Ea(t){return ms[t]&&(t=ms[t]),Wh(t)?ya(t):t}const ys={get:(t,e)=>{e=Ea(e);let r=ba(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const i=_n.get(e);i&&(r=i.initialValue)}return r},set:(t,e,r)=>{e=Ea(e),ba(e)?t.style.setProperty(e,r):t.style[e]=r}};function Gh(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function Pb(t,e){var r;let i=(e==null?void 0:e.toDefaultUnit)||Ir;const n=t[t.length-1];if(ub(n)){const s=((r=n.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(i=o=>o+s)}return i}function Rb(){return window.__MOTION_DEV_TOOLS_RECORD}function Nb(t,e,r,i={},n){const s=Rb(),o=i.record!==!1&&s;let a,{duration:l=Vt.duration,delay:h=Vt.delay,endDelay:d=Vt.endDelay,repeat:b=Vt.repeat,easing:m=Vt.easing,persist:w=!1,direction:_,offset:S,allowWebkitAcceleration:A=!1}=i;const T=zh(t),v=Wh(e);let x=Di.waapi();v&&xb(t,e);const g=Ea(e),E=wb(T.values,g),p=_n.get(g);return Gh(E.animation,!(ga(m)&&E.generator)&&i.record!==!1),()=>{const c=()=>{var I,M;return(M=(I=ys.get(t,g))!==null&&I!==void 0?I:p==null?void 0:p.initialValue)!==null&&M!==void 0?M:0};let f=Ab(Tb(r),c);const P=Pb(f,p);if(ga(m)){const I=m.createAnimation(f,e!=="opacity",c,g,E);m=I.easing,f=I.keyframes||f,l=I.duration||l}if(ba(g)&&(Di.cssRegisterProperty()?Ib(g):x=!1),v&&!Di.linearEasing()&&(Si(m)||xi(m)&&m.some(Si))&&(x=!1),x){p&&(f=f.map(B=>gs(B)?p.toDefaultUnit(B):B)),f.length===1&&(!Di.partialKeyframes()||o)&&f.unshift(c());const I={delay:bn.ms(h),duration:bn.ms(l),endDelay:bn.ms(d),easing:xi(m)?void 0:Kh(m,l),direction:_,iterations:b+1,fill:"both"};a=t.animate({[g]:f,offset:S,easing:xi(m)?m.map(B=>Kh(B,l)):void 0},I),a.finished||(a.finished=new Promise((B,H)=>{a.onfinish=B,a.oncancel=H}));const M=f[f.length-1];a.finished.then(()=>{w||(ys.set(t,g,M),a.cancel())}).catch(Lh),A||(a.playbackRate=1.000001)}else if(n&&v)f=f.map(I=>typeof I=="string"?parseFloat(I):I),f.length===1&&f.unshift(parseFloat(c())),a=new n(I=>{ys.set(t,g,P?P(I):I)},f,Object.assign(Object.assign({},i),{duration:l,easing:m}));else{const I=f[f.length-1];ys.set(t,g,p&&gs(I)?p.toDefaultUnit(I):I)}return o&&s(t,e,f,{duration:l,delay:h,easing:m,repeat:b,offset:S},"motion-one"),E.setAnimation(a),a}}const Lb=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function Mb(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const Ub=t=>t(),Yh=(t,e,r=Vt.duration)=>new Proxy({animations:t.map(Ub).filter(Boolean),duration:r,options:e},jb),Fb=t=>t.animations[0],jb={get:(t,e)=>{const r=Fb(t);switch(e){case"duration":return t.duration;case"currentTime":return bn.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(kb)).catch(Lh)),t.finished;case"stop":return()=>{t.animations.forEach(i=>Gh(i))};case"forEachNative":return i=>{t.animations.forEach(n=>i(n,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(i=>i[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=bn.ms(r);case"currentTime":case"playbackRate":for(let i=0;i<t.animations.length;i++)t.animations[i][e]=r;return!0}return!1}},kb=t=>t.finished;function Bb(t,e,r){return Si(t)?t(e,r):t}function zb(t){return function(r,i,n={}){r=Mb(r);const s=r.length;ma(!!s,"No valid element provided."),ma(!!i,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const l=r[a];for(const h in i){const d=Lb(n,h);d.delay=Bb(d.delay,a,s);const b=Nb(l,h,i[h],d,t);o.push(b)}}return Yh(o,n,n.duration)}}const qb=zb(Bh);function Wb(t,e={}){return Yh([()=>{const r=new Bh(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function ti(t,e,r){return(Si(t)?Wb:qb)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Tt=t=>t??it;var En={},Hb=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Zh={},Bt={};let xa;const Vb=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Bt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},Bt.getSymbolTotalCodewords=function(e){return Vb[e]},Bt.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},Bt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');xa=e},Bt.isKanjiModeEnabled=function(){return typeof xa<"u"},Bt.toSJIS=function(e){return xa(e)};var bs={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,n){if(t.isValid(i))return i;try{return e(i)}catch{return n}}})(bs);function Jh(){this.buffer=[],this.length=0}Jh.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Kb=Jh;function xn(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}xn.prototype.set=function(t,e,r,i){const n=t*this.size+e;this.data[n]=r,i&&(this.reservedBit[n]=!0)},xn.prototype.get=function(t,e){return this.data[t*this.size+e]},xn.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},xn.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Gb=xn,Qh={};(function(t){const e=Bt.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const n=Math.floor(i/7)+2,s=e(i),o=s===145?26:Math.ceil((s-13)/(2*n-2))*2,a=[s-7];for(let l=1;l<n-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},t.getPositions=function(i){const n=[],s=t.getRowColCoords(i),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||n.push([s[a],s[l]]);return n}})(Qh);var Xh={};const Yb=Bt.getSymbolSize,ed=7;Xh.getPositions=function(e){const r=Yb(e);return[[0,0],[r-ed,0],[0,r-ed]]};var td={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},t.from=function(n){return t.isValid(n)?parseInt(n,10):void 0},t.getPenaltyN1=function(n){const s=n.size;let o=0,a=0,l=0,h=null,d=null;for(let b=0;b<s;b++){a=l=0,h=d=null;for(let m=0;m<s;m++){let w=n.get(b,m);w===h?a++:(a>=5&&(o+=e.N1+(a-5)),h=w,a=1),w=n.get(m,b),w===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=w,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},t.getPenaltyN2=function(n){const s=n.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const h=n.get(a,l)+n.get(a,l+1)+n.get(a+1,l)+n.get(a+1,l+1);(h===4||h===0)&&o++}return o*e.N2},t.getPenaltyN3=function(n){const s=n.size;let o=0,a=0,l=0;for(let h=0;h<s;h++){a=l=0;for(let d=0;d<s;d++)a=a<<1&2047|n.get(h,d),d>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|n.get(d,h),d>=10&&(l===1488||l===93)&&o++}return o*e.N3},t.getPenaltyN4=function(n){let s=0;const o=n.data.length;for(let l=0;l<o;l++)s+=n.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(i,n,s){switch(i){case t.Patterns.PATTERN000:return(n+s)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(n+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return n*s%2+n*s%3===0;case t.Patterns.PATTERN110:return(n*s%2+n*s%3)%2===0;case t.Patterns.PATTERN111:return(n*s%3+(n+s)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(n,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,r(n,l,a))},t.getBestMask=function(n,s){const o=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let h=0;h<o;h++){s(h),t.applyMask(h,n);const d=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(h,n),d<l&&(l=d,a=h)}return a}})(td);var vs={};const Cr=bs,_s=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Es=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];vs.getBlocksCount=function(e,r){switch(r){case Cr.L:return _s[(e-1)*4+0];case Cr.M:return _s[(e-1)*4+1];case Cr.Q:return _s[(e-1)*4+2];case Cr.H:return _s[(e-1)*4+3];default:return}},vs.getTotalCodewordsCount=function(e,r){switch(r){case Cr.L:return Es[(e-1)*4+0];case Cr.M:return Es[(e-1)*4+1];case Cr.Q:return Es[(e-1)*4+2];case Cr.H:return Es[(e-1)*4+3];default:return}};var rd={},xs={};const Sn=new Uint8Array(512),Ss=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Sn[r]=e,Ss[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Sn[r]=Sn[r-255]})(),xs.log=function(e){if(e<1)throw new Error("log("+e+")");return Ss[e]},xs.exp=function(e){return Sn[e]},xs.mul=function(e,r){return e===0||r===0?0:Sn[Ss[e]+Ss[r]]},function(t){const e=xs;t.mul=function(i,n){const s=new Uint8Array(i.length+n.length-1);for(let o=0;o<i.length;o++)for(let a=0;a<n.length;a++)s[o+a]^=e.mul(i[o],n[a]);return s},t.mod=function(i,n){let s=new Uint8Array(i);for(;s.length-n.length>=0;){const o=s[0];for(let l=0;l<n.length;l++)s[l]^=e.mul(n[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(i){let n=new Uint8Array([1]);for(let s=0;s<i;s++)n=t.mul(n,new Uint8Array([1,e.exp(s)]));return n}}(rd);const id=rd;function Sa(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Sa.prototype.initialize=function(e){this.degree=e,this.genPoly=id.generateECPolynomial(this.degree)},Sa.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const i=id.mod(r,this.genPoly),n=this.degree-i.length;if(n>0){const s=new Uint8Array(this.degree);return s.set(i,n),s}return i};var Zb=Sa,nd={},Or={},Da={};Da.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var sr={};const sd="[0-9]+",Jb="[A-Z $%*+\\-./:]+";let Dn="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Dn=Dn.replace(/u/g,"\\u");const Qb="(?:(?![A-Z0-9 $%*+\\-./:]|"+Dn+`)(?:.|[\r
]))+`;sr.KANJI=new RegExp(Dn,"g"),sr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),sr.BYTE=new RegExp(Qb,"g"),sr.NUMERIC=new RegExp(sd,"g"),sr.ALPHANUMERIC=new RegExp(Jb,"g");const Xb=new RegExp("^"+Dn+"$"),ev=new RegExp("^"+sd+"$"),tv=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");sr.testKanji=function(e){return Xb.test(e)},sr.testNumeric=function(e){return ev.test(e)},sr.testAlphanumeric=function(e){return tv.test(e)},function(t){const e=Da,r=sr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function i(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+n)}}t.from=function(s,o){if(t.isValid(s))return s;try{return i(s)}catch{return o}}}(Or),function(t){const e=Bt,r=vs,i=bs,n=Or,s=Da,o=7973,a=e.getBCHDigit(o);function l(m,w,_){for(let S=1;S<=40;S++)if(w<=t.getCapacity(S,_,m))return S}function h(m,w){return n.getCharCountIndicator(m,w)+4}function d(m,w){let _=0;return m.forEach(function(S){const A=h(S.mode,w);_+=A+S.getBitsLength()}),_}function b(m,w){for(let _=1;_<=40;_++)if(d(m,_)<=t.getCapacity(_,w,n.MIXED))return _}t.from=function(w,_){return s.isValid(w)?parseInt(w,10):_},t.getCapacity=function(w,_,S){if(!s.isValid(w))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=n.BYTE);const A=e.getSymbolTotalCodewords(w),T=r.getTotalCodewordsCount(w,_),v=(A-T)*8;if(S===n.MIXED)return v;const x=v-h(S,w);switch(S){case n.NUMERIC:return Math.floor(x/10*3);case n.ALPHANUMERIC:return Math.floor(x/11*2);case n.KANJI:return Math.floor(x/13);case n.BYTE:default:return Math.floor(x/8)}},t.getBestVersionForData=function(w,_){let S;const A=i.from(_,i.M);if(Array.isArray(w)){if(w.length>1)return b(w,A);if(w.length===0)return 1;S=w[0]}else S=w;return l(S.mode,S.getLength(),A)},t.getEncodedBits=function(w){if(!s.isValid(w)||w<7)throw new Error("Invalid QR Code version");let _=w<<12;for(;e.getBCHDigit(_)-a>=0;)_^=o<<e.getBCHDigit(_)-a;return w<<12|_}}(nd);var od={};const Ia=Bt,ad=1335,rv=21522,cd=Ia.getBCHDigit(ad);od.getEncodedBits=function(e,r){const i=e.bit<<3|r;let n=i<<10;for(;Ia.getBCHDigit(n)-cd>=0;)n^=ad<<Ia.getBCHDigit(n)-cd;return(i<<10|n)^rv};var ld={};const iv=Or;function Ii(t){this.mode=iv.NUMERIC,this.data=t.toString()}Ii.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Ii.prototype.getLength=function(){return this.data.length},Ii.prototype.getBitsLength=function(){return Ii.getBitsLength(this.data.length)},Ii.prototype.write=function(e){let r,i,n;for(r=0;r+3<=this.data.length;r+=3)i=this.data.substr(r,3),n=parseInt(i,10),e.put(n,10);const s=this.data.length-r;s>0&&(i=this.data.substr(r),n=parseInt(i,10),e.put(n,s*3+1))};var nv=Ii;const sv=Or,Ca=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ci(t){this.mode=sv.ALPHANUMERIC,this.data=t}Ci.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Ci.prototype.getLength=function(){return this.data.length},Ci.prototype.getBitsLength=function(){return Ci.getBitsLength(this.data.length)},Ci.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let i=Ca.indexOf(this.data[r])*45;i+=Ca.indexOf(this.data[r+1]),e.put(i,11)}this.data.length%2&&e.put(Ca.indexOf(this.data[r]),6)};var ov=Ci,av=function(e){for(var r=[],i=e.length,n=0;n<i;n++){var s=e.charCodeAt(n);if(s>=55296&&s<=56319&&i>n+1){var o=e.charCodeAt(n+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,n+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const cv=av,lv=Or;function Oi(t){this.mode=lv.BYTE,typeof t=="string"&&(t=cv(t)),this.data=new Uint8Array(t)}Oi.getBitsLength=function(e){return e*8},Oi.prototype.getLength=function(){return this.data.length},Oi.prototype.getBitsLength=function(){return Oi.getBitsLength(this.data.length)},Oi.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var uv=Oi;const hv=Or,dv=Bt;function $i(t){this.mode=hv.KANJI,this.data=t}$i.getBitsLength=function(e){return e*13},$i.prototype.getLength=function(){return this.data.length},$i.prototype.getBitsLength=function(){return $i.getBitsLength(this.data.length)},$i.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=dv.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var fv=$i,ud={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,i,n){var s={},o={};o[i]=0;var a=e.PriorityQueue.make();a.push(i,0);for(var l,h,d,b,m,w,_,S,A;!a.empty();){l=a.pop(),h=l.value,b=l.cost,m=r[h]||{};for(d in m)m.hasOwnProperty(d)&&(w=m[d],_=b+w,S=o[d],A=typeof o[d]>"u",(A||S>_)&&(o[d]=_,a.push(d,_),s[d]=h))}if(typeof n<"u"&&typeof o[n]>"u"){var T=["Could not find a path from ",i," to ",n,"."].join("");throw new Error(T)}return s},extract_shortest_path_from_predecessor_list:function(r,i){for(var n=[],s=i;s;)n.push(s),r[s],s=r[s];return n.reverse(),n},find_path:function(r,i,n){var s=e.single_source_shortest_paths(r,i,n);return e.extract_shortest_path_from_predecessor_list(s,n)},PriorityQueue:{make:function(r){var i=e.PriorityQueue,n={},s;r=r||{};for(s in i)i.hasOwnProperty(s)&&(n[s]=i[s]);return n.queue=[],n.sorter=r.sorter||i.default_sorter,n},default_sorter:function(r,i){return r.cost-i.cost},push:function(r,i){var n={value:r,cost:i};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(ud);var pv=ud.exports;(function(t){const e=Or,r=nv,i=ov,n=uv,s=fv,o=sr,a=Bt,l=pv;function h(T){return unescape(encodeURIComponent(T)).length}function d(T,v,x){const g=[];let E;for(;(E=T.exec(x))!==null;)g.push({data:E[0],index:E.index,mode:v,length:E[0].length});return g}function b(T){const v=d(o.NUMERIC,e.NUMERIC,T),x=d(o.ALPHANUMERIC,e.ALPHANUMERIC,T);let g,E;return a.isKanjiModeEnabled()?(g=d(o.BYTE,e.BYTE,T),E=d(o.KANJI,e.KANJI,T)):(g=d(o.BYTE_KANJI,e.BYTE,T),E=[]),v.concat(x,g,E).sort(function(c,f){return c.index-f.index}).map(function(c){return{data:c.data,mode:c.mode,length:c.length}})}function m(T,v){switch(v){case e.NUMERIC:return r.getBitsLength(T);case e.ALPHANUMERIC:return i.getBitsLength(T);case e.KANJI:return s.getBitsLength(T);case e.BYTE:return n.getBitsLength(T)}}function w(T){return T.reduce(function(v,x){const g=v.length-1>=0?v[v.length-1]:null;return g&&g.mode===x.mode?(v[v.length-1].data+=x.data,v):(v.push(x),v)},[])}function _(T){const v=[];for(let x=0;x<T.length;x++){const g=T[x];switch(g.mode){case e.NUMERIC:v.push([g,{data:g.data,mode:e.ALPHANUMERIC,length:g.length},{data:g.data,mode:e.BYTE,length:g.length}]);break;case e.ALPHANUMERIC:v.push([g,{data:g.data,mode:e.BYTE,length:g.length}]);break;case e.KANJI:v.push([g,{data:g.data,mode:e.BYTE,length:h(g.data)}]);break;case e.BYTE:v.push([{data:g.data,mode:e.BYTE,length:h(g.data)}])}}return v}function S(T,v){const x={},g={start:{}};let E=["start"];for(let p=0;p<T.length;p++){const c=T[p],f=[];for(let P=0;P<c.length;P++){const I=c[P],M=""+p+P;f.push(M),x[M]={node:I,lastCount:0},g[M]={};for(let B=0;B<E.length;B++){const H=E[B];x[H]&&x[H].node.mode===I.mode?(g[H][M]=m(x[H].lastCount+I.length,I.mode)-m(x[H].lastCount,I.mode),x[H].lastCount+=I.length):(x[H]&&(x[H].lastCount=I.length),g[H][M]=m(I.length,I.mode)+4+e.getCharCountIndicator(I.mode,v))}}E=f}for(let p=0;p<E.length;p++)g[E[p]].end=0;return{map:g,table:x}}function A(T,v){let x;const g=e.getBestModeForData(T);if(x=e.from(v,g),x!==e.BYTE&&x.bit<g.bit)throw new Error('"'+T+'" cannot be encoded with mode '+e.toString(x)+`.
 Suggested mode is: `+e.toString(g));switch(x===e.KANJI&&!a.isKanjiModeEnabled()&&(x=e.BYTE),x){case e.NUMERIC:return new r(T);case e.ALPHANUMERIC:return new i(T);case e.KANJI:return new s(T);case e.BYTE:return new n(T)}}t.fromArray=function(v){return v.reduce(function(x,g){return typeof g=="string"?x.push(A(g,null)):g.data&&x.push(A(g.data,g.mode)),x},[])},t.fromString=function(v,x){const g=b(v,a.isKanjiModeEnabled()),E=_(g),p=S(E,x),c=l.find_path(p.map,"start","end"),f=[];for(let P=1;P<c.length-1;P++)f.push(p.table[c[P]].node);return t.fromArray(w(f))},t.rawSplit=function(v){return t.fromArray(b(v,a.isKanjiModeEnabled()))}})(ld);const Ds=Bt,Oa=bs,gv=Kb,mv=Gb,wv=Qh,yv=Xh,$a=td,Aa=vs,bv=Zb,Is=nd,vv=od,_v=Or,Ta=ld;function Ev(t,e){const r=t.size,i=yv.getPositions(e);for(let n=0;n<i.length;n++){const s=i[n][0],o=i[n][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let l=-1;l<=7;l++)o+l<=-1||r<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?t.set(s+a,o+l,!0,!0):t.set(s+a,o+l,!1,!0))}}function xv(t){const e=t.size;for(let r=8;r<e-8;r++){const i=r%2===0;t.set(r,6,i,!0),t.set(6,r,i,!0)}}function Sv(t,e){const r=wv.getPositions(e);for(let i=0;i<r.length;i++){const n=r[i][0],s=r[i][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(n+o,s+a,!0,!0):t.set(n+o,s+a,!1,!0)}}function Dv(t,e){const r=t.size,i=Is.getEncodedBits(e);let n,s,o;for(let a=0;a<18;a++)n=Math.floor(a/3),s=a%3+r-8-3,o=(i>>a&1)===1,t.set(n,s,o,!0),t.set(s,n,o,!0)}function Pa(t,e,r){const i=t.size,n=vv.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(n>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(i-15+s,8,o,!0),s<8?t.set(8,i-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(i-8,8,1,!0)}function Iv(t,e){const r=t.size;let i=-1,n=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!t.isReserved(n,a-l)){let h=!1;o<e.length&&(h=(e[o]>>>s&1)===1),t.set(n,a-l,h),s--,s===-1&&(o++,s=7)}if(n+=i,n<0||r<=n){n-=i,i=-i;break}}}function Cv(t,e,r){const i=new gv;r.forEach(function(l){i.put(l.mode.bit,4),i.put(l.getLength(),_v.getCharCountIndicator(l.mode,t)),l.write(i)});const n=Ds.getSymbolTotalCodewords(t),s=Aa.getTotalCodewordsCount(t,e),o=(n-s)*8;for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const a=(o-i.getLengthInBits())/8;for(let l=0;l<a;l++)i.put(l%2?17:236,8);return Ov(i,t,e)}function Ov(t,e,r){const i=Ds.getSymbolTotalCodewords(e),n=Aa.getTotalCodewordsCount(e,r),s=i-n,o=Aa.getBlocksCount(e,r),a=i%o,l=o-a,h=Math.floor(i/o),d=Math.floor(s/o),b=d+1,m=h-d,w=new bv(m);let _=0;const S=new Array(o),A=new Array(o);let T=0;const v=new Uint8Array(t.buffer);for(let c=0;c<o;c++){const f=c<l?d:b;S[c]=v.slice(_,_+f),A[c]=w.encode(S[c]),_+=f,T=Math.max(T,f)}const x=new Uint8Array(i);let g=0,E,p;for(E=0;E<T;E++)for(p=0;p<o;p++)E<S[p].length&&(x[g++]=S[p][E]);for(E=0;E<m;E++)for(p=0;p<o;p++)x[g++]=A[p][E];return x}function $v(t,e,r,i){let n;if(Array.isArray(t))n=Ta.fromArray(t);else if(typeof t=="string"){let h=e;if(!h){const d=Ta.rawSplit(t);h=Is.getBestVersionForData(d,r)}n=Ta.fromString(t,h||40)}else throw new Error("Invalid data");const s=Is.getBestVersionForData(n,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=Cv(e,r,n),a=Ds.getSymbolSize(e),l=new mv(a);return Ev(l,e),xv(l),Sv(l,e),Pa(l,r,0),e>=7&&Dv(l,e),Iv(l,o),isNaN(i)&&(i=$a.getBestMask(l,Pa.bind(null,l,r))),$a.applyMask(i,l),Pa(l,r,i),{modules:l,version:e,errorCorrectionLevel:r,maskPattern:i,segments:n}}Zh.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let i=Oa.M,n,s;return typeof r<"u"&&(i=Oa.from(r.errorCorrectionLevel,Oa.M),n=Is.from(r.version),s=$a.from(r.maskPattern),r.toSJISFunc&&Ds.setToSJISFunction(r.toSJISFunc)),$v(e,n,i,s)};var hd={},Ra={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let i=r.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+r);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(s){return[s,s]}))),i.length===6&&i.push("F","F");const n=parseInt(i.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const n=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,s=i.width&&i.width>=21?i.width:void 0,o=i.scale||4;return{width:s,scale:s?4:o,margin:n,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,n){return n.width&&n.width>=i+n.margin*2?n.width/(i+n.margin*2):n.scale},t.getImageWidth=function(i,n){const s=t.getScale(i,n);return Math.floor((i+n.margin*2)*s)},t.qrToImageData=function(i,n,s){const o=n.modules.size,a=n.modules.data,l=t.getScale(o,s),h=Math.floor((o+s.margin*2)*l),d=s.margin*l,b=[s.color.light,s.color.dark];for(let m=0;m<h;m++)for(let w=0;w<h;w++){let _=(m*h+w)*4,S=s.color.light;if(m>=d&&w>=d&&m<h-d&&w<h-d){const A=Math.floor((m-d)/l),T=Math.floor((w-d)/l);S=b[a[A*o+T]?1:0]}i[_++]=S.r,i[_++]=S.g,i[_++]=S.b,i[_]=S.a}}})(Ra),function(t){const e=Ra;function r(n,s,o){n.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let l=a,h=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(h=i()),l=e.getOptions(l);const d=e.getImageWidth(s.modules.size,l),b=h.getContext("2d"),m=b.createImageData(d,d);return e.qrToImageData(m.data,s,l),r(b,h,d),b.putImageData(m,0,0),h},t.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const h=t.render(s,o,l),d=l.type||"image/png",b=l.rendererOpts||{};return h.toDataURL(d,b.quality)}}(hd);var dd={};const Av=Ra;function fd(t,e){const r=t.a/255,i=e+'="'+t.hex+'"';return r<1?i+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':i}function Na(t,e,r){let i=t+e;return typeof r<"u"&&(i+=" "+r),i}function Tv(t,e,r){let i="",n=0,s=!1,o=0;for(let a=0;a<t.length;a++){const l=Math.floor(a%e),h=Math.floor(a/e);!l&&!s&&(s=!0),t[a]?(o++,a>0&&l>0&&t[a-1]||(i+=s?Na("M",l+r,.5+h+r):Na("m",n,0),n=0,s=!1),l+1<e&&t[a+1]||(i+=Na("h",o),o=0)):n++}return i}dd.render=function(e,r,i){const n=Av.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+n.margin*2,l=n.color.light.a?"<path "+fd(n.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",h="<path "+fd(n.color.dark,"stroke")+' d="'+Tv(o,s,n.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+d+' shape-rendering="crispEdges">'+l+h+`</svg>
`;return typeof i=="function"&&i(null,m),m};const Pv=Hb,La=Zh,pd=hd,Rv=dd;function Ma(t,e,r,i,n){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!Pv())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(n=r,r=e,e=i=void 0):o===3&&(e.getContext&&typeof n>"u"?(n=i,i=void 0):(n=i,i=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=i=void 0):o===2&&!e.getContext&&(i=r,r=e,e=void 0),new Promise(function(l,h){try{const d=La.create(r,i);l(t(d,e,i))}catch(d){h(d)}})}try{const l=La.create(r,i);n(null,t(l,e,i))}catch(l){n(l)}}En.create=La.create,En.toCanvas=Ma.bind(null,pd.render),En.toDataURL=Ma.bind(null,pd.renderToDataURL),En.toString=Ma.bind(null,function(t,e,r){return Rv.render(t,r)});var Nv=Object.defineProperty,gd=Object.getOwnPropertySymbols,Lv=Object.prototype.hasOwnProperty,Mv=Object.prototype.propertyIsEnumerable,md=(t,e,r)=>e in t?Nv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ua=(t,e)=>{for(var r in e||(e={}))Lv.call(e,r)&&md(t,r,e[r]);if(gd)for(var r of gd(e))Mv.call(e,r)&&md(t,r,e[r]);return t};function Uv(){var t;const e=(t=vr.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function wd(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const be={getPreset(t){return wd()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=vr.state;if(t){const r=Ua(Ua(Ua({},Uv()),wd()),e);Object.entries(r).forEach(([i,n])=>t.style.setProperty(i,n))}},globalCss:$e`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},Fv=$e`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var jv=Object.defineProperty,kv=Object.getOwnPropertyDescriptor,Ai=(t,e,r,i)=>{for(var n=i>1?void 0:i?kv(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&jv(e,r,n),n};let $r=class extends de{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),G`<button class="${fr(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};$r.styles=[be.globalCss,Fv],Ai([ce({type:Boolean})],$r.prototype,"disabled",2),Ai([ce()],$r.prototype,"iconLeft",2),Ai([ce()],$r.prototype,"iconRight",2),Ai([ce()],$r.prototype,"onClick",2),Ai([ce()],$r.prototype,"variant",2),$r=Ai([xe("wcm-button")],$r);const Bv=$e`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var zv=Object.defineProperty,qv=Object.getOwnPropertyDescriptor,Fa=(t,e,r,i)=>{for(var n=i>1?void 0:i?qv(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&zv(e,r,n),n};let In=class extends de{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return G`<button ?disabled="${this.disabled}" class="${fr(t)}"><slot></slot></button>`}};In.styles=[be.globalCss,Bv],Fa([ce({type:Boolean})],In.prototype,"disabled",2),Fa([ce()],In.prototype,"variant",2),In=Fa([xe("wcm-button-big")],In);const Wv=$e`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var Hv=Object.defineProperty,Vv=Object.getOwnPropertyDescriptor,Kv=(t,e,r,i)=>{for(var n=i>1?void 0:i?Vv(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&Hv(e,r,n),n};let ja=class extends de{render(){return G`<div><slot></slot></div>`}};ja.styles=[be.globalCss,Wv],ja=Kv([xe("wcm-info-footer")],ja);const Pe={CROSS_ICON:qe`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:qe`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:qe`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:qe`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:qe`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:qe`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:qe`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:qe`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:qe`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:qe`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:qe`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:qe`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:qe`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:qe`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:qe`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:qe`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:qe`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:qe`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},Gv=$e`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var Yv=Object.defineProperty,Zv=Object.getOwnPropertyDescriptor,Jv=(t,e,r,i)=>{for(var n=i>1?void 0:i?Zv(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&Yv(e,r,n),n};let ka=class extends de{render(){return G`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${Pe.WALLET_CONNECT_LOGO} <button @click="${jr.close}">${Pe.CROSS_ICON}</button></div>`}};ka.styles=[be.globalCss,Gv],ka=Jv([xe("wcm-modal-backcard")],ka);const Qv=$e`main{padding:20px;padding-top:0;width:100%}`;var Xv=Object.defineProperty,e3=Object.getOwnPropertyDescriptor,t3=(t,e,r,i)=>{for(var n=i>1?void 0:i?e3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&Xv(e,r,n),n};let Ba=class extends de{render(){return G`<main><slot></slot></main>`}};Ba.styles=[be.globalCss,Qv],Ba=t3([xe("wcm-modal-content")],Ba);const r3=$e`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var i3=Object.defineProperty,n3=Object.getOwnPropertyDescriptor,s3=(t,e,r,i)=>{for(var n=i>1?void 0:i?n3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&i3(e,r,n),n};let za=class extends de{render(){return G`<footer><slot></slot></footer>`}};za.styles=[be.globalCss,r3],za=s3([xe("wcm-modal-footer")],za);const o3=$e`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var a3=Object.defineProperty,c3=Object.getOwnPropertyDescriptor,Cn=(t,e,r,i)=>{for(var n=i>1?void 0:i?c3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&a3(e,r,n),n};let ri=class extends de{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return G`<button class="wcm-back-btn" @click="${ke.goBack}">${Pe.BACK_ICON}</button>`}actionBtnTemplate(){return G`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=ke.state.history.length>1,r=this.title?G`<wcm-text variant="big-bold">${this.title}</wcm-text>`:G`<slot></slot>`;return G`<header class="${fr(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};ri.styles=[be.globalCss,o3],Cn([ce()],ri.prototype,"title",2),Cn([ce()],ri.prototype,"onAction",2),Cn([ce()],ri.prototype,"actionIcon",2),Cn([ce({type:Boolean})],ri.prototype,"border",2),ri=Cn([xe("wcm-modal-header")],ri);const ie={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Ut.state;return r!=null&&r[t]?r[t]:e?Pt.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=ie.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,i)=>{const n=new Image;n.onload=r,n.onerror=i,n.crossOrigin="anonymous",n.src=t});return Promise.race([e,ee.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...i)=>{function n(){t(...i)}r&&clearTimeout(r),r=setTimeout(n,e)}},handleMobileLinking(t){const{walletConnectUri:e}=Ge.state,{mobile:r,name:i}=t,n=r==null?void 0:r.native,s=r==null?void 0:r.universal;ie.setRecentWallet(t);function o(a){let l="";n?l=ee.formatUniversalUrl(n,a,i):s&&(l=ee.formatNativeUrl(s,a,i)),ee.openHref(l,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=Ge.state;t&&(ee.setWalletConnectAndroidDeepLink(t),ee.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=Ge.state;if(t)try{await navigator.clipboard.writeText(t),_r.openToast("Link copied","success")}catch{_r.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Ut.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(ie.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(ie.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){ee.openHref(ie.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=ee.getWalletRouterData(),r=!!(t!=null&&t.native),i=!!(t!=null&&t.universal),n=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:n,isWeb:i}},goToConnectingView(t){ke.setData({Wallet:t});const e=ee.isMobile(),{isDesktop:r,isWeb:i,isMobile:n}=ie.getCachedRouterWalletPlatforms();e?n?ke.push("MobileConnecting"):i?ke.push("WebConnecting"):ke.push("InstallWallet"):r?ke.push("DesktopConnecting"):i?ke.push("WebConnecting"):n?ke.push("MobileQrcodeConnecting"):ke.push("InstallWallet")}},l3=$e`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var u3=Object.defineProperty,h3=Object.getOwnPropertyDescriptor,qa=(t,e,r,i)=>{for(var n=i>1?void 0:i?h3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&u3(e,r,n),n};let On=class extends de{constructor(){super(),this.view=ke.state.view,this.prevView=ke.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=ke.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&ti(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return ie.getShadowRootElement(this,".wcm-router")}get contentEl(){return ie.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return G`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return G`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return G`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return G`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return G`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return G`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return G`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return G`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return G`<div>Not Found</div>`}}async onChangeRoute(){await ti(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=ke.state.view,ti(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return G`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};On.styles=[be.globalCss,l3],qa([Mt()],On.prototype,"view",2),qa([Mt()],On.prototype,"prevView",2),On=qa([xe("wcm-modal-router")],On);const d3=$e`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var f3=Object.defineProperty,p3=Object.getOwnPropertyDescriptor,yd=(t,e,r,i)=>{for(var n=i>1?void 0:i?p3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&f3(e,r,n),n};let Cs=class extends de{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=_r.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>_r.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),_r.closeToast()}render(){const{message:t,variant:e}=_r.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?G`<div class="${fr(r)}">${e==="success"?Pe.CHECKMARK_ICON:null} ${e==="error"?Pe.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};Cs.styles=[be.globalCss,d3],yd([Mt()],Cs.prototype,"open",2),Cs=yd([xe("wcm-modal-toast")],Cs);const g3=.1,bd=2.5,pr=7;function Wa(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+g3}function m3(t,e){const r=Array.prototype.slice.call(En.create(t,{errorCorrectionLevel:e}).modules.data,0),i=Math.sqrt(r.length);return r.reduce((n,s,o)=>(o%i===0?n.push([s]):n[n.length-1].push(s))&&n,[])}const w3={generate(t,e,r){const i="#141414",n="#ffffff",s=[],o=m3(t,"Q"),a=e/o.length,l=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];l.forEach(({x:_,y:S})=>{const A=(o.length-pr)*a*_,T=(o.length-pr)*a*S,v=.45;for(let x=0;x<l.length;x+=1){const g=a*(pr-x*2);s.push(qe`<rect fill="${x%2===0?i:n}" height="${g}" rx="${g*v}" ry="${g*v}" width="${g}" x="${A+a*x}" y="${T+a*x}">`)}});const h=Math.floor((r+25)/a),d=o.length/2-h/2,b=o.length/2+h/2-1,m=[];o.forEach((_,S)=>{_.forEach((A,T)=>{if(o[S][T]&&!(S<pr&&T<pr||S>o.length-(pr+1)&&T<pr||S<pr&&T>o.length-(pr+1))&&!(S>d&&S<b&&T>d&&T<b)){const v=S*a+a/2,x=T*a+a/2;m.push([v,x])}})});const w={};return m.forEach(([_,S])=>{w[_]?w[_].push(S):w[_]=[S]}),Object.entries(w).map(([_,S])=>{const A=S.filter(T=>S.every(v=>!Wa(T,v,a)));return[Number(_),A]}).forEach(([_,S])=>{S.forEach(A=>{s.push(qe`<circle cx="${_}" cy="${A}" fill="${i}" r="${a/bd}">`)})}),Object.entries(w).filter(([_,S])=>S.length>1).map(([_,S])=>{const A=S.filter(T=>S.some(v=>Wa(T,v,a)));return[Number(_),A]}).map(([_,S])=>{S.sort((T,v)=>T<v?-1:1);const A=[];for(const T of S){const v=A.find(x=>x.some(g=>Wa(T,g,a)));v?v.push(T):A.push([T])}return[_,A.map(T=>[T[0],T[T.length-1]])]}).forEach(([_,S])=>{S.forEach(([A,T])=>{s.push(qe`<line x1="${_}" x2="${_}" y1="${A}" y2="${T}" stroke="${i}" stroke-width="${a/(bd/2)}" stroke-linecap="round">`)})}),s}},y3=$e`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var b3=Object.defineProperty,v3=Object.getOwnPropertyDescriptor,Ti=(t,e,r,i)=>{for(var n=i>1?void 0:i?v3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&b3(e,r,n),n};let gr=class extends de{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=vr.state.themeMode==="light"?this.size:this.size-36;return qe`<svg height="${t}" width="${t}">${w3.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":vr.state.themeMode==="dark"};return G`<div style="${`width: ${this.size}px`}" class="${fr(t)}">${this.walletId||this.imageUrl?G`<wcm-wallet-image walletId="${Tt(this.walletId)}" imageId="${Tt(this.imageId)}" imageUrl="${Tt(this.imageUrl)}"></wcm-wallet-image>`:Pe.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};gr.styles=[be.globalCss,y3],Ti([ce()],gr.prototype,"uri",2),Ti([ce({type:Number})],gr.prototype,"size",2),Ti([ce()],gr.prototype,"imageId",2),Ti([ce()],gr.prototype,"walletId",2),Ti([ce()],gr.prototype,"imageUrl",2),gr=Ti([xe("wcm-qrcode")],gr);const _3=$e`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var E3=Object.defineProperty,x3=Object.getOwnPropertyDescriptor,vd=(t,e,r,i)=>{for(var n=i>1?void 0:i?x3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&E3(e,r,n),n};let Os=class extends de{constructor(){super(...arguments),this.onChange=()=>null}render(){return G`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${Pe.SEARCH_ICON}`}};Os.styles=[be.globalCss,_3],vd([ce()],Os.prototype,"onChange",2),Os=vd([xe("wcm-search-input")],Os);const S3=$e`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var D3=Object.defineProperty,I3=Object.getOwnPropertyDescriptor,C3=(t,e,r,i)=>{for(var n=i>1?void 0:i?I3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&D3(e,r,n),n};let Ha=class extends de{render(){return G`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};Ha.styles=[be.globalCss,S3],Ha=C3([xe("wcm-spinner")],Ha);const O3=$e`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var $3=Object.defineProperty,A3=Object.getOwnPropertyDescriptor,Va=(t,e,r,i)=>{for(var n=i>1?void 0:i?A3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&$3(e,r,n),n};let $n=class extends de{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return G`<span><slot class="${fr(t)}"></slot></span>`}};$n.styles=[be.globalCss,O3],Va([ce()],$n.prototype,"variant",2),Va([ce()],$n.prototype,"color",2),$n=Va([xe("wcm-text")],$n);const T3=$e`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var P3=Object.defineProperty,R3=Object.getOwnPropertyDescriptor,Ar=(t,e,r,i)=>{for(var n=i>1?void 0:i?R3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&P3(e,r,n),n};let or=class extends de{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?G`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?G`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){cc.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return G`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${Tt(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:ie.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};or.styles=[be.globalCss,T3],Ar([ce()],or.prototype,"onClick",2),Ar([ce()],or.prototype,"name",2),Ar([ce()],or.prototype,"walletId",2),Ar([ce()],or.prototype,"label",2),Ar([ce()],or.prototype,"imageId",2),Ar([ce({type:Boolean})],or.prototype,"installed",2),Ar([ce({type:Boolean})],or.prototype,"recent",2),or=Ar([xe("wcm-wallet-button")],or);const N3=$e`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var L3=Object.defineProperty,M3=Object.getOwnPropertyDescriptor,$s=(t,e,r,i)=>{for(var n=i>1?void 0:i?M3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&L3(e,r,n),n};let Pi=class extends de{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:ie.getWalletIcon({id:this.walletId,image_id:this.imageId});return G`${e.length?G`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:Pe.WALLET_PLACEHOLDER}`}};Pi.styles=[be.globalCss,N3],$s([ce()],Pi.prototype,"walletId",2),$s([ce()],Pi.prototype,"imageId",2),$s([ce()],Pi.prototype,"imageUrl",2),Pi=$s([xe("wcm-wallet-image")],Pi);var U3=Object.defineProperty,F3=Object.getOwnPropertyDescriptor,_d=(t,e,r,i)=>{for(var n=i>1?void 0:i?F3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&U3(e,r,n),n};let Ka=class extends de{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>ie.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Ut.state.enableExplorer){await Pt.getRecomendedWallets(),Ge.setIsDataLoaded(!0);const{recomendedWallets:t}=Pt.state,e=t.map(r=>ie.getWalletIcon(r));await this.loadImages(e)}else Ge.setIsDataLoaded(!0)}async preloadCustomImages(){const t=ie.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),_r.openToast("Failed preloading","error")}}};_d([Mt()],Ka.prototype,"preload",2),Ka=_d([xe("wcm-explorer-context")],Ka);var j3=Object.defineProperty,k3=Object.getOwnPropertyDescriptor,B3=(t,e,r,i)=>{for(var n=i>1?void 0:i?k3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&j3(e,r,n),n};let Ed=class extends de{constructor(){super(),this.unsubscribeTheme=void 0,be.setTheme(),this.unsubscribeTheme=vr.subscribe(be.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};Ed=B3([xe("wcm-theme-context")],Ed);const z3=$e`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var q3=Object.defineProperty,W3=Object.getOwnPropertyDescriptor,H3=(t,e,r,i)=>{for(var n=i>1?void 0:i?W3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&q3(e,r,n),n};let Ga=class extends de{onGoToQrcode(){ke.push("Qrcode")}render(){const{recomendedWallets:t}=Pt.state,e=[...t,...t],r=ee.RECOMMENDED_WALLET_AMOUNT*2;return G`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${Pe.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${Pe.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((i,n)=>{const s=e[n%e.length];return s?G`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:Pe.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${ie.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};Ga.styles=[be.globalCss,z3],Ga=H3([xe("wcm-android-wallet-selection")],Ga);const V3=$e`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var K3=Object.defineProperty,G3=Object.getOwnPropertyDescriptor,Ri=(t,e,r,i)=>{for(var n=i>1?void 0:i?G3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&K3(e,r,n),n};let Tr=class extends de{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=vr.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:be.getPreset("--wcm-wallet-icon-large-border-radius");let i=0;r.includes("%")?i=88/100*parseInt(r,10):i=parseInt(r,10),i*=1.17;const n=317-i*1.57,s=425-i*1.8;return G`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${i}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${n}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return G`<div class="${fr(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${Tt(this.walletId)}" imageId="${Tt(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Tr.styles=[be.globalCss,V3],Ri([ce()],Tr.prototype,"walletId",2),Ri([ce()],Tr.prototype,"imageId",2),Ri([ce({type:Boolean})],Tr.prototype,"isError",2),Ri([ce({type:Boolean})],Tr.prototype,"isStale",2),Ri([ce()],Tr.prototype,"label",2),Tr=Ri([xe("wcm-connector-waiting")],Tr);const Ni={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:i}=Ut.state,n=(t=Ni.recentWallet())==null?void 0:t.id,s=ee.isMobile()?r:i,o=s==null?void 0:s.filter(a=>n!==a.id);return(e=ee.isMobile()?o==null?void 0:o.map(({id:a,name:l,links:h})=>({id:a,name:l,mobile:h,links:h})):o==null?void 0:o.map(({id:a,name:l,links:h})=>({id:a,name:l,desktop:h,links:h})))!=null?e:[]},recentWallet(){return ie.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=Ni.recentWallet())==null?void 0:e.id,{recomendedWallets:i}=Pt.state;return i.filter(n=>r!==n.id)}},Pr={onConnecting(t){ie.goToConnectingView(t)},manualWalletsTemplate(){return Ni.manualWallets().map(t=>G`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return Ni.recomendedWallets(t).map(e=>G`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=Ni.recentWallet();if(t)return G`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${Tt(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},Y3=$e`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var Z3=Object.defineProperty,J3=Object.getOwnPropertyDescriptor,Q3=(t,e,r,i)=>{for(var n=i>1?void 0:i?J3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&Z3(e,r,n),n};let Ya=class extends de{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Ut.state,r=t!=="ALL"&&e,i=Pr.manualWalletsTemplate(),n=Pr.recomendedWalletsTemplate();let s=[Pr.recentWalletTemplate(),...i,...n];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const l=!!a.length;return G`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${ie.handleUriCopy}" .actionIcon="${Pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${Pe.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${Pe.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${l?G`<wcm-modal-footer><div class="wcm-desktop-title">${Pe.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?G`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};Ya.styles=[be.globalCss,Y3],Ya=Q3([xe("wcm-desktop-wallet-selection")],Ya);const X3=$e`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var e5=Object.defineProperty,t5=Object.getOwnPropertyDescriptor,r5=(t,e,r,i)=>{for(var n=i>1?void 0:i?t5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&e5(e,r,n),n};let Za=class extends de{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Ut.state;return t??e?G`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?G`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?G`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};Za.styles=[be.globalCss,X3],Za=r5([xe("wcm-legal-notice")],Za);const i5=$e`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var n5=Object.defineProperty,s5=Object.getOwnPropertyDescriptor,o5=(t,e,r,i)=>{for(var n=i>1?void 0:i?s5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&n5(e,r,n),n};let Ja=class extends de{onQrcode(){ke.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Ut.state,r=t!=="ALL"&&e,i=Pr.manualWalletsTemplate(),n=Pr.recomendedWalletsTemplate();let s=[Pr.recentWalletTemplate(),...i,...n];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const l=!!a.length;return G`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${Pe.QRCODE_ICON}"></wcm-modal-header>${l?G`<wcm-modal-content><div>${a} ${o?G`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};Ja.styles=[be.globalCss,i5],Ja=o5([xe("wcm-mobile-wallet-selection")],Ja);const a5=$e`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var c5=Object.defineProperty,l5=Object.getOwnPropertyDescriptor,Qa=(t,e,r,i)=>{for(var n=i>1?void 0:i?l5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&c5(e,r,n),n};let Li=class extends de{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=jr.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return ie.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return ie.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&jr.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=ie.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([ti(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,ti(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=ie.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([ti(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,ti(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?jr.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return G`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${fr(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?G`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};Li.styles=[be.globalCss,a5],Qa([Mt()],Li.prototype,"open",2),Qa([Mt()],Li.prototype,"active",2),Li=Qa([xe("wcm-modal")],Li);const u5=$e`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var h5=Object.defineProperty,d5=Object.getOwnPropertyDescriptor,An=(t,e,r,i)=>{for(var n=i>1?void 0:i?d5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&h5(e,r,n),n};let ii=class extends de{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){ee.isMobile()?ke.replace("MobileConnecting"):ke.replace("MobileQrcodeConnecting")}onDesktop(){ke.replace("DesktopConnecting")}onWeb(){ke.replace("WebConnecting")}render(){return G`<div>${this.isRetry?G`<slot></slot>`:null} ${this.isMobile?G`<wcm-button .onClick="${this.onMobile}" .iconLeft="${Pe.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?G`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${Pe.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?G`<wcm-button .onClick="${this.onWeb}" .iconLeft="${Pe.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};ii.styles=[be.globalCss,u5],An([ce({type:Boolean})],ii.prototype,"isMobile",2),An([ce({type:Boolean})],ii.prototype,"isDesktop",2),An([ce({type:Boolean})],ii.prototype,"isWeb",2),An([ce({type:Boolean})],ii.prototype,"isRetry",2),ii=An([xe("wcm-platform-selection")],ii);const f5=$e`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var p5=Object.defineProperty,g5=Object.getOwnPropertyDescriptor,m5=(t,e,r,i)=>{for(var n=i>1?void 0:i?g5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&p5(e,r,n),n};let Xa=class extends de{onClick(){ke.push("WalletExplorer")}render(){const{recomendedWallets:t}=Pt.state,e=Ni.manualWallets(),r=[...t,...e].reverse().slice(0,4);return G`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(i=>{const n=ie.getWalletIcon(i);if(n)return G`<img crossorigin="anonymous" src="${n}">`;const s=ie.getWalletIcon({id:i.id});return s?G`<img crossorigin="anonymous" src="${s}">`:Pe.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>Pe.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};Xa.styles=[be.globalCss,f5],Xa=m5([xe("wcm-view-all-wallets-button")],Xa);const w5=$e`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var y5=Object.defineProperty,b5=Object.getOwnPropertyDescriptor,As=(t,e,r,i)=>{for(var n=i>1?void 0:i?b5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&y5(e,r,n),n};let Mi=class extends de{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=Ge.state;this.uri=t},0)}get overlayEl(){return ie.getShadowRootElement(this,".wcm-qr-container")}render(){return G`<div class="wcm-qr-container">${this.uri?G`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${Tt(this.walletId)}" imageId="${Tt(this.imageId)}"></wcm-qrcode>`:G`<wcm-spinner></wcm-spinner>`}</div>`}};Mi.styles=[be.globalCss,w5],As([ce()],Mi.prototype,"walletId",2),As([ce()],Mi.prototype,"imageId",2),As([Mt()],Mi.prototype,"uri",2),Mi=As([xe("wcm-walletconnect-qr")],Mi);var v5=Object.defineProperty,_5=Object.getOwnPropertyDescriptor,E5=(t,e,r,i)=>{for(var n=i>1?void 0:i?_5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&v5(e,r,n),n};let ec=class extends de{viewTemplate(){return ee.isAndroid()?G`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:ee.isMobile()?G`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:G`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return G`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};ec.styles=[be.globalCss],ec=E5([xe("wcm-connect-wallet-view")],ec);const x5=$e`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var S5=Object.defineProperty,D5=Object.getOwnPropertyDescriptor,xd=(t,e,r,i)=>{for(var n=i>1?void 0:i?D5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&S5(e,r,n),n};let Ts=class extends de{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=ee.getWalletRouterData(),i=e==null?void 0:e.native;if(i){const n=ee.formatNativeUrl(i,t,r);ee.openHref(n,"_self")}}openDesktopApp(){const{walletConnectUri:t}=Ge.state,e=ee.getWalletRouterData();ie.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ee.getWalletRouterData(),{isMobile:i,isWeb:n}=ie.getCachedRouterWalletPlatforms();return G`<wcm-modal-header title="${t}" .onAction="${ie.handleUriCopy}" .actionIcon="${Pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${i}" .isWeb="${n}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${Pe.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Ts.styles=[be.globalCss,x5],xd([Mt()],Ts.prototype,"isError",2),Ts=xd([xe("wcm-desktop-connecting-view")],Ts);const I5=$e`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var C5=Object.defineProperty,O5=Object.getOwnPropertyDescriptor,$5=(t,e,r,i)=>{for(var n=i>1?void 0:i?O5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&C5(e,r,n),n};let tc=class extends de{onInstall(t){t&&ee.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:i}=ee.getWalletRouterData();return G`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(i)}" .iconLeft="${Pe.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};tc.styles=[be.globalCss,I5],tc=$5([xe("wcm-install-wallet-view")],tc);const A5=$e`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var T5=Object.defineProperty,P5=Object.getOwnPropertyDescriptor,Sd=(t,e,r,i)=>{for(var n=i>1?void 0:i?P5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&T5(e,r,n),n};let Ps=class extends de{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:i}=ee.getWalletRouterData(),n=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(n&&!e){const o=ee.formatNativeUrl(n,t,i);ee.openHref(o,"_self")}else if(s){const o=ee.formatUniversalUrl(s,t,i);ee.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=Ge.state,r=ee.getWalletRouterData();ie.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&ee.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:i,mobile:n}=ee.getWalletRouterData(),{isWeb:s}=ie.getCachedRouterWalletPlatforms(),o=i==null?void 0:i.ios,a=n==null?void 0:n.universal;return G`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="Tap 'Open' to continue" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${Pe.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?G`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${Tt(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${Pe.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};Ps.styles=[be.globalCss,A5],Sd([Mt()],Ps.prototype,"isError",2),Ps=Sd([xe("wcm-mobile-connecting-view")],Ps);const R5=$e`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var N5=Object.defineProperty,L5=Object.getOwnPropertyDescriptor,M5=(t,e,r,i)=>{for(var n=i>1?void 0:i?L5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&N5(e,r,n),n};let rc=class extends de{render(){const{name:t,id:e,image_id:r}=ee.getWalletRouterData(),{isDesktop:i,isWeb:n}=ie.getCachedRouterWalletPlatforms();return G`<wcm-modal-header title="${t}" .onAction="${ie.handleUriCopy}" .actionIcon="${Pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${Tt(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${i}" .isWeb="${n}"></wcm-platform-selection></wcm-info-footer>`}};rc.styles=[be.globalCss,R5],rc=M5([xe("wcm-mobile-qr-connecting-view")],rc);var U5=Object.defineProperty,F5=Object.getOwnPropertyDescriptor,j5=(t,e,r,i)=>{for(var n=i>1?void 0:i?F5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&U5(e,r,n),n};let ic=class extends de{render(){return G`<wcm-modal-header title="Scan the code" .onAction="${ie.handleUriCopy}" .actionIcon="${Pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};ic.styles=[be.globalCss],ic=j5([xe("wcm-qrcode-view")],ic);const k5=$e`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var B5=Object.defineProperty,z5=Object.getOwnPropertyDescriptor,Tn=(t,e,r,i)=>{for(var n=i>1?void 0:i?z5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&B5(e,r,n),n};const nc=40;let ni=class extends de{constructor(){super(...arguments),this.loading=!Pt.state.wallets.listings.length,this.firstFetch=!Pt.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=ie.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,Pt.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),Pt.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return ie.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=Pt.state,{listings:r,total:i}=this.search?e:t;return i<=nc||r.length>=i}async fetchWallets(){var t;const{wallets:e,search:r}=Pt.state,{listings:i,total:n,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||n>nc&&i.length<n))try{this.loading=!0;const o=(t=Ge.state.chains)==null?void 0:t.join(","),{listings:a}=await Pt.getWallets({page:this.firstFetch?1:s+1,entries:nc,search:this.search,version:2,chains:o}),l=a.map(h=>ie.getWalletIcon(h));await Promise.all([...l.map(async h=>ie.preloadImage(h)),ee.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),_r.openToast(ie.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){ee.isAndroid()?ie.handleMobileLinking(t):ie.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=Pt.state,{listings:r}=this.search?e:t,i=this.loading&&!r.length,n=this.search.length>=3;let s=Pr.manualWalletsTemplate(),o=Pr.recomendedWalletsTemplate(!0);n&&(s=s.filter(({values:h})=>ie.caseSafeIncludes(h[0],this.search)),o=o.filter(({values:h})=>ie.caseSafeIncludes(h[0],this.search)));const a=!this.loading&&!r.length&&!o.length,l={"wcm-loading":i,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return G`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${fr(l)}"><div class="wcm-grid">${i?null:s} ${i?null:o} ${i?null:r.map(h=>G`${h?G`<wcm-wallet-button imageId="${h.image_id}" name="${h.name}" walletId="${h.id}" .onClick="${()=>this.onConnect(h)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?G`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?G`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};ni.styles=[be.globalCss,k5],Tn([Mt()],ni.prototype,"loading",2),Tn([Mt()],ni.prototype,"firstFetch",2),Tn([Mt()],ni.prototype,"search",2),Tn([Mt()],ni.prototype,"endReached",2),ni=Tn([xe("wcm-wallet-explorer-view")],ni);const q5=$e`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var W5=Object.defineProperty,H5=Object.getOwnPropertyDescriptor,Dd=(t,e,r,i)=>{for(var n=i>1?void 0:i?H5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&W5(e,r,n),n};let Rs=class extends de{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=ee.getWalletRouterData(),i=e==null?void 0:e.universal;if(i){const n=ee.formatUniversalUrl(i,t,r);ee.openHref(n,"_blank")}}openWebWallet(){const{walletConnectUri:t}=Ge.state,e=ee.getWalletRouterData();ie.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ee.getWalletRouterData(),{isMobile:i,isDesktop:n}=ie.getCachedRouterWalletPlatforms(),s=ee.isMobile();return G`<wcm-modal-header title="${t}" .onAction="${ie.handleUriCopy}" .actionIcon="${Pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${i}" .isDesktop="${s?!1:n}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${Pe.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Rs.styles=[be.globalCss,q5],Dd([Mt()],Rs.prototype,"isError",2),Rs=Dd([xe("wcm-web-connecting-view")],Rs);const V5=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return Li},get WcmQrCode(){return gr}},Symbol.toStringTag,{value:"Module"}));me.PAGE_SIZE=F2,me.configureConnection=S2,me.connect=$2,me.createSharedState=T2,me.decrypt=P2,me.disconnect=R2,me.emitter=dn,me.getAccount=C2,me.getBalance=O2,me.getEvents=N2,me.getRecords=M2,me.getWalletConnectModalSignClient=Be,me.importSharedState=L2,me.projectId=uh,me.requestCreateEvent=A2,me.requestSignature=U2,me.shortenAddress=ta,me.signClient_puzzleProps=E2,me.useAccount=D2,me.useBalance=I2,me.useOnSessionDelete=us,me.useOnSessionEvent=ea,me.useOnSessionExpire=dh,me.useOnSessionUpdate=Qo,me.useSession=Xo,me.walletURL=Jo,me.wc_aleo_chains=ls,me.wc_aleo_methods=Yo,me.wc_events=Zo,me.web3modal_puzzle_props=hh,Object.defineProperty(me,Symbol.toStringTag,{value:"Module"})});
