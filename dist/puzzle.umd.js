(function(ze,qe){typeof exports=="object"&&typeof module<"u"?qe(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],qe):(ze=typeof globalThis<"u"?globalThis:ze||self,qe(ze["@puzzlehq/sdk"]={},ze.React))})(this,function(ze,qe){"use strict";var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function bo(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var _o={exports:{}},ci={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl;function h0(){if(cl)return ci;cl=1;var t=qe,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,u){var d,f={},g=null,y=null;u!==void 0&&(g=""+u),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(y=c.ref);for(d in c)n.call(c,d)&&!s.hasOwnProperty(d)&&(f[d]=c[d]);if(a&&a.defaultProps)for(d in c=a.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:e,type:a,key:g,ref:y,props:f,_owner:i.current}}return ci.Fragment=r,ci.jsx=o,ci.jsxs=o,ci}var li={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ll;function d0(){return ll||(ll=1,process.env.NODE_ENV!=="production"&&function(){var t=qe,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),b=Symbol.iterator,_="@@iterator";function O(D){if(D===null||typeof D!="object")return null;var U=b&&D[b]||D[_];return typeof U=="function"?U:null}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function v(D){{for(var U=arguments.length,Z=new Array(U>1?U-1:0),ae=1;ae<U;ae++)Z[ae-1]=arguments[ae];S("error",D,Z)}}function S(D,U,Z){{var ae=I.ReactDebugCurrentFrame,Fe=ae.getStackAddendum();Fe!==""&&(U+="%s",Z=Z.concat([Fe]));var Ie=Z.map(function($e){return String($e)});Ie.unshift("Warning: "+U),Function.prototype.apply.call(console[D],console,Ie)}}var w=!1,x=!1,p=!1,l=!1,m=!1,P;P=Symbol.for("react.module.reference");function $(D){return!!(typeof D=="string"||typeof D=="function"||D===n||D===s||m||D===i||D===u||D===d||l||D===y||w||x||p||typeof D=="object"&&D!==null&&(D.$$typeof===g||D.$$typeof===f||D.$$typeof===o||D.$$typeof===a||D.$$typeof===c||D.$$typeof===P||D.getModuleId!==void 0))}function F(D,U,Z){var ae=D.displayName;if(ae)return ae;var Fe=U.displayName||U.name||"";return Fe!==""?Z+"("+Fe+")":Z}function B(D){return D.displayName||"Context"}function H(D){if(D==null)return null;if(typeof D.tag=="number"&&v("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof D=="function")return D.displayName||D.name||null;if(typeof D=="string")return D;switch(D){case n:return"Fragment";case r:return"Portal";case s:return"Profiler";case i:return"StrictMode";case u:return"Suspense";case d:return"SuspenseList"}if(typeof D=="object")switch(D.$$typeof){case a:var U=D;return B(U)+".Consumer";case o:var Z=D;return B(Z._context)+".Provider";case c:return F(D,D.render,"ForwardRef");case f:var ae=D.displayName||null;return ae!==null?ae:H(D.type)||"Memo";case g:{var Fe=D,Ie=Fe._payload,$e=Fe._init;try{return H($e(Ie))}catch{return null}}}return null}var A=Object.assign,N=0,G,q,k,W,j,V,ce;function K(){}K.__reactDisabledLog=!0;function se(){{if(N===0){G=console.log,q=console.info,k=console.warn,W=console.error,j=console.group,V=console.groupCollapsed,ce=console.groupEnd;var D={configurable:!0,enumerable:!0,value:K,writable:!0};Object.defineProperties(console,{info:D,log:D,warn:D,error:D,group:D,groupCollapsed:D,groupEnd:D})}N++}}function ee(){{if(N--,N===0){var D={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:A({},D,{value:G}),info:A({},D,{value:q}),warn:A({},D,{value:k}),error:A({},D,{value:W}),group:A({},D,{value:j}),groupCollapsed:A({},D,{value:V}),groupEnd:A({},D,{value:ce})})}N<0&&v("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ie=I.ReactCurrentDispatcher,M;function L(D,U,Z){{if(M===void 0)try{throw Error()}catch(Fe){var ae=Fe.stack.trim().match(/\n( *(at )?)/);M=ae&&ae[1]||""}return`
`+M+D}}var R=!1,h;{var C=typeof WeakMap=="function"?WeakMap:Map;h=new C}function Y(D,U){if(!D||R)return"";{var Z=h.get(D);if(Z!==void 0)return Z}var ae;R=!0;var Fe=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ie;Ie=ie.current,ie.current=null,se();try{if(U){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(pr){ae=pr}Reflect.construct(D,[],$e)}else{try{$e.call()}catch(pr){ae=pr}D.call($e.prototype)}}else{try{throw Error()}catch(pr){ae=pr}D()}}catch(pr){if(pr&&ae&&typeof pr.stack=="string"){for(var De=pr.stack.split(`
`),At=ae.stack.split(`
`),rt=De.length-1,ct=At.length-1;rt>=1&&ct>=0&&De[rt]!==At[ct];)ct--;for(;rt>=1&&ct>=0;rt--,ct--)if(De[rt]!==At[ct]){if(rt!==1||ct!==1)do if(rt--,ct--,ct<0||De[rt]!==At[ct]){var yt=`
`+De[rt].replace(" at new "," at ");return D.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",D.displayName)),typeof D=="function"&&h.set(D,yt),yt}while(rt>=1&&ct>=0);break}}}finally{R=!1,ie.current=Ie,ee(),Error.prepareStackTrace=Fe}var Qr=D?D.displayName||D.name:"",fo=Qr?L(Qr):"";return typeof D=="function"&&h.set(D,fo),fo}function X(D,U,Z){return Y(D,!1)}function Ee(D){var U=D.prototype;return!!(U&&U.isReactComponent)}function Se(D,U,Z){if(D==null)return"";if(typeof D=="function")return Y(D,Ee(D));if(typeof D=="string")return L(D);switch(D){case u:return L("Suspense");case d:return L("SuspenseList")}if(typeof D=="object")switch(D.$$typeof){case c:return X(D.render);case f:return Se(D.type,U,Z);case g:{var ae=D,Fe=ae._payload,Ie=ae._init;try{return Se(Ie(Fe),U,Z)}catch{}}}return""}var me=Object.prototype.hasOwnProperty,Te={},Qe=I.ReactDebugCurrentFrame;function He(D){if(D){var U=D._owner,Z=Se(D.type,D._source,U?U.type:null);Qe.setExtraStackFrame(Z)}else Qe.setExtraStackFrame(null)}function Ae(D,U,Z,ae,Fe){{var Ie=Function.call.bind(me);for(var $e in D)if(Ie(D,$e)){var De=void 0;try{if(typeof D[$e]!="function"){var At=Error((ae||"React class")+": "+Z+" type `"+$e+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof D[$e]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw At.name="Invariant Violation",At}De=D[$e](U,$e,ae,Z,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(rt){De=rt}De&&!(De instanceof Error)&&(He(Fe),v("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",ae||"React class",Z,$e,typeof De),He(null)),De instanceof Error&&!(De.message in Te)&&(Te[De.message]=!0,He(Fe),v("Failed %s type: %s",Z,De.message),He(null))}}}var Ce=Array.isArray;function we(D){return Ce(D)}function ve(D){{var U=typeof Symbol=="function"&&Symbol.toStringTag,Z=U&&D[Symbol.toStringTag]||D.constructor.name||"Object";return Z}}function ye(D){try{return fe(D),!1}catch{return!0}}function fe(D){return""+D}function he(D){if(ye(D))return v("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ve(D)),fe(D)}var oe=I.ReactCurrentOwner,be={key:!0,ref:!0,__self:!0,__source:!0},xe,le,Oe;Oe={};function Ne(D){if(me.call(D,"ref")){var U=Object.getOwnPropertyDescriptor(D,"ref").get;if(U&&U.isReactWarning)return!1}return D.ref!==void 0}function Ue(D){if(me.call(D,"key")){var U=Object.getOwnPropertyDescriptor(D,"key").get;if(U&&U.isReactWarning)return!1}return D.key!==void 0}function je(D,U){if(typeof D.ref=="string"&&oe.current&&U&&oe.current.stateNode!==U){var Z=H(oe.current.type);Oe[Z]||(v('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',H(oe.current.type),D.ref),Oe[Z]=!0)}}function Me(D,U){{var Z=function(){xe||(xe=!0,v("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",U))};Z.isReactWarning=!0,Object.defineProperty(D,"key",{get:Z,configurable:!0})}}function tr(D,U){{var Z=function(){le||(le=!0,v("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",U))};Z.isReactWarning=!0,Object.defineProperty(D,"ref",{get:Z,configurable:!0})}}var ar=function(D,U,Z,ae,Fe,Ie,$e){var De={$$typeof:e,type:D,key:U,ref:Z,props:$e,_owner:Ie};return De._store={},Object.defineProperty(De._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(De,"_self",{configurable:!1,enumerable:!1,writable:!1,value:ae}),Object.defineProperty(De,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Fe}),Object.freeze&&(Object.freeze(De.props),Object.freeze(De)),De};function xr(D,U,Z,ae,Fe){{var Ie,$e={},De=null,At=null;Z!==void 0&&(he(Z),De=""+Z),Ue(U)&&(he(U.key),De=""+U.key),Ne(U)&&(At=U.ref,je(U,Fe));for(Ie in U)me.call(U,Ie)&&!be.hasOwnProperty(Ie)&&($e[Ie]=U[Ie]);if(D&&D.defaultProps){var rt=D.defaultProps;for(Ie in rt)$e[Ie]===void 0&&($e[Ie]=rt[Ie])}if(De||At){var ct=typeof D=="function"?D.displayName||D.name||"Unknown":D;De&&Me($e,ct),At&&tr($e,ct)}return ar(D,De,At,Fe,ae,oe.current,$e)}}var It=I.ReactCurrentOwner,Dr=I.ReactDebugCurrentFrame;function cr(D){if(D){var U=D._owner,Z=Se(D.type,D._source,U?U.type:null);Dr.setExtraStackFrame(Z)}else Dr.setExtraStackFrame(null)}var Zr;Zr=!1;function Xe(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function Ge(){{if(It.current){var D=H(It.current.type);if(D)return`

Check the render method of \``+D+"`."}return""}}function st(D){{if(D!==void 0){var U=D.fileName.replace(/^.*[\\\/]/,""),Z=D.lineNumber;return`

Check your code at `+U+":"+Z+"."}return""}}var tt={};function ot(D){{var U=Ge();if(!U){var Z=typeof D=="string"?D:D.displayName||D.name;Z&&(U=`

Check the top-level render call using <`+Z+">.")}return U}}function Ye(D,U){{if(!D._store||D._store.validated||D.key!=null)return;D._store.validated=!0;var Z=ot(U);if(tt[Z])return;tt[Z]=!0;var ae="";D&&D._owner&&D._owner!==It.current&&(ae=" It was passed a child from "+H(D._owner.type)+"."),cr(D),v('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Z,ae),cr(null)}}function ht(D,U){{if(typeof D!="object")return;if(we(D))for(var Z=0;Z<D.length;Z++){var ae=D[Z];Xe(ae)&&Ye(ae,U)}else if(Xe(D))D._store&&(D._store.validated=!0);else if(D){var Fe=O(D);if(typeof Fe=="function"&&Fe!==D.entries)for(var Ie=Fe.call(D),$e;!($e=Ie.next()).done;)Xe($e.value)&&Ye($e.value,U)}}}function gt(D){{var U=D.type;if(U==null||typeof U=="string")return;var Z;if(typeof U=="function")Z=U.propTypes;else if(typeof U=="object"&&(U.$$typeof===c||U.$$typeof===f))Z=U.propTypes;else return;if(Z){var ae=H(U);Ae(Z,D.props,"prop",ae,D)}else if(U.PropTypes!==void 0&&!Zr){Zr=!0;var Fe=H(U);v("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Fe||"Unknown")}typeof U.getDefaultProps=="function"&&!U.getDefaultProps.isReactClassApproved&&v("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function mt(D){{for(var U=Object.keys(D.props),Z=0;Z<U.length;Z++){var ae=U[Z];if(ae!=="children"&&ae!=="key"){cr(D),v("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",ae),cr(null);break}}D.ref!==null&&(cr(D),v("Invalid attribute `ref` supplied to `React.Fragment`."),cr(null))}}function dt(D,U,Z,ae,Fe,Ie){{var $e=$(D);if(!$e){var De="";(D===void 0||typeof D=="object"&&D!==null&&Object.keys(D).length===0)&&(De+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var At=st(Fe);At?De+=At:De+=Ge();var rt;D===null?rt="null":we(D)?rt="array":D!==void 0&&D.$$typeof===e?(rt="<"+(H(D.type)||"Unknown")+" />",De=" Did you accidentally export a JSX literal instead of a component?"):rt=typeof D,v("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",rt,De)}var ct=xr(D,U,Z,Fe,Ie);if(ct==null)return ct;if($e){var yt=U.children;if(yt!==void 0)if(ae)if(we(yt)){for(var Qr=0;Qr<yt.length;Qr++)ht(yt[Qr],D);Object.freeze&&Object.freeze(yt)}else v("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ht(yt,D)}return D===n?mt(ct):gt(ct),ct}}function wt(D,U,Z){return dt(D,U,Z,!0)}function ft(D,U,Z){return dt(D,U,Z,!1)}var at=ft,Ke=wt;li.Fragment=n,li.jsx=at,li.jsxs=Ke}()),li}process.env.NODE_ENV==="production"?_o.exports=h0():_o.exports=d0();var Eo=_o.exports;const f0=Symbol(),ul=Object.getPrototypeOf,So=new WeakMap,p0=t=>t&&(So.has(t)?So.get(t):ul(t)===Object.prototype||ul(t)===Array.prototype),g0=t=>p0(t)&&t[f0]||null,hl=(t,e=!0)=>{So.set(t,e)},xo=t=>typeof t=="object"&&t!==null,Lr=new WeakMap,ls=new WeakSet,m0=(t=Object.is,e=(u,d)=>new Proxy(u,d),r=u=>xo(u)&&!ls.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),n=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},i=new WeakMap,s=(u,d,f=n)=>{const g=i.get(u);if((g==null?void 0:g[0])===d)return g[1];const y=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return hl(y,!0),i.set(u,[d,y]),Reflect.ownKeys(u).forEach(b=>{if(Object.getOwnPropertyDescriptor(y,b))return;const _=Reflect.get(u,b),O={value:_,enumerable:!0,configurable:!0};if(ls.has(_))hl(_,!1);else if(_ instanceof Promise)delete O.value,O.get=()=>f(_);else if(Lr.has(_)){const[I,v]=Lr.get(_);O.value=s(I,v(),f)}Object.defineProperty(y,b,O)}),Object.preventExtensions(y)},o=new WeakMap,a=[1,1],c=u=>{if(!xo(u))throw new Error("object required");const d=o.get(u);if(d)return d;let f=a[0];const g=new Set,y=(P,$=++a[0])=>{f!==$&&(f=$,g.forEach(F=>F(P,$)))};let b=a[1];const _=(P=++a[1])=>(b!==P&&!g.size&&(b=P,I.forEach(([$])=>{const F=$[1](P);F>f&&(f=F)})),f),O=P=>($,F)=>{const B=[...$];B[1]=[P,...B[1]],y(B,F)},I=new Map,v=(P,$)=>{if(g.size){const F=$[3](O(P));I.set(P,[$,F])}else I.set(P,[$])},S=P=>{var $;const F=I.get(P);F&&(I.delete(P),($=F[1])==null||$.call(F))},w=P=>(g.add(P),g.size===1&&I.forEach(([F,B],H)=>{const A=F[3](O(H));I.set(H,[F,A])}),()=>{g.delete(P),g.size===0&&I.forEach(([F,B],H)=>{B&&(B(),I.set(H,[F]))})}),x=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),l=e(x,{deleteProperty(P,$){const F=Reflect.get(P,$);S($);const B=Reflect.deleteProperty(P,$);return B&&y(["delete",[$],F]),B},set(P,$,F,B){const H=Reflect.has(P,$),A=Reflect.get(P,$,B);if(H&&(t(A,F)||o.has(F)&&t(A,o.get(F))))return!0;S($),xo(F)&&(F=g0(F)||F);let N=F;if(F instanceof Promise)F.then(G=>{F.status="fulfilled",F.value=G,y(["resolve",[$],G])}).catch(G=>{F.status="rejected",F.reason=G,y(["reject",[$],G])});else{!Lr.has(F)&&r(F)&&(N=c(F));const G=!ls.has(N)&&Lr.get(N);G&&v($,G)}return Reflect.set(P,$,N,B),y(["set",[$],F,A]),!0}});o.set(u,l);const m=[x,_,s,w];return Lr.set(l,m),Reflect.ownKeys(u).forEach(P=>{const $=Object.getOwnPropertyDescriptor(u,P);"value"in $&&(l[P]=u[P],delete $.value,delete $.writable),Object.defineProperty(x,P,$)}),l})=>[c,Lr,ls,t,e,r,n,i,s,o,a],[w0]=m0();function Mr(t={}){return w0(t)}function rn(t,e,r){const n=Lr.get(t);let i;const s=[],o=n[3];let a=!1;const u=o(d=>{if(s.push(d),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,u()}}function y0(t,e){const r=Lr.get(t),[n,i,s]=r;return s(n,i(),e)}const _t=Mr({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),et={state:_t,subscribe(t){return rn(_t,()=>t(_t))},push(t,e){t!==_t.view&&(_t.view=t,e&&(_t.data=e),_t.history.push(t))},reset(t){_t.view=t,_t.history=[t]},replace(t){_t.history.length>1&&(_t.history[_t.history.length-1]=t,_t.view=t)},goBack(){if(_t.history.length>1){_t.history.pop();const[t]=_t.history.slice(-1);_t.view=t}},setData(t){_t.data=t}},ne={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return ne.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return ne.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(ne.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!ne.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(ne.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(ne.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(ne.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(ne.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=et.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},v0=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),Rt=Mr({enabled:v0,userSessionId:"",events:[],connectedWalletId:void 0}),dl={state:Rt,subscribe(t){return rn(Rt.events,()=>t(y0(Rt.events[Rt.events.length-1])))},initialize(){Rt.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(Rt.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){Rt.connectedWalletId=t},click(t){if(Rt.enabled){const e={type:"CLICK",name:t.name,userSessionId:Rt.userSessionId,timestamp:Date.now(),data:t};Rt.events.push(e)}},track(t){if(Rt.enabled){const e={type:"TRACK",name:t.name,userSessionId:Rt.userSessionId,timestamp:Date.now(),data:t};Rt.events.push(e)}},view(t){if(Rt.enabled){const e={type:"VIEW",name:t.name,userSessionId:Rt.userSessionId,timestamp:Date.now(),data:t};Rt.events.push(e)}}},mr=Mr({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),ut={state:mr,subscribe(t){return rn(mr,()=>t(mr))},setChains(t){mr.chains=t},setWalletConnectUri(t){mr.walletConnectUri=t},setIsCustomDesktop(t){mr.isCustomDesktop=t},setIsCustomMobile(t){mr.isCustomMobile=t},setIsDataLoaded(t){mr.isDataLoaded=t},setIsUiLoaded(t){mr.isUiLoaded=t},setIsAuth(t){mr.isAuth=t}},us=Mr({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Yt={state:us,subscribe(t){return rn(us,()=>t(us))},setConfig(t){var e,r;dl.initialize(),ut.setChains(t.chains),ut.setIsAuth(!!t.enableAuthMode),ut.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),ut.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),ne.setModalVersionInStorage(),Object.assign(us,t)}};var b0=Object.defineProperty,fl=Object.getOwnPropertySymbols,_0=Object.prototype.hasOwnProperty,E0=Object.prototype.propertyIsEnumerable,pl=(t,e,r)=>e in t?b0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,S0=(t,e)=>{for(var r in e||(e={}))_0.call(e,r)&&pl(t,r,e[r]);if(fl)for(var r of fl(e))E0.call(e,r)&&pl(t,r,e[r]);return t};const Do="https://explorer-api.walletconnect.com",Co="wcm",Oo="js-2.6.2";async function hs(t,e){const r=S0({sdkType:Co,sdkVersion:Oo},e),n=new URL(t,Do);return n.searchParams.append("projectId",Yt.state.projectId),Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,String(s))}),(await fetch(n)).json()}const nn={async getDesktopListings(t){return hs("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return hs("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return hs("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return hs("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${Do}/w3m/v1/getWalletImage/${t}?projectId=${Yt.state.projectId}&sdkType=${Co}&sdkVersion=${Oo}`},getAssetImageUrl(t){return`${Do}/w3m/v1/getAssetImage/${t}?projectId=${Yt.state.projectId}&sdkType=${Co}&sdkVersion=${Oo}`}};var x0=Object.defineProperty,gl=Object.getOwnPropertySymbols,D0=Object.prototype.hasOwnProperty,C0=Object.prototype.propertyIsEnumerable,ml=(t,e,r)=>e in t?x0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,O0=(t,e)=>{for(var r in e||(e={}))D0.call(e,r)&&ml(t,r,e[r]);if(gl)for(var r of gl(e))C0.call(e,r)&&ml(t,r,e[r]);return t};const wl=ne.isMobile(),wr=Mr({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),Wt={state:wr,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Yt.state;if(t==="NONE"||e==="ALL"&&!t)return wr.recomendedWallets;if(ne.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await nn.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),c=t.indexOf(o.id);return a-c}),wr.recomendedWallets=i}else{const{chains:r,isAuth:n}=ut.state,i=r==null?void 0:r.join(","),s=ne.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:ne.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=wl?await nn.getMobileListings(o):await nn.getDesktopListings(o);wr.recomendedWallets=Object.values(a)}return wr.recomendedWallets},async getWallets(t){const e=O0({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Yt.state,{recomendedWallets:i}=wr;if(n==="ALL")return wr.wallets;i.length?e.excludedIds=i.map(f=>f.id).join(","):ne.isArray(r)&&(e.excludedIds=r.join(",")),ne.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),ut.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=wl?await nn.getMobileListings(e):await nn.getDesktopListings(e),u=Object.values(a),d=o?"search":"wallets";return wr[d]={listings:[...wr[d].listings,...u],total:c,page:s??1},{listings:u,total:c}},getWalletImageUrl(t){return nn.getWalletImageUrl(t)},getAssetImageUrl(t){return nn.getAssetImageUrl(t)},resetSearch(){wr.search={listings:[],total:0,page:1}}},$n=Mr({open:!1}),sn={state:$n,subscribe(t){return rn($n,()=>t($n))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=ut.state;if(ne.removeWalletConnectDeepLink(),ut.setWalletConnectUri(t==null?void 0:t.uri),ut.setChains(t==null?void 0:t.chains),et.reset("ConnectWallet"),r&&n)$n.open=!0,e();else{const i=setInterval(()=>{const s=ut.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),$n.open=!0,e())},200)}})},close(){$n.open=!1}};var I0=Object.defineProperty,yl=Object.getOwnPropertySymbols,A0=Object.prototype.hasOwnProperty,$0=Object.prototype.propertyIsEnumerable,vl=(t,e,r)=>e in t?I0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,R0=(t,e)=>{for(var r in e||(e={}))A0.call(e,r)&&vl(t,r,e[r]);if(yl)for(var r of yl(e))$0.call(e,r)&&vl(t,r,e[r]);return t};function P0(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const ui=Mr({themeMode:P0()?"dark":"light"}),Fr={state:ui,subscribe(t){return rn(ui,()=>t(ui))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(ui.themeMode=e),r&&(ui.themeVariables=R0({},r))}},on=Mr({open:!1,message:"",variant:"success"}),Ur={state:on,subscribe(t){return rn(on,()=>t(on))},openToast(t,e){on.open=!0,on.message=t,on.variant=e},closeToast(){on.open=!1}};let T0=class{constructor(e){this.openModal=sn.open,this.closeModal=sn.close,this.subscribeModal=sn.subscribe,this.setTheme=Fr.setThemeConfig,Fr.setThemeConfig(e),Yt.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>tE);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),ut.setIsUiLoaded(!0)}}};var Io={exports:{}},Rn=typeof Reflect=="object"?Reflect:null,bl=Rn&&typeof Rn.apply=="function"?Rn.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ds;Rn&&typeof Rn.ownKeys=="function"?ds=Rn.ownKeys:Object.getOwnPropertySymbols?ds=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ds=function(e){return Object.getOwnPropertyNames(e)};function N0(t){console&&console.warn&&console.warn(t)}var _l=Number.isNaN||function(e){return e!==e};function We(){We.init.call(this)}Io.exports=We,Io.exports.once=U0,We.EventEmitter=We,We.prototype._events=void 0,We.prototype._eventsCount=0,We.prototype._maxListeners=void 0;var El=10;function fs(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(We,"defaultMaxListeners",{enumerable:!0,get:function(){return El},set:function(t){if(typeof t!="number"||t<0||_l(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");El=t}}),We.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},We.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||_l(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Sl(t){return t._maxListeners===void 0?We.defaultMaxListeners:t._maxListeners}We.prototype.getMaxListeners=function(){return Sl(this)},We.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")bl(c,this,r);else for(var u=c.length,d=Il(c,u),n=0;n<u;++n)bl(d[n],this,r);return!0};function xl(t,e,r,n){var i,s,o;if(fs(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Sl(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,N0(a)}return t}We.prototype.addListener=function(e,r){return xl(this,e,r,!1)},We.prototype.on=We.prototype.addListener,We.prototype.prependListener=function(e,r){return xl(this,e,r,!0)};function L0(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Dl(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=L0.bind(n);return i.listener=r,n.wrapFn=i,i}We.prototype.once=function(e,r){return fs(r),this.on(e,Dl(this,e,r)),this},We.prototype.prependOnceListener=function(e,r){return fs(r),this.prependListener(e,Dl(this,e,r)),this},We.prototype.removeListener=function(e,r){var n,i,s,o,a;if(fs(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():M0(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},We.prototype.off=We.prototype.removeListener,We.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Cl(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?F0(i):Il(i,i.length)}We.prototype.listeners=function(e){return Cl(this,e,!0)},We.prototype.rawListeners=function(e){return Cl(this,e,!1)},We.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Ol.call(t,e)},We.prototype.listenerCount=Ol;function Ol(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}We.prototype.eventNames=function(){return this._eventsCount>0?ds(this._events):[]};function Il(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function M0(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function F0(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function U0(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Al(t,e,s,{once:!0}),e!=="error"&&j0(t,i,{once:!0})})}function j0(t,e,r){typeof t.on=="function"&&Al(t,"error",e,r)}function Al(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var hr=Io.exports;const $l=cs(hr);var ps={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Ao=function(t,e){return Ao=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ao(t,e)};function k0(t,e){Ao(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var $o=function(){return $o=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$o.apply(this,arguments)};function B0(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function z0(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function W0(t,e){return function(r,n){e(r,n,t)}}function q0(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function H0(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function V0(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function K0(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function G0(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Ro(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rl(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Y0(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Rl(arguments[e]));return t}function J0(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function hi(t){return this instanceof hi?(this.v=t,this):new hi(t)}function Z0(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(g){n[g]&&(i[g]=function(y){return new Promise(function(b,_){s.push([g,y,b,_])>1||a(g,y)})})}function a(g,y){try{c(n[g](y))}catch(b){f(s[0][3],b)}}function c(g){g.value instanceof hi?Promise.resolve(g.value.v).then(u,d):f(s[0][2],g)}function u(g){a("next",g)}function d(g){a("throw",g)}function f(g,y){g(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Q0(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:hi(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function X0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Ro=="function"?Ro(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function e1(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function t1(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function r1(t){return t&&t.__esModule?t:{default:t}}function n1(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function i1(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const nr=bo(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return $o},__asyncDelegator:Q0,__asyncGenerator:Z0,__asyncValues:X0,__await:hi,__awaiter:H0,__classPrivateFieldGet:n1,__classPrivateFieldSet:i1,__createBinding:K0,__decorate:z0,__exportStar:G0,__extends:k0,__generator:V0,__importDefault:r1,__importStar:t1,__makeTemplateObject:e1,__metadata:q0,__param:W0,__read:Rl,__rest:B0,__spread:Y0,__spreadArrays:J0,__values:Ro},Symbol.toStringTag,{value:"Module"})));var di={};Object.defineProperty(di,"__esModule",{value:!0});function s1(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}di.safeJsonParse=s1;function o1(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}di.safeJsonStringify=o1;var fi={exports:{}},Pl;function a1(){return Pl||(Pl=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Gt<"u"&&Gt.localStorage?fi.exports=Gt.localStorage:typeof window<"u"&&window.localStorage?fi.exports=window.localStorage:fi.exports=new e}()),fi.exports}var Po={},pi={},Tl;function c1(){if(Tl)return pi;Tl=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.IKeyValueStorage=void 0;class t{}return pi.IKeyValueStorage=t,pi}var gi={},Nl;function l1(){if(Nl)return gi;Nl=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.parseEntry=void 0;const t=di;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return gi.parseEntry=e,gi}var Ll;function u1(){return Ll||(Ll=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nr;e.__exportStar(c1(),t),e.__exportStar(l1(),t)}(Po)),Po}Object.defineProperty(ps,"__esModule",{value:!0}),ps.KeyValueStorage=void 0;const Pn=nr,Ml=di,h1=Pn.__importDefault(a1()),d1=u1();class Fl{constructor(){this.localStorage=h1.default}getKeys(){return Pn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Pn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(d1.parseEntry)})}getItem(e){return Pn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return Ml.safeJsonParse(r)})}setItem(e,r){return Pn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Ml.safeJsonStringify(r))})}removeItem(e){return Pn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}ps.KeyValueStorage=Fl;var f1=ps.default=Fl,Tn={},mi={},re={},To={},wi={},Ul;function p1(){if(Ul)return wi;Ul=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return wi.delay=t,wi}var an={},No={},cn={},jl;function g1(){return jl||(jl=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.ONE_THOUSAND=cn.ONE_HUNDRED=void 0,cn.ONE_HUNDRED=100,cn.ONE_THOUSAND=1e3),cn}var Lo={},kl;function m1(){return kl||(kl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Lo)),Lo}var Bl;function zl(){return Bl||(Bl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nr;e.__exportStar(g1(),t),e.__exportStar(m1(),t)}(No)),No}var Wl;function w1(){if(Wl)return an;Wl=1,Object.defineProperty(an,"__esModule",{value:!0}),an.fromMiliseconds=an.toMiliseconds=void 0;const t=zl();function e(n){return n*t.ONE_THOUSAND}an.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return an.fromMiliseconds=r,an}var ql;function y1(){return ql||(ql=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nr;e.__exportStar(p1(),t),e.__exportStar(w1(),t)}(To)),To}var Nn={},Hl;function v1(){if(Hl)return Nn;Hl=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Nn.Watch=t,Nn.default=t,Nn}var Mo={},yi={},Vl;function b1(){if(Vl)return yi;Vl=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.IWatch=void 0;class t{}return yi.IWatch=t,yi}var Kl;function _1(){return Kl||(Kl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nr.__exportStar(b1(),t)}(Mo)),Mo}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nr;e.__exportStar(y1(),t),e.__exportStar(v1(),t),e.__exportStar(_1(),t),e.__exportStar(zl(),t)})(re);var Fo={},vi={};let ln=class{};const E1=bo(Object.freeze(Object.defineProperty({__proto__:null,IEvents:ln},Symbol.toStringTag,{value:"Module"})));var Gl;function S1(){if(Gl)return vi;Gl=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.IHeartBeat=void 0;const t=E1;class e extends t.IEvents{constructor(n){super()}}return vi.IHeartBeat=e,vi}var Yl;function Jl(){return Yl||(Yl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nr.__exportStar(S1(),t)}(Fo)),Fo}var Uo={},un={},Zl;function x1(){if(Zl)return un;Zl=1,Object.defineProperty(un,"__esModule",{value:!0}),un.HEARTBEAT_EVENTS=un.HEARTBEAT_INTERVAL=void 0;const t=re;return un.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,un.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},un}var Ql;function Xl(){return Ql||(Ql=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nr.__exportStar(x1(),t)}(Uo)),Uo}var eu;function D1(){if(eu)return mi;eu=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.HeartBeat=void 0;const t=nr,e=hr,r=re,n=Jl(),i=Xl();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const c=new s(a);return yield c.init(),c})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,c){this.events.on(a,c)}once(a,c){this.events.once(a,c)}off(a,c){this.events.off(a,c)}removeListener(a,c){this.events.removeListener(a,c)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return mi.HeartBeat=s,mi}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nr;e.__exportStar(D1(),t),e.__exportStar(Jl(),t),e.__exportStar(Xl(),t)})(Tn);var Le={},jo,tu;function C1(){if(tu)return jo;tu=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}jo=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var u=1;u<a;u++)c[u]=s(n[u]);return c.join(" ")}if(typeof r!="string")return r;var d=n.length;if(d===0)return r;for(var f="",g=1-o,y=-1,b=r&&r.length||0,_=0;_<b;){if(r.charCodeAt(_)===37&&_+1<b){switch(y=y>-1?y:0,r.charCodeAt(_+1)){case 100:case 102:if(g>=d||n[g]==null)break;y<_&&(f+=r.slice(y,_)),f+=Number(n[g]),y=_+2,_++;break;case 105:if(g>=d||n[g]==null)break;y<_&&(f+=r.slice(y,_)),f+=Math.floor(Number(n[g])),y=_+2,_++;break;case 79:case 111:case 106:if(g>=d||n[g]===void 0)break;y<_&&(f+=r.slice(y,_));var O=typeof n[g];if(O==="string"){f+="'"+n[g]+"'",y=_+2,_++;break}if(O==="function"){f+=n[g].name||"<anonymous>",y=_+2,_++;break}f+=s(n[g]),y=_+2,_++;break;case 115:if(g>=d)break;y<_&&(f+=r.slice(y,_)),f+=String(n[g]),y=_+2,_++;break;case 37:y<_&&(f+=r.slice(y,_)),f+="%",y=_+2,_++,g--;break}++g}++_}return y===-1?r:(y<b&&(f+=r.slice(y)),f)}return jo}var ko,ru;function O1(){if(ru)return ko;ru=1;const t=C1();ko=i;const e=x().console||{},r={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:_,wrapResponseSerializer:_,wrapErrorSerializer:_,req:b,res:b,err:g};function n(p,l){return Array.isArray(p)?p.filter(function(P){return P!=="!stdSerializers.err"}):p===!0?Object.keys(l):!1}function i(p){p=p||{},p.browser=p.browser||{};const l=p.browser.transmit;if(l&&typeof l.send!="function")throw Error("pino: transmit option must have a send function");const m=p.browser.write||e;p.browser.write&&(p.browser.asObject=!0);const P=p.serializers||{},$=n(p.browser.serialize,P);let F=p.browser.serialize;Array.isArray(p.browser.serialize)&&p.browser.serialize.indexOf("!stdSerializers.err")>-1&&(F=!1);const B=["error","fatal","warn","info","debug","trace"];typeof m=="function"&&(m.error=m.fatal=m.warn=m.info=m.debug=m.trace=m),p.enabled===!1&&(p.level="silent");const H=p.level||"info",A=Object.create(m);A.log||(A.log=O),Object.defineProperty(A,"levelVal",{get:G}),Object.defineProperty(A,"level",{get:q,set:k});const N={transmit:l,serialize:$,asObject:p.browser.asObject,levels:B,timestamp:y(p)};A.levels=i.levels,A.level=H,A.setMaxListeners=A.getMaxListeners=A.emit=A.addListener=A.on=A.prependListener=A.once=A.prependOnceListener=A.removeListener=A.removeAllListeners=A.listeners=A.listenerCount=A.eventNames=A.write=A.flush=O,A.serializers=P,A._serialize=$,A._stdErrSerialize=F,A.child=W,l&&(A._logEvent=f());function G(){return this.level==="silent"?1/0:this.levels.values[this.level]}function q(){return this._level}function k(j){if(j!=="silent"&&!this.levels.values[j])throw Error("unknown level "+j);this._level=j,s(N,A,"error","log"),s(N,A,"fatal","error"),s(N,A,"warn","error"),s(N,A,"info","log"),s(N,A,"debug","log"),s(N,A,"trace","log")}function W(j,V){if(!j)throw new Error("missing bindings for child Pino");V=V||{},$&&j.serializers&&(V.serializers=j.serializers);const ce=V.serializers;if($&&ce){var K=Object.assign({},P,ce),se=p.browser.serialize===!0?Object.keys(K):$;delete j.serializers,c([j],se,K,this._stdErrSerialize)}function ee(ie){this._childLevel=(ie._childLevel|0)+1,this.error=u(ie,j,"error"),this.fatal=u(ie,j,"fatal"),this.warn=u(ie,j,"warn"),this.info=u(ie,j,"info"),this.debug=u(ie,j,"debug"),this.trace=u(ie,j,"trace"),K&&(this.serializers=K,this._serialize=se),l&&(this._logEvent=f([].concat(ie._logEvent.bindings,j)))}return ee.prototype=this,new ee(this)}return A}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:I,epochTime:v,unixTime:S,isoTime:w});function s(p,l,m,P){const $=Object.getPrototypeOf(l);l[m]=l.levelVal>l.levels.values[m]?O:$[m]?$[m]:e[m]||e[P]||O,o(p,l,m)}function o(p,l,m){!p.transmit&&l[m]===O||(l[m]=function(P){return function(){const F=p.timestamp(),B=new Array(arguments.length),H=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var A=0;A<B.length;A++)B[A]=arguments[A];if(p.serialize&&!p.asObject&&c(B,this._serialize,this.serializers,this._stdErrSerialize),p.asObject?P.call(H,a(this,m,B,F)):P.apply(H,B),p.transmit){const N=p.transmit.level||l.level,G=i.levels.values[N],q=i.levels.values[m];if(q<G)return;d(this,{ts:F,methodLevel:m,methodValue:q,transmitLevel:N,transmitValue:i.levels.values[p.transmit.level||l.level],send:p.transmit.send,val:l.levelVal},B)}}}(l[m]))}function a(p,l,m,P){p._serialize&&c(m,p._serialize,p.serializers,p._stdErrSerialize);const $=m.slice();let F=$[0];const B={};P&&(B.time=P),B.level=i.levels.values[l];let H=(p._childLevel|0)+1;if(H<1&&(H=1),F!==null&&typeof F=="object"){for(;H--&&typeof $[0]=="object";)Object.assign(B,$.shift());F=$.length?t($.shift(),$):void 0}else typeof F=="string"&&(F=t($.shift(),$));return F!==void 0&&(B.msg=F),B}function c(p,l,m,P){for(const $ in p)if(P&&p[$]instanceof Error)p[$]=i.stdSerializers.err(p[$]);else if(typeof p[$]=="object"&&!Array.isArray(p[$]))for(const F in p[$])l&&l.indexOf(F)>-1&&F in m&&(p[$][F]=m[F](p[$][F]))}function u(p,l,m){return function(){const P=new Array(1+arguments.length);P[0]=l;for(var $=1;$<P.length;$++)P[$]=arguments[$-1];return p[m].apply(this,P)}}function d(p,l,m){const P=l.send,$=l.ts,F=l.methodLevel,B=l.methodValue,H=l.val,A=p._logEvent.bindings;c(m,p._serialize||Object.keys(p.serializers),p.serializers,p._stdErrSerialize===void 0?!0:p._stdErrSerialize),p._logEvent.ts=$,p._logEvent.messages=m.filter(function(N){return A.indexOf(N)===-1}),p._logEvent.level.label=F,p._logEvent.level.value=B,P(F,p._logEvent,H),p._logEvent=f(A)}function f(p){return{ts:0,messages:[],bindings:p||[],level:{label:"",value:0}}}function g(p){const l={type:p.constructor.name,msg:p.message,stack:p.stack};for(const m in p)l[m]===void 0&&(l[m]=p[m]);return l}function y(p){return typeof p.timestamp=="function"?p.timestamp:p.timestamp===!1?I:v}function b(){return{}}function _(p){return p}function O(){}function I(){return!1}function v(){return Date.now()}function S(){return Math.round(Date.now()/1e3)}function w(){return new Date(Date.now()).toISOString()}function x(){function p(l){return typeof l<"u"&&l}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return p(self)||p(window)||p(this)||{}}}return ko}var hn={},nu;function iu(){return nu||(nu=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.PINO_CUSTOM_CONTEXT_KEY=hn.PINO_LOGGER_DEFAULTS=void 0,hn.PINO_LOGGER_DEFAULTS={level:"info"},hn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),hn}var Ft={},su;function I1(){if(su)return Ft;su=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.generateChildLogger=Ft.formatChildLoggerContext=Ft.getLoggerContext=Ft.setBrowserLoggerContext=Ft.getBrowserLoggerContext=Ft.getDefaultLoggerOptions=void 0;const t=iu();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}Ft.getDefaultLoggerOptions=e;function r(a,c=t.PINO_CUSTOM_CONTEXT_KEY){return a[c]||""}Ft.getBrowserLoggerContext=r;function n(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){return a[u]=c,a}Ft.setBrowserLoggerContext=n;function i(a,c=t.PINO_CUSTOM_CONTEXT_KEY){let u="";return typeof a.bindings>"u"?u=r(a,c):u=a.bindings().context||"",u}Ft.getLoggerContext=i;function s(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=i(a,u);return d.trim()?`${d}/${c}`:c}Ft.formatChildLoggerContext=s;function o(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(a,c,u),f=a.child({context:d});return n(f,d,u)}return Ft.generateChildLogger=o,Ft}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=nr,r=e.__importDefault(O1());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(iu(),t),e.__exportStar(I1(),t)})(Le);let A1=class extends ln{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},$1=class extends ln{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},R1=class{constructor(e,r){this.logger=e,this.core=r}},P1=class extends ln{constructor(e,r){super(),this.relayer=e,this.logger=r}},T1=class extends ln{constructor(e){super()}},N1=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},L1=class extends ln{constructor(e,r){super(),this.relayer=e,this.logger=r}},M1=class extends ln{constructor(e,r){super(),this.core=e,this.logger=r}},F1=class{constructor(e,r){this.projectId=e,this.logger=r}},U1=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},j1=class{constructor(e){this.client=e}};const k1=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),B1=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function ou(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return B1(t)}catch{return t}}function Bo(t){return typeof t=="string"?t:k1(t)||""}var zo={},Ln={},gs={},ms={};Object.defineProperty(ms,"__esModule",{value:!0}),ms.BrowserRandomSource=void 0;const au=65536;class z1{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=au)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,au)));return r}}ms.BrowserRandomSource=z1;function W1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ws={},Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});function q1(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Jt.wipe=q1;const H1=bo(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(ws,"__esModule",{value:!0}),ws.NodeRandomSource=void 0;const V1=Jt;class K1{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof W1<"u"){const e=H1;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,V1.wipe)(r),n}}ws.NodeRandomSource=K1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.SystemRandomSource=void 0;const G1=ms,Y1=ws;class J1{constructor(){if(this.isAvailable=!1,this.name="",this._source=new G1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Y1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}gs.SystemRandomSource=J1;var de={},cu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var u=a>>>16&65535,d=a&65535,f=c>>>16&65535,g=c&65535;return d*g+(u*g+d*f<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(cu),Object.defineProperty(de,"__esModule",{value:!0});var lu=cu;function Z1(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}de.readInt16BE=Z1;function Q1(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}de.readUint16BE=Q1;function X1(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}de.readInt16LE=X1;function ep(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}de.readUint16LE=ep;function uu(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}de.writeUint16BE=uu,de.writeInt16BE=uu;function hu(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}de.writeUint16LE=hu,de.writeInt16LE=hu;function Wo(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}de.readInt32BE=Wo;function qo(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}de.readUint32BE=qo;function Ho(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}de.readInt32LE=Ho;function Vo(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}de.readUint32LE=Vo;function ys(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}de.writeUint32BE=ys,de.writeInt32BE=ys;function vs(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}de.writeUint32LE=vs,de.writeInt32LE=vs;function tp(t,e){e===void 0&&(e=0);var r=Wo(t,e),n=Wo(t,e+4);return r*4294967296+n-(n>>31)*4294967296}de.readInt64BE=tp;function rp(t,e){e===void 0&&(e=0);var r=qo(t,e),n=qo(t,e+4);return r*4294967296+n}de.readUint64BE=rp;function np(t,e){e===void 0&&(e=0);var r=Ho(t,e),n=Ho(t,e+4);return n*4294967296+r-(r>>31)*4294967296}de.readInt64LE=np;function ip(t,e){e===void 0&&(e=0);var r=Vo(t,e),n=Vo(t,e+4);return n*4294967296+r}de.readUint64LE=ip;function du(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),ys(t/4294967296>>>0,e,r),ys(t>>>0,e,r+4),e}de.writeUint64BE=du,de.writeInt64BE=du;function fu(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),vs(t>>>0,e,r),vs(t/4294967296>>>0,e,r+4),e}de.writeUint64LE=fu,de.writeInt64LE=fu;function sp(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}de.readUintBE=sp;function op(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}de.readUintLE=op;function ap(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!lu.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}de.writeUintBE=ap;function cp(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!lu.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}de.writeUintLE=cp;function lp(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}de.readFloat32BE=lp;function up(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}de.readFloat32LE=up;function hp(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}de.readFloat64BE=hp;function dp(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}de.readFloat64LE=dp;function fp(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}de.writeFloat32BE=fp;function pp(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}de.writeFloat32LE=pp;function gp(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}de.writeFloat64BE=gp;function mp(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}de.writeFloat64LE=mp,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=gs,r=de,n=Jt;t.defaultRandomSource=new e.SystemRandomSource;function i(u,d=t.defaultRandomSource){return d.randomBytes(u)}t.randomBytes=i;function s(u=t.defaultRandomSource){const d=i(4,u),f=(0,r.readUint32LE)(d);return(0,n.wipe)(d),f}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(u,d=o,f=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let g="";const y=d.length,b=256-256%y;for(;u>0;){const _=i(Math.ceil(u*256/b),f);for(let O=0;O<_.length&&u>0;O++){const I=_[O];I<b&&(g+=d.charAt(I%y),u--)}(0,n.wipe)(_)}return g}t.randomString=a;function c(u,d=o,f=t.defaultRandomSource){const g=Math.ceil(u/(Math.log(d.length)/Math.LN2));return a(g,d,f)}t.randomStringForEntropy=c}(Ln);var pu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=de,r=Jt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,g=u<<3,y=u%128<112?128:256;this._buffer[d]=128;for(var b=d+1;b<y-8;b++)this._buffer[b]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(g,this._buffer,y-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,y),this._finished=!0}for(var b=0;b<this.digestLength/8;b++)e.writeUint32BE(this._stateHi[b],c,b*8),e.writeUint32BE(this._stateLo[b],c,b*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,u,d,f,g,y){for(var b=u[0],_=u[1],O=u[2],I=u[3],v=u[4],S=u[5],w=u[6],x=u[7],p=d[0],l=d[1],m=d[2],P=d[3],$=d[4],F=d[5],B=d[6],H=d[7],A,N,G,q,k,W,j,V;y>=128;){for(var ce=0;ce<16;ce++){var K=8*ce+g;a[ce]=e.readUint32BE(f,K),c[ce]=e.readUint32BE(f,K+4)}for(var ce=0;ce<80;ce++){var se=b,ee=_,ie=O,M=I,L=v,R=S,h=w,C=x,Y=p,X=l,Ee=m,Se=P,me=$,Te=F,Qe=B,He=H;if(A=x,N=H,k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=(v>>>14|$<<32-14)^(v>>>18|$<<32-18)^($>>>41-32|v<<32-(41-32)),N=($>>>14|v<<32-14)^($>>>18|v<<32-18)^(v>>>41-32|$<<32-(41-32)),k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,A=v&S^~v&w,N=$&F^~$&B,k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,A=i[ce*2],N=i[ce*2+1],k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,A=a[ce%16],N=c[ce%16],k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,G=j&65535|V<<16,q=k&65535|W<<16,A=G,N=q,k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=(b>>>28|p<<32-28)^(p>>>34-32|b<<32-(34-32))^(p>>>39-32|b<<32-(39-32)),N=(p>>>28|b<<32-28)^(b>>>34-32|p<<32-(34-32))^(b>>>39-32|p<<32-(39-32)),k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,A=b&_^b&O^_&O,N=p&l^p&m^l&m,k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,C=j&65535|V<<16,He=k&65535|W<<16,A=M,N=Se,k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=G,N=q,k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,M=j&65535|V<<16,Se=k&65535|W<<16,_=se,O=ee,I=ie,v=M,S=L,w=R,x=h,b=C,l=Y,m=X,P=Ee,$=Se,F=me,B=Te,H=Qe,p=He,ce%16===15)for(var K=0;K<16;K++)A=a[K],N=c[K],k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=a[(K+9)%16],N=c[(K+9)%16],k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,G=a[(K+1)%16],q=c[(K+1)%16],A=(G>>>1|q<<32-1)^(G>>>8|q<<32-8)^G>>>7,N=(q>>>1|G<<32-1)^(q>>>8|G<<32-8)^(q>>>7|G<<32-7),k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,G=a[(K+14)%16],q=c[(K+14)%16],A=(G>>>19|q<<32-19)^(q>>>61-32|G<<32-(61-32))^G>>>6,N=(q>>>19|G<<32-19)^(G>>>61-32|q<<32-(61-32))^(q>>>6|G<<32-6),k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,a[K]=j&65535|V<<16,c[K]=k&65535|W<<16}A=b,N=p,k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=u[0],N=d[0],k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,u[0]=b=j&65535|V<<16,d[0]=p=k&65535|W<<16,A=_,N=l,k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=u[1],N=d[1],k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,u[1]=_=j&65535|V<<16,d[1]=l=k&65535|W<<16,A=O,N=m,k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=u[2],N=d[2],k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,u[2]=O=j&65535|V<<16,d[2]=m=k&65535|W<<16,A=I,N=P,k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=u[3],N=d[3],k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,u[3]=I=j&65535|V<<16,d[3]=P=k&65535|W<<16,A=v,N=$,k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=u[4],N=d[4],k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,u[4]=v=j&65535|V<<16,d[4]=$=k&65535|W<<16,A=S,N=F,k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=u[5],N=d[5],k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,u[5]=S=j&65535|V<<16,d[5]=F=k&65535|W<<16,A=w,N=B,k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=u[6],N=d[6],k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,u[6]=w=j&65535|V<<16,d[6]=B=k&65535|W<<16,A=x,N=H,k=N&65535,W=N>>>16,j=A&65535,V=A>>>16,A=u[7],N=d[7],k+=N&65535,W+=N>>>16,j+=A&65535,V+=A>>>16,W+=k>>>16,j+=W>>>16,V+=j>>>16,u[7]=x=j&65535|V<<16,d[7]=H=k&65535|W<<16,g+=128,y-=128}return g}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(pu),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Ln,r=pu,n=Jt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(M){const L=new Float64Array(16);if(M)for(let R=0;R<M.length;R++)L[R]=M[R];return L}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),g=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(M,L){for(let R=0;R<16;R++)M[R]=L[R]|0}function b(M){let L=1;for(let R=0;R<16;R++){let h=M[R]+L+65535;L=Math.floor(h/65536),M[R]=h-L*65536}M[0]+=L-1+37*(L-1)}function _(M,L,R){const h=~(R-1);for(let C=0;C<16;C++){const Y=h&(M[C]^L[C]);M[C]^=Y,L[C]^=Y}}function O(M,L){const R=i(),h=i();for(let C=0;C<16;C++)h[C]=L[C];b(h),b(h),b(h);for(let C=0;C<2;C++){R[0]=h[0]-65517;for(let X=1;X<15;X++)R[X]=h[X]-65535-(R[X-1]>>16&1),R[X-1]&=65535;R[15]=h[15]-32767-(R[14]>>16&1);const Y=R[15]>>16&1;R[14]&=65535,_(h,R,1-Y)}for(let C=0;C<16;C++)M[2*C]=h[C]&255,M[2*C+1]=h[C]>>8}function I(M,L){let R=0;for(let h=0;h<32;h++)R|=M[h]^L[h];return(1&R-1>>>8)-1}function v(M,L){const R=new Uint8Array(32),h=new Uint8Array(32);return O(R,M),O(h,L),I(R,h)}function S(M){const L=new Uint8Array(32);return O(L,M),L[0]&1}function w(M,L){for(let R=0;R<16;R++)M[R]=L[2*R]+(L[2*R+1]<<8);M[15]&=32767}function x(M,L,R){for(let h=0;h<16;h++)M[h]=L[h]+R[h]}function p(M,L,R){for(let h=0;h<16;h++)M[h]=L[h]-R[h]}function l(M,L,R){let h,C,Y=0,X=0,Ee=0,Se=0,me=0,Te=0,Qe=0,He=0,Ae=0,Ce=0,we=0,ve=0,ye=0,fe=0,he=0,oe=0,be=0,xe=0,le=0,Oe=0,Ne=0,Ue=0,je=0,Me=0,tr=0,ar=0,xr=0,It=0,Dr=0,cr=0,Zr=0,Xe=R[0],Ge=R[1],st=R[2],tt=R[3],ot=R[4],Ye=R[5],ht=R[6],gt=R[7],mt=R[8],dt=R[9],wt=R[10],ft=R[11],at=R[12],Ke=R[13],D=R[14],U=R[15];h=L[0],Y+=h*Xe,X+=h*Ge,Ee+=h*st,Se+=h*tt,me+=h*ot,Te+=h*Ye,Qe+=h*ht,He+=h*gt,Ae+=h*mt,Ce+=h*dt,we+=h*wt,ve+=h*ft,ye+=h*at,fe+=h*Ke,he+=h*D,oe+=h*U,h=L[1],X+=h*Xe,Ee+=h*Ge,Se+=h*st,me+=h*tt,Te+=h*ot,Qe+=h*Ye,He+=h*ht,Ae+=h*gt,Ce+=h*mt,we+=h*dt,ve+=h*wt,ye+=h*ft,fe+=h*at,he+=h*Ke,oe+=h*D,be+=h*U,h=L[2],Ee+=h*Xe,Se+=h*Ge,me+=h*st,Te+=h*tt,Qe+=h*ot,He+=h*Ye,Ae+=h*ht,Ce+=h*gt,we+=h*mt,ve+=h*dt,ye+=h*wt,fe+=h*ft,he+=h*at,oe+=h*Ke,be+=h*D,xe+=h*U,h=L[3],Se+=h*Xe,me+=h*Ge,Te+=h*st,Qe+=h*tt,He+=h*ot,Ae+=h*Ye,Ce+=h*ht,we+=h*gt,ve+=h*mt,ye+=h*dt,fe+=h*wt,he+=h*ft,oe+=h*at,be+=h*Ke,xe+=h*D,le+=h*U,h=L[4],me+=h*Xe,Te+=h*Ge,Qe+=h*st,He+=h*tt,Ae+=h*ot,Ce+=h*Ye,we+=h*ht,ve+=h*gt,ye+=h*mt,fe+=h*dt,he+=h*wt,oe+=h*ft,be+=h*at,xe+=h*Ke,le+=h*D,Oe+=h*U,h=L[5],Te+=h*Xe,Qe+=h*Ge,He+=h*st,Ae+=h*tt,Ce+=h*ot,we+=h*Ye,ve+=h*ht,ye+=h*gt,fe+=h*mt,he+=h*dt,oe+=h*wt,be+=h*ft,xe+=h*at,le+=h*Ke,Oe+=h*D,Ne+=h*U,h=L[6],Qe+=h*Xe,He+=h*Ge,Ae+=h*st,Ce+=h*tt,we+=h*ot,ve+=h*Ye,ye+=h*ht,fe+=h*gt,he+=h*mt,oe+=h*dt,be+=h*wt,xe+=h*ft,le+=h*at,Oe+=h*Ke,Ne+=h*D,Ue+=h*U,h=L[7],He+=h*Xe,Ae+=h*Ge,Ce+=h*st,we+=h*tt,ve+=h*ot,ye+=h*Ye,fe+=h*ht,he+=h*gt,oe+=h*mt,be+=h*dt,xe+=h*wt,le+=h*ft,Oe+=h*at,Ne+=h*Ke,Ue+=h*D,je+=h*U,h=L[8],Ae+=h*Xe,Ce+=h*Ge,we+=h*st,ve+=h*tt,ye+=h*ot,fe+=h*Ye,he+=h*ht,oe+=h*gt,be+=h*mt,xe+=h*dt,le+=h*wt,Oe+=h*ft,Ne+=h*at,Ue+=h*Ke,je+=h*D,Me+=h*U,h=L[9],Ce+=h*Xe,we+=h*Ge,ve+=h*st,ye+=h*tt,fe+=h*ot,he+=h*Ye,oe+=h*ht,be+=h*gt,xe+=h*mt,le+=h*dt,Oe+=h*wt,Ne+=h*ft,Ue+=h*at,je+=h*Ke,Me+=h*D,tr+=h*U,h=L[10],we+=h*Xe,ve+=h*Ge,ye+=h*st,fe+=h*tt,he+=h*ot,oe+=h*Ye,be+=h*ht,xe+=h*gt,le+=h*mt,Oe+=h*dt,Ne+=h*wt,Ue+=h*ft,je+=h*at,Me+=h*Ke,tr+=h*D,ar+=h*U,h=L[11],ve+=h*Xe,ye+=h*Ge,fe+=h*st,he+=h*tt,oe+=h*ot,be+=h*Ye,xe+=h*ht,le+=h*gt,Oe+=h*mt,Ne+=h*dt,Ue+=h*wt,je+=h*ft,Me+=h*at,tr+=h*Ke,ar+=h*D,xr+=h*U,h=L[12],ye+=h*Xe,fe+=h*Ge,he+=h*st,oe+=h*tt,be+=h*ot,xe+=h*Ye,le+=h*ht,Oe+=h*gt,Ne+=h*mt,Ue+=h*dt,je+=h*wt,Me+=h*ft,tr+=h*at,ar+=h*Ke,xr+=h*D,It+=h*U,h=L[13],fe+=h*Xe,he+=h*Ge,oe+=h*st,be+=h*tt,xe+=h*ot,le+=h*Ye,Oe+=h*ht,Ne+=h*gt,Ue+=h*mt,je+=h*dt,Me+=h*wt,tr+=h*ft,ar+=h*at,xr+=h*Ke,It+=h*D,Dr+=h*U,h=L[14],he+=h*Xe,oe+=h*Ge,be+=h*st,xe+=h*tt,le+=h*ot,Oe+=h*Ye,Ne+=h*ht,Ue+=h*gt,je+=h*mt,Me+=h*dt,tr+=h*wt,ar+=h*ft,xr+=h*at,It+=h*Ke,Dr+=h*D,cr+=h*U,h=L[15],oe+=h*Xe,be+=h*Ge,xe+=h*st,le+=h*tt,Oe+=h*ot,Ne+=h*Ye,Ue+=h*ht,je+=h*gt,Me+=h*mt,tr+=h*dt,ar+=h*wt,xr+=h*ft,It+=h*at,Dr+=h*Ke,cr+=h*D,Zr+=h*U,Y+=38*be,X+=38*xe,Ee+=38*le,Se+=38*Oe,me+=38*Ne,Te+=38*Ue,Qe+=38*je,He+=38*Me,Ae+=38*tr,Ce+=38*ar,we+=38*xr,ve+=38*It,ye+=38*Dr,fe+=38*cr,he+=38*Zr,C=1,h=Y+C+65535,C=Math.floor(h/65536),Y=h-C*65536,h=X+C+65535,C=Math.floor(h/65536),X=h-C*65536,h=Ee+C+65535,C=Math.floor(h/65536),Ee=h-C*65536,h=Se+C+65535,C=Math.floor(h/65536),Se=h-C*65536,h=me+C+65535,C=Math.floor(h/65536),me=h-C*65536,h=Te+C+65535,C=Math.floor(h/65536),Te=h-C*65536,h=Qe+C+65535,C=Math.floor(h/65536),Qe=h-C*65536,h=He+C+65535,C=Math.floor(h/65536),He=h-C*65536,h=Ae+C+65535,C=Math.floor(h/65536),Ae=h-C*65536,h=Ce+C+65535,C=Math.floor(h/65536),Ce=h-C*65536,h=we+C+65535,C=Math.floor(h/65536),we=h-C*65536,h=ve+C+65535,C=Math.floor(h/65536),ve=h-C*65536,h=ye+C+65535,C=Math.floor(h/65536),ye=h-C*65536,h=fe+C+65535,C=Math.floor(h/65536),fe=h-C*65536,h=he+C+65535,C=Math.floor(h/65536),he=h-C*65536,h=oe+C+65535,C=Math.floor(h/65536),oe=h-C*65536,Y+=C-1+37*(C-1),C=1,h=Y+C+65535,C=Math.floor(h/65536),Y=h-C*65536,h=X+C+65535,C=Math.floor(h/65536),X=h-C*65536,h=Ee+C+65535,C=Math.floor(h/65536),Ee=h-C*65536,h=Se+C+65535,C=Math.floor(h/65536),Se=h-C*65536,h=me+C+65535,C=Math.floor(h/65536),me=h-C*65536,h=Te+C+65535,C=Math.floor(h/65536),Te=h-C*65536,h=Qe+C+65535,C=Math.floor(h/65536),Qe=h-C*65536,h=He+C+65535,C=Math.floor(h/65536),He=h-C*65536,h=Ae+C+65535,C=Math.floor(h/65536),Ae=h-C*65536,h=Ce+C+65535,C=Math.floor(h/65536),Ce=h-C*65536,h=we+C+65535,C=Math.floor(h/65536),we=h-C*65536,h=ve+C+65535,C=Math.floor(h/65536),ve=h-C*65536,h=ye+C+65535,C=Math.floor(h/65536),ye=h-C*65536,h=fe+C+65535,C=Math.floor(h/65536),fe=h-C*65536,h=he+C+65535,C=Math.floor(h/65536),he=h-C*65536,h=oe+C+65535,C=Math.floor(h/65536),oe=h-C*65536,Y+=C-1+37*(C-1),M[0]=Y,M[1]=X,M[2]=Ee,M[3]=Se,M[4]=me,M[5]=Te,M[6]=Qe,M[7]=He,M[8]=Ae,M[9]=Ce,M[10]=we,M[11]=ve,M[12]=ye,M[13]=fe,M[14]=he,M[15]=oe}function m(M,L){l(M,L,L)}function P(M,L){const R=i();let h;for(h=0;h<16;h++)R[h]=L[h];for(h=253;h>=0;h--)m(R,R),h!==2&&h!==4&&l(R,R,L);for(h=0;h<16;h++)M[h]=R[h]}function $(M,L){const R=i();let h;for(h=0;h<16;h++)R[h]=L[h];for(h=250;h>=0;h--)m(R,R),h!==1&&l(R,R,L);for(h=0;h<16;h++)M[h]=R[h]}function F(M,L){const R=i(),h=i(),C=i(),Y=i(),X=i(),Ee=i(),Se=i(),me=i(),Te=i();p(R,M[1],M[0]),p(Te,L[1],L[0]),l(R,R,Te),x(h,M[0],M[1]),x(Te,L[0],L[1]),l(h,h,Te),l(C,M[3],L[3]),l(C,C,u),l(Y,M[2],L[2]),x(Y,Y,Y),p(X,h,R),p(Ee,Y,C),x(Se,Y,C),x(me,h,R),l(M[0],X,Ee),l(M[1],me,Se),l(M[2],Se,Ee),l(M[3],X,me)}function B(M,L,R){for(let h=0;h<4;h++)_(M[h],L[h],R)}function H(M,L){const R=i(),h=i(),C=i();P(C,L[2]),l(R,L[0],C),l(h,L[1],C),O(M,h),M[31]^=S(R)<<7}function A(M,L,R){y(M[0],o),y(M[1],a),y(M[2],a),y(M[3],o);for(let h=255;h>=0;--h){const C=R[h/8|0]>>(h&7)&1;B(M,L,C),F(L,M),F(M,M),B(M,L,C)}}function N(M,L){const R=[i(),i(),i(),i()];y(R[0],d),y(R[1],f),y(R[2],a),l(R[3],d,f),A(M,R,L)}function G(M){if(M.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const L=(0,r.hash)(M);L[0]&=248,L[31]&=127,L[31]|=64;const R=new Uint8Array(32),h=[i(),i(),i(),i()];N(h,L),H(R,h);const C=new Uint8Array(64);return C.set(M),C.set(R,32),{publicKey:R,secretKey:C}}t.generateKeyPairFromSeed=G;function q(M){const L=(0,e.randomBytes)(32,M),R=G(L);return(0,n.wipe)(L),R}t.generateKeyPair=q;function k(M){if(M.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(M.subarray(32))}t.extractPublicKeyFromSecretKey=k;const W=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function j(M,L){let R,h,C,Y;for(h=63;h>=32;--h){for(R=0,C=h-32,Y=h-12;C<Y;++C)L[C]+=R-16*L[h]*W[C-(h-32)],R=Math.floor((L[C]+128)/256),L[C]-=R*256;L[C]+=R,L[h]=0}for(R=0,C=0;C<32;C++)L[C]+=R-(L[31]>>4)*W[C],R=L[C]>>8,L[C]&=255;for(C=0;C<32;C++)L[C]-=R*W[C];for(h=0;h<32;h++)L[h+1]+=L[h]>>8,M[h]=L[h]&255}function V(M){const L=new Float64Array(64);for(let R=0;R<64;R++)L[R]=M[R];for(let R=0;R<64;R++)M[R]=0;j(M,L)}function ce(M,L){const R=new Float64Array(64),h=[i(),i(),i(),i()],C=(0,r.hash)(M.subarray(0,32));C[0]&=248,C[31]&=127,C[31]|=64;const Y=new Uint8Array(64);Y.set(C.subarray(32),32);const X=new r.SHA512;X.update(Y.subarray(32)),X.update(L);const Ee=X.digest();X.clean(),V(Ee),N(h,Ee),H(Y,h),X.reset(),X.update(Y.subarray(0,32)),X.update(M.subarray(32)),X.update(L);const Se=X.digest();V(Se);for(let me=0;me<32;me++)R[me]=Ee[me];for(let me=0;me<32;me++)for(let Te=0;Te<32;Te++)R[me+Te]+=Se[me]*C[Te];return j(Y.subarray(32),R),Y}t.sign=ce;function K(M,L){const R=i(),h=i(),C=i(),Y=i(),X=i(),Ee=i(),Se=i();return y(M[2],a),w(M[1],L),m(C,M[1]),l(Y,C,c),p(C,C,M[2]),x(Y,M[2],Y),m(X,Y),m(Ee,X),l(Se,Ee,X),l(R,Se,C),l(R,R,Y),$(R,R),l(R,R,C),l(R,R,Y),l(R,R,Y),l(M[0],R,Y),m(h,M[0]),l(h,h,Y),v(h,C)&&l(M[0],M[0],g),m(h,M[0]),l(h,h,Y),v(h,C)?-1:(S(M[0])===L[31]>>7&&p(M[0],o,M[0]),l(M[3],M[0],M[1]),0)}function se(M,L,R){const h=new Uint8Array(32),C=[i(),i(),i(),i()],Y=[i(),i(),i(),i()];if(R.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(K(Y,M))return!1;const X=new r.SHA512;X.update(R.subarray(0,32)),X.update(M),X.update(L);const Ee=X.digest();return V(Ee),A(C,Y,Ee),N(Y,R.subarray(32)),F(C,Y),H(h,C),!I(R,h)}t.verify=se;function ee(M){let L=[i(),i(),i(),i()];if(K(L,M))throw new Error("Ed25519: invalid public key");let R=i(),h=i(),C=L[1];x(R,a,C),p(h,a,C),P(h,h),l(R,R,h);let Y=new Uint8Array(32);return O(Y,R),Y}t.convertPublicKeyToX25519=ee;function ie(M){const L=(0,r.hash)(M.subarray(0,32));L[0]&=248,L[31]&=127,L[31]|=64;const R=new Uint8Array(L.subarray(0,32));return(0,n.wipe)(L),R}t.convertSecretKeyToX25519=ie}(zo);const wp="EdDSA",yp="JWT",gu=".",mu="base64url",vp="utf8",bp="utf8",_p=":",Ep="did",Sp="key",wu="base58btc",xp="z",Dp="K36",Cp=32;function Ko(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function yu(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ko(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Go(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=yu(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return Ko(r)}function Op(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var _=0,O=0,I=0,v=b.length;I!==v&&b[I]===0;)I++,_++;for(var S=(v-I)*d+1>>>0,w=new Uint8Array(S);I!==v;){for(var x=b[I],p=0,l=S-1;(x!==0||p<O)&&l!==-1;l--,p++)x+=256*w[l]>>>0,w[l]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");O=p,I++}for(var m=S-O;m!==S&&w[m]===0;)m++;for(var P=c.repeat(_);m<S;++m)P+=t.charAt(w[m]);return P}function g(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var _=0;if(b[_]!==" "){for(var O=0,I=0;b[_]===c;)O++,_++;for(var v=(b.length-_)*u+1>>>0,S=new Uint8Array(v);b[_];){var w=r[b.charCodeAt(_)];if(w===255)return;for(var x=0,p=v-1;(w!==0||x<I)&&p!==-1;p--,x++)w+=a*S[p]>>>0,S[p]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");I=x,_++}if(b[_]!==" "){for(var l=v-I;l!==v&&S[l]===0;)l++;for(var m=new Uint8Array(O+(v-l)),P=O;l!==v;)m[P++]=S[l++];return m}}}function y(b){var _=g(b);if(_)return _;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:g,decode:y}}var Ip=Op,Ap=Ip;const $p=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Rp=t=>new TextEncoder().encode(t),Pp=t=>new TextDecoder().decode(t);class Tp{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Np{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return vu(this,e)}}class Lp{constructor(e){this.decoders=e}or(e){return vu(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const vu=(t,e)=>new Lp({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Mp{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Tp(e,r,n),this.decoder=new Np(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const bs=({name:t,prefix:e,encode:r,decode:n})=>new Mp(t,e,r,n),bi=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Ap(r,e);return bs({prefix:t,name:e,encode:n,decode:s=>$p(i(s))})},Fp=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Up=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Dt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>bs({prefix:e,name:t,encode(i){return Up(i,n,r)},decode(i){return Fp(i,n,r,t)}}),jp=bs({prefix:"\0",name:"identity",encode:t=>Pp(t),decode:t=>Rp(t)}),kp=Object.freeze(Object.defineProperty({__proto__:null,identity:jp},Symbol.toStringTag,{value:"Module"})),Bp=Dt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),zp=Object.freeze(Object.defineProperty({__proto__:null,base2:Bp},Symbol.toStringTag,{value:"Module"})),Wp=Dt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),qp=Object.freeze(Object.defineProperty({__proto__:null,base8:Wp},Symbol.toStringTag,{value:"Module"})),Hp=bi({prefix:"9",name:"base10",alphabet:"0123456789"}),Vp=Object.freeze(Object.defineProperty({__proto__:null,base10:Hp},Symbol.toStringTag,{value:"Module"})),Kp=Dt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Gp=Dt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Yp=Object.freeze(Object.defineProperty({__proto__:null,base16:Kp,base16upper:Gp},Symbol.toStringTag,{value:"Module"})),Jp=Dt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Zp=Dt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Qp=Dt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Xp=Dt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eg=Dt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tg=Dt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rg=Dt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ng=Dt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ig=Dt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),sg=Object.freeze(Object.defineProperty({__proto__:null,base32:Jp,base32hex:eg,base32hexpad:rg,base32hexpadupper:ng,base32hexupper:tg,base32pad:Qp,base32padupper:Xp,base32upper:Zp,base32z:ig},Symbol.toStringTag,{value:"Module"})),og=bi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ag=bi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),cg=Object.freeze(Object.defineProperty({__proto__:null,base36:og,base36upper:ag},Symbol.toStringTag,{value:"Module"})),lg=bi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ug=bi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),hg=Object.freeze(Object.defineProperty({__proto__:null,base58btc:lg,base58flickr:ug},Symbol.toStringTag,{value:"Module"})),dg=Dt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),fg=Dt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),pg=Dt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gg=Dt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),mg=Object.freeze(Object.defineProperty({__proto__:null,base64:dg,base64pad:fg,base64url:pg,base64urlpad:gg},Symbol.toStringTag,{value:"Module"})),bu=Array.from(""),wg=bu.reduce((t,e,r)=>(t[r]=e,t),[]),yg=bu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function vg(t){return t.reduce((e,r)=>(e+=wg[r],e),"")}function bg(t){const e=[];for(const r of t){const n=yg[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const _g=bs({prefix:"",name:"base256emoji",encode:vg,decode:bg}),Eg=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:_g},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const _u={...kp,...zp,...qp,...Vp,...Yp,...sg,...cg,...hg,...mg,...Eg};function Eu(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Su=Eu("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Yo=Eu("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=yu(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),xu={utf8:Su,"utf-8":Su,hex:_u.base16,latin1:Yo,ascii:Yo,binary:Yo,..._u};function Ut(t,e="utf8"){const r=xu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function qt(t,e="utf8"){const r=xu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ko(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function _s(t){return Ut(qt(Bo(t),vp),mu)}function Du(t){const e=qt(Dp,wu),r=xp+Ut(Go([e,t]),wu);return[Ep,Sp,r].join(_p)}function Sg(t){return Ut(t,mu)}function xg(t){return qt([_s(t.header),_s(t.payload)].join(gu),bp)}function Dg(t){return[_s(t.header),_s(t.payload),Sg(t.signature)].join(gu)}function Cu(t=Ln.randomBytes(Cp)){return zo.generateKeyPairFromSeed(t)}async function Cg(t,e,r,n,i=re.fromMiliseconds(Date.now())){const s={alg:wp,typ:yp},o=Du(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},u=xg({header:s,payload:c}),d=zo.sign(n.secretKey,u);return Dg({header:s,payload:c,signature:d})}var Jo={},Es={};Object.defineProperty(Es,"__esModule",{value:!0});var Pt=de,Zo=Jt,Og=20;function Ig(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],g=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],b=r[31]<<24|r[30]<<16|r[29]<<8|r[28],_=e[3]<<24|e[2]<<16|e[1]<<8|e[0],O=e[7]<<24|e[6]<<16|e[5]<<8|e[4],I=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],S=n,w=i,x=s,p=o,l=a,m=c,P=u,$=d,F=f,B=g,H=y,A=b,N=_,G=O,q=I,k=v,W=0;W<Og;W+=2)S=S+l|0,N^=S,N=N>>>32-16|N<<16,F=F+N|0,l^=F,l=l>>>32-12|l<<12,w=w+m|0,G^=w,G=G>>>32-16|G<<16,B=B+G|0,m^=B,m=m>>>32-12|m<<12,x=x+P|0,q^=x,q=q>>>32-16|q<<16,H=H+q|0,P^=H,P=P>>>32-12|P<<12,p=p+$|0,k^=p,k=k>>>32-16|k<<16,A=A+k|0,$^=A,$=$>>>32-12|$<<12,x=x+P|0,q^=x,q=q>>>32-8|q<<8,H=H+q|0,P^=H,P=P>>>32-7|P<<7,p=p+$|0,k^=p,k=k>>>32-8|k<<8,A=A+k|0,$^=A,$=$>>>32-7|$<<7,w=w+m|0,G^=w,G=G>>>32-8|G<<8,B=B+G|0,m^=B,m=m>>>32-7|m<<7,S=S+l|0,N^=S,N=N>>>32-8|N<<8,F=F+N|0,l^=F,l=l>>>32-7|l<<7,S=S+m|0,k^=S,k=k>>>32-16|k<<16,H=H+k|0,m^=H,m=m>>>32-12|m<<12,w=w+P|0,N^=w,N=N>>>32-16|N<<16,A=A+N|0,P^=A,P=P>>>32-12|P<<12,x=x+$|0,G^=x,G=G>>>32-16|G<<16,F=F+G|0,$^=F,$=$>>>32-12|$<<12,p=p+l|0,q^=p,q=q>>>32-16|q<<16,B=B+q|0,l^=B,l=l>>>32-12|l<<12,x=x+$|0,G^=x,G=G>>>32-8|G<<8,F=F+G|0,$^=F,$=$>>>32-7|$<<7,p=p+l|0,q^=p,q=q>>>32-8|q<<8,B=B+q|0,l^=B,l=l>>>32-7|l<<7,w=w+P|0,N^=w,N=N>>>32-8|N<<8,A=A+N|0,P^=A,P=P>>>32-7|P<<7,S=S+m|0,k^=S,k=k>>>32-8|k<<8,H=H+k|0,m^=H,m=m>>>32-7|m<<7;Pt.writeUint32LE(S+n|0,t,0),Pt.writeUint32LE(w+i|0,t,4),Pt.writeUint32LE(x+s|0,t,8),Pt.writeUint32LE(p+o|0,t,12),Pt.writeUint32LE(l+a|0,t,16),Pt.writeUint32LE(m+c|0,t,20),Pt.writeUint32LE(P+u|0,t,24),Pt.writeUint32LE($+d|0,t,28),Pt.writeUint32LE(F+f|0,t,32),Pt.writeUint32LE(B+g|0,t,36),Pt.writeUint32LE(H+y|0,t,40),Pt.writeUint32LE(A+b|0,t,44),Pt.writeUint32LE(N+_|0,t,48),Pt.writeUint32LE(G+O|0,t,52),Pt.writeUint32LE(q+I|0,t,56),Pt.writeUint32LE(k+v|0,t,60)}function Ou(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){Ig(a,s,t);for(var u=c;u<c+64&&u<r.length;u++)n[u]=r[u]^a[u-c];$g(s,0,o)}return Zo.wipe(a),i===0&&Zo.wipe(s),n}Es.streamXOR=Ou;function Ag(t,e,r,n){return n===void 0&&(n=0),Zo.wipe(r),Ou(t,e,r,r,n)}Es.stream=Ag;function $g(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Iu={},jr={};Object.defineProperty(jr,"__esModule",{value:!0});function Rg(t,e,r){return~(t-1)&e|t-1&r}jr.select=Rg;function Pg(t,e){return(t|0)-(e|0)-1>>>31&1}jr.lessOrEqual=Pg;function Au(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}jr.compare=Au;function Tg(t,e){return t.length===0||e.length===0?!1:Au(t,e)!==0}jr.equal=Tg,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=jr,r=Jt;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var u=a[2]|a[3]<<8;this._r[1]=(c>>>13|u<<3)&8191;var d=a[4]|a[5]<<8;this._r[2]=(u>>>10|d<<6)&7939;var f=a[6]|a[7]<<8;this._r[3]=(d>>>7|f<<9)&8191;var g=a[8]|a[9]<<8;this._r[4]=(f>>>4|g<<12)&255,this._r[5]=g>>>1&8190;var y=a[10]|a[11]<<8;this._r[6]=(g>>>14|y<<2)&8191;var b=a[12]|a[13]<<8;this._r[7]=(y>>>11|b<<5)&8065;var _=a[14]|a[15]<<8;this._r[8]=(b>>>8|_<<8)&8191,this._r[9]=_>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,u){for(var d=this._fin?0:2048,f=this._h[0],g=this._h[1],y=this._h[2],b=this._h[3],_=this._h[4],O=this._h[5],I=this._h[6],v=this._h[7],S=this._h[8],w=this._h[9],x=this._r[0],p=this._r[1],l=this._r[2],m=this._r[3],P=this._r[4],$=this._r[5],F=this._r[6],B=this._r[7],H=this._r[8],A=this._r[9];u>=16;){var N=a[c+0]|a[c+1]<<8;f+=N&8191;var G=a[c+2]|a[c+3]<<8;g+=(N>>>13|G<<3)&8191;var q=a[c+4]|a[c+5]<<8;y+=(G>>>10|q<<6)&8191;var k=a[c+6]|a[c+7]<<8;b+=(q>>>7|k<<9)&8191;var W=a[c+8]|a[c+9]<<8;_+=(k>>>4|W<<12)&8191,O+=W>>>1&8191;var j=a[c+10]|a[c+11]<<8;I+=(W>>>14|j<<2)&8191;var V=a[c+12]|a[c+13]<<8;v+=(j>>>11|V<<5)&8191;var ce=a[c+14]|a[c+15]<<8;S+=(V>>>8|ce<<8)&8191,w+=ce>>>5|d;var K=0,se=K;se+=f*x,se+=g*(5*A),se+=y*(5*H),se+=b*(5*B),se+=_*(5*F),K=se>>>13,se&=8191,se+=O*(5*$),se+=I*(5*P),se+=v*(5*m),se+=S*(5*l),se+=w*(5*p),K+=se>>>13,se&=8191;var ee=K;ee+=f*p,ee+=g*x,ee+=y*(5*A),ee+=b*(5*H),ee+=_*(5*B),K=ee>>>13,ee&=8191,ee+=O*(5*F),ee+=I*(5*$),ee+=v*(5*P),ee+=S*(5*m),ee+=w*(5*l),K+=ee>>>13,ee&=8191;var ie=K;ie+=f*l,ie+=g*p,ie+=y*x,ie+=b*(5*A),ie+=_*(5*H),K=ie>>>13,ie&=8191,ie+=O*(5*B),ie+=I*(5*F),ie+=v*(5*$),ie+=S*(5*P),ie+=w*(5*m),K+=ie>>>13,ie&=8191;var M=K;M+=f*m,M+=g*l,M+=y*p,M+=b*x,M+=_*(5*A),K=M>>>13,M&=8191,M+=O*(5*H),M+=I*(5*B),M+=v*(5*F),M+=S*(5*$),M+=w*(5*P),K+=M>>>13,M&=8191;var L=K;L+=f*P,L+=g*m,L+=y*l,L+=b*p,L+=_*x,K=L>>>13,L&=8191,L+=O*(5*A),L+=I*(5*H),L+=v*(5*B),L+=S*(5*F),L+=w*(5*$),K+=L>>>13,L&=8191;var R=K;R+=f*$,R+=g*P,R+=y*m,R+=b*l,R+=_*p,K=R>>>13,R&=8191,R+=O*x,R+=I*(5*A),R+=v*(5*H),R+=S*(5*B),R+=w*(5*F),K+=R>>>13,R&=8191;var h=K;h+=f*F,h+=g*$,h+=y*P,h+=b*m,h+=_*l,K=h>>>13,h&=8191,h+=O*p,h+=I*x,h+=v*(5*A),h+=S*(5*H),h+=w*(5*B),K+=h>>>13,h&=8191;var C=K;C+=f*B,C+=g*F,C+=y*$,C+=b*P,C+=_*m,K=C>>>13,C&=8191,C+=O*l,C+=I*p,C+=v*x,C+=S*(5*A),C+=w*(5*H),K+=C>>>13,C&=8191;var Y=K;Y+=f*H,Y+=g*B,Y+=y*F,Y+=b*$,Y+=_*P,K=Y>>>13,Y&=8191,Y+=O*m,Y+=I*l,Y+=v*p,Y+=S*x,Y+=w*(5*A),K+=Y>>>13,Y&=8191;var X=K;X+=f*A,X+=g*H,X+=y*B,X+=b*F,X+=_*$,K=X>>>13,X&=8191,X+=O*P,X+=I*m,X+=v*l,X+=S*p,X+=w*x,K+=X>>>13,X&=8191,K=(K<<2)+K|0,K=K+se|0,se=K&8191,K=K>>>13,ee+=K,f=se,g=ee,y=ie,b=M,_=L,O=R,I=h,v=C,S=Y,w=X,c+=16,u-=16}this._h[0]=f,this._h[1]=g,this._h[2]=y,this._h[3]=b,this._h[4]=_,this._h[5]=O,this._h[6]=I,this._h[7]=v,this._h[8]=S,this._h[9]=w},o.prototype.finish=function(a,c){c===void 0&&(c=0);var u=new Uint16Array(10),d,f,g,y;if(this._leftover){for(y=this._leftover,this._buffer[y++]=1;y<16;y++)this._buffer[y]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,y=2;y<10;y++)this._h[y]+=d,d=this._h[y]>>>13,this._h[y]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,u[0]=this._h[0]+5,d=u[0]>>>13,u[0]&=8191,y=1;y<10;y++)u[y]=this._h[y]+d,d=u[y]>>>13,u[y]&=8191;for(u[9]-=8192,f=(d^1)-1,y=0;y<10;y++)u[y]&=f;for(f=~f,y=0;y<10;y++)this._h[y]=this._h[y]&f|u[y];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,g=this._h[0]+this._pad[0],this._h[0]=g&65535,y=1;y<8;y++)g=(this._h[y]+this._pad[y]|0)+(g>>>16)|0,this._h[y]=g&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,u=a.length,d;if(this._leftover){d=16-this._leftover,d>u&&(d=u);for(var f=0;f<d;f++)this._buffer[this._leftover+f]=a[c+f];if(u-=d,c+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(d=u-u%16,this._blocks(a,c,d),c+=d,u-=d),u){for(var f=0;f<u;f++)this._buffer[this._leftover+f]=a[c+f];this._leftover+=u}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var u=c.digest();return c.clean(),u}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Iu),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Es,r=Iu,n=Jt,i=de,s=jr;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function c(u){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,u.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return c.prototype.seal=function(u,d,f,g){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var y=new Uint8Array(16);y.set(u,y.length-u.length);var b=new Uint8Array(32);e.stream(this._key,y,b,4);var _=d.length+this.tagLength,O;if(g){if(g.length!==_)throw new Error("ChaCha20Poly1305: incorrect destination length");O=g}else O=new Uint8Array(_);return e.streamXOR(this._key,y,d,O,4),this._authenticate(O.subarray(O.length-this.tagLength,O.length),b,O.subarray(0,O.length-this.tagLength),f),n.wipe(y),O},c.prototype.open=function(u,d,f,g){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var y=new Uint8Array(16);y.set(u,y.length-u.length);var b=new Uint8Array(32);e.stream(this._key,y,b,4);var _=new Uint8Array(this.tagLength);if(this._authenticate(_,b,d.subarray(0,d.length-this.tagLength),f),!s.equal(_,d.subarray(d.length-this.tagLength,d.length)))return null;var O=d.length-this.tagLength,I;if(g){if(g.length!==O)throw new Error("ChaCha20Poly1305: incorrect destination length");I=g}else I=new Uint8Array(O);return e.streamXOR(this._key,y,d.subarray(0,d.length-this.tagLength),I,4),n.wipe(y),I},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(u,d,f,g){var y=new r.Poly1305(d);g&&(y.update(g),g.length%16>0&&y.update(o.subarray(g.length%16))),y.update(f),f.length%16>0&&y.update(o.subarray(f.length%16));var b=new Uint8Array(8);g&&i.writeUint64LE(g.length,b),y.update(b),i.writeUint64LE(f.length,b),y.update(b);for(var _=y.digest(),O=0;O<_.length;O++)u[O]=_[O];y.clean(),n.wipe(_),n.wipe(b)},c}();t.ChaCha20Poly1305=a}(Jo);var $u={},_i={},Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});function Ng(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Qo.isSerializableHash=Ng,Object.defineProperty(_i,"__esModule",{value:!0});var yr=Qo,Lg=jr,Mg=Jt,Ru=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),yr.isSerializableHash(this._inner)&&yr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Mg.wipe(n)}return t.prototype.reset=function(){if(!yr.isSerializableHash(this._inner)||!yr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){yr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),yr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!yr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!yr.isSerializableHash(this._inner)||!yr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!yr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();_i.HMAC=Ru;function Fg(t,e,r){var n=new Ru(t,e);n.update(r);var i=n.digest();return n.clean(),i}_i.hmac=Fg,_i.equal=Lg.equal,Object.defineProperty($u,"__esModule",{value:!0});var Pu=_i,Tu=Jt,Ug=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Pu.hmac(this._hash,n,r);this._hmac=new Pu.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Tu.wipe(this._buffer),Tu.wipe(this._counter),this._bufpos=0},t}(),jg=$u.HKDF=Ug,Ss={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=de,r=Jt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=s(this._temp,this._state,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,g=u<<3,y=u%64<56?64:128;this._buffer[d]=128;for(var b=d+1;b<y-8;b++)this._buffer[b]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(g,this._buffer,y-4),s(this._temp,this._state,this._buffer,0,y),this._finished=!0}for(var b=0;b<this.digestLength/4;b++)e.writeUint32BE(this._state[b],c,b*4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,c,u,d,f){for(;f>=64;){for(var g=c[0],y=c[1],b=c[2],_=c[3],O=c[4],I=c[5],v=c[6],S=c[7],w=0;w<16;w++){var x=d+w*4;a[w]=e.readUint32BE(u,x)}for(var w=16;w<64;w++){var p=a[w-2],l=(p>>>17|p<<32-17)^(p>>>19|p<<32-19)^p>>>10;p=a[w-15];var m=(p>>>7|p<<32-7)^(p>>>18|p<<32-18)^p>>>3;a[w]=(l+a[w-7]|0)+(m+a[w-16]|0)}for(var w=0;w<64;w++){var l=(((O>>>6|O<<26)^(O>>>11|O<<21)^(O>>>25|O<<7))+(O&I^~O&v)|0)+(S+(i[w]+a[w]|0)|0)|0,m=((g>>>2|g<<32-2)^(g>>>13|g<<32-13)^(g>>>22|g<<32-22))+(g&y^g&b^y&b)|0;S=v,v=I,I=O,O=_+l|0,_=b,b=y,y=g,g=l+m|0}c[0]+=g,c[1]+=y,c[2]+=b,c[3]+=_,c[4]+=O,c[5]+=I,c[6]+=v,c[7]+=S,d+=64,f-=64}return d}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(Ss);var Xo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Ln,r=Jt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(w){const x=new Float64Array(16);if(w)for(let p=0;p<w.length;p++)x[p]=w[p];return x}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(w){let x=1;for(let p=0;p<16;p++){let l=w[p]+x+65535;x=Math.floor(l/65536),w[p]=l-x*65536}w[0]+=x-1+37*(x-1)}function a(w,x,p){const l=~(p-1);for(let m=0;m<16;m++){const P=l&(w[m]^x[m]);w[m]^=P,x[m]^=P}}function c(w,x){const p=n(),l=n();for(let m=0;m<16;m++)l[m]=x[m];o(l),o(l),o(l);for(let m=0;m<2;m++){p[0]=l[0]-65517;for(let $=1;$<15;$++)p[$]=l[$]-65535-(p[$-1]>>16&1),p[$-1]&=65535;p[15]=l[15]-32767-(p[14]>>16&1);const P=p[15]>>16&1;p[14]&=65535,a(l,p,1-P)}for(let m=0;m<16;m++)w[2*m]=l[m]&255,w[2*m+1]=l[m]>>8}function u(w,x){for(let p=0;p<16;p++)w[p]=x[2*p]+(x[2*p+1]<<8);w[15]&=32767}function d(w,x,p){for(let l=0;l<16;l++)w[l]=x[l]+p[l]}function f(w,x,p){for(let l=0;l<16;l++)w[l]=x[l]-p[l]}function g(w,x,p){let l,m,P=0,$=0,F=0,B=0,H=0,A=0,N=0,G=0,q=0,k=0,W=0,j=0,V=0,ce=0,K=0,se=0,ee=0,ie=0,M=0,L=0,R=0,h=0,C=0,Y=0,X=0,Ee=0,Se=0,me=0,Te=0,Qe=0,He=0,Ae=p[0],Ce=p[1],we=p[2],ve=p[3],ye=p[4],fe=p[5],he=p[6],oe=p[7],be=p[8],xe=p[9],le=p[10],Oe=p[11],Ne=p[12],Ue=p[13],je=p[14],Me=p[15];l=x[0],P+=l*Ae,$+=l*Ce,F+=l*we,B+=l*ve,H+=l*ye,A+=l*fe,N+=l*he,G+=l*oe,q+=l*be,k+=l*xe,W+=l*le,j+=l*Oe,V+=l*Ne,ce+=l*Ue,K+=l*je,se+=l*Me,l=x[1],$+=l*Ae,F+=l*Ce,B+=l*we,H+=l*ve,A+=l*ye,N+=l*fe,G+=l*he,q+=l*oe,k+=l*be,W+=l*xe,j+=l*le,V+=l*Oe,ce+=l*Ne,K+=l*Ue,se+=l*je,ee+=l*Me,l=x[2],F+=l*Ae,B+=l*Ce,H+=l*we,A+=l*ve,N+=l*ye,G+=l*fe,q+=l*he,k+=l*oe,W+=l*be,j+=l*xe,V+=l*le,ce+=l*Oe,K+=l*Ne,se+=l*Ue,ee+=l*je,ie+=l*Me,l=x[3],B+=l*Ae,H+=l*Ce,A+=l*we,N+=l*ve,G+=l*ye,q+=l*fe,k+=l*he,W+=l*oe,j+=l*be,V+=l*xe,ce+=l*le,K+=l*Oe,se+=l*Ne,ee+=l*Ue,ie+=l*je,M+=l*Me,l=x[4],H+=l*Ae,A+=l*Ce,N+=l*we,G+=l*ve,q+=l*ye,k+=l*fe,W+=l*he,j+=l*oe,V+=l*be,ce+=l*xe,K+=l*le,se+=l*Oe,ee+=l*Ne,ie+=l*Ue,M+=l*je,L+=l*Me,l=x[5],A+=l*Ae,N+=l*Ce,G+=l*we,q+=l*ve,k+=l*ye,W+=l*fe,j+=l*he,V+=l*oe,ce+=l*be,K+=l*xe,se+=l*le,ee+=l*Oe,ie+=l*Ne,M+=l*Ue,L+=l*je,R+=l*Me,l=x[6],N+=l*Ae,G+=l*Ce,q+=l*we,k+=l*ve,W+=l*ye,j+=l*fe,V+=l*he,ce+=l*oe,K+=l*be,se+=l*xe,ee+=l*le,ie+=l*Oe,M+=l*Ne,L+=l*Ue,R+=l*je,h+=l*Me,l=x[7],G+=l*Ae,q+=l*Ce,k+=l*we,W+=l*ve,j+=l*ye,V+=l*fe,ce+=l*he,K+=l*oe,se+=l*be,ee+=l*xe,ie+=l*le,M+=l*Oe,L+=l*Ne,R+=l*Ue,h+=l*je,C+=l*Me,l=x[8],q+=l*Ae,k+=l*Ce,W+=l*we,j+=l*ve,V+=l*ye,ce+=l*fe,K+=l*he,se+=l*oe,ee+=l*be,ie+=l*xe,M+=l*le,L+=l*Oe,R+=l*Ne,h+=l*Ue,C+=l*je,Y+=l*Me,l=x[9],k+=l*Ae,W+=l*Ce,j+=l*we,V+=l*ve,ce+=l*ye,K+=l*fe,se+=l*he,ee+=l*oe,ie+=l*be,M+=l*xe,L+=l*le,R+=l*Oe,h+=l*Ne,C+=l*Ue,Y+=l*je,X+=l*Me,l=x[10],W+=l*Ae,j+=l*Ce,V+=l*we,ce+=l*ve,K+=l*ye,se+=l*fe,ee+=l*he,ie+=l*oe,M+=l*be,L+=l*xe,R+=l*le,h+=l*Oe,C+=l*Ne,Y+=l*Ue,X+=l*je,Ee+=l*Me,l=x[11],j+=l*Ae,V+=l*Ce,ce+=l*we,K+=l*ve,se+=l*ye,ee+=l*fe,ie+=l*he,M+=l*oe,L+=l*be,R+=l*xe,h+=l*le,C+=l*Oe,Y+=l*Ne,X+=l*Ue,Ee+=l*je,Se+=l*Me,l=x[12],V+=l*Ae,ce+=l*Ce,K+=l*we,se+=l*ve,ee+=l*ye,ie+=l*fe,M+=l*he,L+=l*oe,R+=l*be,h+=l*xe,C+=l*le,Y+=l*Oe,X+=l*Ne,Ee+=l*Ue,Se+=l*je,me+=l*Me,l=x[13],ce+=l*Ae,K+=l*Ce,se+=l*we,ee+=l*ve,ie+=l*ye,M+=l*fe,L+=l*he,R+=l*oe,h+=l*be,C+=l*xe,Y+=l*le,X+=l*Oe,Ee+=l*Ne,Se+=l*Ue,me+=l*je,Te+=l*Me,l=x[14],K+=l*Ae,se+=l*Ce,ee+=l*we,ie+=l*ve,M+=l*ye,L+=l*fe,R+=l*he,h+=l*oe,C+=l*be,Y+=l*xe,X+=l*le,Ee+=l*Oe,Se+=l*Ne,me+=l*Ue,Te+=l*je,Qe+=l*Me,l=x[15],se+=l*Ae,ee+=l*Ce,ie+=l*we,M+=l*ve,L+=l*ye,R+=l*fe,h+=l*he,C+=l*oe,Y+=l*be,X+=l*xe,Ee+=l*le,Se+=l*Oe,me+=l*Ne,Te+=l*Ue,Qe+=l*je,He+=l*Me,P+=38*ee,$+=38*ie,F+=38*M,B+=38*L,H+=38*R,A+=38*h,N+=38*C,G+=38*Y,q+=38*X,k+=38*Ee,W+=38*Se,j+=38*me,V+=38*Te,ce+=38*Qe,K+=38*He,m=1,l=P+m+65535,m=Math.floor(l/65536),P=l-m*65536,l=$+m+65535,m=Math.floor(l/65536),$=l-m*65536,l=F+m+65535,m=Math.floor(l/65536),F=l-m*65536,l=B+m+65535,m=Math.floor(l/65536),B=l-m*65536,l=H+m+65535,m=Math.floor(l/65536),H=l-m*65536,l=A+m+65535,m=Math.floor(l/65536),A=l-m*65536,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=G+m+65535,m=Math.floor(l/65536),G=l-m*65536,l=q+m+65535,m=Math.floor(l/65536),q=l-m*65536,l=k+m+65535,m=Math.floor(l/65536),k=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=j+m+65535,m=Math.floor(l/65536),j=l-m*65536,l=V+m+65535,m=Math.floor(l/65536),V=l-m*65536,l=ce+m+65535,m=Math.floor(l/65536),ce=l-m*65536,l=K+m+65535,m=Math.floor(l/65536),K=l-m*65536,l=se+m+65535,m=Math.floor(l/65536),se=l-m*65536,P+=m-1+37*(m-1),m=1,l=P+m+65535,m=Math.floor(l/65536),P=l-m*65536,l=$+m+65535,m=Math.floor(l/65536),$=l-m*65536,l=F+m+65535,m=Math.floor(l/65536),F=l-m*65536,l=B+m+65535,m=Math.floor(l/65536),B=l-m*65536,l=H+m+65535,m=Math.floor(l/65536),H=l-m*65536,l=A+m+65535,m=Math.floor(l/65536),A=l-m*65536,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=G+m+65535,m=Math.floor(l/65536),G=l-m*65536,l=q+m+65535,m=Math.floor(l/65536),q=l-m*65536,l=k+m+65535,m=Math.floor(l/65536),k=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=j+m+65535,m=Math.floor(l/65536),j=l-m*65536,l=V+m+65535,m=Math.floor(l/65536),V=l-m*65536,l=ce+m+65535,m=Math.floor(l/65536),ce=l-m*65536,l=K+m+65535,m=Math.floor(l/65536),K=l-m*65536,l=se+m+65535,m=Math.floor(l/65536),se=l-m*65536,P+=m-1+37*(m-1),w[0]=P,w[1]=$,w[2]=F,w[3]=B,w[4]=H,w[5]=A,w[6]=N,w[7]=G,w[8]=q,w[9]=k,w[10]=W,w[11]=j,w[12]=V,w[13]=ce,w[14]=K,w[15]=se}function y(w,x){g(w,x,x)}function b(w,x){const p=n();for(let l=0;l<16;l++)p[l]=x[l];for(let l=253;l>=0;l--)y(p,p),l!==2&&l!==4&&g(p,p,x);for(let l=0;l<16;l++)w[l]=p[l]}function _(w,x){const p=new Uint8Array(32),l=new Float64Array(80),m=n(),P=n(),$=n(),F=n(),B=n(),H=n();for(let q=0;q<31;q++)p[q]=w[q];p[31]=w[31]&127|64,p[0]&=248,u(l,x);for(let q=0;q<16;q++)P[q]=l[q];m[0]=F[0]=1;for(let q=254;q>=0;--q){const k=p[q>>>3]>>>(q&7)&1;a(m,P,k),a($,F,k),d(B,m,$),f(m,m,$),d($,P,F),f(P,P,F),y(F,B),y(H,m),g(m,$,m),g($,P,B),d(B,m,$),f(m,m,$),y(P,m),f($,F,H),g(m,$,s),d(m,m,F),g($,$,m),g(m,F,H),g(F,P,l),y(P,B),a(m,P,k),a($,F,k)}for(let q=0;q<16;q++)l[q+16]=m[q],l[q+32]=$[q],l[q+48]=P[q],l[q+64]=F[q];const A=l.subarray(32),N=l.subarray(16);b(A,A),g(N,N,A);const G=new Uint8Array(32);return c(G,N),G}t.scalarMult=_;function O(w){return _(w,i)}t.scalarMultBase=O;function I(w){if(w.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const x=new Uint8Array(w);return{publicKey:O(x),secretKey:x}}t.generateKeyPairFromSeed=I;function v(w){const x=(0,e.randomBytes)(32,w),p=I(x);return(0,r.wipe)(x),p}t.generateKeyPair=v;function S(w,x,p=!1){if(w.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(x.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const l=_(w,x);if(p){let m=0;for(let P=0;P<l.length;P++)m|=l[P];if(m===0)throw new Error("X25519: invalid shared key")}return l}t.sharedKey=S})(Xo);var Nu=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},kg=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Bg=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),zg=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Wg=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),qg=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Hg=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Vg=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Lu=3,Kg=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Hg]],Mu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Gg(t){return t?Fu(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new qg:typeof navigator<"u"?Fu(navigator.userAgent):Zg()}function Yg(t){return t!==""&&Kg.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Fu(t){var e=Yg(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Wg;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Lu&&(i=Nu(Nu([],i,!0),Qg(Lu-i.length),!0)):i=[];var s=i.join("."),o=Jg(t),a=Vg.exec(t);return a&&a[1]?new zg(r,s,o,a[1]):new kg(r,s,o)}function Jg(t){for(var e=0,r=Mu.length;e<r;e++){var n=Mu[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function Zg(){var t=typeof process<"u"&&process.version;return t?new Bg(process.version.slice(1)):null}function Qg(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.getLocalStorage=Ve.getLocalStorageOrThrow=Ve.getCrypto=Ve.getCryptoOrThrow=ju=Ve.getLocation=Ve.getLocationOrThrow=ea=Ve.getNavigator=Ve.getNavigatorOrThrow=Uu=Ve.getDocument=Ve.getDocumentOrThrow=Ve.getFromWindowOrThrow=Ve.getFromWindow=void 0;function dn(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ve.getFromWindow=dn;function Mn(t){const e=dn(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ve.getFromWindowOrThrow=Mn;function Xg(){return Mn("document")}Ve.getDocumentOrThrow=Xg;function em(){return dn("document")}var Uu=Ve.getDocument=em;function tm(){return Mn("navigator")}Ve.getNavigatorOrThrow=tm;function rm(){return dn("navigator")}var ea=Ve.getNavigator=rm;function nm(){return Mn("location")}Ve.getLocationOrThrow=nm;function im(){return dn("location")}var ju=Ve.getLocation=im;function sm(){return Mn("crypto")}Ve.getCryptoOrThrow=sm;function om(){return dn("crypto")}Ve.getCrypto=om;function am(){return Mn("localStorage")}Ve.getLocalStorageOrThrow=am;function cm(){return dn("localStorage")}Ve.getLocalStorage=cm;var ta={};Object.defineProperty(ta,"__esModule",{value:!0});var ku=ta.getWindowMetadata=void 0;const Bu=Ve;function lm(){let t,e;try{t=Bu.getDocumentOrThrow(),e=Bu.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),g=[];for(let y=0;y<f.length;y++){const b=f[y],_=b.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const O=b.getAttribute("href");if(O)if(O.toLowerCase().indexOf("https:")===-1&&O.toLowerCase().indexOf("http:")===-1&&O.indexOf("//")!==0){let I=e.protocol+"//"+e.host;if(O.indexOf("/")===0)I+=O;else{const v=e.pathname.split("/");v.pop();const S=v.join("/");I+=S+"/"+O}g.push(I)}else if(O.indexOf("//")===0){const I=e.protocol+O;g.push(I)}else g.push(O)}}return g}function n(...f){const g=t.getElementsByTagName("meta");for(let y=0;y<g.length;y++){const b=g[y],_=["itemprop","property","name"].map(O=>b.getAttribute(O)).filter(O=>O?f.includes(O):!1);if(_.length&&_){const O=b.getAttribute("content");if(O)return O}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,u=r();return{description:a,url:c,icons:u,name:o}}ku=ta.getWindowMetadata=lm;var Ei={},um=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),zu="%[a-f0-9]{2}",Wu=new RegExp("("+zu+")|([^%]+?)","gi"),qu=new RegExp("("+zu+")+","gi");function ra(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],ra(r),ra(n))}function hm(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Wu)||[],r=1;r<e.length;r++)t=ra(e,r).join(""),e=t.match(Wu)||[];return t}}function dm(t){for(var e={"%FE%FF":"","%FF%FE":""},r=qu.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=hm(r[0]);n!==r[0]&&(e[r[0]]=n)}r=qu.exec(t)}e["%C2"]="";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var fm=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return dm(t)}},pm=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},gm=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=um,r=fm,n=pm,i=gm,s=v=>v==null,o=Symbol("encodeFragmentIdentifier");function a(v){switch(v.arrayFormat){case"index":return S=>(w,x)=>{const p=w.length;return x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,[d(S,v),"[",p,"]"].join("")]:[...w,[d(S,v),"[",d(p,v),"]=",d(x,v)].join("")]};case"bracket":return S=>(w,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,[d(S,v),"[]"].join("")]:[...w,[d(S,v),"[]=",d(x,v)].join("")];case"colon-list-separator":return S=>(w,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,[d(S,v),":list="].join("")]:[...w,[d(S,v),":list=",d(x,v)].join("")];case"comma":case"separator":case"bracket-separator":{const S=v.arrayFormat==="bracket-separator"?"[]=":"=";return w=>(x,p)=>p===void 0||v.skipNull&&p===null||v.skipEmptyString&&p===""?x:(p=p===null?"":p,x.length===0?[[d(w,v),S,d(p,v)].join("")]:[[x,d(p,v)].join(v.arrayFormatSeparator)])}default:return S=>(w,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,d(S,v)]:[...w,[d(S,v),"=",d(x,v)].join("")]}}function c(v){let S;switch(v.arrayFormat){case"index":return(w,x,p)=>{if(S=/\[(\d*)\]$/.exec(w),w=w.replace(/\[\d*\]$/,""),!S){p[w]=x;return}p[w]===void 0&&(p[w]={}),p[w][S[1]]=x};case"bracket":return(w,x,p)=>{if(S=/(\[\])$/.exec(w),w=w.replace(/\[\]$/,""),!S){p[w]=x;return}if(p[w]===void 0){p[w]=[x];return}p[w]=[].concat(p[w],x)};case"colon-list-separator":return(w,x,p)=>{if(S=/(:list)$/.exec(w),w=w.replace(/:list$/,""),!S){p[w]=x;return}if(p[w]===void 0){p[w]=[x];return}p[w]=[].concat(p[w],x)};case"comma":case"separator":return(w,x,p)=>{const l=typeof x=="string"&&x.includes(v.arrayFormatSeparator),m=typeof x=="string"&&!l&&f(x,v).includes(v.arrayFormatSeparator);x=m?f(x,v):x;const P=l||m?x.split(v.arrayFormatSeparator).map($=>f($,v)):x===null?x:f(x,v);p[w]=P};case"bracket-separator":return(w,x,p)=>{const l=/(\[\])$/.test(w);if(w=w.replace(/\[\]$/,""),!l){p[w]=x&&f(x,v);return}const m=x===null?[]:x.split(v.arrayFormatSeparator).map(P=>f(P,v));if(p[w]===void 0){p[w]=m;return}p[w]=[].concat(p[w],m)};default:return(w,x,p)=>{if(p[w]===void 0){p[w]=x;return}p[w]=[].concat(p[w],x)}}}function u(v){if(typeof v!="string"||v.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(v,S){return S.encode?S.strict?e(v):encodeURIComponent(v):v}function f(v,S){return S.decode?r(v):v}function g(v){return Array.isArray(v)?v.sort():typeof v=="object"?g(Object.keys(v)).sort((S,w)=>Number(S)-Number(w)).map(S=>v[S]):v}function y(v){const S=v.indexOf("#");return S!==-1&&(v=v.slice(0,S)),v}function b(v){let S="";const w=v.indexOf("#");return w!==-1&&(S=v.slice(w)),S}function _(v){v=y(v);const S=v.indexOf("?");return S===-1?"":v.slice(S+1)}function O(v,S){return S.parseNumbers&&!Number.isNaN(Number(v))&&typeof v=="string"&&v.trim()!==""?v=Number(v):S.parseBooleans&&v!==null&&(v.toLowerCase()==="true"||v.toLowerCase()==="false")&&(v=v.toLowerCase()==="true"),v}function I(v,S){S=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},S),u(S.arrayFormatSeparator);const w=c(S),x=Object.create(null);if(typeof v!="string"||(v=v.trim().replace(/^[?#&]/,""),!v))return x;for(const p of v.split("&")){if(p==="")continue;let[l,m]=n(S.decode?p.replace(/\+/g," "):p,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes(S.arrayFormat)?m:f(m,S),w(f(l,S),m,x)}for(const p of Object.keys(x)){const l=x[p];if(typeof l=="object"&&l!==null)for(const m of Object.keys(l))l[m]=O(l[m],S);else x[p]=O(l,S)}return S.sort===!1?x:(S.sort===!0?Object.keys(x).sort():Object.keys(x).sort(S.sort)).reduce((p,l)=>{const m=x[l];return m&&typeof m=="object"&&!Array.isArray(m)?p[l]=g(m):p[l]=m,p},Object.create(null))}t.extract=_,t.parse=I,t.stringify=(v,S)=>{if(!v)return"";S=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},S),u(S.arrayFormatSeparator);const w=m=>S.skipNull&&s(v[m])||S.skipEmptyString&&v[m]==="",x=a(S),p={};for(const m of Object.keys(v))w(m)||(p[m]=v[m]);const l=Object.keys(p);return S.sort!==!1&&l.sort(S.sort),l.map(m=>{const P=v[m];return P===void 0?"":P===null?d(m,S):Array.isArray(P)?P.length===0&&S.arrayFormat==="bracket-separator"?d(m,S)+"[]":P.reduce(x(m),[]).join("&"):d(m,S)+"="+d(P,S)}).filter(m=>m.length>0).join("&")},t.parseUrl=(v,S)=>{S=Object.assign({decode:!0},S);const[w,x]=n(v,"#");return Object.assign({url:w.split("?")[0]||"",query:I(_(v),S)},S&&S.parseFragmentIdentifier&&x?{fragmentIdentifier:f(x,S)}:{})},t.stringifyUrl=(v,S)=>{S=Object.assign({encode:!0,strict:!0,[o]:!0},S);const w=y(v.url).split("?")[0]||"",x=t.extract(v.url),p=t.parse(x,{sort:!1}),l=Object.assign(p,v.query);let m=t.stringify(l,S);m&&(m=`?${m}`);let P=b(v.url);return v.fragmentIdentifier&&(P=`#${S[o]?d(v.fragmentIdentifier,S):v.fragmentIdentifier}`),`${w}${m}${P}`},t.pick=(v,S,w)=>{w=Object.assign({parseFragmentIdentifier:!0,[o]:!1},w);const{url:x,query:p,fragmentIdentifier:l}=t.parseUrl(v,w);return t.stringifyUrl({url:x,query:i(p,S),fragmentIdentifier:l},w)},t.exclude=(v,S,w)=>{const x=Array.isArray(S)?p=>!S.includes(p):(p,l)=>!S(p,l);return t.pick(v,x,w)}})(Ei);const mm={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Hu(t,e){return t.includes(":")?[t]:e.chains||[]}const Vu="base10",jt="base16",na="base64pad",ia="utf8",Ku=0,fn=1,wm=0,Gu=1,sa=12,oa=32;function ym(){const t=Xo.generateKeyPair();return{privateKey:Ut(t.secretKey,jt),publicKey:Ut(t.publicKey,jt)}}function aa(){const t=Ln.randomBytes(oa);return Ut(t,jt)}function vm(t,e){const r=Xo.sharedKey(qt(t,jt),qt(e,jt)),n=new jg(Ss.SHA256,r).expand(oa);return Ut(n,jt)}function bm(t){const e=Ss.hash(qt(t,jt));return Ut(e,jt)}function Fn(t){const e=Ss.hash(qt(t,ia));return Ut(e,jt)}function _m(t){return qt(`${t}`,Vu)}function Si(t){return Number(Ut(t,Vu))}function Em(t){const e=_m(typeof t.type<"u"?t.type:Ku);if(Si(e)===fn&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?qt(t.senderPublicKey,jt):void 0,n=typeof t.iv<"u"?qt(t.iv,jt):Ln.randomBytes(sa),i=new Jo.ChaCha20Poly1305(qt(t.symKey,jt)).seal(n,qt(t.message,ia));return xm({type:e,sealed:i,iv:n,senderPublicKey:r})}function Sm(t){const e=new Jo.ChaCha20Poly1305(qt(t.symKey,jt)),{sealed:r,iv:n}=xs(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return Ut(i,ia)}function xm(t){if(Si(t.type)===fn){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ut(Go([t.type,t.senderPublicKey,t.iv,t.sealed]),na)}return Ut(Go([t.type,t.iv,t.sealed]),na)}function xs(t){const e=qt(t,na),r=e.slice(wm,Gu),n=Gu;if(Si(r)===fn){const a=n+oa,c=a+sa,u=e.slice(n,a),d=e.slice(a,c),f=e.slice(c);return{type:r,sealed:f,iv:d,senderPublicKey:u}}const i=n+sa,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function Dm(t,e){const r=xs(t);return Yu({type:Si(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Ut(r.senderPublicKey,jt):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Yu(t){const e=(t==null?void 0:t.type)||Ku;if(e===fn){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Ju(t){return t.type===fn&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Cm=Object.defineProperty,Zu=Object.getOwnPropertySymbols,Om=Object.prototype.hasOwnProperty,Im=Object.prototype.propertyIsEnumerable,Qu=(t,e,r)=>e in t?Cm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xu=(t,e)=>{for(var r in e||(e={}))Om.call(e,r)&&Qu(t,r,e[r]);if(Zu)for(var r of Zu(e))Im.call(e,r)&&Qu(t,r,e[r]);return t};const Am="ReactNative",Zt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},$m="js";function ca(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ds(){return!Uu()&&!!ea()&&navigator.product===Am}function xi(){return!ca()&&!!ea()}function Di(){return Ds()?Zt.reactNative:ca()?Zt.node:xi()?Zt.browser:Zt.unknown}function Rm(t,e){let r=Ei.parse(t);return r=Xu(Xu({},r),e),t=Ei.stringify(r),t}function Pm(){return ku()||{name:"",description:"",url:"",icons:[""]}}function Tm(){if(Di()===Zt.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=Gg();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Nm(){var t;const e=Di();return e===Zt.browser?[e,((t=ju())==null?void 0:t.host)||"unknown"].join(":"):e}function Lm(t,e,r){const n=Tm(),i=Nm();return[[t,e].join("-"),[$m,r].join("-"),n,i].join("/")}function Mm({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),c=Lm(t,e,n),u={auth:i,ua:c,projectId:s,useOnCloseEvent:o||void 0},d=Rm(a[1]||"",u);return a[0]+"?"+d}function pn(t,e){return t.filter(r=>e.includes(r)).length===t.length}function eh(t){return Object.fromEntries(t.entries())}function th(t){return new Map(Object.entries(t))}function Un(t=re.FIVE_MINUTES,e){const r=re.toMiliseconds(t||re.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function Ci(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function rh(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Fm(t){return rh("topic",t)}function Um(t){return rh("id",t)}function nh(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function dr(t,e){return re.fromMiliseconds((e||Date.now())+re.toMiliseconds(t))}function kr(t){return Date.now()>=re.toMiliseconds(t)}function pt(t,e){return`${t}${e?`:${e}`:""}`}async function jm({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=Di();o===Zt.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===Zt.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}const km="irn";function la(t){return(t==null?void 0:t.relay)||{protocol:km}}function Cs(t){const e=mm[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Bm=Object.defineProperty,ih=Object.getOwnPropertySymbols,zm=Object.prototype.hasOwnProperty,Wm=Object.prototype.propertyIsEnumerable,sh=(t,e,r)=>e in t?Bm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qm=(t,e)=>{for(var r in e||(e={}))zm.call(e,r)&&sh(t,r,e[r]);if(ih)for(var r of ih(e))Wm.call(e,r)&&sh(t,r,e[r]);return t};function Hm(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Vm(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=Ei.parse(s);return{protocol:n,topic:Km(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:Hm(o)}}function Km(t){return t.startsWith("//")?t.substring(2):t}function Gm(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Ym(t){return`${t.protocol}:${t.topic}@${t.version}?`+Ei.stringify(qm({symKey:t.symKey},Gm(t.relay)))}function jn(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Jm(t){const e=[];return Object.values(t).forEach(r=>{e.push(...jn(r.accounts))}),e}function Zm(t,e){const r=[];return Object.values(t).forEach(n=>{jn(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Qm(t,e){const r=[];return Object.values(t).forEach(n=>{jn(n.accounts).includes(e)&&r.push(...n.events)}),r}function Xm(t,e){const r=Is(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}const ew={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},tw={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Q(t,e){const{message:r,code:n}=tw[t];return{message:e?`${r} ${e}`:r,code:n}}function vt(t,e){const{message:r,code:n}=ew[t];return{message:e?`${r} ${e}`:r,code:n}}function Oi(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Ii(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function kt(t){return typeof t>"u"}function Et(t,e){return e&&kt(t)?!0:typeof t=="string"&&!!t.trim().length}function ua(t,e){return e&&kt(t)?!0:typeof t=="number"&&!isNaN(t)}function rw(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return pn(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],d=jn(a),f=r[o];(!pn(Hu(o,f),d)||!pn(f.methods,c)||!pn(f.events,u))&&(s=!1)}),s):!1}function Os(t){return Et(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function nw(t){if(Et(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Os(r)}}return!1}function iw(t){if(Et(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function sw(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function ow(t){return t==null?void 0:t.topic}function aw(t,e){let r=null;return Et(t==null?void 0:t.publicKey,!1)||(r=Q("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function oh(t){let e=!0;return Oi(t)?t.length&&(e=t.every(r=>Et(r,!1))):e=!1,e}function cw(t,e,r){let n=null;return Oi(e)&&e.length?e.forEach(i=>{n||Os(i)||(n=vt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Os(t)||(n=vt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function lw(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=cw(i,Hu(i,s),`${e} ${r}`);o&&(n=o)}),n}function uw(t,e){let r=null;return Oi(t)?t.forEach(n=>{r||nw(n)||(r=vt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=vt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function hw(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=uw(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function dw(t,e){let r=null;return oh(t==null?void 0:t.methods)?oh(t==null?void 0:t.events)||(r=vt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=vt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function ah(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=dw(n,`${e}, namespace`);i&&(r=i)}),r}function fw(t,e,r){let n=null;if(t&&Ii(t)){const i=ah(t,e);i&&(n=i);const s=lw(t,e,r);s&&(n=s)}else n=Q("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Is(t,e){let r=null;if(t&&Ii(t)){const n=ah(t,e);n&&(r=n);const i=hw(t,e);i&&(r=i)}else r=Q("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function ch(t){return Et(t.protocol,!0)}function pw(t,e){let r=!1;return e&&!t?r=!0:t&&Oi(t)&&t.length&&t.forEach(n=>{r=ch(n)}),r}function gw(t){return typeof t=="number"}function Ht(t){return typeof t<"u"&&typeof t!==null}function mw(t){return!(!t||typeof t!="object"||!t.code||!ua(t.code,!1)||!t.message||!Et(t.message,!1))}function ww(t){return!(kt(t)||!Et(t.method,!1))}function yw(t){return!(kt(t)||kt(t.result)&&kt(t.error)||!ua(t.id,!1)||!Et(t.jsonrpc,!1))}function vw(t){return!(kt(t)||!Et(t.name,!1))}function lh(t,e){return!(!Os(e)||!Jm(t).includes(e))}function bw(t,e,r){return Et(r,!1)?Zm(t,e).includes(r):!1}function _w(t,e,r){return Et(r,!1)?Qm(t,e).includes(r):!1}function uh(t,e,r){let n=null;const i=Ew(t),s=Sw(e),o=Object.keys(i),a=Object.keys(s),c=hh(Object.keys(t)),u=hh(Object.keys(e)),d=c.filter(f=>!u.includes(f));return d.length&&(n=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),pn(o,a)||(n=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const g=jn(e[f].accounts);g.includes(f)||(n=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${g.toString()}`))}),o.forEach(f=>{n||(pn(i[f].methods,s[f].methods)?pn(i[f].events,s[f].events)||(n=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function Ew(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function hh(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Sw(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=jn(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function xw(t,e){return ua(t,!1)&&t<=e.max&&t>=e.min}function dh(){const t=Di();return new Promise(e=>{switch(t){case Zt.browser:e(Dw());break;case Zt.reactNative:e(Cw());break;case Zt.node:e(Ow());break;default:e(!0)}})}function Dw(){return xi()&&(navigator==null?void 0:navigator.onLine)}async function Cw(){if(Ds()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function Ow(){return!0}function Iw(t){switch(Di()){case Zt.browser:Aw(t);break;case Zt.reactNative:$w(t);break}}function Aw(t){xi()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function $w(t){Ds()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const ha={};let As=class{static get(e){return ha[e]}static set(e,r){ha[e]=r}static delete(e){delete ha[e]}};const Rw="PARSE_ERROR",Pw="INVALID_REQUEST",Tw="METHOD_NOT_FOUND",Nw="INVALID_PARAMS",fh="INTERNAL_ERROR",da="SERVER_ERROR",Lw=[-32700,-32600,-32601,-32602,-32603],Ai={[Rw]:{code:-32700,message:"Parse error"},[Pw]:{code:-32600,message:"Invalid Request"},[Tw]:{code:-32601,message:"Method not found"},[Nw]:{code:-32602,message:"Invalid params"},[fh]:{code:-32603,message:"Internal error"},[da]:{code:-32e3,message:"Server error"}},ph=da;function Mw(t){return Lw.includes(t)}function gh(t){return Object.keys(Ai).includes(t)?Ai[t]:Ai[ph]}function Fw(t){const e=Object.values(Ai).find(r=>r.code===t);return e||Ai[ph]}function Uw(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var mh={},Cr={},wh;function jw(){if(wh)return Cr;wh=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.isBrowserCryptoAvailable=Cr.getSubtleCrypto=Cr.getBrowerCrypto=void 0;function t(){return(Gt==null?void 0:Gt.crypto)||(Gt==null?void 0:Gt.msCrypto)||{}}Cr.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Cr.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Cr.isBrowserCryptoAvailable=r,Cr}var Or={},yh;function kw(){if(yh)return Or;yh=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.isBrowser=Or.isNode=Or.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Or.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Or.isNode=e;function r(){return!t()&&!e()}return Or.isBrowser=r,Or}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nr;e.__exportStar(jw(),t),e.__exportStar(kw(),t)})(mh);function fa(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function vh(t=6){return BigInt(fa(t))}function $i(t,e,r){return{id:r||fa(),jsonrpc:"2.0",method:t,params:e}}function pa(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ga(t,e,r){return{id:t,jsonrpc:"2.0",error:Bw(e,r)}}function Bw(t,e){return typeof t>"u"?gh(fh):(typeof t=="string"&&(t=Object.assign(Object.assign({},gh(da)),{message:t})),typeof e<"u"&&(t.data=e),Mw(t.code)&&(t=Fw(t.code)),t)}class zw{}class Ww extends zw{constructor(){super()}}class qw extends Ww{constructor(e){super()}}const Hw="^wss?:";function Vw(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Kw(t,e){const r=Vw(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function bh(t){return Kw(t,Hw)}function Gw(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function _h(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function ma(t){return _h(t)&&"method"in t}function $s(t){return _h(t)&&(Ir(t)||fr(t))}function Ir(t){return"result"in t}function fr(t){return"error"in t}class Yw extends qw{constructor(e){super(e),this.events=new hr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict($i(e.method,e.params||[],e.id||vh().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{fr(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),$s(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Jw=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Zw=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Eh=t=>t.split("?")[0],Sh=10,Qw=Jw();class Xw{constructor(e){if(this.url=e,this.events=new hr.EventEmitter,this.registering=!1,!bh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Bo(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!bh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=mh.isReactNative()?void 0:{rejectUnauthorized:!Gw(e)},s=new Qw(e,[],i);Zw()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?ou(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=ga(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Uw(e,Eh(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Sh&&this.events.setMaxListeners(Sh)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Eh(this.url)}`));return this.events.emit("register_error",r),r}}var Rs={exports:{}};Rs.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",g="[object Error]",y="[object Function]",b="[object GeneratorFunction]",_="[object Map]",O="[object Number]",I="[object Null]",v="[object Object]",S="[object Promise]",w="[object Proxy]",x="[object RegExp]",p="[object Set]",l="[object String]",m="[object Symbol]",P="[object Undefined]",$="[object WeakMap]",F="[object ArrayBuffer]",B="[object DataView]",H="[object Float32Array]",A="[object Float64Array]",N="[object Int8Array]",G="[object Int16Array]",q="[object Int32Array]",k="[object Uint8Array]",W="[object Uint8ClampedArray]",j="[object Uint16Array]",V="[object Uint32Array]",ce=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,ee={};ee[H]=ee[A]=ee[N]=ee[G]=ee[q]=ee[k]=ee[W]=ee[j]=ee[V]=!0,ee[a]=ee[c]=ee[F]=ee[d]=ee[B]=ee[f]=ee[g]=ee[y]=ee[_]=ee[O]=ee[v]=ee[x]=ee[p]=ee[l]=ee[$]=!1;var ie=typeof Gt=="object"&&Gt&&Gt.Object===Object&&Gt,M=typeof self=="object"&&self&&self.Object===Object&&self,L=ie||M||Function("return this")(),R=e&&!e.nodeType&&e,h=R&&!0&&t&&!t.nodeType&&t,C=h&&h.exports===R,Y=C&&ie.process,X=function(){try{return Y&&Y.binding&&Y.binding("util")}catch{}}(),Ee=X&&X.isTypedArray;function Se(E,T){for(var z=-1,te=E==null?0:E.length,Je=0,ge=[];++z<te;){var lt=E[z];T(lt,z,E)&&(ge[Je++]=lt)}return ge}function me(E,T){for(var z=-1,te=T.length,Je=E.length;++z<te;)E[Je+z]=T[z];return E}function Te(E,T){for(var z=-1,te=E==null?0:E.length;++z<te;)if(T(E[z],z,E))return!0;return!1}function Qe(E,T){for(var z=-1,te=Array(E);++z<E;)te[z]=T(z);return te}function He(E){return function(T){return E(T)}}function Ae(E,T){return E.has(T)}function Ce(E,T){return E==null?void 0:E[T]}function we(E){var T=-1,z=Array(E.size);return E.forEach(function(te,Je){z[++T]=[Je,te]}),z}function ve(E,T){return function(z){return E(T(z))}}function ye(E){var T=-1,z=Array(E.size);return E.forEach(function(te){z[++T]=te}),z}var fe=Array.prototype,he=Function.prototype,oe=Object.prototype,be=L["__core-js_shared__"],xe=he.toString,le=oe.hasOwnProperty,Oe=function(){var E=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),Ne=oe.toString,Ue=RegExp("^"+xe.call(le).replace(ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=C?L.Buffer:void 0,Me=L.Symbol,tr=L.Uint8Array,ar=oe.propertyIsEnumerable,xr=fe.splice,It=Me?Me.toStringTag:void 0,Dr=Object.getOwnPropertySymbols,cr=je?je.isBuffer:void 0,Zr=ve(Object.keys,Object),Xe=ai(L,"DataView"),Ge=ai(L,"Map"),st=ai(L,"Promise"),tt=ai(L,"Set"),ot=ai(L,"WeakMap"),Ye=ai(Object,"create"),ht=In(Xe),gt=In(Ge),mt=In(st),dt=In(tt),wt=In(ot),ft=Me?Me.prototype:void 0,at=ft?ft.valueOf:void 0;function Ke(E){var T=-1,z=E==null?0:E.length;for(this.clear();++T<z;){var te=E[T];this.set(te[0],te[1])}}function D(){this.__data__=Ye?Ye(null):{},this.size=0}function U(E){var T=this.has(E)&&delete this.__data__[E];return this.size-=T?1:0,T}function Z(E){var T=this.__data__;if(Ye){var z=T[E];return z===n?void 0:z}return le.call(T,E)?T[E]:void 0}function ae(E){var T=this.__data__;return Ye?T[E]!==void 0:le.call(T,E)}function Fe(E,T){var z=this.__data__;return this.size+=this.has(E)?0:1,z[E]=Ye&&T===void 0?n:T,this}Ke.prototype.clear=D,Ke.prototype.delete=U,Ke.prototype.get=Z,Ke.prototype.has=ae,Ke.prototype.set=Fe;function Ie(E){var T=-1,z=E==null?0:E.length;for(this.clear();++T<z;){var te=E[T];this.set(te[0],te[1])}}function $e(){this.__data__=[],this.size=0}function De(E){var T=this.__data__,z=go(T,E);if(z<0)return!1;var te=T.length-1;return z==te?T.pop():xr.call(T,z,1),--this.size,!0}function At(E){var T=this.__data__,z=go(T,E);return z<0?void 0:T[z][1]}function rt(E){return go(this.__data__,E)>-1}function ct(E,T){var z=this.__data__,te=go(z,E);return te<0?(++this.size,z.push([E,T])):z[te][1]=T,this}Ie.prototype.clear=$e,Ie.prototype.delete=De,Ie.prototype.get=At,Ie.prototype.has=rt,Ie.prototype.set=ct;function yt(E){var T=-1,z=E==null?0:E.length;for(this.clear();++T<z;){var te=E[T];this.set(te[0],te[1])}}function Qr(){this.size=0,this.__data__={hash:new Ke,map:new(Ge||Ie),string:new Ke}}function fo(E){var T=mo(this,E).delete(E);return this.size-=T?1:0,T}function pr(E){return mo(this,E).get(E)}function rE(E){return mo(this,E).has(E)}function nE(E,T){var z=mo(this,E),te=z.size;return z.set(E,T),this.size+=z.size==te?0:1,this}yt.prototype.clear=Qr,yt.prototype.delete=fo,yt.prototype.get=pr,yt.prototype.has=rE,yt.prototype.set=nE;function po(E){var T=-1,z=E==null?0:E.length;for(this.__data__=new yt;++T<z;)this.add(E[T])}function iE(E){return this.__data__.set(E,n),this}function sE(E){return this.__data__.has(E)}po.prototype.add=po.prototype.push=iE,po.prototype.has=sE;function Xr(E){var T=this.__data__=new Ie(E);this.size=T.size}function oE(){this.__data__=new Ie,this.size=0}function aE(E){var T=this.__data__,z=T.delete(E);return this.size=T.size,z}function cE(E){return this.__data__.get(E)}function lE(E){return this.__data__.has(E)}function uE(E,T){var z=this.__data__;if(z instanceof Ie){var te=z.__data__;if(!Ge||te.length<r-1)return te.push([E,T]),this.size=++z.size,this;z=this.__data__=new yt(te)}return z.set(E,T),this.size=z.size,this}Xr.prototype.clear=oE,Xr.prototype.delete=aE,Xr.prototype.get=cE,Xr.prototype.has=lE,Xr.prototype.set=uE;function hE(E,T){var z=wo(E),te=!z&&CE(E),Je=!z&&!te&&al(E),ge=!z&&!te&&!Je&&a0(E),lt=z||te||Je||ge,xt=lt?Qe(E.length,String):[],$t=xt.length;for(var nt in E)(T||le.call(E,nt))&&!(lt&&(nt=="length"||Je&&(nt=="offset"||nt=="parent")||ge&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||_E(nt,$t)))&&xt.push(nt);return xt}function go(E,T){for(var z=E.length;z--;)if(n0(E[z][0],T))return z;return-1}function dE(E,T,z){var te=T(E);return wo(E)?te:me(te,z(E))}function os(E){return E==null?E===void 0?P:I:It&&It in Object(E)?vE(E):DE(E)}function Xf(E){return as(E)&&os(E)==a}function e0(E,T,z,te,Je){return E===T?!0:E==null||T==null||!as(E)&&!as(T)?E!==E&&T!==T:fE(E,T,z,te,e0,Je)}function fE(E,T,z,te,Je,ge){var lt=wo(E),xt=wo(T),$t=lt?c:en(E),nt=xt?c:en(T);$t=$t==a?v:$t,nt=nt==a?v:nt;var rr=$t==v,gr=nt==v,Mt=$t==nt;if(Mt&&al(E)){if(!al(T))return!1;lt=!0,rr=!1}if(Mt&&!rr)return ge||(ge=new Xr),lt||a0(E)?t0(E,T,z,te,Je,ge):wE(E,T,$t,z,te,Je,ge);if(!(z&i)){var lr=rr&&le.call(E,"__wrapped__"),ur=gr&&le.call(T,"__wrapped__");if(lr||ur){var tn=lr?E.value():E,Nr=ur?T.value():T;return ge||(ge=new Xr),Je(tn,Nr,z,te,ge)}}return Mt?(ge||(ge=new Xr),yE(E,T,z,te,Je,ge)):!1}function pE(E){if(!o0(E)||SE(E))return!1;var T=i0(E)?Ue:K;return T.test(In(E))}function gE(E){return as(E)&&s0(E.length)&&!!ee[os(E)]}function mE(E){if(!xE(E))return Zr(E);var T=[];for(var z in Object(E))le.call(E,z)&&z!="constructor"&&T.push(z);return T}function t0(E,T,z,te,Je,ge){var lt=z&i,xt=E.length,$t=T.length;if(xt!=$t&&!(lt&&$t>xt))return!1;var nt=ge.get(E);if(nt&&ge.get(T))return nt==T;var rr=-1,gr=!0,Mt=z&s?new po:void 0;for(ge.set(E,T),ge.set(T,E);++rr<xt;){var lr=E[rr],ur=T[rr];if(te)var tn=lt?te(ur,lr,rr,T,E,ge):te(lr,ur,rr,E,T,ge);if(tn!==void 0){if(tn)continue;gr=!1;break}if(Mt){if(!Te(T,function(Nr,An){if(!Ae(Mt,An)&&(lr===Nr||Je(lr,Nr,z,te,ge)))return Mt.push(An)})){gr=!1;break}}else if(!(lr===ur||Je(lr,ur,z,te,ge))){gr=!1;break}}return ge.delete(E),ge.delete(T),gr}function wE(E,T,z,te,Je,ge,lt){switch(z){case B:if(E.byteLength!=T.byteLength||E.byteOffset!=T.byteOffset)return!1;E=E.buffer,T=T.buffer;case F:return!(E.byteLength!=T.byteLength||!ge(new tr(E),new tr(T)));case d:case f:case O:return n0(+E,+T);case g:return E.name==T.name&&E.message==T.message;case x:case l:return E==T+"";case _:var xt=we;case p:var $t=te&i;if(xt||(xt=ye),E.size!=T.size&&!$t)return!1;var nt=lt.get(E);if(nt)return nt==T;te|=s,lt.set(E,T);var rr=t0(xt(E),xt(T),te,Je,ge,lt);return lt.delete(E),rr;case m:if(at)return at.call(E)==at.call(T)}return!1}function yE(E,T,z,te,Je,ge){var lt=z&i,xt=r0(E),$t=xt.length,nt=r0(T),rr=nt.length;if($t!=rr&&!lt)return!1;for(var gr=$t;gr--;){var Mt=xt[gr];if(!(lt?Mt in T:le.call(T,Mt)))return!1}var lr=ge.get(E);if(lr&&ge.get(T))return lr==T;var ur=!0;ge.set(E,T),ge.set(T,E);for(var tn=lt;++gr<$t;){Mt=xt[gr];var Nr=E[Mt],An=T[Mt];if(te)var c0=lt?te(An,Nr,Mt,T,E,ge):te(Nr,An,Mt,E,T,ge);if(!(c0===void 0?Nr===An||Je(Nr,An,z,te,ge):c0)){ur=!1;break}tn||(tn=Mt=="constructor")}if(ur&&!tn){var yo=E.constructor,vo=T.constructor;yo!=vo&&"constructor"in E&&"constructor"in T&&!(typeof yo=="function"&&yo instanceof yo&&typeof vo=="function"&&vo instanceof vo)&&(ur=!1)}return ge.delete(E),ge.delete(T),ur}function r0(E){return dE(E,AE,bE)}function mo(E,T){var z=E.__data__;return EE(T)?z[typeof T=="string"?"string":"hash"]:z.map}function ai(E,T){var z=Ce(E,T);return pE(z)?z:void 0}function vE(E){var T=le.call(E,It),z=E[It];try{E[It]=void 0;var te=!0}catch{}var Je=Ne.call(E);return te&&(T?E[It]=z:delete E[It]),Je}var bE=Dr?function(E){return E==null?[]:(E=Object(E),Se(Dr(E),function(T){return ar.call(E,T)}))}:$E,en=os;(Xe&&en(new Xe(new ArrayBuffer(1)))!=B||Ge&&en(new Ge)!=_||st&&en(st.resolve())!=S||tt&&en(new tt)!=p||ot&&en(new ot)!=$)&&(en=function(E){var T=os(E),z=T==v?E.constructor:void 0,te=z?In(z):"";if(te)switch(te){case ht:return B;case gt:return _;case mt:return S;case dt:return p;case wt:return $}return T});function _E(E,T){return T=T??o,!!T&&(typeof E=="number"||se.test(E))&&E>-1&&E%1==0&&E<T}function EE(E){var T=typeof E;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?E!=="__proto__":E===null}function SE(E){return!!Oe&&Oe in E}function xE(E){var T=E&&E.constructor,z=typeof T=="function"&&T.prototype||oe;return E===z}function DE(E){return Ne.call(E)}function In(E){if(E!=null){try{return xe.call(E)}catch{}try{return E+""}catch{}}return""}function n0(E,T){return E===T||E!==E&&T!==T}var CE=Xf(function(){return arguments}())?Xf:function(E){return as(E)&&le.call(E,"callee")&&!ar.call(E,"callee")},wo=Array.isArray;function OE(E){return E!=null&&s0(E.length)&&!i0(E)}var al=cr||RE;function IE(E,T){return e0(E,T)}function i0(E){if(!o0(E))return!1;var T=os(E);return T==y||T==b||T==u||T==w}function s0(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=o}function o0(E){var T=typeof E;return E!=null&&(T=="object"||T=="function")}function as(E){return E!=null&&typeof E=="object"}var a0=Ee?He(Ee):gE;function AE(E){return OE(E)?hE(E):mE(E)}function $E(){return[]}function RE(){return!1}t.exports=IE}(Rs,Rs.exports);var ey=Rs.exports;const ty=cs(ey);function ry(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var _=0,O=0,I=0,v=b.length;I!==v&&b[I]===0;)I++,_++;for(var S=(v-I)*d+1>>>0,w=new Uint8Array(S);I!==v;){for(var x=b[I],p=0,l=S-1;(x!==0||p<O)&&l!==-1;l--,p++)x+=256*w[l]>>>0,w[l]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");O=p,I++}for(var m=S-O;m!==S&&w[m]===0;)m++;for(var P=c.repeat(_);m<S;++m)P+=t.charAt(w[m]);return P}function g(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var _=0;if(b[_]!==" "){for(var O=0,I=0;b[_]===c;)O++,_++;for(var v=(b.length-_)*u+1>>>0,S=new Uint8Array(v);b[_];){var w=r[b.charCodeAt(_)];if(w===255)return;for(var x=0,p=v-1;(w!==0||x<I)&&p!==-1;p--,x++)w+=a*S[p]>>>0,S[p]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");I=x,_++}if(b[_]!==" "){for(var l=v-I;l!==v&&S[l]===0;)l++;for(var m=new Uint8Array(O+(v-l)),P=O;l!==v;)m[P++]=S[l++];return m}}}function y(b){var _=g(b);if(_)return _;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:g,decode:y}}var ny=ry,iy=ny;const xh=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},sy=t=>new TextEncoder().encode(t),oy=t=>new TextDecoder().decode(t);class ay{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class cy{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Dh(this,e)}}class ly{constructor(e){this.decoders=e}or(e){return Dh(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Dh=(t,e)=>new ly({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class uy{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new ay(e,r,n),this.decoder=new cy(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ps=({name:t,prefix:e,encode:r,decode:n})=>new uy(t,e,r,n),Ri=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=iy(r,e);return Ps({prefix:t,name:e,encode:n,decode:s=>xh(i(s))})},hy=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},dy=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ct=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Ps({prefix:e,name:t,encode(i){return dy(i,n,r)},decode(i){return hy(i,n,r,t)}}),fy=Ps({prefix:"\0",name:"identity",encode:t=>oy(t),decode:t=>sy(t)});var py=Object.freeze({__proto__:null,identity:fy});const gy=Ct({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var my=Object.freeze({__proto__:null,base2:gy});const wy=Ct({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var yy=Object.freeze({__proto__:null,base8:wy});const vy=Ri({prefix:"9",name:"base10",alphabet:"0123456789"});var by=Object.freeze({__proto__:null,base10:vy});const _y=Ct({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ey=Ct({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Sy=Object.freeze({__proto__:null,base16:_y,base16upper:Ey});const xy=Ct({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Dy=Ct({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Cy=Ct({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Oy=Ct({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Iy=Ct({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ay=Ct({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$y=Ct({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ry=Ct({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Py=Ct({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ty=Object.freeze({__proto__:null,base32:xy,base32upper:Dy,base32pad:Cy,base32padupper:Oy,base32hex:Iy,base32hexupper:Ay,base32hexpad:$y,base32hexpadupper:Ry,base32z:Py});const Ny=Ri({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ly=Ri({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var My=Object.freeze({__proto__:null,base36:Ny,base36upper:Ly});const Fy=Ri({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Uy=Ri({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var jy=Object.freeze({__proto__:null,base58btc:Fy,base58flickr:Uy});const ky=Ct({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),By=Ct({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zy=Ct({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Wy=Ct({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var qy=Object.freeze({__proto__:null,base64:ky,base64pad:By,base64url:zy,base64urlpad:Wy});const Ch=Array.from(""),Hy=Ch.reduce((t,e,r)=>(t[r]=e,t),[]),Vy=Ch.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Ky(t){return t.reduce((e,r)=>(e+=Hy[r],e),"")}function Gy(t){const e=[];for(const r of t){const n=Vy[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Yy=Ps({prefix:"",name:"base256emoji",encode:Ky,decode:Gy});var Jy=Object.freeze({__proto__:null,base256emoji:Yy}),Zy=Ih,Oh=128,Qy=127,Xy=~Qy,ev=Math.pow(2,31);function Ih(t,e,r){e=e||[],r=r||0;for(var n=r;t>=ev;)e[r++]=t&255|Oh,t/=128;for(;t&Xy;)e[r++]=t&255|Oh,t>>>=7;return e[r]=t|0,Ih.bytes=r-n+1,e}var tv=wa,rv=128,Ah=127;function wa(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw wa.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Ah)<<i:(o&Ah)*Math.pow(2,i),i+=7}while(o>=rv);return wa.bytes=s-n,r}var nv=Math.pow(2,7),iv=Math.pow(2,14),sv=Math.pow(2,21),ov=Math.pow(2,28),av=Math.pow(2,35),cv=Math.pow(2,42),lv=Math.pow(2,49),uv=Math.pow(2,56),hv=Math.pow(2,63),dv=function(t){return t<nv?1:t<iv?2:t<sv?3:t<ov?4:t<av?5:t<cv?6:t<lv?7:t<uv?8:t<hv?9:10},fv={encode:Zy,decode:tv,encodingLength:dv},$h=fv;const Rh=(t,e,r=0)=>($h.encode(t,e,r),e),Ph=t=>$h.encodingLength(t),ya=(t,e)=>{const r=e.byteLength,n=Ph(t),i=n+Ph(r),s=new Uint8Array(i+r);return Rh(t,s,0),Rh(r,s,n),s.set(e,i),new pv(t,r,e,s)};class pv{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Th=({name:t,code:e,encode:r})=>new gv(t,e,r);class gv{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?ya(this.code,r):r.then(n=>ya(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Nh=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),mv=Th({name:"sha2-256",code:18,encode:Nh("SHA-256")}),wv=Th({name:"sha2-512",code:19,encode:Nh("SHA-512")});var yv=Object.freeze({__proto__:null,sha256:mv,sha512:wv});const Lh=0,vv="identity",Mh=xh;var bv=Object.freeze({__proto__:null,identity:{code:Lh,name:vv,encode:Mh,digest:t=>ya(Lh,Mh(t))}});new TextEncoder,new TextDecoder;const Fh={...py,...my,...yy,...by,...Sy,...Ty,...My,...jy,...qy,...Jy};({...yv,...bv});function Uh(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function _v(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Uh(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function jh(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const kh=jh("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),va=jh("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=_v(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Ev={utf8:kh,"utf-8":kh,hex:Fh.base16,latin1:va,ascii:va,binary:va,...Fh};function Sv(t,e="utf8"){const r=Ev[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Uh(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Bh="wc",xv=2,ba="core",Br=`${Bh}@2:${ba}:`,Dv={name:ba,logger:"error"},Cv={database:":memory:"},Ov="crypto",zh="client_ed25519_seed",Iv=re.ONE_DAY,Av="keychain",$v="0.3",Rv="messages",Pv="0.3",Tv=re.SIX_HOURS,Nv="publisher",Wh="irn",Lv="error",qh="wss://relay.walletconnect.com",Hh="wss://relay.walletconnect.org",Mv="relayer",Tt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Fv="_subscription",Ar={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Uv=re.ONE_SECOND,jv="2.10.0",kv=1e4,Bv="0.3",zv="WALLETCONNECT_CLIENT_ID",vr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Wv="subscription",qv="0.3",Hv=re.FIVE_SECONDS*1e3,Vv="pairing",Kv="0.3",Pi={wc_pairingDelete:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:re.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:re.ONE_DAY,prompt:!1,tag:0},res:{ttl:re.ONE_DAY,prompt:!1,tag:0}}},br={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Gv="history",Yv="0.3",Jv="expirer",ir={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Zv="0.3",_a="verify-api",Ts="https://verify.walletconnect.com",Vh="https://verify.walletconnect.org";let Qv=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=Av,this.version=$v,this.initialized=!1,this.storagePrefix=Br,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=Q("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Le.generateChildLogger(r,this.name)}get context(){return Le.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,eh(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?th(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}},Xv=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=Ov,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Cu(i);return Du(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=ym();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Cu(s),a=aa();return await Cg(a,i,Iv,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=vm(a,s);return this.setSymKey(c,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||bm(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=Yu(o),c=Bo(s);if(Ju(a)){const g=a.senderPublicKey,y=a.receiverPublicKey;i=await this.generateSharedKey(g,y)}const u=this.getSymKey(i),{type:d,senderPublicKey:f}=a;return Em({type:d,symKey:u,message:c,senderPublicKey:f})},this.decode=async(i,s,o)=>{this.isInitialized();const a=Dm(s,o);if(Ju(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;i=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(i),u=Sm({symKey:c,encoded:s});return ou(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=i=>{const s=xs(i);return Si(s.type)},this.getPayloadSenderPublicKey=i=>{const s=xs(i);return s.senderPublicKey?Ut(s.senderPublicKey,jt):void 0},this.core=e,this.logger=Le.generateChildLogger(r,this.name),this.keychain=n||new Qv(this.core,this.logger)}get context(){return Le.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(zh)}catch{e=aa(),await this.keychain.set(zh,e)}return Sv(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}},eb=class extends R1{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=Rv,this.version=Pv,this.initialized=!1,this.storagePrefix=Br,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Fn(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=Fn(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Le.generateChildLogger(e,this.name),this.core=r}get context(){return Le.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,eh(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?th(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}};class tb extends P1{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new hr.EventEmitter,this.name=Nv,this.queue=new Map,this.publishTimeout=re.toMiliseconds(re.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const a=(s==null?void 0:s.ttl)||Tv,c=la(s),u=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,f=(s==null?void 0:s.id)||vh().toString(),g={topic:n,message:i,opts:{ttl:a,relay:c,prompt:u,tag:d,id:f}},y=setTimeout(()=>this.queue.set(f,g),this.publishTimeout);try{await await Ci(this.rpcPublish(n,i,a,c,u,d,f),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(f),this.relayer.events.emit(Tt.publish,g)}catch(b){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(f),b;return}finally{clearTimeout(y)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Le.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Le.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var c,u,d,f;const g={method:Cs(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return kt((c=g.params)==null?void 0:c.prompt)&&((u=g.params)==null||delete u.prompt),kt((d=g.params)==null?void 0:d.tag)&&((f=g.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g}),this.relayer.request(g)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Tt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Tt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class rb{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var nb=Object.defineProperty,ib=Object.defineProperties,sb=Object.getOwnPropertyDescriptors,Kh=Object.getOwnPropertySymbols,ob=Object.prototype.hasOwnProperty,ab=Object.prototype.propertyIsEnumerable,Gh=(t,e,r)=>e in t?nb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ti=(t,e)=>{for(var r in e||(e={}))ob.call(e,r)&&Gh(t,r,e[r]);if(Kh)for(var r of Kh(e))ab.call(e,r)&&Gh(t,r,e[r]);return t},Ea=(t,e)=>ib(t,sb(e));let cb=class extends L1{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new rb,this.events=new hr.EventEmitter,this.name=Wv,this.version=qv,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Br,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=la(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const o=new re.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=Hv&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Le.generateChildLogger(r,this.name),this.clientId=""}get context(){return Le.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=la(n);await this.rpcUnsubscribe(e,r,i);const s=vt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:Cs(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Ci(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Tt.connection_stalled)}return Fn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Cs(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await Ci(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Tt.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:Cs(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Ea(Ti({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Ti({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Ti({},r)),this.topicMap.set(r.topic,e),this.events.emit(vr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(vr.deleted,Ea(Ti({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(vr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(vr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);Oi(r)&&this.onBatchSubscribe(r.map((n,i)=>Ea(Ti({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Tt.connect,async()=>{await this.onConnect()}),this.relayer.on(Tt.disconnect,()=>{this.onDisconnect()}),this.events.on(vr.created,async e=>{const r=vr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(vr.deleted,async e=>{const r=vr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var lb=Object.defineProperty,Yh=Object.getOwnPropertySymbols,ub=Object.prototype.hasOwnProperty,hb=Object.prototype.propertyIsEnumerable,Jh=(t,e,r)=>e in t?lb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,db=(t,e)=>{for(var r in e||(e={}))ub.call(e,r)&&Jh(t,r,e[r]);if(Yh)for(var r of Yh(e))hb.call(e,r)&&Jh(t,r,e[r]);return t};let fb=class extends T1{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new hr.EventEmitter,this.name=Mv,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Tt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Tt.error,r)},this.registerProviderListeners=()=>{this.provider.on(Ar.payload,this.onPayloadHandler),this.provider.on(Ar.connect,this.onConnectHandler),this.provider.on(Ar.disconnect,this.onDisconnectHandler),this.provider.on(Ar.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Le.generateChildLogger(e.logger,this.name):Le.pino(Le.getDefaultLoggerOptions({level:e.logger||Lv})),this.messages=new eb(this.logger,e.core),this.subscriber=new cb(this,this.logger),this.publisher=new tb(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||qh,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Hh}...`),await this.restartTransport(Hh)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},kv)}get context(){return Le.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(s=>{this.subscriber.once(vr.created,o=>{o.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,r),s()})]),i)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Ci(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(vr.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await Ci(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(Ar.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await dh())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Yw(new Xw(Mm({sdkVersion:jv,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ma(e)){if(!e.method.endsWith(Fv))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(db({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else $s(e)&&this.events.emit(Tt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Tt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=pa(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Ar.payload,this.onPayloadHandler),this.provider.off(Ar.connect,this.onConnectHandler),this.provider.off(Ar.disconnect,this.onDisconnectHandler),this.provider.off(Ar.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Tt.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await dh();Iw(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Tt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},re.toMiliseconds(Uv)))}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var pb=Object.defineProperty,Zh=Object.getOwnPropertySymbols,gb=Object.prototype.hasOwnProperty,mb=Object.prototype.propertyIsEnumerable,Qh=(t,e,r)=>e in t?pb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xh=(t,e)=>{for(var r in e||(e={}))gb.call(e,r)&&Qh(t,r,e[r]);if(Zh)for(var r of Zh(e))mb.call(e,r)&&Qh(t,r,e[r]);return t};let Ns=class extends N1{constructor(e,r,n,i=Br,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=Bv,this.cached=[],this.initialized=!1,this.storagePrefix=Br,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!kt(o)?this.map.set(this.getKey(o),o):sw(o)?this.map.set(o.id,o):ow(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>ty(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Xh(Xh({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=Le.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Le.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}},wb=class{constructor(e,r){this.core=e,this.logger=r,this.name=Vv,this.version=Kv,this.events=new $l,this.initialized=!1,this.storagePrefix=Br,this.ignoredPayloadTypes=[fn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=aa(),i=await this.core.crypto.setSymKey(n),s=dr(re.FIVE_MINUTES),o={protocol:Wh},a={topic:i,expiry:s,relay:o,active:!1},c=Ym({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o}=Vm(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const a=dr(re.FIVE_MINUTES),c={topic:i,relay:o,expiry:a,active:!1};return await this.pairings.set(i,c),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),c},this.activate=async({topic:n})=>{this.isInitialized();const i=dr(re.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Un();this.events.once(pt("pairing_ping",s),({error:u})=>{u?c(u):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",vt("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=$i(i,s),a=await this.core.crypto.encode(n,o),c=Pi[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id},this.sendResult=async(n,i,s)=>{const o=pa(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=Pi[c.request.method].res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=ga(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=Pi[c.request.method]?Pi[c.request.method].res:Pi.unregistered_method.res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,vt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>kr(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Ir(i)?this.events.emit(pt("pairing_ping",s),{}):fr(i)&&this.events.emit(pt("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=vt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(vt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Ht(n)){const{message:i}=Q("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!iw(n.uri)){const{message:i}=Q("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Ht(n)){const{message:s}=Q("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Ht(n)){const{message:s}=Q("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!Et(n,!1)){const{message:i}=Q("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=Q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(kr(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=Q("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Le.generateChildLogger(r,this.name),this.pairings=new Ns(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Le.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Tt.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{ma(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):$s(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(ir.expired,async e=>{const{topic:r}=nh(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},yb=class extends $1{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new hr.EventEmitter,this.name=Gv,this.version=Yv,this.cached=[],this.initialized=!1,this.storagePrefix=Br,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:dr(re.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(br.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=fr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(br.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(br.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Le.generateChildLogger(r,this.name)}get context(){return Le.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:$i(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(br.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(br.created,e=>{const r=br.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(br.updated,e=>{const r=br.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(br.deleted,e=>{const r=br.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{re.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}},vb=class extends M1{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new hr.EventEmitter,this.name=Jv,this.version=Zv,this.cached=[],this.initialized=!1,this.storagePrefix=Br,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(ir.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(ir.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Le.generateChildLogger(r,this.name)}get context(){return Le.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Fm(e);if(typeof e=="number")return Um(e);const{message:r}=Q("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ir.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;re.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(ir.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(ir.created,e=>{const r=ir.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(ir.expired,e=>{const r=ir.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(ir.deleted,e=>{const r=ir.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}},bb=class extends F1{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=_a,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||Ds()||!xi())return;const i=(n==null?void 0:n.verifyUrl)||Ts;this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Vh;try{await this.createIframe()}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=(n==null?void 0:n.verifyUrl)||Ts;let s="";try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.warn(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.warn(o),s=await this.fetchAttestation(n.attestationId,Vh)}return s},this.fetchAttestation=async(n,i)=>{var s;this.logger.info(`resolving attestation: ${n} from url: ${i}`);const o=this.startAbortTimer(re.ONE_SECOND*2),a=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?(s=await a.json())==null?void 0:s.origin:""},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(_a))return s();window.addEventListener("message",i);const o=document.createElement("iframe");o.id=_a,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},re.toMiliseconds(re.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Le.generateChildLogger(r,this.name),this.verifyUrl=Ts,this.abortController=new AbortController,this.isDevEnv=ca()&&process.env.IS_VITEST}get context(){return Le.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),re.toMiliseconds(e))}};var _b=Object.defineProperty,ed=Object.getOwnPropertySymbols,Eb=Object.prototype.hasOwnProperty,Sb=Object.prototype.propertyIsEnumerable,td=(t,e,r)=>e in t?_b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rd=(t,e)=>{for(var r in e||(e={}))Eb.call(e,r)&&td(t,r,e[r]);if(ed)for(var r of ed(e))Sb.call(e,r)&&td(t,r,e[r]);return t};const xb=class l0 extends A1{constructor(e){super(e),this.protocol=Bh,this.version=xv,this.name=ba,this.events=new hr.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||qh;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Le.pino(Le.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Dv.logger}));this.logger=Le.generateChildLogger(r,this.name),this.heartbeat=new Tn.HeartBeat,this.crypto=new Xv(this,this.logger,e==null?void 0:e.keychain),this.history=new yb(this,this.logger),this.expirer=new vb(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new f1(rd(rd({},Cv),e==null?void 0:e.storageOptions)),this.relayer=new fb({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new wb(this,this.logger),this.verify=new bb(this.projectId||"",this.logger)}static async init(e){const r=new l0(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(zv,n),r}get context(){return Le.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},nd="wc",id=2,sd="client",Sa=`${nd}@${id}:${sd}:`,xa={name:sd,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},od="WALLETCONNECT_DEEPLINK_CHOICE",Db="proposal",Cb="Proposal expired",Ob="session",Ls=re.SEVEN_DAYS,Ib="engine",Ni={wc_sessionPropose:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1104},res:{ttl:re.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1106},res:{ttl:re.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1112},res:{ttl:re.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1115}}},Da={min:re.FIVE_MINUTES,max:re.SEVEN_DAYS},$r={idle:"IDLE",active:"ACTIVE"},Ab="request",$b=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Rb=Object.defineProperty,Pb=Object.defineProperties,Tb=Object.getOwnPropertyDescriptors,ad=Object.getOwnPropertySymbols,Nb=Object.prototype.hasOwnProperty,Lb=Object.prototype.propertyIsEnumerable,cd=(t,e,r)=>e in t?Rb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vt=(t,e)=>{for(var r in e||(e={}))Nb.call(e,r)&&cd(t,r,e[r]);if(ad)for(var r of ad(e))Lb.call(e,r)&&cd(t,r,e[r]);return t},Li=(t,e)=>Pb(t,Tb(e));class Mb extends j1{constructor(e){super(e),this.name=Ib,this.events=new $l,this.initialized=!1,this.ignoredPayloadTypes=[fn],this.requestQueue={state:$r.idle,queue:[]},this.sessionRequestQueue={state:$r.idle,queue:[]},this.requestQueueDelay=re.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Ni)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},re.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=Li(Vt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let u=i,d,f=!1;if(u&&(f=this.client.core.pairing.pairings.get(u).active),!u||!f){const{topic:S,uri:w}=await this.client.core.pairing.create();u=S,d=w}const g=await this.client.core.crypto.generateKeyPair(),y=Vt({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:Wh}],proposer:{publicKey:g,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:b,resolve:_,done:O}=Un(re.FIVE_MINUTES,Cb);if(this.events.once(pt("session_connect"),async({error:S,session:w})=>{if(S)b(S);else if(w){w.self.publicKey=g;const x=Li(Vt({},w),{requiredNamespaces:w.requiredNamespaces,optionalNamespaces:w.optionalNamespaces});await this.client.session.set(w.topic,x),await this.setExpiry(w.topic,w.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:w.peer.metadata}),_(x)}}),!u){const{message:S}=Q("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(S)}const I=await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y}),v=dr(re.FIVE_MINUTES);return await this.setProposal(I,Vt({id:I,expiry:v},y)),{uri:d,approval:O}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:c,proposer:u,requiredNamespaces:d,optionalNamespaces:f}=a;c=c||"",Ii(d)||(d=Xm(s,"approve()"));const g=await this.client.core.crypto.generateKeyPair(),y=u.publicKey,b=await this.client.core.crypto.generateSharedKey(g,y);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:u.metadata}),await this.sendResult({id:n,topic:c,result:{relay:{protocol:i??"irn"},responderPublicKey:g}}),await this.client.proposal.delete(n,vt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const _=Vt({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:d,optionalNamespaces:f,pairingTopic:c,controller:{publicKey:g,metadata:this.client.metadata},expiry:dr(Ls)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(b),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:_,throwOnFailedPublish:!0});const O=Li(Vt({},_),{topic:b,pairingTopic:c,acknowledged:!1,self:_.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:g});return await this.client.session.set(b,O),await this.setExpiry(b,dr(Ls)),{topic:b,acknowledged:()=>new Promise(I=>setTimeout(()=>I(this.client.session.get(b)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,vt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:a,reject:c}=Un();return this.events.once(pt("session_update",s),({error:u})=>{u?c(u):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=Un();return this.events.once(pt("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,dr(Ls)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o}=r,a=fa(),{done:c,resolve:u,reject:d}=Un(o);return this.events.once(pt("session_request",a),({error:f,result:g})=>{f?d(f):u(g)}),await Promise.all([new Promise(async f=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:i,chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(g=>d(g)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),f()}),new Promise(async f=>{const g=await this.client.core.storage.getItem(od);jm({id:a,topic:s,wcDeepLink:g}),f()}),c()]).then(f=>f[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;Ir(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):fr(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=Un();this.events.once(pt("session_ping",i),({error:c})=>{c?a(c):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:vt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>rw(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,vt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(od).catch(s=>this.client.logger.warn(s))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,vt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=$r.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=Ni.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o}),n&&this.client.core.expirer.set(i,dr(n))},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u}=r,d=$i(i,s,c);if(xi()&&$b.includes(i)){const y=Fn(JSON.stringify(d));this.client.core.verify.register({attestationId:y})}const f=await this.client.core.crypto.encode(n,d),g=Ni[i].req;return o&&(g.ttl=o),a&&(g.id=a),this.client.core.history.set(n,d),u?(g.internal=Li(Vt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,g)):this.client.core.relayer.publish(n,f,g).catch(y=>this.client.logger.error(y)),d.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o}=r,a=pa(n,s),c=await this.client.core.crypto.encode(i,a),u=await this.client.core.history.get(i,n),d=Ni[u.request.method].res;o?(d.internal=Li(Vt({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,c,d)):this.client.core.relayer.publish(i,c,d).catch(f=>this.client.logger.error(f)),await this.client.core.history.resolve(a)},this.sendError=async(r,n,i)=>{const s=ga(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),c=Ni[a.request.method].res;this.client.core.relayer.publish(n,o,c),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{kr(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{kr(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===$r.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=$r.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=$r.idle},this.processRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=Q("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(Vt({},n.params));const o=dr(re.FIVE_MINUTES),a=Vt({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);const c=Fn(JSON.stringify(n)),u=await this.getVerifyContext(c,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:u})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(Ir(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const u=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const d=await this.client.core.relayer.subscribe(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else fr(n)&&(await this.client.proposal.delete(i,vt("USER_DISCONNECTED")),this.events.emit(pt("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:u,requiredNamespaces:d,optionalNamespaces:f,sessionProperties:g,pairingTopic:y}=n.params,b=Vt({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:y,requiredNamespaces:d,optionalNamespaces:f,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},g&&{sessionProperties:g});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(pt("session_connect"),{session:b}),this.cleanupDuplicatePairings(b)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Ir(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(pt("session_approve",i),{})):fr(n)&&(await this.client.session.delete(r,vt("USER_DISCONNECTED")),this.events.emit(pt("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=As.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(Vt({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),As.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;Ir(n)?this.events.emit(pt("session_update",i),{}):fr(n)&&this.events.emit(pt("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,dr(Ls)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;Ir(n)?this.events.emit(pt("session_extend",i),{}):fr(n)&&this.events.emit(pt("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{Ir(n)?this.events.emit(pt("session_ping",i),{}):fr(n)&&this.events.emit(pt("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Tt.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult({id:i,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(Vt({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.addSessionRequestToSessionRequestQueue({id:i,topic:r,params:s}),await this.processSessionRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;Ir(n)?this.events.emit(pt("session_request",i),{result:n.result}):fr(n)&&this.events.emit(pt("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=As.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Vt({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),As.set(o,i)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=$r.idle,this.processSessionRequestQueue()},re.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===$r.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:s}=r,o=Fn(JSON.stringify($i("wc_sessionRequest",s,n))),a=this.client.session.get(i),c=await this.getVerifyContext(o,a.peer.metadata);this.sessionRequestQueue.state=$r.active,this.client.events.emit("session_request",{id:n,topic:i,params:s,verifyContext:c})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!Ht(r)){const{message:c}=Q("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(kt(n)||await this.isValidPairingTopic(n),!pw(a,!0)){const{message:c}=Q("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!kt(i)&&Ii(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!kt(s)&&Ii(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),kt(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=fw(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Ht(r))throw new Error(Q("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=Is(i,"approve()");if(c)throw new Error(c.message);const u=uh(a.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!Et(s,!0)){const{message:d}=Q("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}kt(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Ht(r)){const{message:s}=Q("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!mw(i)){const{message:s}=Q("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Ht(r)){const{message:u}=Q("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!ch(n)){const{message:u}=Q("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=aw(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Is(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(kr(o)){const{message:u}=Q("EXPIRED","onSessionSettleRequest()");throw new Error(u)}},this.isValidUpdate=async r=>{if(!Ht(r)){const{message:c}=Q("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=Is(i,"update()");if(o)throw new Error(o.message);const a=uh(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Ht(r)){const{message:i}=Q("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Ht(r)){const{message:c}=Q("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!lh(a,s)){const{message:c}=Q("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!ww(i)){const{message:c}=Q("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!bw(a,s,i.method)){const{message:c}=Q("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!xw(o,Da)){const{message:c}=Q("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Da.min} and ${Da.max}`);throw new Error(c)}},this.isValidRespond=async r=>{if(!Ht(r)){const{message:s}=Q("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!yw(i)){const{message:s}=Q("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Ht(r)){const{message:i}=Q("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Ht(r)){const{message:a}=Q("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!lh(o,s)){const{message:a}=Q("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!vw(i)){const{message:a}=Q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!_w(o,s,i.name)){const{message:a}=Q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Ht(r)){const{message:i}=Q("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||Ts,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s,i.verified.validation=s===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!Et(i,!1)){const{message:s}=Q("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Tt.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);try{ma(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):$s(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(ir.expired,async e=>{const{topic:r,id:n}=nh(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Q("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!Et(e,!1)){const{message:r}=Q("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(kr(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Q("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Et(e,!1)){const{message:r}=Q("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=Q("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(kr(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=Q("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Et(e,!1)){const{message:r}=Q("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Q("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!gw(e)){const{message:r}=Q("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Q("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(kr(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=Q("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class Fb extends Ns{constructor(e,r){super(e,r,Db,Sa),this.core=e,this.logger=r}}class Ub extends Ns{constructor(e,r){super(e,r,Ob,Sa),this.core=e,this.logger=r}}class jb extends Ns{constructor(e,r){super(e,r,Ab,Sa,n=>n.id),this.core=e,this.logger=r}}let kb=class u0 extends U1{constructor(e){super(e),this.protocol=nd,this.version=id,this.name=xa.name,this.events=new hr.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||xa.name,this.metadata=(e==null?void 0:e.metadata)||Pm();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Le.pino(Le.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||xa.logger}));this.core=(e==null?void 0:e.core)||new xb(e),this.logger=Le.generateChildLogger(r,this.name),this.session=new Ub(this.core,this.logger),this.proposal=new Fb(this.core,this.logger),this.pendingRequest=new jb(this.core,this.logger),this.engine=new Mb(this)}static async init(e){const r=new u0(e);return await r.initialize(),r}get context(){return Le.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Bb=Object.defineProperty,zb=Object.defineProperties,Wb=Object.getOwnPropertyDescriptors,ld=Object.getOwnPropertySymbols,qb=Object.prototype.hasOwnProperty,Hb=Object.prototype.propertyIsEnumerable,ud=(t,e,r)=>e in t?Bb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vb=(t,e)=>{for(var r in e||(e={}))qb.call(e,r)&&ud(t,r,e[r]);if(ld)for(var r of ld(e))Hb.call(e,r)&&ud(t,r,e[r]);return t},Kb=(t,e)=>zb(t,Wb(e)),Ca=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ze=(t,e,r)=>(Ca(t,e,"read from private field"),r?r.call(t):e.get(t)),gn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ms=(t,e,r,n)=>(Ca(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Nt=(t,e,r)=>(Ca(t,e,"access private method"),r),mn,kn,Mi,St,Oa,hd,Lt,Bt,Ia,dd;let Gb=class{constructor(e){gn(this,Oa),gn(this,Lt),gn(this,Ia),gn(this,mn,void 0),gn(this,kn,void 0),gn(this,Mi,void 0),gn(this,St,void 0),Ms(this,mn,e),Ms(this,kn,Nt(this,Oa,hd).call(this)),Nt(this,Lt,Bt).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await Nt(this,Lt,Bt).call(this);const o=Ze(this,kn).subscribeModal(u=>{u.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:c}=await Ze(this,St).connect(e);if(a){const u=new Set;r&&Object.values(r).forEach(({chains:d})=>{d&&d.forEach(f=>u.add(f))}),n&&Object.values(n).forEach(({chains:d})=>{d&&d.forEach(f=>u.add(f))}),await Ze(this,kn).openModal({uri:a,chains:Array.from(u)})}try{const u=await c();i(u)}catch(u){s(u)}finally{o(),Ze(this,kn).closeModal()}})}async disconnect(e){await Nt(this,Lt,Bt).call(this),await Ze(this,St).disconnect(e)}async request(e){return await Nt(this,Lt,Bt).call(this),await Ze(this,St).request(e)}async getSessions(){return await Nt(this,Lt,Bt).call(this),Ze(this,St).session.getAll()}async getSession(){return await Nt(this,Lt,Bt).call(this),Ze(this,St).session.getAll().at(-1)}async onSessionEvent(e){await Nt(this,Lt,Bt).call(this),Ze(this,St).on("session_event",e)}async offSessionEvent(e){await Nt(this,Lt,Bt).call(this),Ze(this,St).off("session_event",e)}async onSessionUpdate(e){await Nt(this,Lt,Bt).call(this),Ze(this,St).on("session_update",e)}async offSessionUpdate(e){await Nt(this,Lt,Bt).call(this),Ze(this,St).off("session_update",e)}async onSessionDelete(e){await Nt(this,Lt,Bt).call(this),Ze(this,St).on("session_delete",e)}async offSessionDelete(e){await Nt(this,Lt,Bt).call(this),Ze(this,St).off("session_delete",e)}async onSessionExpire(e){await Nt(this,Lt,Bt).call(this),Ze(this,St).on("session_expire",e)}async offSessionExpire(e){await Nt(this,Lt,Bt).call(this),Ze(this,St).off("session_expire",e)}};mn=new WeakMap,kn=new WeakMap,Mi=new WeakMap,St=new WeakMap,Oa=new WeakSet,hd=function(){const{modalOptions:t,projectId:e}=Ze(this,mn);return new T0(Kb(Vb({},t),{projectId:e}))},Lt=new WeakSet,Bt=async function(){return Ze(this,St)?!0:(!Ze(this,Mi)&&typeof window<"u"&&Ms(this,Mi,Nt(this,Ia,dd).call(this)),Ze(this,Mi))},Ia=new WeakSet,dd=async function(){Ms(this,St,await kb.init({metadata:Ze(this,mn).metadata,projectId:Ze(this,mn).projectId,relayUrl:Ze(this,mn).relayUrl}));const t=await Ze(this,St).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};function Yb(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(i){i(r)}),(n=t.get("*"))&&n.slice().map(function(i){i(e,r)})}}}const Fs=Yb();let Fi;function Jb(t){Fi=new Gb(t)}async function sr(){return new Promise(t=>{if(Fi)t(Fi);else{const e=setInterval(()=>{Fi&&(clearInterval(e),t(Fi))},200)}})}function Zb(t){return qe.useEffect(()=>{Jb(t)},[]),null}const Qb=qe.memo(Zb);function Aa(){const[t,e]=qe.useState(void 0),[r,n]=qe.useState(void 0),[i,s]=qe.useState(!1);return{data:t,error:r,loading:i,setData:e,setError:n,setLoading:s}}function Xb(t){const{data:e,error:r,loading:n,setData:i,setError:s,setLoading:o}=Aa();async function a(c){try{o(!0),s(void 0);const u=await(await sr()).connect(c??t);return i(u),Fs.emit("session_change"),u}catch(u){throw s(u),u}finally{o(!1)}}return{data:e,error:r,loading:n,connect:a}}function e2(t){const{error:e,loading:r,setError:n,setLoading:i}=Aa();async function s(o){try{i(!0),n(void 0),await(await sr()).disconnect(o??t),Fs.emit("session_change")}catch(a){throw n(a),a}finally{i(!1)}}return{error:e,loading:r,disconnect:s}}function fd(t){qe.useEffect(()=>(sr().then(e=>{e.onSessionDelete(t)}),()=>{sr().then(e=>{e.offSessionDelete(t)})}),[t])}function $a(t){qe.useEffect(()=>(sr().then(e=>{e.onSessionEvent(t)}),()=>{sr().then(e=>{e.offSessionEvent(t)})}),[t])}function t2(t){qe.useEffect(()=>(sr().then(e=>{e.onSessionExpire(t)}),()=>{sr().then(e=>{e.offSessionExpire(t)})}),[t])}function r2(t){qe.useEffect(()=>(sr().then(e=>{e.onSessionUpdate(t)}),()=>{sr().then(e=>{e.offSessionUpdate(t)})}),[t])}function Ui(t){const{data:e,error:r,loading:n,setData:i,setError:s,setLoading:o}=Aa();async function a(c){try{o(!0),s(void 0);const u=await(await sr()).request(c??t);return i(u),u}catch(u){throw s(u),u}finally{o(!1)}}return{data:e,error:r,loading:n,request:a}}var n2=Object.defineProperty,i2=Object.defineProperties,s2=Object.getOwnPropertyDescriptors,pd=Object.getOwnPropertySymbols,o2=Object.prototype.hasOwnProperty,a2=Object.prototype.propertyIsEnumerable,gd=(t,e,r)=>e in t?n2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c2=(t,e)=>{for(var r in e||(e={}))o2.call(e,r)&&gd(t,r,e[r]);if(pd)for(var r of pd(e))a2.call(e,r)&&gd(t,r,e[r]);return t},l2=(t,e)=>i2(t,s2(e));function zr(){const[t,e]=qe.useState(void 0);return fd(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),r2(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:n}=r.params,i=l2(c2({},t),{namespaces:n});e(i)}}),t2(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),qe.useEffect(()=>{async function r(){const n=await(await sr()).getSession();e(n)}return r(),Fs.on("session_change",r),()=>{Fs.off("session_change",r)}},[]),t}const Ra=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent"],Us=["aleo:1"],Pa=["chainChanged","accountSelected","accountSynced"],md="f0aaeffe71b636da453fce042d79d723",Ta="https://walletconnect.puzzle.online/",wd={standaloneChains:Us,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:Ta}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:Ta}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},u2={requiredNamespaces:{aleo:{methods:Ra,chains:Us,events:Pa}}},h2=({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n})=>Eo.jsx(Qb,{projectId:md,metadata:{name:t,description:e,url:r,icons:[n]},modalOptions:{...wd}}),d2=({children:t})=>(Fd(),Eo.jsx(Eo.Fragment,{children:t})),yd=t=>{let e;const r=new Set,n=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??typeof d!="object"?d:Object.assign({},e,d),r.forEach(g=>g(e,f))}},i=()=>e,a={setState:n,getState:i,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{r.clear()}};return e=t(n,i,a),a},f2=t=>t?yd(t):yd;var Na={exports:{}},La={},js={exports:{}},Ma={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vd;function p2(){if(vd)return Ma;vd=1;var t=qe;function e(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,g){var y=g(),b=n({inst:{value:y,getSnapshot:g}}),_=b[0].inst,O=b[1];return s(function(){_.value=y,_.getSnapshot=g,c(_)&&O({inst:_})},[f,y,g]),i(function(){return c(_)&&O({inst:_}),f(function(){c(_)&&O({inst:_})})},[f]),o(y),y}function c(f){var g=f.getSnapshot;f=f.value;try{var y=g();return!r(f,y)}catch{return!0}}function u(f,g){return g()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return Ma.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,Ma}var Fa={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd;function g2(){return bd||(bd=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=qe,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(S){{for(var w=arguments.length,x=new Array(w>1?w-1:0),p=1;p<w;p++)x[p-1]=arguments[p];n("error",S,x)}}function n(S,w,x){{var p=e.ReactDebugCurrentFrame,l=p.getStackAddendum();l!==""&&(w+="%s",x=x.concat([l]));var m=x.map(function(P){return String(P)});m.unshift("Warning: "+w),Function.prototype.apply.call(console[S],console,m)}}function i(S,w){return S===w&&(S!==0||1/S===1/w)||S!==S&&w!==w}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,c=t.useLayoutEffect,u=t.useDebugValue,d=!1,f=!1;function g(S,w,x){d||t.startTransition!==void 0&&(d=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var p=w();if(!f){var l=w();s(p,l)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),f=!0)}var m=o({inst:{value:p,getSnapshot:w}}),P=m[0].inst,$=m[1];return c(function(){P.value=p,P.getSnapshot=w,y(P)&&$({inst:P})},[S,p,w]),a(function(){y(P)&&$({inst:P});var F=function(){y(P)&&$({inst:P})};return S(F)},[S]),u(p),p}function y(S){var w=S.getSnapshot,x=S.value;try{var p=w();return!s(x,p)}catch{return!0}}function b(S,w,x){return w()}var _=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O=!_,I=O?b:g,v=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:I;Fa.useSyncExternalStore=v,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Fa}var _d;function Ed(){return _d||(_d=1,process.env.NODE_ENV==="production"?js.exports=p2():js.exports=g2()),js.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd;function m2(){if(Sd)return La;Sd=1;var t=qe,e=Ed();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return La.useSyncExternalStoreWithSelector=function(u,d,f,g,y){var b=s(null);if(b.current===null){var _={hasValue:!1,value:null};b.current=_}else _=b.current;b=a(function(){function I(p){if(!v){if(v=!0,S=p,p=g(p),y!==void 0&&_.hasValue){var l=_.value;if(y(l,p))return w=l}return w=p}if(l=w,n(S,p))return l;var m=g(p);return y!==void 0&&y(l,m)?l:(S=p,w=m)}var v=!1,S,w,x=f===void 0?null:f;return[function(){return I(d())},x===null?void 0:function(){return I(x())}]},[d,f,g,y]);var O=i(u,b[0],b[1]);return o(function(){_.hasValue=!0,_.value=O},[O]),c(O),O},La}var Ua={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xd;function w2(){return xd||(xd=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=qe,e=Ed();function r(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;function u(d,f,g,y,b){var _=s(null),O;_.current===null?(O={hasValue:!1,value:null},_.current=O):O=_.current;var I=a(function(){var x=!1,p,l,m=function(B){if(!x){x=!0,p=B;var H=y(B);if(b!==void 0&&O.hasValue){var A=O.value;if(b(A,H))return l=A,A}return l=H,H}var N=p,G=l;if(n(N,B))return G;var q=y(B);return b!==void 0&&b(G,q)?G:(p=B,l=q,q)},P=g===void 0?null:g,$=function(){return m(f())},F=P===null?void 0:function(){return m(P())};return[$,F]},[f,g,y,b]),v=I[0],S=I[1],w=i(d,v,S);return o(function(){O.hasValue=!0,O.value=w},[w]),c(w),w}Ua.useSyncExternalStoreWithSelector=u,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Ua}process.env.NODE_ENV==="production"?Na.exports=m2():Na.exports=w2();var y2=Na.exports;const v2=cs(y2),{useSyncExternalStoreWithSelector:b2}=v2;function _2(t,e=t.getState,r){const n=b2(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return qe.useDebugValue(n),n}const Dd=t=>{const e=typeof t=="function"?f2(t):t,r=(n,i)=>_2(e,n,i);return Object.assign(r,e),r},E2=t=>t?Dd(t):Dd;function Ot(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(process.env.NODE_ENV!=="production"){var i=$2[t],s=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+t;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Bn(t){return!!t&&!!t[Qt]}function wn(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===R2}(t)||Array.isArray(t)||!!t[Ld]||!!(!((e=t.constructor)===null||e===void 0)&&e[Ld])||ka(t)||Ba(t))}function ji(t,e,r){r===void 0&&(r=!1),zn(t)===0?(r?Object.keys:Xa)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,i){return e(i,n,t)})}function zn(t){var e=t[Qt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:ka(t)?2:Ba(t)?3:0}function ja(t,e){return zn(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function S2(t,e){return zn(t)===2?t.get(e):t[e]}function Cd(t,e,r){var n=zn(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function x2(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function ka(t){return I2&&t instanceof Map}function Ba(t){return A2&&t instanceof Set}function yn(t){return t.o||t.t}function za(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=P2(t);delete e[Qt];for(var r=Xa(e),n=0;n<r.length;n++){var i=r[n],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Wa(t,e){return e===void 0&&(e=!1),qa(t)||Bn(t)||!wn(t)||(zn(t)>1&&(t.set=t.add=t.clear=t.delete=D2),Object.freeze(t),e&&ji(t,function(r,n){return Wa(n,!0)},!0)),t}function D2(){Ot(2)}function qa(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function _r(t){var e=T2[t];return e||Ot(18,t),e}function Od(){return process.env.NODE_ENV==="production"||Wn||Ot(0),Wn}function Ha(t,e){e&&(_r("Patches"),t.u=[],t.s=[],t.v=e)}function ks(t){Va(t),t.p.forEach(C2),t.p=null}function Va(t){t===Wn&&(Wn=t.l)}function Id(t){return Wn={p:[],l:Wn,h:t,m:!0,_:0}}function C2(t){var e=t[Qt];e.i===0||e.i===1?e.j():e.O=!0}function Ka(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.g||_r("ES5").S(e,t,n),n?(r[Qt].P&&(ks(e),Ot(4)),wn(t)&&(t=Bs(e,t),e.l||zs(e,t)),e.u&&_r("Patches").M(r[Qt].t,t,e.u,e.s)):t=Bs(e,r,[]),ks(e),e.u&&e.v(e.u,e.s),t!==Nd?t:void 0}function Bs(t,e,r){if(qa(e))return e;var n=e[Qt];if(!n)return ji(e,function(a,c){return Ad(t,n,e,a,c,r)},!0),e;if(n.A!==t)return e;if(!n.P)return zs(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=za(n.k):n.o,s=i,o=!1;n.i===3&&(s=new Set(i),i.clear(),o=!0),ji(s,function(a,c){return Ad(t,n,i,a,c,r,o)}),zs(t,i,!1),r&&t.u&&_r("Patches").N(n,r,t.u,t.s)}return n.o}function Ad(t,e,r,n,i,s,o){if(process.env.NODE_ENV!=="production"&&i===r&&Ot(5),Bn(i)){var a=Bs(t,i,s&&e&&e.i!==3&&!ja(e.R,n)?s.concat(n):void 0);if(Cd(r,n,a),!Bn(a))return;t.m=!1}else o&&r.add(i);if(wn(i)&&!qa(i)){if(!t.h.D&&t._<1)return;Bs(t,i),e&&e.A.l||zs(t,i)}}function zs(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&Wa(e,r)}function Ga(t,e){var r=t[Qt];return(r?yn(r):t)[e]}function $d(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function Ya(t){t.P||(t.P=!0,t.l&&Ya(t.l))}function Ja(t){t.o||(t.o=za(t.t))}function Za(t,e,r){var n=ka(e)?_r("MapSet").F(e,r):Ba(e)?_r("MapSet").T(e,r):t.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Od(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},c=a,u=ec;o&&(c=[a],u=ki);var d=Proxy.revocable(c,u),f=d.revoke,g=d.proxy;return a.k=g,a.j=f,g}(e,r):_r("ES5").J(e,r);return(r?r.A:Od()).p.push(n),n}function O2(t){return Bn(t)||Ot(22,t),function e(r){if(!wn(r))return r;var n,i=r[Qt],s=zn(r);if(i){if(!i.P&&(i.i<4||!_r("ES5").K(i)))return i.t;i.I=!0,n=Rd(r,s),i.I=!1}else n=Rd(r,s);return ji(n,function(o,a){i&&S2(i.t,o)===a||Cd(n,o,e(a))}),s===3?new Set(n):n}(t)}function Rd(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return za(t)}var Pd,Wn,Qa=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",I2=typeof Map<"u",A2=typeof Set<"u",Td=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Nd=Qa?Symbol.for("immer-nothing"):((Pd={})["immer-nothing"]=!0,Pd),Ld=Qa?Symbol.for("immer-draftable"):"__$immer_draftable",Qt=Qa?Symbol.for("immer-state"):"__$immer_state",$2={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(t){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+t+"'"},22:function(t){return"'current' expects a draft, got: "+t},23:function(t){return"'original' expects a draft, got: "+t},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},R2=""+Object.prototype.constructor,Xa=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,P2=Object.getOwnPropertyDescriptors||function(t){var e={};return Xa(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},T2={},ec={get:function(t,e){if(e===Qt)return t;var r=yn(t);if(!ja(r,e))return function(i,s,o){var a,c=$d(s,o);return c?"value"in c?c.value:(a=c.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,r,e);var n=r[e];return t.I||!wn(n)?n:n===Ga(t.t,e)?(Ja(t),t.o[e]=Za(t.A.h,n,t)):n},has:function(t,e){return e in yn(t)},ownKeys:function(t){return Reflect.ownKeys(yn(t))},set:function(t,e,r){var n=$d(yn(t),e);if(n!=null&&n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=Ga(yn(t),e),s=i==null?void 0:i[Qt];if(s&&s.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(x2(r,i)&&(r!==void 0||ja(t.t,e)))return!0;Ja(t),Ya(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return Ga(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Ja(t),Ya(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=yn(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){Ot(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Ot(12)}},ki={};ji(ec,function(t,e){ki[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),ki.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&Ot(13),ki.set.call(this,t,e,void 0)},ki.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&Ot(14),ec.set.call(this,t[0],e,r,t[0])};var N2=function(){function t(r){var n=this;this.g=Td,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var c=n;return function(_){var O=this;_===void 0&&(_=a);for(var I=arguments.length,v=Array(I>1?I-1:0),S=1;S<I;S++)v[S-1]=arguments[S];return c.produce(_,function(w){var x;return(x=s).call.apply(x,[O,w].concat(v))})}}var u;if(typeof s!="function"&&Ot(6),o!==void 0&&typeof o!="function"&&Ot(7),wn(i)){var d=Id(n),f=Za(n,i,void 0),g=!0;try{u=s(f),g=!1}finally{g?ks(d):Va(d)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(_){return Ha(d,o),Ka(_,d)},function(_){throw ks(d),_}):(Ha(d,o),Ka(u,d))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===Nd&&(u=void 0),n.D&&Wa(u,!0),o){var y=[],b=[];_r("Patches").M(i,u,y,b),o(y,b)}return u}Ot(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var d=arguments.length,f=Array(d>1?d-1:0),g=1;g<d;g++)f[g-1]=arguments[g];return n.produceWithPatches(u,function(y){return i.apply(void 0,[y].concat(f))})};var o,a,c=n.produce(i,s,function(u,d){o=u,a=d});return typeof Promise<"u"&&c instanceof Promise?c.then(function(u){return[u,o,a]}):[c,o,a]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){wn(r)||Ot(8),Bn(r)&&(r=O2(r));var n=Id(this),i=Za(this,r,void 0);return i[Qt].C=!0,Va(n),i},e.finishDraft=function(r,n){var i=r&&r[Qt];process.env.NODE_ENV!=="production"&&(i&&i.C||Ot(9),i.I&&Ot(10));var s=i.A;return Ha(s,n),Ka(void 0,s)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!Td&&Ot(20),this.g=r},e.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var s=n[i];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}i>-1&&(n=n.slice(i+1));var o=_r("Patches").$;return Bn(r)?o(r,n):this.produce(r,function(a){return o(a,n)})},t}(),Xt=new N2,L2=Xt.produce;Xt.produceWithPatches.bind(Xt),Xt.setAutoFreeze.bind(Xt),Xt.setUseProxies.bind(Xt),Xt.applyPatches.bind(Xt),Xt.createDraft.bind(Xt),Xt.finishDraft.bind(Xt);const M2=t=>(e,r,n)=>(n.setState=(i,s,...o)=>{const a=typeof i=="function"?L2(i):i;return e(a,s,...o)},t(n.setState,r,n)),vn=E2()(M2((t,e)=>({account:void 0,accounts:[],chainId:void 0,setAccounts:r=>{t({accounts:r})},setAccount:r=>{t({account:r})},setChainId:r=>{t({chainId:r})},disconnect:()=>{t({account:void 0,accounts:[],chainId:void 0})}}))),tc=t=>t.length<5*2?t:`${t.slice(0,5+5)}...${t.slice(t.length-5,t.length)}`,F2=()=>{const t=zr(),[e,r,n,i]=vn(d=>[d.account,d.accounts,d.chainId,d.setAccount]),{request:s,data:o,error:a,loading:c}=Ui({topic:t==null?void 0:t.topic,chainId:n??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"getSelectedAccount"}});$a(({params:d,topic:f})=>{if(d.event.name==="accountSelected"&&t&&t.topic===f){const y=d.event.data,b=d.chainId.split(":")[0],_=d.chainId.split(":")[1];i({network:b,chainId:_,address:y,shortenedAddress:tc(y)})}}),qe.useEffect(()=>{t&&!c&&s()},[t==null?void 0:t.topic]),qe.useEffect(()=>{if(o){const d=o,f=d==null?void 0:d.account;f&&i(f)}},[o]);const u=a?a.message:o&&o.error;return{account:e,accounts:r,error:u,loading:c}},U2=()=>{const t=zr(),[e,r]=vn(f=>[f.chainId,f.account]),{request:n,data:i,error:s,loading:o}=Ui({topic:t==null?void 0:t.topic,chainId:e??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0}}});$a(({_:f,params:g,topic:y})=>{g.event.name==="accountSynced"&&t&&t.topic===y&&!o&&n()});const a=!!t&&!!r;qe.useEffect(()=>{a&&!o&&n()},[a,r]);const c=s?s.message:i&&i.error,u=i,d=u==null?void 0:u.balances;return{loading:o,balances:d,error:c}},j2=()=>{const t=zr(),{connect:e,data:r,error:n,loading:i}=Xb({requiredNamespaces:{aleo:{methods:Ra,chains:Us,events:Pa}}});return{connect:async()=>{try{await e()}catch{}},data:r,error:n,loading:i,session:t,isConnected:!!t}};var rc={exports:{}},nc,Md;function k2(){if(Md)return nc;Md=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;nc=function(d,f){f=f||{};var g=typeof d;if(g==="string"&&d.length>0)return o(d);if(g==="number"&&isFinite(d))return f.long?c(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(f){var g=parseFloat(f[1]),y=(f[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return g*s;case"weeks":case"week":case"w":return g*i;case"days":case"day":case"d":return g*n;case"hours":case"hour":case"hrs":case"hr":case"h":return g*r;case"minutes":case"minute":case"mins":case"min":case"m":return g*e;case"seconds":case"second":case"secs":case"sec":case"s":return g*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function a(d){var f=Math.abs(d);return f>=n?Math.round(d/n)+"d":f>=r?Math.round(d/r)+"h":f>=e?Math.round(d/e)+"m":f>=t?Math.round(d/t)+"s":d+"ms"}function c(d){var f=Math.abs(d);return f>=n?u(d,f,n,"day"):f>=r?u(d,f,r,"hour"):f>=e?u(d,f,e,"minute"):f>=t?u(d,f,t,"second"):d+" ms"}function u(d,f,g,y){var b=f>=g*1.5;return Math.round(d/g)+" "+y+(b?"s":"")}return nc}function B2(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=k2(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let f=0;for(let g=0;g<d.length;g++)f=(f<<5)-f+d.charCodeAt(g),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(d){let f,g=null,y,b;function _(...O){if(!_.enabled)return;const I=_,v=Number(new Date),S=v-(f||v);I.diff=S,I.prev=f,I.curr=v,f=v,O[0]=r.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let w=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(p,l)=>{if(p==="%%")return"%";w++;const m=r.formatters[l];if(typeof m=="function"){const P=O[w];p=m.call(I,P),O.splice(w,1),w--}return p}),r.formatArgs.call(I,O),(I.log||r.log).apply(I,O)}return _.namespace=d,_.useColors=r.useColors(),_.color=r.selectColor(d),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(y!==r.namespaces&&(y=r.namespaces,b=r.enabled(d)),b),set:O=>{g=O}}),typeof r.init=="function"&&r.init(_),_}function n(d,f){const g=r(this.namespace+(typeof f>"u"?":":f)+d);return g.log=this.log,g}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const g=(typeof d=="string"?d:"").split(/[\s,]+/),y=g.length;for(f=0;f<y;f++)g[f]&&(d=g[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let f,g;for(f=0,g=r.skips.length;f<g;f++)if(r.skips[f].test(d))return!1;for(f=0,g=r.names.length;f<g;f++)if(r.names[f].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var z2=B2;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let d=0,f=0;c[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(d++,g==="%c"&&(f=d))}),c.splice(f,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=z2(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(rc,rc.exports);var W2=rc.exports;const Bi=cs(W2)("wallet:sdk");Bi.enabled=!0;const q2=t=>{Bi("useDecrypt",t);const e=zr(),[r]=vn(d=>[d.chainId]),{request:n,data:i,error:s,loading:o}=Ui({topic:(e==null?void 0:e.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}}),a=s?s.message:i&&i.error,c=i;return{decrypt:()=>{t&&n()},plaintexts:c==null?void 0:c.plaintexts,loading:o,error:a}},H2=()=>{const t=zr(),[e]=vn(a=>[a.disconnect]),{disconnect:r,error:n,loading:i}=e2({topic:t==null?void 0:t.topic,reason:vt("USER_DISCONNECTED")}),s=async()=>{if(t){try{r()}catch{Bi("could not disconnect session entirely")}e()}},o=n?n.message:void 0;return{disconnect:s,error:o,loading:i}},V2=50,K2=t=>{try{return JSON.stringify(t,null,2).replaceAll('"',"")??""}catch{return""}},G2=({filter:t,page:e})=>{const r=zr(),[n,i]=vn(_=>[_.chainId,_.account]);(t==null?void 0:t.program_id)===""&&(t.program_id=void 0);const{request:s,data:o,error:a,loading:c}=Ui({topic:r==null?void 0:r.topic,chainId:n??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"getRecords",params:{filter:t,page:e}}});$a(({id:_,params:O,topic:I})=>{O.event.name==="accountSynced"&&r&&r.topic===I&&!c&&s()});const u=!!r&&!!i;qe.useEffect(()=>{u&&!c&&s()},[u,i]);const d=()=>{!!r&&!!i&&!c&&s()},f=a?a.message:o&&o.error,g=o,y=g==null?void 0:g.records,b=(g==null?void 0:g.totalRecordCount)??0;return{request:d,records:y,error:f,loading:c,totalRecordCount:b}},Fd=()=>{const t=zr(),[e,r,n]=vn(i=>[i.setAccount,i.setAccounts,i.disconnect]);qe.useEffect(()=>{if(t){window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE");const i=t.namespaces.aleo.accounts.map(s=>{const o=s.split(":");return{network:o[0],chainId:o[1],address:o[2],shortenedAddress:tc(o[2])}});r(i??[]),i[0]&&e(i[0])}},[t==null?void 0:t.topic]),fd(({id:i,topic:s})=>{Bi("session deleted! topic: ",s),n()})},Y2=t=>{const e=zr(),[r]=vn(f=>[f.chainId]),n=t.inputs.map(f=>typeof f=="string"?f:f.plaintext),{request:i,data:s,error:o,loading:a}=Ui({topic:(e==null?void 0:e.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"requestCreateEvent",params:{type:t.type,programId:t.programId,functionId:t.functionId,fee:t.fee,inputs:n}}}),c=o?o.message:s&&s.error,u=s;return{requestCreateEvent:()=>{t&&(Bi("useRequestCreateEvent requesting...",t),i())},eventId:u==null?void 0:u.eventId,error:c,loading:a}};var Ud=(t=>(t.Unknown="Unknown",t.Deploy="Deploy",t.Execute="Execute",t.Send="Send",t.Receive="Receive",t.Join="Join",t.Split="Split",t.Shield="Shield",t.Unshield="Unshield",t))(Ud||{}),jd=(t=>(t.Private="Private",t.Public="Public",t))(jd||{});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ws=window,ic=Ws.ShadowRoot&&(Ws.ShadyCSS===void 0||Ws.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,sc=Symbol(),kd=new WeakMap;let Bd=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==sc)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(ic&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=kd.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&kd.set(r,e))}return e}toString(){return this.cssText}};const J2=t=>new Bd(typeof t=="string"?t:t+"",void 0,sc),ke=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Bd(r,t,sc)},Z2=(t,e)=>{ic?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=Ws.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},zd=ic?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return J2(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var oc;const qs=window,Wd=qs.trustedTypes,Q2=Wd?Wd.emptyScript:"",qd=qs.reactiveElementPolyfillSupport,ac={toAttribute(t,e){switch(e){case Boolean:t=t?Q2:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Hd=(t,e)=>e!==t&&(e==e||t==t),cc={attribute:!0,type:String,converter:ac,reflect:!1,hasChanged:Hd},lc="finalized";let qn=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=cc){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||cc}static finalize(){if(this.hasOwnProperty(lc))return!1;this[lc]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(zd(i))}else e!==void 0&&r.push(zd(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Z2(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=cc){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:ac).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:ac;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||Hd)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};qn[lc]=!0,qn.elementProperties=new Map,qn.elementStyles=[],qn.shadowRootOptions={mode:"open"},qd==null||qd({ReactiveElement:qn}),((oc=qs.reactiveElementVersions)!==null&&oc!==void 0?oc:qs.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var uc;const Hs=window,Hn=Hs.trustedTypes,Vd=Hn?Hn.createPolicy("lit-html",{createHTML:t=>t}):void 0,hc="$lit$",Wr=`lit$${(Math.random()+"").slice(9)}$`,Kd="?"+Wr,X2=`<${Kd}>`,bn=document,zi=()=>bn.createComment(""),Wi=t=>t===null||typeof t!="object"&&typeof t!="function",Gd=Array.isArray,e3=t=>Gd(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",dc=`[ 	
\f\r]`,qi=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Yd=/-->/g,Jd=/>/g,_n=RegExp(`>|${dc}(?:([^\\s"'>=/]+)(${dc}*=${dc}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Zd=/'/g,Qd=/"/g,Xd=/^(?:script|style|textarea|title)$/i,ef=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),J=ef(1),it=ef(2),En=Symbol.for("lit-noChange"),bt=Symbol.for("lit-nothing"),tf=new WeakMap,Sn=bn.createTreeWalker(bn,129,null,!1);function rf(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Vd!==void 0?Vd.createHTML(e):e}const t3=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=qi;for(let a=0;a<r;a++){const c=t[a];let u,d,f=-1,g=0;for(;g<c.length&&(o.lastIndex=g,d=o.exec(c),d!==null);)g=o.lastIndex,o===qi?d[1]==="!--"?o=Yd:d[1]!==void 0?o=Jd:d[2]!==void 0?(Xd.test(d[2])&&(i=RegExp("</"+d[2],"g")),o=_n):d[3]!==void 0&&(o=_n):o===_n?d[0]===">"?(o=i??qi,f=-1):d[1]===void 0?f=-2:(f=o.lastIndex-d[2].length,u=d[1],o=d[3]===void 0?_n:d[3]==='"'?Qd:Zd):o===Qd||o===Zd?o=_n:o===Yd||o===Jd?o=qi:(o=_n,i=void 0);const y=o===_n&&t[a+1].startsWith("/>")?" ":"";s+=o===qi?c+X2:f>=0?(n.push(u),c.slice(0,f)+hc+c.slice(f)+Wr+y):c+Wr+(f===-2?(n.push(void 0),a):y)}return[rf(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class Hi{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[u,d]=t3(e,r);if(this.el=Hi.createElement(u,n),Sn.currentNode=this.el.content,r===2){const f=this.el.content,g=f.firstChild;g.remove(),f.append(...g.childNodes)}for(;(i=Sn.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const f=[];for(const g of i.getAttributeNames())if(g.endsWith(hc)||g.startsWith(Wr)){const y=d[o++];if(f.push(g),y!==void 0){const b=i.getAttribute(y.toLowerCase()+hc).split(Wr),_=/([.?@])?(.*)/.exec(y);c.push({type:1,index:s,name:_[2],strings:b,ctor:_[1]==="."?n3:_[1]==="?"?s3:_[1]==="@"?o3:Vs})}else c.push({type:6,index:s})}for(const g of f)i.removeAttribute(g)}if(Xd.test(i.tagName)){const f=i.textContent.split(Wr),g=f.length-1;if(g>0){i.textContent=Hn?Hn.emptyScript:"";for(let y=0;y<g;y++)i.append(f[y],zi()),Sn.nextNode(),c.push({type:2,index:++s});i.append(f[g],zi())}}}else if(i.nodeType===8)if(i.data===Kd)c.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(Wr,f+1))!==-1;)c.push({type:7,index:s}),f+=Wr.length-1}s++}}static createElement(e,r){const n=bn.createElement("template");return n.innerHTML=e,n}}function Vn(t,e,r=t,n){var i,s,o,a;if(e===En)return e;let c=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const u=Wi(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==u&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),u===void 0?c=void 0:(c=new u(t),c._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=c:r._$Cl=c),c!==void 0&&(e=Vn(t,c._$AS(t,e.values),c,n)),e}class r3{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:bn).importNode(n,!0);Sn.currentNode=s;let o=Sn.nextNode(),a=0,c=0,u=i[0];for(;u!==void 0;){if(a===u.index){let d;u.type===2?d=new Vi(o,o.nextSibling,this,e):u.type===1?d=new u.ctor(o,u.name,u.strings,this,e):u.type===6&&(d=new a3(o,this,e)),this._$AV.push(d),u=i[++c]}a!==(u==null?void 0:u.index)&&(o=Sn.nextNode(),a++)}return Sn.currentNode=bn,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class Vi{constructor(e,r,n,i){var s;this.type=2,this._$AH=bt,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Vn(this,e,r),Wi(e)?e===bt||e==null||e===""?(this._$AH!==bt&&this._$AR(),this._$AH=bt):e!==this._$AH&&e!==En&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):e3(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==bt&&Wi(this._$AH)?this._$AA.nextSibling.data=e:this.$(bn.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Hi.createElement(rf(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new r3(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=tf.get(e.strings);return r===void 0&&tf.set(e.strings,r=new Hi(e)),r}T(e){Gd(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new Vi(this.k(zi()),this.k(zi()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class Vs{constructor(e,r,n,i,s){this.type=1,this._$AH=bt,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=bt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Vn(this,e,r,0),o=!Wi(e)||e!==this._$AH&&e!==En,o&&(this._$AH=e);else{const a=e;let c,u;for(e=s[0],c=0;c<s.length-1;c++)u=Vn(this,a[n+c],r,c),u===En&&(u=this._$AH[c]),o||(o=!Wi(u)||u!==this._$AH[c]),u===bt?e=bt:e!==bt&&(e+=(u??"")+s[c+1]),this._$AH[c]=u}o&&!i&&this.j(e)}j(e){e===bt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class n3 extends Vs{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===bt?void 0:e}}const i3=Hn?Hn.emptyScript:"";let s3=class extends Vs{constructor(){super(...arguments),this.type=4}j(e){e&&e!==bt?this.element.setAttribute(this.name,i3):this.element.removeAttribute(this.name)}};class o3 extends Vs{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=Vn(this,e,r,0))!==null&&n!==void 0?n:bt)===En)return;const i=this._$AH,s=e===bt&&i!==bt||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==bt&&(i===bt||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let a3=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Vn(this,e)}};const nf=Hs.litHtmlPolyfillSupport;nf==null||nf(Hi,Vi),((uc=Hs.litHtmlVersions)!==null&&uc!==void 0?uc:Hs.litHtmlVersions=[]).push("2.8.0");const c3=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new Vi(e.insertBefore(zi(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var fc,pc;class _e extends qn{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=c3(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return En}}_e.finalized=!0,_e._$litElement$=!0,(fc=globalThis.litElementHydrateSupport)===null||fc===void 0||fc.call(globalThis,{LitElement:_e});const sf=globalThis.litElementPolyfillSupport;sf==null||sf({LitElement:_e}),((pc=globalThis.litElementVersions)!==null&&pc!==void 0?pc:globalThis.litElementVersions=[]).push("3.3.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Pe=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const l3=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},u3=(t,e,r)=>{e.constructor.createProperty(r,t)};function pe(t){return(e,r)=>r!==void 0?u3(t,e,r):l3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Kt(t){return pe({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var gc;((gc=window.HTMLSlotElement)===null||gc===void 0?void 0:gc.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const h3={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},d3=t=>(...e)=>({_$litDirective$:t,values:e});class f3{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Rr=d3(class extends f3{constructor(t){var e;if(super(t),t.type!==h3.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return En}});function p3(t,e){t.indexOf(e)===-1&&t.push(e)}const of=(t,e,r)=>Math.min(Math.max(r,t),e),or={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},Ks=t=>typeof t=="number",Kn=t=>Array.isArray(t)&&!Ks(t[0]),g3=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function m3(t,e){return Kn(t)?t[g3(0,t.length,e)]:t}const af=(t,e,r)=>-r*t+r*e+t,cf=()=>{},qr=t=>t,mc=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function lf(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=mc(0,e,n);t.push(af(r,1,i))}}function w3(t){const e=[0];return lf(e,t-1),e}function y3(t,e=w3(t.length),r=qr){const n=t.length,i=n-e.length;return i>0&&lf(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=of(0,1,mc(e[o],e[o+1],s));return a=m3(r,o)(a),af(t[o],t[o+1],a)}}const uf=t=>Array.isArray(t)&&Ks(t[0]),wc=t=>typeof t=="object"&&!!t.createAnimation,Gn=t=>typeof t=="function",v3=t=>typeof t=="string",Ki={ms:t=>t*1e3,s:t=>t/1e3},hf=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,b3=1e-7,_3=12;function E3(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=hf(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>b3&&++a<_3);return o}function Gi(t,e,r,n){if(t===e&&r===n)return qr;const i=s=>E3(s,0,1,t,r);return s=>s===0||s===1?s:hf(i(s),e,n)}const S3=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return of(0,1,i/t)},df={ease:Gi(.25,.1,.25,1),"ease-in":Gi(.42,0,1,1),"ease-in-out":Gi(.42,0,.58,1),"ease-out":Gi(0,0,.58,1)},x3=/\((.*?)\)/;function ff(t){if(Gn(t))return t;if(uf(t))return Gi(...t);if(df[t])return df[t];if(t.startsWith("steps")){const e=x3.exec(t);if(e){const r=e[1].split(",");return S3(parseFloat(r[0]),r[1].trim())}}return qr}class pf{constructor(e,r=[0,1],{easing:n,duration:i=or.duration,delay:s=or.delay,endDelay:o=or.endDelay,repeat:a=or.repeat,offset:c,direction:u="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=qr,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((f,g)=>{this.resolve=f,this.reject=g}),n=n||or.easing,wc(n)){const f=n.createAnimation(r);n=f.easing,r=f.keyframes||r,i=f.duration||i}this.repeat=a,this.easing=Kn(n)?qr:ff(n),this.updateDuration(i);const d=y3(r,c,Kn(n)?n.map(ff):qr);this.tick=f=>{var g;s=s;let y=0;this.pauseTime!==void 0?y=this.pauseTime:y=(f-this.startTime)*this.rate,this.t=y,y/=1e3,y=Math.max(y-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(y=this.totalDuration);const b=y/this.duration;let _=Math.floor(b),O=b%1;!O&&b>=1&&(O=1),O===1&&_--;const I=_%2;(u==="reverse"||u==="alternate"&&I||u==="alternate-reverse"&&!I)&&(O=1-O);const v=y>=this.totalDuration?1:Math.min(O,1),S=d(this.easing(v));e(S),this.pauseTime===void 0&&(this.playState==="finished"||y>=this.totalDuration+o)?(this.playState="finished",(g=this.resolve)===null||g===void 0||g.call(this,S)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var yc=function(){};process.env.NODE_ENV!=="production"&&(yc=function(t,e){if(!t)throw new Error(e)});class D3{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const vc=new WeakMap;function gf(t){return vc.has(t)||vc.set(t,{transforms:[],values:new Map}),vc.get(t)}function C3(t,e){return t.has(e)||t.set(e,new D3),t.get(e)}const O3=["","X","Y","Z"],I3=["translate","scale","rotate","skew"],Gs={x:"translateX",y:"translateY",z:"translateZ"},mf={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},A3={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:mf,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:qr},skew:mf},Yi=new Map,bc=t=>`--motion-${t}`,Ys=["x","y","z"];I3.forEach(t=>{O3.forEach(e=>{Ys.push(t+e),Yi.set(bc(t+e),A3[t])})});const $3=(t,e)=>Ys.indexOf(t)-Ys.indexOf(e),R3=new Set(Ys),wf=t=>R3.has(t),P3=(t,e)=>{Gs[e]&&(e=Gs[e]);const{transforms:r}=gf(t);p3(r,e),t.style.transform=T3(r)},T3=t=>t.sort($3).reduce(N3,"").trim(),N3=(t,e)=>`${t} ${e}(var(${bc(e)}))`,_c=t=>t.startsWith("--"),yf=new Set;function L3(t){if(!yf.has(t)){yf.add(t);try{const{syntax:e,initialValue:r}=Yi.has(t)?Yi.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const Ec=(t,e)=>document.createElement("div").animate(t,e),vf={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Ec({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Ec({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Ec({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},Sc={},Yn={};for(const t in vf)Yn[t]=()=>(Sc[t]===void 0&&(Sc[t]=vf[t]()),Sc[t]);const M3=.015,F3=(t,e)=>{let r="";const n=Math.round(e/M3);for(let i=0;i<n;i++)r+=t(mc(0,n-1,i))+", ";return r.substring(0,r.length-2)},bf=(t,e)=>Gn(t)?Yn.linearEasing()?`linear(${F3(t,e)})`:or.easing:uf(t)?U3(t):t,U3=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function j3(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const k3=t=>Array.isArray(t)?t:[t];function xc(t){return Gs[t]&&(t=Gs[t]),wf(t)?bc(t):t}const Js={get:(t,e)=>{e=xc(e);let r=_c(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=Yi.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=xc(e),_c(e)?t.style.setProperty(e,r):t.style[e]=r}};function _f(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function B3(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||qr;const i=t[t.length-1];if(v3(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function z3(){return window.__MOTION_DEV_TOOLS_RECORD}function W3(t,e,r,n={},i){const s=z3(),o=n.record!==!1&&s;let a,{duration:c=or.duration,delay:u=or.delay,endDelay:d=or.endDelay,repeat:f=or.repeat,easing:g=or.easing,persist:y=!1,direction:b,offset:_,allowWebkitAcceleration:O=!1}=n;const I=gf(t),v=wf(e);let S=Yn.waapi();v&&P3(t,e);const w=xc(e),x=C3(I.values,w),p=Yi.get(w);return _f(x.animation,!(wc(g)&&x.generator)&&n.record!==!1),()=>{const l=()=>{var $,F;return(F=($=Js.get(t,w))!==null&&$!==void 0?$:p==null?void 0:p.initialValue)!==null&&F!==void 0?F:0};let m=j3(k3(r),l);const P=B3(m,p);if(wc(g)){const $=g.createAnimation(m,e!=="opacity",l,w,x);g=$.easing,m=$.keyframes||m,c=$.duration||c}if(_c(w)&&(Yn.cssRegisterProperty()?L3(w):S=!1),v&&!Yn.linearEasing()&&(Gn(g)||Kn(g)&&g.some(Gn))&&(S=!1),S){p&&(m=m.map(B=>Ks(B)?p.toDefaultUnit(B):B)),m.length===1&&(!Yn.partialKeyframes()||o)&&m.unshift(l());const $={delay:Ki.ms(u),duration:Ki.ms(c),endDelay:Ki.ms(d),easing:Kn(g)?void 0:bf(g,c),direction:b,iterations:f+1,fill:"both"};a=t.animate({[w]:m,offset:_,easing:Kn(g)?g.map(B=>bf(B,c)):void 0},$),a.finished||(a.finished=new Promise((B,H)=>{a.onfinish=B,a.oncancel=H}));const F=m[m.length-1];a.finished.then(()=>{y||(Js.set(t,w,F),a.cancel())}).catch(cf),O||(a.playbackRate=1.000001)}else if(i&&v)m=m.map($=>typeof $=="string"?parseFloat($):$),m.length===1&&m.unshift(parseFloat(l())),a=new i($=>{Js.set(t,w,P?P($):$)},m,Object.assign(Object.assign({},n),{duration:c,easing:g}));else{const $=m[m.length-1];Js.set(t,w,p&&Ks($)?p.toDefaultUnit($):$)}return o&&s(t,e,m,{duration:c,delay:u,easing:g,repeat:f,offset:_},"motion-one"),x.setAnimation(a),a}}const q3=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function H3(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const V3=t=>t(),Ef=(t,e,r=or.duration)=>new Proxy({animations:t.map(V3).filter(Boolean),duration:r,options:e},G3),K3=t=>t.animations[0],G3={get:(t,e)=>{const r=K3(t);switch(e){case"duration":return t.duration;case"currentTime":return Ki.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(Y3)).catch(cf)),t.finished;case"stop":return()=>{t.animations.forEach(n=>_f(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=Ki.ms(r);case"currentTime":case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},Y3=t=>t.finished;function J3(t,e,r){return Gn(t)?t(e,r):t}function Z3(t){return function(r,n,i={}){r=H3(r);const s=r.length;yc(!!s,"No valid element provided."),yc(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const u in n){const d=q3(i,u);d.delay=J3(d.delay,a,s);const f=W3(c,u,n[u],d,t);o.push(f)}}return Ef(o,i,i.duration)}}const Q3=Z3(pf);function X3(t,e={}){return Ef([()=>{const r=new pf(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function xn(t,e,r){return(Gn(t)?X3:Q3)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zt=t=>t??bt;var Ji={},e5=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Sf={},er={};let Dc;const t5=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];er.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},er.getSymbolTotalCodewords=function(e){return t5[e]},er.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},er.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Dc=e},er.isKanjiModeEnabled=function(){return typeof Dc<"u"},er.toSJIS=function(e){return Dc(e)};var Zs={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(Zs);function xf(){this.buffer=[],this.length=0}xf.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var r5=xf;function Zi(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Zi.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},Zi.prototype.get=function(t,e){return this.data[t*this.size+e]},Zi.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},Zi.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var n5=Zi,Df={};(function(t){const e=er.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(Df);var Cf={};const i5=er.getSymbolSize,Of=7;Cf.getPositions=function(e){const r=i5(e);return[[0,0],[r-Of,0],[0,r-Of]]};var If={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,u=null,d=null;for(let f=0;f<s;f++){a=c=0,u=d=null;for(let g=0;g<s;g++){let y=i.get(f,g);y===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=y,a=1),y=i.get(g,f),y===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=y,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const u=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let u=0;u<s;u++){a=c=0;for(let d=0;d<s;d++)a=a<<1&2047|i.get(u,d),d>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let u=0;u<o;u++){s(u),t.applyMask(u,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(u,i),d<c&&(c=d,a=u)}return a}})(If);var Qs={};const Hr=Zs,Xs=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],eo=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Qs.getBlocksCount=function(e,r){switch(r){case Hr.L:return Xs[(e-1)*4+0];case Hr.M:return Xs[(e-1)*4+1];case Hr.Q:return Xs[(e-1)*4+2];case Hr.H:return Xs[(e-1)*4+3];default:return}},Qs.getTotalCodewordsCount=function(e,r){switch(r){case Hr.L:return eo[(e-1)*4+0];case Hr.M:return eo[(e-1)*4+1];case Hr.Q:return eo[(e-1)*4+2];case Hr.H:return eo[(e-1)*4+3];default:return}};var Af={},to={};const Qi=new Uint8Array(512),ro=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Qi[r]=e,ro[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Qi[r]=Qi[r-255]})(),to.log=function(e){if(e<1)throw new Error("log("+e+")");return ro[e]},to.exp=function(e){return Qi[e]},to.mul=function(e,r){return e===0||r===0?0:Qi[ro[e]+ro[r]]},function(t){const e=to;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(Af);const $f=Af;function Cc(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Cc.prototype.initialize=function(e){this.degree=e,this.genPoly=$f.generateECPolynomial(this.degree)},Cc.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=$f.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var s5=Cc,Rf={},Vr={},Oc={};Oc.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Er={};const Pf="[0-9]+",o5="[A-Z $%*+\\-./:]+";let Xi="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Xi=Xi.replace(/u/g,"\\u");const a5="(?:(?![A-Z0-9 $%*+\\-./:]|"+Xi+`)(?:.|[\r
]))+`;Er.KANJI=new RegExp(Xi,"g"),Er.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Er.BYTE=new RegExp(a5,"g"),Er.NUMERIC=new RegExp(Pf,"g"),Er.ALPHANUMERIC=new RegExp(o5,"g");const c5=new RegExp("^"+Xi+"$"),l5=new RegExp("^"+Pf+"$"),u5=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Er.testKanji=function(e){return c5.test(e)},Er.testNumeric=function(e){return l5.test(e)},Er.testAlphanumeric=function(e){return u5.test(e)},function(t){const e=Oc,r=Er;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(Vr),function(t){const e=er,r=Qs,n=Zs,i=Vr,s=Oc,o=7973,a=e.getBCHDigit(o);function c(g,y,b){for(let _=1;_<=40;_++)if(y<=t.getCapacity(_,b,g))return _}function u(g,y){return i.getCharCountIndicator(g,y)+4}function d(g,y){let b=0;return g.forEach(function(_){const O=u(_.mode,y);b+=O+_.getBitsLength()}),b}function f(g,y){for(let b=1;b<=40;b++)if(d(g,b)<=t.getCapacity(b,y,i.MIXED))return b}t.from=function(y,b){return s.isValid(y)?parseInt(y,10):b},t.getCapacity=function(y,b,_){if(!s.isValid(y))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=i.BYTE);const O=e.getSymbolTotalCodewords(y),I=r.getTotalCodewordsCount(y,b),v=(O-I)*8;if(_===i.MIXED)return v;const S=v-u(_,y);switch(_){case i.NUMERIC:return Math.floor(S/10*3);case i.ALPHANUMERIC:return Math.floor(S/11*2);case i.KANJI:return Math.floor(S/13);case i.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(y,b){let _;const O=n.from(b,n.M);if(Array.isArray(y)){if(y.length>1)return f(y,O);if(y.length===0)return 1;_=y[0]}else _=y;return c(_.mode,_.getLength(),O)},t.getEncodedBits=function(y){if(!s.isValid(y)||y<7)throw new Error("Invalid QR Code version");let b=y<<12;for(;e.getBCHDigit(b)-a>=0;)b^=o<<e.getBCHDigit(b)-a;return y<<12|b}}(Rf);var Tf={};const Ic=er,Nf=1335,h5=21522,Lf=Ic.getBCHDigit(Nf);Tf.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;Ic.getBCHDigit(i)-Lf>=0;)i^=Nf<<Ic.getBCHDigit(i)-Lf;return(n<<10|i)^h5};var Mf={};const d5=Vr;function Jn(t){this.mode=d5.NUMERIC,this.data=t.toString()}Jn.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Jn.prototype.getLength=function(){return this.data.length},Jn.prototype.getBitsLength=function(){return Jn.getBitsLength(this.data.length)},Jn.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var f5=Jn;const p5=Vr,Ac=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Zn(t){this.mode=p5.ALPHANUMERIC,this.data=t}Zn.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Zn.prototype.getLength=function(){return this.data.length},Zn.prototype.getBitsLength=function(){return Zn.getBitsLength(this.data.length)},Zn.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Ac.indexOf(this.data[r])*45;n+=Ac.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Ac.indexOf(this.data[r]),6)};var g5=Zn,m5=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const w5=m5,y5=Vr;function Qn(t){this.mode=y5.BYTE,typeof t=="string"&&(t=w5(t)),this.data=new Uint8Array(t)}Qn.getBitsLength=function(e){return e*8},Qn.prototype.getLength=function(){return this.data.length},Qn.prototype.getBitsLength=function(){return Qn.getBitsLength(this.data.length)},Qn.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var v5=Qn;const b5=Vr,_5=er;function Xn(t){this.mode=b5.KANJI,this.data=t}Xn.getBitsLength=function(e){return e*13},Xn.prototype.getLength=function(){return this.data.length},Xn.prototype.getBitsLength=function(){return Xn.getBitsLength(this.data.length)},Xn.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=_5.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var E5=Xn,Ff={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,u,d,f,g,y,b,_,O;!a.empty();){c=a.pop(),u=c.value,f=c.cost,g=r[u]||{};for(d in g)g.hasOwnProperty(d)&&(y=g[d],b=f+y,_=o[d],O=typeof o[d]>"u",(O||_>b)&&(o[d]=b,a.push(d,b),s[d]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var I=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(I)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Ff);var S5=Ff.exports;(function(t){const e=Vr,r=f5,n=g5,i=v5,s=E5,o=Er,a=er,c=S5;function u(I){return unescape(encodeURIComponent(I)).length}function d(I,v,S){const w=[];let x;for(;(x=I.exec(S))!==null;)w.push({data:x[0],index:x.index,mode:v,length:x[0].length});return w}function f(I){const v=d(o.NUMERIC,e.NUMERIC,I),S=d(o.ALPHANUMERIC,e.ALPHANUMERIC,I);let w,x;return a.isKanjiModeEnabled()?(w=d(o.BYTE,e.BYTE,I),x=d(o.KANJI,e.KANJI,I)):(w=d(o.BYTE_KANJI,e.BYTE,I),x=[]),v.concat(S,w,x).sort(function(l,m){return l.index-m.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function g(I,v){switch(v){case e.NUMERIC:return r.getBitsLength(I);case e.ALPHANUMERIC:return n.getBitsLength(I);case e.KANJI:return s.getBitsLength(I);case e.BYTE:return i.getBitsLength(I)}}function y(I){return I.reduce(function(v,S){const w=v.length-1>=0?v[v.length-1]:null;return w&&w.mode===S.mode?(v[v.length-1].data+=S.data,v):(v.push(S),v)},[])}function b(I){const v=[];for(let S=0;S<I.length;S++){const w=I[S];switch(w.mode){case e.NUMERIC:v.push([w,{data:w.data,mode:e.ALPHANUMERIC,length:w.length},{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.ALPHANUMERIC:v.push([w,{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.KANJI:v.push([w,{data:w.data,mode:e.BYTE,length:u(w.data)}]);break;case e.BYTE:v.push([{data:w.data,mode:e.BYTE,length:u(w.data)}])}}return v}function _(I,v){const S={},w={start:{}};let x=["start"];for(let p=0;p<I.length;p++){const l=I[p],m=[];for(let P=0;P<l.length;P++){const $=l[P],F=""+p+P;m.push(F),S[F]={node:$,lastCount:0},w[F]={};for(let B=0;B<x.length;B++){const H=x[B];S[H]&&S[H].node.mode===$.mode?(w[H][F]=g(S[H].lastCount+$.length,$.mode)-g(S[H].lastCount,$.mode),S[H].lastCount+=$.length):(S[H]&&(S[H].lastCount=$.length),w[H][F]=g($.length,$.mode)+4+e.getCharCountIndicator($.mode,v))}}x=m}for(let p=0;p<x.length;p++)w[x[p]].end=0;return{map:w,table:S}}function O(I,v){let S;const w=e.getBestModeForData(I);if(S=e.from(v,w),S!==e.BYTE&&S.bit<w.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(S)+`.
 Suggested mode is: `+e.toString(w));switch(S===e.KANJI&&!a.isKanjiModeEnabled()&&(S=e.BYTE),S){case e.NUMERIC:return new r(I);case e.ALPHANUMERIC:return new n(I);case e.KANJI:return new s(I);case e.BYTE:return new i(I)}}t.fromArray=function(v){return v.reduce(function(S,w){return typeof w=="string"?S.push(O(w,null)):w.data&&S.push(O(w.data,w.mode)),S},[])},t.fromString=function(v,S){const w=f(v,a.isKanjiModeEnabled()),x=b(w),p=_(x,S),l=c.find_path(p.map,"start","end"),m=[];for(let P=1;P<l.length-1;P++)m.push(p.table[l[P]].node);return t.fromArray(y(m))},t.rawSplit=function(v){return t.fromArray(f(v,a.isKanjiModeEnabled()))}})(Mf);const no=er,$c=Zs,x5=r5,D5=n5,C5=Df,O5=Cf,Rc=If,Pc=Qs,I5=s5,io=Rf,A5=Tf,$5=Vr,Tc=Mf;function R5(t,e){const r=t.size,n=O5.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function P5(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function T5(t,e){const r=C5.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function N5(t,e){const r=t.size,n=io.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Nc(t,e,r){const n=t.size,i=A5.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function L5(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let u=!1;o<e.length&&(u=(e[o]>>>s&1)===1),t.set(i,a-c,u),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function M5(t,e,r){const n=new x5;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),$5.getCharCountIndicator(c.mode,t)),c.write(n)});const i=no.getSymbolTotalCodewords(t),s=Pc.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return F5(n,t,e)}function F5(t,e,r){const n=no.getSymbolTotalCodewords(e),i=Pc.getTotalCodewordsCount(e,r),s=n-i,o=Pc.getBlocksCount(e,r),a=n%o,c=o-a,u=Math.floor(n/o),d=Math.floor(s/o),f=d+1,g=u-d,y=new I5(g);let b=0;const _=new Array(o),O=new Array(o);let I=0;const v=new Uint8Array(t.buffer);for(let l=0;l<o;l++){const m=l<c?d:f;_[l]=v.slice(b,b+m),O[l]=y.encode(_[l]),b+=m,I=Math.max(I,m)}const S=new Uint8Array(n);let w=0,x,p;for(x=0;x<I;x++)for(p=0;p<o;p++)x<_[p].length&&(S[w++]=_[p][x]);for(x=0;x<g;x++)for(p=0;p<o;p++)S[w++]=O[p][x];return S}function U5(t,e,r,n){let i;if(Array.isArray(t))i=Tc.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const d=Tc.rawSplit(t);u=io.getBestVersionForData(d,r)}i=Tc.fromString(t,u||40)}else throw new Error("Invalid data");const s=io.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=M5(e,r,i),a=no.getSymbolSize(e),c=new D5(a);return R5(c,e),P5(c),T5(c,e),Nc(c,r,0),e>=7&&N5(c,e),L5(c,o),isNaN(n)&&(n=Rc.getBestMask(c,Nc.bind(null,c,r))),Rc.applyMask(n,c),Nc(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}Sf.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=$c.M,i,s;return typeof r<"u"&&(n=$c.from(r.errorCorrectionLevel,$c.M),i=io.from(r.version),s=Rc.from(r.maskPattern),r.toSJISFunc&&no.setToSJISFunction(r.toSJISFunc)),U5(e,i,n,s)};var Uf={},Lc={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),u=Math.floor((o+s.margin*2)*c),d=s.margin*c,f=[s.color.light,s.color.dark];for(let g=0;g<u;g++)for(let y=0;y<u;y++){let b=(g*u+y)*4,_=s.color.light;if(g>=d&&y>=d&&g<u-d&&y<u-d){const O=Math.floor((g-d)/c),I=Math.floor((y-d)/c);_=f[a[O*o+I]?1:0]}n[b++]=_.r,n[b++]=_.g,n[b++]=_.b,n[b]=_.a}}})(Lc),function(t){const e=Lc;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const d=e.getImageWidth(s.modules.size,c),f=u.getContext("2d"),g=f.createImageData(d,d);return e.qrToImageData(g.data,s,c),r(f,u,d),f.putImageData(g,0,0),u},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(s,o,c),d=c.type||"image/png",f=c.rendererOpts||{};return u.toDataURL(d,f.quality)}}(Uf);var jf={};const j5=Lc;function kf(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Mc(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function k5(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),u=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?Mc("M",c+r,.5+u+r):Mc("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=Mc("h",o),o=0)):i++}return n}jf.render=function(e,r,n){const i=j5.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+kf(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+kf(i.color.dark,"stroke")+' d="'+k5(o,s,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,g),g};const B5=e5,Fc=Sf,Bf=Uf,z5=jf;function Uc(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!B5())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,u){try{const d=Fc.create(r,n);c(t(d,e,n))}catch(d){u(d)}})}try{const c=Fc.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}Ji.create=Fc.create,Ji.toCanvas=Uc.bind(null,Bf.render),Ji.toDataURL=Uc.bind(null,Bf.renderToDataURL),Ji.toString=Uc.bind(null,function(t,e,r){return z5.render(t,r)});var W5=Object.defineProperty,zf=Object.getOwnPropertySymbols,q5=Object.prototype.hasOwnProperty,H5=Object.prototype.propertyIsEnumerable,Wf=(t,e,r)=>e in t?W5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jc=(t,e)=>{for(var r in e||(e={}))q5.call(e,r)&&Wf(t,r,e[r]);if(zf)for(var r of zf(e))H5.call(e,r)&&Wf(t,r,e[r]);return t};function V5(){var t;const e=(t=Fr.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function qf(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const Re={getPreset(t){return qf()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=Fr.state;if(t){const r=jc(jc(jc({},V5()),qf()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:ke`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},K5=ke`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var G5=Object.defineProperty,Y5=Object.getOwnPropertyDescriptor,ei=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G5(e,r,i),i};let Kr=class extends _e{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),J`<button class="${Rr(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};Kr.styles=[Re.globalCss,K5],ei([pe({type:Boolean})],Kr.prototype,"disabled",2),ei([pe()],Kr.prototype,"iconLeft",2),ei([pe()],Kr.prototype,"iconRight",2),ei([pe()],Kr.prototype,"onClick",2),ei([pe()],Kr.prototype,"variant",2),Kr=ei([Pe("wcm-button")],Kr);const J5=ke`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var Z5=Object.defineProperty,Q5=Object.getOwnPropertyDescriptor,kc=(t,e,r,n)=>{for(var i=n>1?void 0:n?Q5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Z5(e,r,i),i};let es=class extends _e{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return J`<button ?disabled="${this.disabled}" class="${Rr(t)}"><slot></slot></button>`}};es.styles=[Re.globalCss,J5],kc([pe({type:Boolean})],es.prototype,"disabled",2),kc([pe()],es.prototype,"variant",2),es=kc([Pe("wcm-button-big")],es);const X5=ke`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var e_=Object.defineProperty,t_=Object.getOwnPropertyDescriptor,r_=(t,e,r,n)=>{for(var i=n>1?void 0:n?t_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&e_(e,r,i),i};let Bc=class extends _e{render(){return J`<div><slot></slot></div>`}};Bc.styles=[Re.globalCss,X5],Bc=r_([Pe("wcm-info-footer")],Bc);const Be={CROSS_ICON:it`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:it`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:it`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:it`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:it`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:it`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:it`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:it`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:it`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:it`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:it`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:it`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:it`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:it`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:it`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:it`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:it`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:it`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},n_=ke`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var i_=Object.defineProperty,s_=Object.getOwnPropertyDescriptor,o_=(t,e,r,n)=>{for(var i=n>1?void 0:n?s_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&i_(e,r,i),i};let zc=class extends _e{render(){return J`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${Be.WALLET_CONNECT_LOGO} <button @click="${sn.close}">${Be.CROSS_ICON}</button></div>`}};zc.styles=[Re.globalCss,n_],zc=o_([Pe("wcm-modal-backcard")],zc);const a_=ke`main{padding:20px;padding-top:0;width:100%}`;var c_=Object.defineProperty,l_=Object.getOwnPropertyDescriptor,u_=(t,e,r,n)=>{for(var i=n>1?void 0:n?l_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&c_(e,r,i),i};let Wc=class extends _e{render(){return J`<main><slot></slot></main>`}};Wc.styles=[Re.globalCss,a_],Wc=u_([Pe("wcm-modal-content")],Wc);const h_=ke`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var d_=Object.defineProperty,f_=Object.getOwnPropertyDescriptor,p_=(t,e,r,n)=>{for(var i=n>1?void 0:n?f_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&d_(e,r,i),i};let qc=class extends _e{render(){return J`<footer><slot></slot></footer>`}};qc.styles=[Re.globalCss,h_],qc=p_([Pe("wcm-modal-footer")],qc);const g_=ke`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var m_=Object.defineProperty,w_=Object.getOwnPropertyDescriptor,ts=(t,e,r,n)=>{for(var i=n>1?void 0:n?w_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&m_(e,r,i),i};let Dn=class extends _e{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return J`<button class="wcm-back-btn" @click="${et.goBack}">${Be.BACK_ICON}</button>`}actionBtnTemplate(){return J`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=et.state.history.length>1,r=this.title?J`<wcm-text variant="big-bold">${this.title}</wcm-text>`:J`<slot></slot>`;return J`<header class="${Rr(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};Dn.styles=[Re.globalCss,g_],ts([pe()],Dn.prototype,"title",2),ts([pe()],Dn.prototype,"onAction",2),ts([pe()],Dn.prototype,"actionIcon",2),ts([pe({type:Boolean})],Dn.prototype,"border",2),Dn=ts([Pe("wcm-modal-header")],Dn);const ue={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Yt.state;return r!=null&&r[t]?r[t]:e?Wt.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=ue.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,ne.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=ut.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;ue.setRecentWallet(t);function o(a){let c="";i?c=ne.formatUniversalUrl(i,a,n):s&&(c=ne.formatNativeUrl(s,a,n)),ne.openHref(c,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=ut.state;t&&(ne.setWalletConnectAndroidDeepLink(t),ne.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=ut.state;if(t)try{await navigator.clipboard.writeText(t),Ur.openToast("Link copied","success")}catch{Ur.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Yt.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(ue.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(ue.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){ne.openHref(ue.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=ne.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){et.setData({Wallet:t});const e=ne.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=ue.getCachedRouterWalletPlatforms();e?i?et.push("MobileConnecting"):n?et.push("WebConnecting"):et.push("InstallWallet"):r?et.push("DesktopConnecting"):n?et.push("WebConnecting"):i?et.push("MobileQrcodeConnecting"):et.push("InstallWallet")}},y_=ke`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var v_=Object.defineProperty,b_=Object.getOwnPropertyDescriptor,Hc=(t,e,r,n)=>{for(var i=n>1?void 0:n?b_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&v_(e,r,i),i};let rs=class extends _e{constructor(){super(),this.view=et.state.view,this.prevView=et.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=et.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&xn(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return ue.getShadowRootElement(this,".wcm-router")}get contentEl(){return ue.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return J`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return J`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return J`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return J`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return J`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return J`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return J`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return J`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return J`<div>Not Found</div>`}}async onChangeRoute(){await xn(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=et.state.view,xn(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return J`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};rs.styles=[Re.globalCss,y_],Hc([Kt()],rs.prototype,"view",2),Hc([Kt()],rs.prototype,"prevView",2),rs=Hc([Pe("wcm-modal-router")],rs);const __=ke`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var E_=Object.defineProperty,S_=Object.getOwnPropertyDescriptor,Hf=(t,e,r,n)=>{for(var i=n>1?void 0:n?S_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&E_(e,r,i),i};let so=class extends _e{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=Ur.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>Ur.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),Ur.closeToast()}render(){const{message:t,variant:e}=Ur.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?J`<div class="${Rr(r)}">${e==="success"?Be.CHECKMARK_ICON:null} ${e==="error"?Be.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};so.styles=[Re.globalCss,__],Hf([Kt()],so.prototype,"open",2),so=Hf([Pe("wcm-modal-toast")],so);const x_=.1,Vf=2.5,Pr=7;function Vc(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+x_}function D_(t,e){const r=Array.prototype.slice.call(Ji.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const C_={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=D_(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:b,y:_})=>{const O=(o.length-Pr)*a*b,I=(o.length-Pr)*a*_,v=.45;for(let S=0;S<c.length;S+=1){const w=a*(Pr-S*2);s.push(it`<rect fill="${S%2===0?n:i}" height="${w}" rx="${w*v}" ry="${w*v}" width="${w}" x="${O+a*S}" y="${I+a*S}">`)}});const u=Math.floor((r+25)/a),d=o.length/2-u/2,f=o.length/2+u/2-1,g=[];o.forEach((b,_)=>{b.forEach((O,I)=>{if(o[_][I]&&!(_<Pr&&I<Pr||_>o.length-(Pr+1)&&I<Pr||_<Pr&&I>o.length-(Pr+1))&&!(_>d&&_<f&&I>d&&I<f)){const v=_*a+a/2,S=I*a+a/2;g.push([v,S])}})});const y={};return g.forEach(([b,_])=>{y[b]?y[b].push(_):y[b]=[_]}),Object.entries(y).map(([b,_])=>{const O=_.filter(I=>_.every(v=>!Vc(I,v,a)));return[Number(b),O]}).forEach(([b,_])=>{_.forEach(O=>{s.push(it`<circle cx="${b}" cy="${O}" fill="${n}" r="${a/Vf}">`)})}),Object.entries(y).filter(([b,_])=>_.length>1).map(([b,_])=>{const O=_.filter(I=>_.some(v=>Vc(I,v,a)));return[Number(b),O]}).map(([b,_])=>{_.sort((I,v)=>I<v?-1:1);const O=[];for(const I of _){const v=O.find(S=>S.some(w=>Vc(I,w,a)));v?v.push(I):O.push([I])}return[b,O.map(I=>[I[0],I[I.length-1]])]}).forEach(([b,_])=>{_.forEach(([O,I])=>{s.push(it`<line x1="${b}" x2="${b}" y1="${O}" y2="${I}" stroke="${n}" stroke-width="${a/(Vf/2)}" stroke-linecap="round">`)})}),s}},O_=ke`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var I_=Object.defineProperty,A_=Object.getOwnPropertyDescriptor,ti=(t,e,r,n)=>{for(var i=n>1?void 0:n?A_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&I_(e,r,i),i};let Tr=class extends _e{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=Fr.state.themeMode==="light"?this.size:this.size-36;return it`<svg height="${t}" width="${t}">${C_.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":Fr.state.themeMode==="dark"};return J`<div style="${`width: ${this.size}px`}" class="${Rr(t)}">${this.walletId||this.imageUrl?J`<wcm-wallet-image walletId="${zt(this.walletId)}" imageId="${zt(this.imageId)}" imageUrl="${zt(this.imageUrl)}"></wcm-wallet-image>`:Be.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};Tr.styles=[Re.globalCss,O_],ti([pe()],Tr.prototype,"uri",2),ti([pe({type:Number})],Tr.prototype,"size",2),ti([pe()],Tr.prototype,"imageId",2),ti([pe()],Tr.prototype,"walletId",2),ti([pe()],Tr.prototype,"imageUrl",2),Tr=ti([Pe("wcm-qrcode")],Tr);const $_=ke`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var R_=Object.defineProperty,P_=Object.getOwnPropertyDescriptor,Kf=(t,e,r,n)=>{for(var i=n>1?void 0:n?P_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&R_(e,r,i),i};let oo=class extends _e{constructor(){super(...arguments),this.onChange=()=>null}render(){return J`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${Be.SEARCH_ICON}`}};oo.styles=[Re.globalCss,$_],Kf([pe()],oo.prototype,"onChange",2),oo=Kf([Pe("wcm-search-input")],oo);const T_=ke`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var N_=Object.defineProperty,L_=Object.getOwnPropertyDescriptor,M_=(t,e,r,n)=>{for(var i=n>1?void 0:n?L_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&N_(e,r,i),i};let Kc=class extends _e{render(){return J`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};Kc.styles=[Re.globalCss,T_],Kc=M_([Pe("wcm-spinner")],Kc);const F_=ke`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var U_=Object.defineProperty,j_=Object.getOwnPropertyDescriptor,Gc=(t,e,r,n)=>{for(var i=n>1?void 0:n?j_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&U_(e,r,i),i};let ns=class extends _e{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return J`<span><slot class="${Rr(t)}"></slot></span>`}};ns.styles=[Re.globalCss,F_],Gc([pe()],ns.prototype,"variant",2),Gc([pe()],ns.prototype,"color",2),ns=Gc([Pe("wcm-text")],ns);const k_=ke`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var B_=Object.defineProperty,z_=Object.getOwnPropertyDescriptor,Gr=(t,e,r,n)=>{for(var i=n>1?void 0:n?z_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&B_(e,r,i),i};let Sr=class extends _e{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?J`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?J`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){dl.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return J`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${zt(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:ue.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};Sr.styles=[Re.globalCss,k_],Gr([pe()],Sr.prototype,"onClick",2),Gr([pe()],Sr.prototype,"name",2),Gr([pe()],Sr.prototype,"walletId",2),Gr([pe()],Sr.prototype,"label",2),Gr([pe()],Sr.prototype,"imageId",2),Gr([pe({type:Boolean})],Sr.prototype,"installed",2),Gr([pe({type:Boolean})],Sr.prototype,"recent",2),Sr=Gr([Pe("wcm-wallet-button")],Sr);const W_=ke`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var q_=Object.defineProperty,H_=Object.getOwnPropertyDescriptor,ao=(t,e,r,n)=>{for(var i=n>1?void 0:n?H_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&q_(e,r,i),i};let ri=class extends _e{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:ue.getWalletIcon({id:this.walletId,image_id:this.imageId});return J`${e.length?J`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:Be.WALLET_PLACEHOLDER}`}};ri.styles=[Re.globalCss,W_],ao([pe()],ri.prototype,"walletId",2),ao([pe()],ri.prototype,"imageId",2),ao([pe()],ri.prototype,"imageUrl",2),ri=ao([Pe("wcm-wallet-image")],ri);var V_=Object.defineProperty,K_=Object.getOwnPropertyDescriptor,Gf=(t,e,r,n)=>{for(var i=n>1?void 0:n?K_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&V_(e,r,i),i};let Yc=class extends _e{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>ue.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Yt.state.enableExplorer){await Wt.getRecomendedWallets(),ut.setIsDataLoaded(!0);const{recomendedWallets:t}=Wt.state,e=t.map(r=>ue.getWalletIcon(r));await this.loadImages(e)}else ut.setIsDataLoaded(!0)}async preloadCustomImages(){const t=ue.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),Ur.openToast("Failed preloading","error")}}};Gf([Kt()],Yc.prototype,"preload",2),Yc=Gf([Pe("wcm-explorer-context")],Yc);var G_=Object.defineProperty,Y_=Object.getOwnPropertyDescriptor,J_=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G_(e,r,i),i};let Yf=class extends _e{constructor(){super(),this.unsubscribeTheme=void 0,Re.setTheme(),this.unsubscribeTheme=Fr.subscribe(Re.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};Yf=J_([Pe("wcm-theme-context")],Yf);const Z_=ke`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var Q_=Object.defineProperty,X_=Object.getOwnPropertyDescriptor,e6=(t,e,r,n)=>{for(var i=n>1?void 0:n?X_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Q_(e,r,i),i};let Jc=class extends _e{onGoToQrcode(){et.push("Qrcode")}render(){const{recomendedWallets:t}=Wt.state,e=[...t,...t],r=ne.RECOMMENDED_WALLET_AMOUNT*2;return J`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${Be.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${Be.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?J`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:Be.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${ue.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};Jc.styles=[Re.globalCss,Z_],Jc=e6([Pe("wcm-android-wallet-selection")],Jc);const t6=ke`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var r6=Object.defineProperty,n6=Object.getOwnPropertyDescriptor,ni=(t,e,r,n)=>{for(var i=n>1?void 0:n?n6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&r6(e,r,i),i};let Yr=class extends _e{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=Fr.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:Re.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return J`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return J`<div class="${Rr(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${zt(this.walletId)}" imageId="${zt(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Yr.styles=[Re.globalCss,t6],ni([pe()],Yr.prototype,"walletId",2),ni([pe()],Yr.prototype,"imageId",2),ni([pe({type:Boolean})],Yr.prototype,"isError",2),ni([pe({type:Boolean})],Yr.prototype,"isStale",2),ni([pe()],Yr.prototype,"label",2),Yr=ni([Pe("wcm-connector-waiting")],Yr);const ii={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=Yt.state,i=(t=ii.recentWallet())==null?void 0:t.id,s=ne.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=ne.isMobile()?o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,mobile:u,links:u})):o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,desktop:u,links:u})))!=null?e:[]},recentWallet(){return ue.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=ii.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=Wt.state;return n.filter(i=>r!==i.id)}},Jr={onConnecting(t){ue.goToConnectingView(t)},manualWalletsTemplate(){return ii.manualWallets().map(t=>J`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return ii.recomendedWallets(t).map(e=>J`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=ii.recentWallet();if(t)return J`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${zt(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},i6=ke`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var s6=Object.defineProperty,o6=Object.getOwnPropertyDescriptor,a6=(t,e,r,n)=>{for(var i=n>1?void 0:n?o6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&s6(e,r,i),i};let Zc=class extends _e{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Yt.state,r=t!=="ALL"&&e,n=Jr.manualWalletsTemplate(),i=Jr.recomendedWalletsTemplate();let s=[Jr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const c=!!a.length;return J`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${Be.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${Be.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?J`<wcm-modal-footer><div class="wcm-desktop-title">${Be.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?J`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};Zc.styles=[Re.globalCss,i6],Zc=a6([Pe("wcm-desktop-wallet-selection")],Zc);const c6=ke`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var l6=Object.defineProperty,u6=Object.getOwnPropertyDescriptor,h6=(t,e,r,n)=>{for(var i=n>1?void 0:n?u6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&l6(e,r,i),i};let Qc=class extends _e{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Yt.state;return t??e?J`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?J`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?J`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};Qc.styles=[Re.globalCss,c6],Qc=h6([Pe("wcm-legal-notice")],Qc);const d6=ke`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var f6=Object.defineProperty,p6=Object.getOwnPropertyDescriptor,g6=(t,e,r,n)=>{for(var i=n>1?void 0:n?p6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&f6(e,r,i),i};let Xc=class extends _e{onQrcode(){et.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Yt.state,r=t!=="ALL"&&e,n=Jr.manualWalletsTemplate(),i=Jr.recomendedWalletsTemplate();let s=[Jr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const c=!!a.length;return J`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${Be.QRCODE_ICON}"></wcm-modal-header>${c?J`<wcm-modal-content><div>${a} ${o?J`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};Xc.styles=[Re.globalCss,d6],Xc=g6([Pe("wcm-mobile-wallet-selection")],Xc);const m6=ke`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var w6=Object.defineProperty,y6=Object.getOwnPropertyDescriptor,el=(t,e,r,n)=>{for(var i=n>1?void 0:n?y6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&w6(e,r,i),i};let si=class extends _e{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=sn.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return ue.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return ue.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&sn.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=ue.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([xn(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,xn(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=ue.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([xn(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,xn(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?sn.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return J`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${Rr(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?J`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};si.styles=[Re.globalCss,m6],el([Kt()],si.prototype,"open",2),el([Kt()],si.prototype,"active",2),si=el([Pe("wcm-modal")],si);const v6=ke`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var b6=Object.defineProperty,_6=Object.getOwnPropertyDescriptor,is=(t,e,r,n)=>{for(var i=n>1?void 0:n?_6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&b6(e,r,i),i};let Cn=class extends _e{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){ne.isMobile()?et.replace("MobileConnecting"):et.replace("MobileQrcodeConnecting")}onDesktop(){et.replace("DesktopConnecting")}onWeb(){et.replace("WebConnecting")}render(){return J`<div>${this.isRetry?J`<slot></slot>`:null} ${this.isMobile?J`<wcm-button .onClick="${this.onMobile}" .iconLeft="${Be.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?J`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${Be.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?J`<wcm-button .onClick="${this.onWeb}" .iconLeft="${Be.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};Cn.styles=[Re.globalCss,v6],is([pe({type:Boolean})],Cn.prototype,"isMobile",2),is([pe({type:Boolean})],Cn.prototype,"isDesktop",2),is([pe({type:Boolean})],Cn.prototype,"isWeb",2),is([pe({type:Boolean})],Cn.prototype,"isRetry",2),Cn=is([Pe("wcm-platform-selection")],Cn);const E6=ke`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var S6=Object.defineProperty,x6=Object.getOwnPropertyDescriptor,D6=(t,e,r,n)=>{for(var i=n>1?void 0:n?x6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&S6(e,r,i),i};let tl=class extends _e{onClick(){et.push("WalletExplorer")}render(){const{recomendedWallets:t}=Wt.state,e=ii.manualWallets(),r=[...t,...e].reverse().slice(0,4);return J`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=ue.getWalletIcon(n);if(i)return J`<img crossorigin="anonymous" src="${i}">`;const s=ue.getWalletIcon({id:n.id});return s?J`<img crossorigin="anonymous" src="${s}">`:Be.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>Be.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};tl.styles=[Re.globalCss,E6],tl=D6([Pe("wcm-view-all-wallets-button")],tl);const C6=ke`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var O6=Object.defineProperty,I6=Object.getOwnPropertyDescriptor,co=(t,e,r,n)=>{for(var i=n>1?void 0:n?I6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&O6(e,r,i),i};let oi=class extends _e{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=ut.state;this.uri=t},0)}get overlayEl(){return ue.getShadowRootElement(this,".wcm-qr-container")}render(){return J`<div class="wcm-qr-container">${this.uri?J`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${zt(this.walletId)}" imageId="${zt(this.imageId)}"></wcm-qrcode>`:J`<wcm-spinner></wcm-spinner>`}</div>`}};oi.styles=[Re.globalCss,C6],co([pe()],oi.prototype,"walletId",2),co([pe()],oi.prototype,"imageId",2),co([Kt()],oi.prototype,"uri",2),oi=co([Pe("wcm-walletconnect-qr")],oi);var A6=Object.defineProperty,$6=Object.getOwnPropertyDescriptor,R6=(t,e,r,n)=>{for(var i=n>1?void 0:n?$6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&A6(e,r,i),i};let rl=class extends _e{viewTemplate(){return ne.isAndroid()?J`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:ne.isMobile()?J`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:J`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return J`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};rl.styles=[Re.globalCss],rl=R6([Pe("wcm-connect-wallet-view")],rl);const P6=ke`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var T6=Object.defineProperty,N6=Object.getOwnPropertyDescriptor,Jf=(t,e,r,n)=>{for(var i=n>1?void 0:n?N6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&T6(e,r,i),i};let lo=class extends _e{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=ne.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=ne.formatNativeUrl(n,t,r);ne.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=ut.state,e=ne.getWalletRouterData();ue.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isMobile:n,isWeb:i}=ue.getCachedRouterWalletPlatforms();return J`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${Be.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};lo.styles=[Re.globalCss,P6],Jf([Kt()],lo.prototype,"isError",2),lo=Jf([Pe("wcm-desktop-connecting-view")],lo);const L6=ke`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var M6=Object.defineProperty,F6=Object.getOwnPropertyDescriptor,U6=(t,e,r,n)=>{for(var i=n>1?void 0:n?F6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&M6(e,r,i),i};let nl=class extends _e{onInstall(t){t&&ne.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=ne.getWalletRouterData();return J`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${Be.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};nl.styles=[Re.globalCss,L6],nl=U6([Pe("wcm-install-wallet-view")],nl);const j6=ke`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var k6=Object.defineProperty,B6=Object.getOwnPropertyDescriptor,Zf=(t,e,r,n)=>{for(var i=n>1?void 0:n?B6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&k6(e,r,i),i};let uo=class extends _e{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=ne.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=ne.formatNativeUrl(i,t,n);ne.openHref(o,"_self")}else if(s){const o=ne.formatUniversalUrl(s,t,n);ne.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=ut.state,r=ne.getWalletRouterData();ue.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&ne.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=ne.getWalletRouterData(),{isWeb:s}=ue.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return J`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="Tap 'Open' to continue" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${Be.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?J`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${zt(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${Be.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};uo.styles=[Re.globalCss,j6],Zf([Kt()],uo.prototype,"isError",2),uo=Zf([Pe("wcm-mobile-connecting-view")],uo);const z6=ke`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var W6=Object.defineProperty,q6=Object.getOwnPropertyDescriptor,H6=(t,e,r,n)=>{for(var i=n>1?void 0:n?q6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&W6(e,r,i),i};let il=class extends _e{render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isDesktop:n,isWeb:i}=ue.getCachedRouterWalletPlatforms();return J`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${zt(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};il.styles=[Re.globalCss,z6],il=H6([Pe("wcm-mobile-qr-connecting-view")],il);var V6=Object.defineProperty,K6=Object.getOwnPropertyDescriptor,G6=(t,e,r,n)=>{for(var i=n>1?void 0:n?K6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&V6(e,r,i),i};let sl=class extends _e{render(){return J`<wcm-modal-header title="Scan the code" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};sl.styles=[Re.globalCss],sl=G6([Pe("wcm-qrcode-view")],sl);const Y6=ke`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var J6=Object.defineProperty,Z6=Object.getOwnPropertyDescriptor,ss=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&J6(e,r,i),i};const ol=40;let On=class extends _e{constructor(){super(...arguments),this.loading=!Wt.state.wallets.listings.length,this.firstFetch=!Wt.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=ue.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,Wt.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),Wt.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return ue.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=Wt.state,{listings:r,total:n}=this.search?e:t;return n<=ol||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=Wt.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>ol&&n.length<i))try{this.loading=!0;const o=(t=ut.state.chains)==null?void 0:t.join(","),{listings:a}=await Wt.getWallets({page:this.firstFetch?1:s+1,entries:ol,search:this.search,version:2,chains:o}),c=a.map(u=>ue.getWalletIcon(u));await Promise.all([...c.map(async u=>ue.preloadImage(u)),ne.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),Ur.openToast(ue.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){ne.isAndroid()?ue.handleMobileLinking(t):ue.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=Wt.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=Jr.manualWalletsTemplate(),o=Jr.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:u})=>ue.caseSafeIncludes(u[0],this.search)),o=o.filter(({values:u})=>ue.caseSafeIncludes(u[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return J`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${Rr(c)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(u=>J`${u?J`<wcm-wallet-button imageId="${u.image_id}" name="${u.name}" walletId="${u.id}" .onClick="${()=>this.onConnect(u)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?J`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?J`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};On.styles=[Re.globalCss,Y6],ss([Kt()],On.prototype,"loading",2),ss([Kt()],On.prototype,"firstFetch",2),ss([Kt()],On.prototype,"search",2),ss([Kt()],On.prototype,"endReached",2),On=ss([Pe("wcm-wallet-explorer-view")],On);const Q6=ke`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var X6=Object.defineProperty,eE=Object.getOwnPropertyDescriptor,Qf=(t,e,r,n)=>{for(var i=n>1?void 0:n?eE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&X6(e,r,i),i};let ho=class extends _e{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=ne.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=ne.formatUniversalUrl(n,t,r);ne.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=ut.state,e=ne.getWalletRouterData();ue.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isMobile:n,isDesktop:i}=ue.getCachedRouterWalletPlatforms(),s=ne.isMobile();return J`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${Be.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};ho.styles=[Re.globalCss,Q6],Qf([Kt()],ho.prototype,"isError",2),ho=Qf([Pe("wcm-web-connecting-view")],ho);const tE=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return si},get WcmQrCode(){return Tr}},Symbol.toStringTag,{value:"Module"}));ze.EventType=Ud,ze.PuzzleWalletProvider=d2,ze.PuzzleWeb3Modal=h2,ze.RECORDS_PER_PAGE=V2,ze.Visibility=jd,ze.getFormattedRecordPlaintext=K2,ze.projectId=md,ze.shortenAddress=tc,ze.signClient_puzzleProps=u2,ze.useAccount=F2,ze.useBalance=U2,ze.useConnect=j2,ze.useDecrypt=q2,ze.useDisconnect=H2,ze.useInitWallet=Fd,ze.useRecords=G2,ze.useRequestCreateEvent=Y2,ze.walletURL=Ta,ze.wc_aleo_chains=Us,ze.wc_aleo_methods=Ra,ze.wc_events=Pa,ze.web3modal_puzzle_props=wd,Object.defineProperty(ze,Symbol.toStringTag,{value:"Module"})});
