(function(G,yt){typeof exports=="object"&&typeof module<"u"?yt(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],yt):(G=typeof globalThis<"u"?globalThis:G||self,yt(G["@puzzlehq/sdk"]=G["@puzzlehq/sdk"]||{},G.React))})(this,function(G,yt){"use strict";const e0={name:"@puzzlehq/sdk",displayName:"Puzzle SDK",version:"0.1.36",description:"Your portal to privacy",main:"./dist/puzzle.cjs.js",module:"./dist/puzzle.es.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts",exports:{".":{import:"./dist/puzzle.es.js",require:"./dist/puzzle.cjs.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts"}},type:"module",scripts:{build:"vite build && tsc --declaration --emitDeclarationOnly --outDir dist/types","type-check":"tsc --noEmit"},dependencies:{"@tanstack/react-query":"^4.29.5","@trpc/client":"^10.9.0","@trpc/react-query":"^10.9.0","@trpc/server":"^10.8.1","@types/debug":"^4.1.7","@walletconnect/modal-sign-html":"^2.6.2","@walletconnect/types":"^2.9.0","@walletconnect/utils":"^2.9.0",debug:"^4.3.4",eventemitter3:"^5.0.1",events:"^3.3.0",immer:"^9.0.19",react:"^18.2.0",ws:"^8.13.0",zustand:"^4.3.9"},devDependencies:{"@puzzlehq/types":"1.0.7","@types/chrome":"^0.0.228","@types/node":"^18.11.18","@types/react":"^18.0.27","@types/react-dom":"^18.0.10",typescript:"^4.9.4",vite:"^4.4.7"},repository:{type:"git",url:"git+https://github.com/puzzlehq/puzzle-sdk.git"},keywords:["puzzle","aleo","aztec","web3","crypto\\"],author:"Puzzle",license:"ISC",bugs:{url:"https://github.com/puzzlehq/puzzle-sdk/issues"},homepage:"https://github.com/puzzlehq/puzzle-sdk#readme",pnpm:{patchedDependencies:{"@walletconnect/keyvaluestorage@1.0.2":"patches/@walletconnect__keyvaluestorage@1.0.2.patch"}}},t0=Symbol(),su=Object.getPrototypeOf,va=new WeakMap,r0=t=>t&&(va.has(t)?va.get(t):su(t)===Object.prototype||su(t)===Array.prototype),n0=t=>r0(t)&&t[t0]||null,ou=(t,e=!0)=>{va.set(t,e)},wa=t=>typeof t=="object"&&t!==null,hn=new WeakMap,Xs=new WeakSet,i0=(t=Object.is,e=(u,d)=>new Proxy(u,d),r=u=>wa(u)&&!Xs.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),n=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},i=new WeakMap,s=(u,d,f=n)=>{const p=i.get(u);if((p==null?void 0:p[0])===d)return p[1];const y=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return ou(y,!0),i.set(u,[d,y]),Reflect.ownKeys(u).forEach(b=>{if(Object.getOwnPropertyDescriptor(y,b))return;const S=Reflect.get(u,b),C={value:S,enumerable:!0,configurable:!0};if(Xs.has(S))ou(S,!1);else if(S instanceof Promise)delete C.value,C.get=()=>f(S);else if(hn.has(S)){const[A,E]=hn.get(S);C.value=s(A,E(),f)}Object.defineProperty(y,b,C)}),Object.preventExtensions(y)},o=new WeakMap,a=[1,1],c=u=>{if(!wa(u))throw new Error("object required");const d=o.get(u);if(d)return d;let f=a[0];const p=new Set,y=(N,$=++a[0])=>{f!==$&&(f=$,p.forEach(z=>z(N,$)))};let b=a[1];const S=(N=++a[1])=>(b!==N&&!p.size&&(b=N,A.forEach(([$])=>{const z=$[1](N);z>f&&(f=z)})),f),C=N=>($,z)=>{const W=[...$];W[1]=[N,...W[1]],y(W,z)},A=new Map,E=(N,$)=>{if(p.size){const z=$[3](C(N));A.set(N,[$,z])}else A.set(N,[$])},x=N=>{var $;const z=A.get(N);z&&(A.delete(N),($=z[1])==null||$.call(z))},v=N=>(p.add(N),p.size===1&&A.forEach(([z,W],X)=>{const R=z[3](C(X));A.set(X,[z,R])}),()=>{p.delete(N),p.size===0&&A.forEach(([z,W],X)=>{W&&(W(),A.set(X,[z]))})}),w=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),l=e(w,{deleteProperty(N,$){const z=Reflect.get(N,$);x($);const W=Reflect.deleteProperty(N,$);return W&&y(["delete",[$],z]),W},set(N,$,z,W){const X=Reflect.has(N,$),R=Reflect.get(N,$,W);if(X&&(t(R,z)||o.has(z)&&t(R,o.get(z))))return!0;x($),wa(z)&&(z=n0(z)||z);let j=z;if(z instanceof Promise)z.then(se=>{z.status="fulfilled",z.value=se,y(["resolve",[$],se])}).catch(se=>{z.status="rejected",z.reason=se,y(["reject",[$],se])});else{!hn.has(z)&&r(z)&&(j=c(z));const se=!Xs.has(j)&&hn.get(j);se&&E($,se)}return Reflect.set(N,$,j,W),y(["set",[$],z,R]),!0}});o.set(u,l);const m=[w,S,s,v];return hn.set(l,m),Reflect.ownKeys(u).forEach(N=>{const $=Object.getOwnPropertyDescriptor(u,N);"value"in $&&(l[N]=u[N],delete $.value,delete $.writable),Object.defineProperty(w,N,$)}),l})=>[c,hn,Xs,t,e,r,n,i,s,o,a],[s0]=i0();function fn(t={}){return s0(t)}function Rn(t,e,r){const n=hn.get(t);let i;const s=[],o=n[3];let a=!1;const u=o(d=>{if(s.push(d),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,u()}}function o0(t,e){const r=hn.get(t),[n,i,s]=r;return s(n,i(),e)}const Ft=fn({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),vt={state:Ft,subscribe(t){return Rn(Ft,()=>t(Ft))},push(t,e){t!==Ft.view&&(Ft.view=t,e&&(Ft.data=e),Ft.history.push(t))},reset(t){Ft.view=t,Ft.history=[t]},replace(t){Ft.history.length>1&&(Ft.history[Ft.history.length-1]=t,Ft.view=t)},goBack(){if(Ft.history.length>1){Ft.history.pop();const[t]=Ft.history.slice(-1);Ft.view=t}},setData(t){Ft.data=t}},me={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return me.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return me.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(me.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!me.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(me.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(me.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(me.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(me.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=vt.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},a0=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),Kt=fn({enabled:a0,userSessionId:"",events:[],connectedWalletId:void 0}),au={state:Kt,subscribe(t){return Rn(Kt.events,()=>t(o0(Kt.events[Kt.events.length-1])))},initialize(){Kt.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(Kt.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){Kt.connectedWalletId=t},click(t){if(Kt.enabled){const e={type:"CLICK",name:t.name,userSessionId:Kt.userSessionId,timestamp:Date.now(),data:t};Kt.events.push(e)}},track(t){if(Kt.enabled){const e={type:"TRACK",name:t.name,userSessionId:Kt.userSessionId,timestamp:Date.now(),data:t};Kt.events.push(e)}},view(t){if(Kt.enabled){const e={type:"VIEW",name:t.name,userSessionId:Kt.userSessionId,timestamp:Date.now(),data:t};Kt.events.push(e)}}},Fr=fn({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),At={state:Fr,subscribe(t){return Rn(Fr,()=>t(Fr))},setChains(t){Fr.chains=t},setWalletConnectUri(t){Fr.walletConnectUri=t},setIsCustomDesktop(t){Fr.isCustomDesktop=t},setIsCustomMobile(t){Fr.isCustomMobile=t},setIsDataLoaded(t){Fr.isDataLoaded=t},setIsUiLoaded(t){Fr.isUiLoaded=t},setIsAuth(t){Fr.isAuth=t}},eo=fn({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),mr={state:eo,subscribe(t){return Rn(eo,()=>t(eo))},setConfig(t){var e,r;au.initialize(),At.setChains(t.chains),At.setIsAuth(!!t.enableAuthMode),At.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),At.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),me.setModalVersionInStorage(),Object.assign(eo,t)}};var c0=Object.defineProperty,cu=Object.getOwnPropertySymbols,l0=Object.prototype.hasOwnProperty,u0=Object.prototype.propertyIsEnumerable,lu=(t,e,r)=>e in t?c0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d0=(t,e)=>{for(var r in e||(e={}))l0.call(e,r)&&lu(t,r,e[r]);if(cu)for(var r of cu(e))u0.call(e,r)&&lu(t,r,e[r]);return t};const ba="https://explorer-api.walletconnect.com",_a="wcm",Ea="js-2.6.2";async function to(t,e){const r=d0({sdkType:_a,sdkVersion:Ea},e),n=new URL(t,ba);return n.searchParams.append("projectId",mr.state.projectId),Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,String(s))}),(await fetch(n)).json()}const Pn={async getDesktopListings(t){return to("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return to("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return to("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return to("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${ba}/w3m/v1/getWalletImage/${t}?projectId=${mr.state.projectId}&sdkType=${_a}&sdkVersion=${Ea}`},getAssetImageUrl(t){return`${ba}/w3m/v1/getAssetImage/${t}?projectId=${mr.state.projectId}&sdkType=${_a}&sdkVersion=${Ea}`}};var h0=Object.defineProperty,uu=Object.getOwnPropertySymbols,f0=Object.prototype.hasOwnProperty,p0=Object.prototype.propertyIsEnumerable,du=(t,e,r)=>e in t?h0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,g0=(t,e)=>{for(var r in e||(e={}))f0.call(e,r)&&du(t,r,e[r]);if(uu)for(var r of uu(e))p0.call(e,r)&&du(t,r,e[r]);return t};const hu=me.isMobile(),Br=fn({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),lr={state:Br,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=mr.state;if(t==="NONE"||e==="ALL"&&!t)return Br.recomendedWallets;if(me.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await Pn.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),c=t.indexOf(o.id);return a-c}),Br.recomendedWallets=i}else{const{chains:r,isAuth:n}=At.state,i=r==null?void 0:r.join(","),s=me.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:me.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=hu?await Pn.getMobileListings(o):await Pn.getDesktopListings(o);Br.recomendedWallets=Object.values(a)}return Br.recomendedWallets},async getWallets(t){const e=g0({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=mr.state,{recomendedWallets:i}=Br;if(n==="ALL")return Br.wallets;i.length?e.excludedIds=i.map(f=>f.id).join(","):me.isArray(r)&&(e.excludedIds=r.join(",")),me.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),At.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=hu?await Pn.getMobileListings(e):await Pn.getDesktopListings(e),u=Object.values(a),d=o?"search":"wallets";return Br[d]={listings:[...Br[d].listings,...u],total:c,page:s??1},{listings:u,total:c}},getWalletImageUrl(t){return Pn.getWalletImageUrl(t)},getAssetImageUrl(t){return Pn.getAssetImageUrl(t)},resetSearch(){Br.search={listings:[],total:0,page:1}}},ui=fn({open:!1}),Ln={state:ui,subscribe(t){return Rn(ui,()=>t(ui))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=At.state;if(me.removeWalletConnectDeepLink(),At.setWalletConnectUri(t==null?void 0:t.uri),At.setChains(t==null?void 0:t.chains),vt.reset("ConnectWallet"),r&&n)ui.open=!0,e();else{const i=setInterval(()=>{const s=At.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),ui.open=!0,e())},200)}})},close(){ui.open=!1}};var m0=Object.defineProperty,fu=Object.getOwnPropertySymbols,y0=Object.prototype.hasOwnProperty,v0=Object.prototype.propertyIsEnumerable,pu=(t,e,r)=>e in t?m0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,w0=(t,e)=>{for(var r in e||(e={}))y0.call(e,r)&&pu(t,r,e[r]);if(fu)for(var r of fu(e))v0.call(e,r)&&pu(t,r,e[r]);return t};function b0(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Wi=fn({themeMode:b0()?"dark":"light"}),pn={state:Wi,subscribe(t){return Rn(Wi,()=>t(Wi))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(Wi.themeMode=e),r&&(Wi.themeVariables=w0({},r))}},Mn=fn({open:!1,message:"",variant:"success"}),gn={state:Mn,subscribe(t){return Rn(Mn,()=>t(Mn))},openToast(t,e){Mn.open=!0,Mn.message=t,Mn.variant=e},closeToast(){Mn.open=!1}};let _0=class{constructor(e){this.openModal=Ln.open,this.closeModal=Ln.close,this.subscribeModal=Ln.subscribe,this.setTheme=pn.setThemeConfig,pn.setThemeConfig(e),mr.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>Q4);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),At.setIsUiLoaded(!0)}}};var zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Sa(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var xa={exports:{}},di=typeof Reflect=="object"?Reflect:null,gu=di&&typeof di.apply=="function"?di.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ro;di&&typeof di.ownKeys=="function"?ro=di.ownKeys:Object.getOwnPropertySymbols?ro=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ro=function(e){return Object.getOwnPropertyNames(e)};function E0(t){console&&console.warn&&console.warn(t)}var mu=Number.isNaN||function(e){return e!==e};function ot(){ot.init.call(this)}xa.exports=ot,xa.exports.once=I0,ot.EventEmitter=ot,ot.prototype._events=void 0,ot.prototype._eventsCount=0,ot.prototype._maxListeners=void 0;var yu=10;function no(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return yu},set:function(t){if(typeof t!="number"||t<0||mu(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");yu=t}}),ot.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||mu(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function vu(t){return t._maxListeners===void 0?ot.defaultMaxListeners:t._maxListeners}ot.prototype.getMaxListeners=function(){return vu(this)},ot.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")gu(c,this,r);else for(var u=c.length,d=Su(c,u),n=0;n<u;++n)gu(d[n],this,r);return!0};function wu(t,e,r,n){var i,s,o;if(no(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=vu(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,E0(a)}return t}ot.prototype.addListener=function(e,r){return wu(this,e,r,!1)},ot.prototype.on=ot.prototype.addListener,ot.prototype.prependListener=function(e,r){return wu(this,e,r,!0)};function S0(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function bu(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=S0.bind(n);return i.listener=r,n.wrapFn=i,i}ot.prototype.once=function(e,r){return no(r),this.on(e,bu(this,e,r)),this},ot.prototype.prependOnceListener=function(e,r){return no(r),this.prependListener(e,bu(this,e,r)),this},ot.prototype.removeListener=function(e,r){var n,i,s,o,a;if(no(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():x0(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},ot.prototype.off=ot.prototype.removeListener,ot.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function _u(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?C0(i):Su(i,i.length)}ot.prototype.listeners=function(e){return _u(this,e,!0)},ot.prototype.rawListeners=function(e){return _u(this,e,!1)},ot.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Eu.call(t,e)},ot.prototype.listenerCount=Eu;function Eu(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ot.prototype.eventNames=function(){return this._eventsCount>0?ro(this._events):[]};function Su(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function x0(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function C0(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function I0(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}xu(t,e,s,{once:!0}),e!=="error"&&D0(t,i,{once:!0})})}function D0(t,e,r){typeof t.on=="function"&&xu(t,"error",e,r)}function xu(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Sr=xa.exports;const Ca=Vi(Sr);var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function so(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cu={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function o(u,d){if(!i[u]){if(!n[u]){var f=typeof so=="function"&&so;if(!d&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var y=i[u]={exports:{}};n[u][0].call(y.exports,function(b){var S=n[u][1][b];return o(S||b)},y,y.exports,r,n,i,s)}return i[u].exports}for(var a=typeof so=="function"&&so,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(r,n,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var c=0,u=new o(b),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=c=++c%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=b,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var C=s.document.createElement("script");C.onreadystatechange=function(){b(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},s.document.documentElement.appendChild(C)}:a=function(){setTimeout(b,0)};var p,y=[];function b(){p=!0;for(var C,A,E=y.length;E;){for(A=y,y=[],C=-1;++C<E;)A[C]();E=y.length}p=!1}n.exports=S;function S(C){y.push(C)===1&&!p&&a()}}).call(this,typeof io<"u"?io:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,i){var s=r(1);function o(){}var a={},c=["REJECTED"],u=["FULFILLED"],d=["PENDING"];n.exports=f;function f(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,w!==o&&S(this,w)}f.prototype.catch=function(w){return this.then(null,w)},f.prototype.then=function(w,g){if(typeof w!="function"&&this.state===u||typeof g!="function"&&this.state===c)return this;var l=new this.constructor(o);if(this.state!==d){var m=this.state===u?w:g;y(l,m,this.outcome)}else this.queue.push(new p(l,w,g));return l};function p(w,g,l){this.promise=w,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof l=="function"&&(this.onRejected=l,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(w){a.resolve(this.promise,w)},p.prototype.otherCallFulfilled=function(w){y(this.promise,this.onFulfilled,w)},p.prototype.callRejected=function(w){a.reject(this.promise,w)},p.prototype.otherCallRejected=function(w){y(this.promise,this.onRejected,w)};function y(w,g,l){s(function(){var m;try{m=g(l)}catch(N){return a.reject(w,N)}m===w?a.reject(w,new TypeError("Cannot resolve promise with itself")):a.resolve(w,m)})}a.resolve=function(w,g){var l=C(b,g);if(l.status==="error")return a.reject(w,l.value);var m=l.value;if(m)S(w,m);else{w.state=u,w.outcome=g;for(var N=-1,$=w.queue.length;++N<$;)w.queue[N].callFulfilled(g)}return w},a.reject=function(w,g){w.state=c,w.outcome=g;for(var l=-1,m=w.queue.length;++l<m;)w.queue[l].callRejected(g);return w};function b(w){var g=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof g=="function")return function(){g.apply(w,arguments)}}function S(w,g){var l=!1;function m(W){l||(l=!0,a.reject(w,W))}function N(W){l||(l=!0,a.resolve(w,W))}function $(){g(N,m)}var z=C($);z.status==="error"&&m(z.value)}function C(w,g){var l={};try{l.value=w(g),l.status="success"}catch(m){l.status="error",l.value=m}return l}f.resolve=A;function A(w){return w instanceof this?w:a.resolve(new this(o),w)}f.reject=E;function E(w){var g=new this(o);return a.reject(g,w)}f.all=x;function x(w){var g=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=w.length,m=!1;if(!l)return this.resolve([]);for(var N=new Array(l),$=0,z=-1,W=new this(o);++z<l;)X(w[z],z);return W;function X(R,j){g.resolve(R).then(se,function(Z){m||(m=!0,a.reject(W,Z))});function se(Z){N[j]=Z,++$===l&&!m&&(m=!0,a.resolve(W,N))}}}f.race=v;function v(w){var g=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=w.length,m=!1;if(!l)return this.resolve([]);for(var N=-1,$=new this(o);++N<l;)z(w[N]);return $;function z(W){g.resolve(W).then(function(X){m||(m=!0,a.resolve($,X))},function(X){m||(m=!0,a.reject($,X))})}}},{1:1}],3:[function(r,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof io<"u"?io:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};function o(_,O){if(!(_ instanceof O))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=a();function u(){try{if(!c||!c.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),O=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!_||O)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(_,O){_=_||[],O=O||{};try{return new Blob(_,O)}catch(U){if(U.name!=="TypeError")throw U;for(var D=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,k=new D,P=0;P<_.length;P+=1)k.append(_[P]);return k.getBlob(O.type)}}typeof Promise>"u"&&r(3);var f=Promise;function p(_,O){O&&_.then(function(D){O(null,D)},function(D){O(D)})}function y(_,O,D){typeof O=="function"&&_.then(O),typeof D=="function"&&_.catch(D)}function b(_){return typeof _!="string"&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function S(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var C="local-forage-detect-blob-support",A=void 0,E={},x=Object.prototype.toString,v="readonly",w="readwrite";function g(_){for(var O=_.length,D=new ArrayBuffer(O),k=new Uint8Array(D),P=0;P<O;P++)k[P]=_.charCodeAt(P);return D}function l(_){return new f(function(O){var D=_.transaction(C,w),k=d([""]);D.objectStore(C).put(k,"key"),D.onabort=function(P){P.preventDefault(),P.stopPropagation(),O(!1)},D.oncomplete=function(){var P=navigator.userAgent.match(/Chrome\/(\d+)/),U=navigator.userAgent.match(/Edge\//);O(U||!P||parseInt(P[1],10)>=43)}}).catch(function(){return!1})}function m(_){return typeof A=="boolean"?f.resolve(A):l(_).then(function(O){return A=O,A})}function N(_){var O=E[_.name],D={};D.promise=new f(function(k,P){D.resolve=k,D.reject=P}),O.deferredOperations.push(D),O.dbReady?O.dbReady=O.dbReady.then(function(){return D.promise}):O.dbReady=D.promise}function $(_){var O=E[_.name],D=O.deferredOperations.pop();if(D)return D.resolve(),D.promise}function z(_,O){var D=E[_.name],k=D.deferredOperations.pop();if(k)return k.reject(O),k.promise}function W(_,O){return new f(function(D,k){if(E[_.name]=E[_.name]||_e(),_.db)if(O)N(_),_.db.close();else return D(_.db);var P=[_.name];O&&P.push(_.version);var U=c.open.apply(c,P);O&&(U.onupgradeneeded=function(q){var Q=U.result;try{Q.createObjectStore(_.storeName),q.oldVersion<=1&&Q.createObjectStore(C)}catch(re){if(re.name==="ConstraintError")console.warn('The database "'+_.name+'" has been upgraded from version '+q.oldVersion+" to version "+q.newVersion+', but the storage "'+_.storeName+'" already exists.');else throw re}}),U.onerror=function(q){q.preventDefault(),k(U.error)},U.onsuccess=function(){var q=U.result;q.onversionchange=function(Q){Q.target.close()},D(q),$(_)}})}function X(_){return W(_,!1)}function R(_){return W(_,!0)}function j(_,O){if(!_.db)return!0;var D=!_.db.objectStoreNames.contains(_.storeName),k=_.version<_.db.version,P=_.version>_.db.version;if(k&&(_.version!==O&&console.warn('The database "'+_.name+`" can't be downgraded from version `+_.db.version+" to version "+_.version+"."),_.version=_.db.version),P||D){if(D){var U=_.db.version+1;U>_.version&&(_.version=U)}return!0}return!1}function se(_){return new f(function(O,D){var k=new FileReader;k.onerror=D,k.onloadend=function(P){var U=btoa(P.target.result||"");O({__local_forage_encoded_blob:!0,data:U,type:_.type})},k.readAsBinaryString(_)})}function Z(_){var O=g(atob(_.data));return d([O],{type:_.type})}function H(_){return _&&_.__local_forage_encoded_blob}function Y(_){var O=this,D=O._initReady().then(function(){var k=E[O._dbInfo.name];if(k&&k.dbReady)return k.dbReady});return y(D,_,_),D}function V(_){N(_);for(var O=E[_.name],D=O.forages,k=0;k<D.length;k++){var P=D[k];P._dbInfo.db&&(P._dbInfo.db.close(),P._dbInfo.db=null)}return _.db=null,X(_).then(function(U){return _.db=U,j(_)?R(_):U}).then(function(U){_.db=O.db=U;for(var q=0;q<D.length;q++)D[q]._dbInfo.db=U}).catch(function(U){throw z(_,U),U})}function J(_,O,D,k){k===void 0&&(k=1);try{var P=_.db.transaction(_.storeName,O);D(null,P)}catch(U){if(k>0&&(!_.db||U.name==="InvalidStateError"||U.name==="NotFoundError"))return f.resolve().then(function(){if(!_.db||U.name==="NotFoundError"&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),R(_)}).then(function(){return V(_).then(function(){J(_,O,D,k-1)})}).catch(D);D(U)}}function _e(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ne(_){var O=this,D={db:null};if(_)for(var k in _)D[k]=_[k];var P=E[D.name];P||(P=_e(),E[D.name]=P),P.forages.push(O),O._initReady||(O._initReady=O.ready,O.ready=Y);var U=[];function q(){return f.resolve()}for(var Q=0;Q<P.forages.length;Q++){var re=P.forages[Q];re!==O&&U.push(re._initReady().catch(q))}var te=P.forages.slice(0);return f.all(U).then(function(){return D.db=P.db,X(D)}).then(function(ee){return D.db=ee,j(D,O._defaultConfig.version)?R(D):ee}).then(function(ee){D.db=P.db=ee,O._dbInfo=D;for(var ge=0;ge<te.length;ge++){var je=te[ge];je!==O&&(je._dbInfo.db=D.db,je._dbInfo.version=D.version)}})}function ve(_,O){var D=this;_=b(_);var k=new f(function(P,U){D.ready().then(function(){J(D._dbInfo,v,function(q,Q){if(q)return U(q);try{var re=Q.objectStore(D._dbInfo.storeName),te=re.get(_);te.onsuccess=function(){var ee=te.result;ee===void 0&&(ee=null),H(ee)&&(ee=Z(ee)),P(ee)},te.onerror=function(){U(te.error)}}catch(ee){U(ee)}})}).catch(U)});return p(k,O),k}function de(_,O){var D=this,k=new f(function(P,U){D.ready().then(function(){J(D._dbInfo,v,function(q,Q){if(q)return U(q);try{var re=Q.objectStore(D._dbInfo.storeName),te=re.openCursor(),ee=1;te.onsuccess=function(){var ge=te.result;if(ge){var je=ge.value;H(je)&&(je=Z(je));var st=_(je,ge.key,ee++);st!==void 0?P(st):ge.continue()}else P()},te.onerror=function(){U(te.error)}}catch(ge){U(ge)}})}).catch(U)});return p(k,O),k}function we(_,O,D){var k=this;_=b(_);var P=new f(function(U,q){var Q;k.ready().then(function(){return Q=k._dbInfo,x.call(O)==="[object Blob]"?m(Q.db).then(function(re){return re?O:se(O)}):O}).then(function(re){J(k._dbInfo,w,function(te,ee){if(te)return q(te);try{var ge=ee.objectStore(k._dbInfo.storeName);re===null&&(re=void 0);var je=ge.put(re,_);ee.oncomplete=function(){re===void 0&&(re=null),U(re)},ee.onabort=ee.onerror=function(){var st=je.error?je.error:je.transaction.error;q(st)}}catch(st){q(st)}})}).catch(q)});return p(P,D),P}function B(_,O){var D=this;_=b(_);var k=new f(function(P,U){D.ready().then(function(){J(D._dbInfo,w,function(q,Q){if(q)return U(q);try{var re=Q.objectStore(D._dbInfo.storeName),te=re.delete(_);Q.oncomplete=function(){P()},Q.onerror=function(){U(te.error)},Q.onabort=function(){var ee=te.error?te.error:te.transaction.error;U(ee)}}catch(ee){U(ee)}})}).catch(U)});return p(k,O),k}function F(_){var O=this,D=new f(function(k,P){O.ready().then(function(){J(O._dbInfo,w,function(U,q){if(U)return P(U);try{var Q=q.objectStore(O._dbInfo.storeName),re=Q.clear();q.oncomplete=function(){k()},q.onabort=q.onerror=function(){var te=re.error?re.error:re.transaction.error;P(te)}}catch(te){P(te)}})}).catch(P)});return p(D,_),D}function L(_){var O=this,D=new f(function(k,P){O.ready().then(function(){J(O._dbInfo,v,function(U,q){if(U)return P(U);try{var Q=q.objectStore(O._dbInfo.storeName),re=Q.count();re.onsuccess=function(){k(re.result)},re.onerror=function(){P(re.error)}}catch(te){P(te)}})}).catch(P)});return p(D,_),D}function h(_,O){var D=this,k=new f(function(P,U){if(_<0){P(null);return}D.ready().then(function(){J(D._dbInfo,v,function(q,Q){if(q)return U(q);try{var re=Q.objectStore(D._dbInfo.storeName),te=!1,ee=re.openKeyCursor();ee.onsuccess=function(){var ge=ee.result;if(!ge){P(null);return}_===0||te?P(ge.key):(te=!0,ge.advance(_))},ee.onerror=function(){U(ee.error)}}catch(ge){U(ge)}})}).catch(U)});return p(k,O),k}function T(_){var O=this,D=new f(function(k,P){O.ready().then(function(){J(O._dbInfo,v,function(U,q){if(U)return P(U);try{var Q=q.objectStore(O._dbInfo.storeName),re=Q.openKeyCursor(),te=[];re.onsuccess=function(){var ee=re.result;if(!ee){k(te);return}te.push(ee.key),ee.continue()},re.onerror=function(){P(re.error)}}catch(ee){P(ee)}})}).catch(P)});return p(D,_),D}function oe(_,O){O=S.apply(this,arguments);var D=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||D.name,_.storeName=_.storeName||D.storeName);var k=this,P;if(!_.name)P=f.reject("Invalid arguments");else{var U=_.name===D.name&&k._dbInfo.db,q=U?f.resolve(k._dbInfo.db):X(_).then(function(Q){var re=E[_.name],te=re.forages;re.db=Q;for(var ee=0;ee<te.length;ee++)te[ee]._dbInfo.db=Q;return Q});_.storeName?P=q.then(function(Q){if(Q.objectStoreNames.contains(_.storeName)){var re=Q.version+1;N(_);var te=E[_.name],ee=te.forages;Q.close();for(var ge=0;ge<ee.length;ge++){var je=ee[ge];je._dbInfo.db=null,je._dbInfo.version=re}var st=new f(function(tt,ht){var it=c.open(_.name,re);it.onerror=function(gr){var Js=it.result;Js.close(),ht(gr)},it.onupgradeneeded=function(){var gr=it.result;gr.deleteObjectStore(_.storeName)},it.onsuccess=function(){var gr=it.result;gr.close(),tt(gr)}});return st.then(function(tt){te.db=tt;for(var ht=0;ht<ee.length;ht++){var it=ee[ht];it._dbInfo.db=tt,$(it._dbInfo)}}).catch(function(tt){throw(z(_,tt)||f.resolve()).catch(function(){}),tt})}}):P=q.then(function(Q){N(_);var re=E[_.name],te=re.forages;Q.close();for(var ee=0;ee<te.length;ee++){var ge=te[ee];ge._dbInfo.db=null}var je=new f(function(st,tt){var ht=c.deleteDatabase(_.name);ht.onerror=function(){var it=ht.result;it&&it.close(),tt(ht.error)},ht.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},ht.onsuccess=function(){var it=ht.result;it&&it.close(),st(it)}});return je.then(function(st){re.db=st;for(var tt=0;tt<te.length;tt++){var ht=te[tt];$(ht._dbInfo)}}).catch(function(st){throw(z(_,st)||f.resolve()).catch(function(){}),st})})}return p(P,O),P}var le={_driver:"asyncStorage",_initStorage:ne,_support:u(),iterate:de,getItem:ve,setItem:we,removeItem:B,clear:F,length:L,key:h,keys:T,dropInstance:oe};function Be(){return typeof openDatabase=="function"}var Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",We="~~local_forage_type~",Ge=/^~~local_forage_type~([^~]+)~/,ct="__lfsc__:",lt=ct.length,ze="arbf",ke="blob",Ue="si08",Pe="ui08",Ne="uic8",Ae="si16",Ie="si32",Ee="ur16",Le="ui32",qe="fl32",Se="fl64",Ve=lt+ze.length,Ke=Object.prototype.toString;function Qe(_){var O=_.length*.75,D=_.length,k,P=0,U,q,Q,re;_[_.length-1]==="="&&(O--,_[_.length-2]==="="&&O--);var te=new ArrayBuffer(O),ee=new Uint8Array(te);for(k=0;k<D;k+=4)U=Oe.indexOf(_[k]),q=Oe.indexOf(_[k+1]),Q=Oe.indexOf(_[k+2]),re=Oe.indexOf(_[k+3]),ee[P++]=U<<2|q>>4,ee[P++]=(q&15)<<4|Q>>2,ee[P++]=(Q&3)<<6|re&63;return te}function Ye(_){var O=new Uint8Array(_),D="",k;for(k=0;k<O.length;k+=3)D+=Oe[O[k]>>2],D+=Oe[(O[k]&3)<<4|O[k+1]>>4],D+=Oe[(O[k+1]&15)<<2|O[k+2]>>6],D+=Oe[O[k+2]&63];return O.length%3===2?D=D.substring(0,D.length-1)+"=":O.length%3===1&&(D=D.substring(0,D.length-2)+"=="),D}function Xe(_,O){var D="";if(_&&(D=Ke.call(_)),_&&(D==="[object ArrayBuffer]"||_.buffer&&Ke.call(_.buffer)==="[object ArrayBuffer]")){var k,P=ct;_ instanceof ArrayBuffer?(k=_,P+=ze):(k=_.buffer,D==="[object Int8Array]"?P+=Ue:D==="[object Uint8Array]"?P+=Pe:D==="[object Uint8ClampedArray]"?P+=Ne:D==="[object Int16Array]"?P+=Ae:D==="[object Uint16Array]"?P+=Ee:D==="[object Int32Array]"?P+=Ie:D==="[object Uint32Array]"?P+=Le:D==="[object Float32Array]"?P+=qe:D==="[object Float64Array]"?P+=Se:O(new Error("Failed to get type for BinaryArray"))),O(P+Ye(k))}else if(D==="[object Blob]"){var U=new FileReader;U.onload=function(){var q=We+_.type+"~"+Ye(this.result);O(ct+ke+q)},U.readAsArrayBuffer(_)}else try{O(JSON.stringify(_))}catch(q){console.error("Couldn't convert value into a JSON string: ",_),O(null,q)}}function _r(_){if(_.substring(0,lt)!==ct)return JSON.parse(_);var O=_.substring(Ve),D=_.substring(lt,Ve),k;if(D===ke&&Ge.test(O)){var P=O.match(Ge);k=P[1],O=O.substring(P[0].length)}var U=Qe(O);switch(D){case ze:return U;case ke:return d([U],{type:k});case Ue:return new Int8Array(U);case Pe:return new Uint8Array(U);case Ne:return new Uint8ClampedArray(U);case Ae:return new Int16Array(U);case Ee:return new Uint16Array(U);case Ie:return new Int32Array(U);case Le:return new Uint32Array(U);case qe:return new Float32Array(U);case Se:return new Float64Array(U);default:throw new Error("Unkown type: "+D)}}var pr={serialize:Xe,deserialize:_r,stringToBuffer:Qe,bufferToString:Ye};function kr(_,O,D,k){_.executeSql("CREATE TABLE IF NOT EXISTS "+O.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],D,k)}function cr(_){var O=this,D={db:null};if(_)for(var k in _)D[k]=typeof _[k]!="string"?_[k].toString():_[k];var P=new f(function(U,q){try{D.db=openDatabase(D.name,String(D.version),D.description,D.size)}catch(Q){return q(Q)}D.db.transaction(function(Q){kr(Q,D,function(){O._dbInfo=D,U()},function(re,te){q(te)})},q)});return D.serializer=pr,P}function Xt(_,O,D,k,P,U){_.executeSql(D,k,P,function(q,Q){Q.code===Q.SYNTAX_ERR?q.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[O.storeName],function(re,te){te.rows.length?U(re,Q):kr(re,O,function(){re.executeSql(D,k,P,U)},U)},U):U(q,Q)},U)}function oi(_,O){var D=this;_=b(_);var k=new f(function(P,U){D.ready().then(function(){var q=D._dbInfo;q.db.transaction(function(Q){Xt(Q,q,"SELECT * FROM "+q.storeName+" WHERE key = ? LIMIT 1",[_],function(re,te){var ee=te.rows.length?te.rows.item(0).value:null;ee&&(ee=q.serializer.deserialize(ee)),P(ee)},function(re,te){U(te)})})}).catch(U)});return p(k,O),k}function Bi(_,O){var D=this,k=new f(function(P,U){D.ready().then(function(){var q=D._dbInfo;q.db.transaction(function(Q){Xt(Q,q,"SELECT * FROM "+q.storeName,[],function(re,te){for(var ee=te.rows,ge=ee.length,je=0;je<ge;je++){var st=ee.item(je),tt=st.value;if(tt&&(tt=q.serializer.deserialize(tt)),tt=_(tt,st.key,je+1),tt!==void 0){P(tt);return}}P()},function(re,te){U(te)})})}).catch(U)});return p(k,O),k}function bt(_,O,D,k){var P=this;_=b(_);var U=new f(function(q,Q){P.ready().then(function(){O===void 0&&(O=null);var re=O,te=P._dbInfo;te.serializer.serialize(O,function(ee,ge){ge?Q(ge):te.db.transaction(function(je){Xt(je,te,"INSERT OR REPLACE INTO "+te.storeName+" (key, value) VALUES (?, ?)",[_,ee],function(){q(re)},function(st,tt){Q(tt)})},function(je){if(je.code===je.QUOTA_ERR){if(k>0){q(bt.apply(P,[_,re,D,k-1]));return}Q(je)}})})}).catch(Q)});return p(U,D),U}function gt(_,O,D){return bt.apply(this,[_,O,D,1])}function St(_,O){var D=this;_=b(_);var k=new f(function(P,U){D.ready().then(function(){var q=D._dbInfo;q.db.transaction(function(Q){Xt(Q,q,"DELETE FROM "+q.storeName+" WHERE key = ?",[_],function(){P()},function(re,te){U(te)})})}).catch(U)});return p(k,O),k}function xt(_){var O=this,D=new f(function(k,P){O.ready().then(function(){var U=O._dbInfo;U.db.transaction(function(q){Xt(q,U,"DELETE FROM "+U.storeName,[],function(){k()},function(Q,re){P(re)})})}).catch(P)});return p(D,_),D}function Ct(_){var O=this,D=new f(function(k,P){O.ready().then(function(){var U=O._dbInfo;U.db.transaction(function(q){Xt(q,U,"SELECT COUNT(key) as c FROM "+U.storeName,[],function(Q,re){var te=re.rows.item(0).c;k(te)},function(Q,re){P(re)})})}).catch(P)});return p(D,_),D}function mt(_,O){var D=this,k=new f(function(P,U){D.ready().then(function(){var q=D._dbInfo;q.db.transaction(function(Q){Xt(Q,q,"SELECT key FROM "+q.storeName+" WHERE id = ? LIMIT 1",[_+1],function(re,te){var ee=te.rows.length?te.rows.item(0).key:null;P(ee)},function(re,te){U(te)})})}).catch(U)});return p(k,O),k}function Nt(_){var O=this,D=new f(function(k,P){O.ready().then(function(){var U=O._dbInfo;U.db.transaction(function(q){Xt(q,U,"SELECT key FROM "+U.storeName,[],function(Q,re){for(var te=[],ee=0;ee<re.rows.length;ee++)te.push(re.rows.item(ee).key);k(te)},function(Q,re){P(re)})})}).catch(P)});return p(D,_),D}function Rt(_){return new f(function(O,D){_.transaction(function(k){k.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(P,U){for(var q=[],Q=0;Q<U.rows.length;Q++)q.push(U.rows.item(Q).name);O({db:_,storeNames:q})},function(P,U){D(U)})},function(k){D(k)})})}function Pt(_,O){O=S.apply(this,arguments);var D=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||D.name,_.storeName=_.storeName||D.storeName);var k=this,P;return _.name?P=new f(function(U){var q;_.name===D.name?q=k._dbInfo.db:q=openDatabase(_.name,"","",0),_.storeName?U({db:q,storeNames:[_.storeName]}):U(Rt(q))}).then(function(U){return new f(function(q,Q){U.db.transaction(function(re){function te(st){return new f(function(tt,ht){re.executeSql("DROP TABLE IF EXISTS "+st,[],function(){tt()},function(it,gr){ht(gr)})})}for(var ee=[],ge=0,je=U.storeNames.length;ge<je;ge++)ee.push(te(U.storeNames[ge]));f.all(ee).then(function(){q()}).catch(function(st){Q(st)})},function(re){Q(re)})})}):P=f.reject("Invalid arguments"),p(P,O),P}var Lt={_driver:"webSQLStorage",_initStorage:cr,_support:Be(),iterate:Bi,getItem:oi,setItem:gt,removeItem:St,clear:xt,length:Ct,key:mt,keys:Nt,dropInstance:Pt};function Mt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function It(_,O){var D=_.name+"/";return _.storeName!==O.storeName&&(D+=_.storeName+"/"),D}function Dt(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch{return!0}}function ut(){return!Dt()||localStorage.length>0}function kt(_){var O=this,D={};if(_)for(var k in _)D[k]=_[k];return D.keyPrefix=It(_,O._defaultConfig),ut()?(O._dbInfo=D,D.serializer=pr,f.resolve()):f.reject()}function Ut(_){var O=this,D=O.ready().then(function(){for(var k=O._dbInfo.keyPrefix,P=localStorage.length-1;P>=0;P--){var U=localStorage.key(P);U.indexOf(k)===0&&localStorage.removeItem(U)}});return p(D,_),D}function Wl(_,O){var D=this;_=b(_);var k=D.ready().then(function(){var P=D._dbInfo,U=localStorage.getItem(P.keyPrefix+_);return U&&(U=P.serializer.deserialize(U)),U});return p(k,O),k}function Vl(_,O){var D=this,k=D.ready().then(function(){for(var P=D._dbInfo,U=P.keyPrefix,q=U.length,Q=localStorage.length,re=1,te=0;te<Q;te++){var ee=localStorage.key(te);if(ee.indexOf(U)===0){var ge=localStorage.getItem(ee);if(ge&&(ge=P.serializer.deserialize(ge)),ge=_(ge,ee.substring(q),re++),ge!==void 0)return ge}}});return p(k,O),k}function Hl(_,O){var D=this,k=D.ready().then(function(){var P=D._dbInfo,U;try{U=localStorage.key(_)}catch{U=null}return U&&(U=U.substring(P.keyPrefix.length)),U});return p(k,O),k}function Ur(_){var O=this,D=O.ready().then(function(){for(var k=O._dbInfo,P=localStorage.length,U=[],q=0;q<P;q++){var Q=localStorage.key(q);Q.indexOf(k.keyPrefix)===0&&U.push(Q.substring(k.keyPrefix.length))}return U});return p(D,_),D}function Kl(_){var O=this,D=O.keys().then(function(k){return k.length});return p(D,_),D}function Zl(_,O){var D=this;_=b(_);var k=D.ready().then(function(){var P=D._dbInfo;localStorage.removeItem(P.keyPrefix+_)});return p(k,O),k}function Gl(_,O,D){var k=this;_=b(_);var P=k.ready().then(function(){O===void 0&&(O=null);var U=O;return new f(function(q,Q){var re=k._dbInfo;re.serializer.serialize(O,function(te,ee){if(ee)Q(ee);else try{localStorage.setItem(re.keyPrefix+_,te),q(U)}catch(ge){(ge.name==="QuotaExceededError"||ge.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Q(ge),Q(ge)}})})});return p(P,D),P}function Yl(_,O){if(O=S.apply(this,arguments),_=typeof _!="function"&&_||{},!_.name){var D=this.config();_.name=_.name||D.name,_.storeName=_.storeName||D.storeName}var k=this,P;return _.name?P=new f(function(U){_.storeName?U(It(_,k._defaultConfig)):U(_.name+"/")}).then(function(U){for(var q=localStorage.length-1;q>=0;q--){var Q=localStorage.key(q);Q.indexOf(U)===0&&localStorage.removeItem(Q)}}):P=f.reject("Invalid arguments"),p(P,O),P}var Jl={_driver:"localStorageWrapper",_initStorage:kt,_support:Mt(),iterate:Vl,getItem:Wl,setItem:Gl,removeItem:Zl,clear:Ut,length:Kl,key:Hl,keys:Ur,dropInstance:Yl},un=function(_,O){return _===O||typeof _=="number"&&typeof O=="number"&&isNaN(_)&&isNaN(O)},Ql=function(_,O){for(var D=_.length,k=0;k<D;){if(un(_[k],O))return!0;k++}return!1},ha=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"},ai={},fa={},$n={INDEXEDDB:le,WEBSQL:Lt,LOCALSTORAGE:Jl},zi=[$n.INDEXEDDB._driver,$n.WEBSQL._driver,$n.LOCALSTORAGE._driver],qi=["dropInstance"],Gs=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(qi),Jr={description:"",driver:zi.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Xl(_,O){_[O]=function(){var D=arguments;return _.ready().then(function(){return _[O].apply(_,D)})}}function Ys(){for(var _=1;_<arguments.length;_++){var O=arguments[_];if(O)for(var D in O)O.hasOwnProperty(D)&&(ha(O[D])?arguments[0][D]=O[D].slice():arguments[0][D]=O[D])}return arguments[0]}var eu=function(){function _(O){o(this,_);for(var D in $n)if($n.hasOwnProperty(D)){var k=$n[D],P=k._driver;this[D]=P,ai[P]||this.defineDriver(k)}this._defaultConfig=Ys({},Jr),this._config=Ys({},this._defaultConfig,O),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(O){if((typeof O>"u"?"undefined":s(O))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var D in O){if(D==="storeName"&&(O[D]=O[D].replace(/\W/g,"_")),D==="version"&&typeof O[D]!="number")return new Error("Database version must be a number.");this._config[D]=O[D]}return"driver"in O&&O.driver?this.setDriver(this._config.driver):!0}else return typeof O=="string"?this._config[O]:this._config},_.prototype.defineDriver=function(O,D,k){var P=new f(function(U,q){try{var Q=O._driver,re=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!O._driver){q(re);return}for(var te=Gs.concat("_initStorage"),ee=0,ge=te.length;ee<ge;ee++){var je=te[ee],st=!Ql(qi,je);if((st||O[je])&&typeof O[je]!="function"){q(re);return}}var tt=function(){for(var it=function(ru){return function(){var nu=new Error("Method "+ru+" is not implemented by the current driver"),pa=f.reject(nu);return p(pa,arguments[arguments.length-1]),pa}},gr=0,Js=qi.length;gr<Js;gr++){var Ir=qi[gr];O[Ir]||(O[Ir]=it(Ir))}};tt();var ht=function(it){ai[Q]&&console.info("Redefining LocalForage driver: "+Q),ai[Q]=O,fa[Q]=it,U()};"_support"in O?O._support&&typeof O._support=="function"?O._support().then(ht,q):ht(!!O._support):ht(!0)}catch(it){q(it)}});return y(P,D,k),P},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(O,D,k){var P=ai[O]?f.resolve(ai[O]):f.reject(new Error("Driver not found."));return y(P,D,k),P},_.prototype.getSerializer=function(O){var D=f.resolve(pr);return y(D,O),D},_.prototype.ready=function(O){var D=this,k=D._driverSet.then(function(){return D._ready===null&&(D._ready=D._initDriver()),D._ready});return y(k,O,O),k},_.prototype.setDriver=function(O,D,k){var P=this;ha(O)||(O=[O]);var U=this._getSupportedDrivers(O);function q(){P._config.driver=P.driver()}function Q(ee){return P._extend(ee),q(),P._ready=P._initStorage(P._config),P._ready}function re(ee){return function(){var ge=0;function je(){for(;ge<ee.length;){var st=ee[ge];return ge++,P._dbInfo=null,P._ready=null,P.getDriver(st).then(Q).catch(je)}q();var tt=new Error("No available storage method found.");return P._driverSet=f.reject(tt),P._driverSet}return je()}}var te=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=te.then(function(){var ee=U[0];return P._dbInfo=null,P._ready=null,P.getDriver(ee).then(function(ge){P._driver=ge._driver,q(),P._wrapLibraryMethodsWithReady(),P._initDriver=re(U)})}).catch(function(){q();var ee=new Error("No available storage method found.");return P._driverSet=f.reject(ee),P._driverSet}),y(this._driverSet,D,k),this._driverSet},_.prototype.supports=function(O){return!!fa[O]},_.prototype._extend=function(O){Ys(this,O)},_.prototype._getSupportedDrivers=function(O){for(var D=[],k=0,P=O.length;k<P;k++){var U=O[k];this.supports(U)&&D.push(U)}return D},_.prototype._wrapLibraryMethodsWithReady=function(){for(var O=0,D=Gs.length;O<D;O++)Xl(this,Gs[O])},_.prototype.createInstance=function(O){return new _(O)},_}(),tu=new eu;n.exports=tu},{3:3}]},{},[4])(4)})})(Cu);var A0=Cu.exports,Hi=O0(A0);class T0{constructor(){this.getKeys=async()=>await Hi.keys(),this.getEntries=async()=>{let e=[];return(await this.getKeys()).forEach(async r=>e.push(await Hi.getItem(r))),e},this.getItem=async e=>await Hi.getItem(e)??void 0,this.setItem=async(e,r)=>{await Hi.setItem(e,r)},this.removeItem=async e=>{await Hi.removeItem(e)}}}let $0=class{constructor(){const e=new T0;this.storage=e}async getKeys(){return this.storage.getKeys()}async getEntries(){return this.storage.getEntries()}async getItem(e){return this.storage.getItem(e)}async setItem(e,r){return this.storage.setItem(e,r)}async removeItem(e){return this.storage.removeItem(e)}};var hi={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Ia=function(t,e){return Ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ia(t,e)};function N0(t,e){Ia(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Da=function(){return Da=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Da.apply(this,arguments)};function R0(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function P0(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function L0(t,e){return function(r,n){e(r,n,t)}}function M0(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function k0(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function U0(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function j0(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function F0(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Oa(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Iu(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function B0(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Iu(arguments[e]));return t}function z0(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Ki(t){return this instanceof Ki?(this.v=t,this):new Ki(t)}function q0(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(y){return new Promise(function(b,S){s.push([p,y,b,S])>1||a(p,y)})})}function a(p,y){try{c(n[p](y))}catch(b){f(s[0][3],b)}}function c(p){p.value instanceof Ki?Promise.resolve(p.value.v).then(u,d):f(s[0][2],p)}function u(p){a("next",p)}function d(p){a("throw",p)}function f(p,y){p(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function W0(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Ki(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function V0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Oa=="function"?Oa(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function H0(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function K0(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Z0(t){return t&&t.__esModule?t:{default:t}}function G0(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Y0(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const qr=Sa(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Da},__asyncDelegator:W0,__asyncGenerator:q0,__asyncValues:V0,__await:Ki,__awaiter:k0,__classPrivateFieldGet:G0,__classPrivateFieldSet:Y0,__createBinding:j0,__decorate:P0,__exportStar:F0,__extends:N0,__generator:U0,__importDefault:Z0,__importStar:K0,__makeTemplateObject:H0,__metadata:M0,__param:L0,__read:Iu,__rest:R0,__spread:B0,__spreadArrays:z0,__values:Oa},Symbol.toStringTag,{value:"Module"})));var Zi={},pe={},Aa={},Gi={},Du;function J0(){if(Du)return Gi;Du=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Gi.delay=t,Gi}var kn={},Ta={},Un={},Ou;function Q0(){return Ou||(Ou=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.ONE_THOUSAND=Un.ONE_HUNDRED=void 0,Un.ONE_HUNDRED=100,Un.ONE_THOUSAND=1e3),Un}var $a={},Au;function X0(){return Au||(Au=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}($a)),$a}var Tu;function $u(){return Tu||(Tu=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=qr;e.__exportStar(Q0(),t),e.__exportStar(X0(),t)}(Ta)),Ta}var Nu;function eg(){if(Nu)return kn;Nu=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.fromMiliseconds=kn.toMiliseconds=void 0;const t=$u();function e(n){return n*t.ONE_THOUSAND}kn.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return kn.fromMiliseconds=r,kn}var Ru;function tg(){return Ru||(Ru=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=qr;e.__exportStar(J0(),t),e.__exportStar(eg(),t)}(Aa)),Aa}var fi={},Pu;function rg(){if(Pu)return fi;Pu=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return fi.Watch=t,fi.default=t,fi}var Na={},Yi={},Lu;function ng(){if(Lu)return Yi;Lu=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.IWatch=void 0;class t{}return Yi.IWatch=t,Yi}var Mu;function ig(){return Mu||(Mu=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),qr.__exportStar(ng(),t)}(Na)),Na}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=qr;e.__exportStar(tg(),t),e.__exportStar(rg(),t),e.__exportStar(ig(),t),e.__exportStar($u(),t)})(pe);var Ra={},Ji={};let yr=class{};const sg=Sa(Object.freeze(Object.defineProperty({__proto__:null,IEvents:yr},Symbol.toStringTag,{value:"Module"})));var ku;function og(){if(ku)return Ji;ku=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.IHeartBeat=void 0;const t=sg;class e extends t.IEvents{constructor(n){super()}}return Ji.IHeartBeat=e,Ji}var Uu;function ju(){return Uu||(Uu=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),qr.__exportStar(og(),t)}(Ra)),Ra}var Pa={},jn={},Fu;function ag(){if(Fu)return jn;Fu=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.HEARTBEAT_EVENTS=jn.HEARTBEAT_INTERVAL=void 0;const t=pe;return jn.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,jn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},jn}var Bu;function zu(){return Bu||(Bu=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),qr.__exportStar(ag(),t)}(Pa)),Pa}var qu;function cg(){if(qu)return Zi;qu=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.HeartBeat=void 0;const t=qr,e=Sr,r=pe,n=ju(),i=zu();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const c=new s(a);return yield c.init(),c})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,c){this.events.on(a,c)}once(a,c){this.events.once(a,c)}off(a,c){this.events.off(a,c)}removeListener(a,c){this.events.removeListener(a,c)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Zi.HeartBeat=s,Zi}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=qr;e.__exportStar(cg(),t),e.__exportStar(ju(),t),e.__exportStar(zu(),t)})(hi);var Je={},La,Wu;function lg(){if(Wu)return La;Wu=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}La=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var u=1;u<a;u++)c[u]=s(n[u]);return c.join(" ")}if(typeof r!="string")return r;var d=n.length;if(d===0)return r;for(var f="",p=1-o,y=-1,b=r&&r.length||0,S=0;S<b;){if(r.charCodeAt(S)===37&&S+1<b){switch(y=y>-1?y:0,r.charCodeAt(S+1)){case 100:case 102:if(p>=d||n[p]==null)break;y<S&&(f+=r.slice(y,S)),f+=Number(n[p]),y=S+2,S++;break;case 105:if(p>=d||n[p]==null)break;y<S&&(f+=r.slice(y,S)),f+=Math.floor(Number(n[p])),y=S+2,S++;break;case 79:case 111:case 106:if(p>=d||n[p]===void 0)break;y<S&&(f+=r.slice(y,S));var C=typeof n[p];if(C==="string"){f+="'"+n[p]+"'",y=S+2,S++;break}if(C==="function"){f+=n[p].name||"<anonymous>",y=S+2,S++;break}f+=s(n[p]),y=S+2,S++;break;case 115:if(p>=d)break;y<S&&(f+=r.slice(y,S)),f+=String(n[p]),y=S+2,S++;break;case 37:y<S&&(f+=r.slice(y,S)),f+="%",y=S+2,S++,p--;break}++p}++S}return y===-1?r:(y<b&&(f+=r.slice(y)),f)}return La}var Ma,Vu;function ug(){if(Vu)return Ma;Vu=1;const t=lg();Ma=i;const e=w().console||{},r={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:S,wrapResponseSerializer:S,wrapErrorSerializer:S,req:b,res:b,err:p};function n(g,l){return Array.isArray(g)?g.filter(function(N){return N!=="!stdSerializers.err"}):g===!0?Object.keys(l):!1}function i(g){g=g||{},g.browser=g.browser||{};const l=g.browser.transmit;if(l&&typeof l.send!="function")throw Error("pino: transmit option must have a send function");const m=g.browser.write||e;g.browser.write&&(g.browser.asObject=!0);const N=g.serializers||{},$=n(g.browser.serialize,N);let z=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(z=!1);const W=["error","fatal","warn","info","debug","trace"];typeof m=="function"&&(m.error=m.fatal=m.warn=m.info=m.debug=m.trace=m),g.enabled===!1&&(g.level="silent");const X=g.level||"info",R=Object.create(m);R.log||(R.log=C),Object.defineProperty(R,"levelVal",{get:se}),Object.defineProperty(R,"level",{get:Z,set:H});const j={transmit:l,serialize:$,asObject:g.browser.asObject,levels:W,timestamp:y(g)};R.levels=i.levels,R.level=X,R.setMaxListeners=R.getMaxListeners=R.emit=R.addListener=R.on=R.prependListener=R.once=R.prependOnceListener=R.removeListener=R.removeAllListeners=R.listeners=R.listenerCount=R.eventNames=R.write=R.flush=C,R.serializers=N,R._serialize=$,R._stdErrSerialize=z,R.child=Y,l&&(R._logEvent=f());function se(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Z(){return this._level}function H(V){if(V!=="silent"&&!this.levels.values[V])throw Error("unknown level "+V);this._level=V,s(j,R,"error","log"),s(j,R,"fatal","error"),s(j,R,"warn","error"),s(j,R,"info","log"),s(j,R,"debug","log"),s(j,R,"trace","log")}function Y(V,J){if(!V)throw new Error("missing bindings for child Pino");J=J||{},$&&V.serializers&&(J.serializers=V.serializers);const _e=J.serializers;if($&&_e){var ne=Object.assign({},N,_e),ve=g.browser.serialize===!0?Object.keys(ne):$;delete V.serializers,c([V],ve,ne,this._stdErrSerialize)}function de(we){this._childLevel=(we._childLevel|0)+1,this.error=u(we,V,"error"),this.fatal=u(we,V,"fatal"),this.warn=u(we,V,"warn"),this.info=u(we,V,"info"),this.debug=u(we,V,"debug"),this.trace=u(we,V,"trace"),ne&&(this.serializers=ne,this._serialize=ve),l&&(this._logEvent=f([].concat(we._logEvent.bindings,V)))}return de.prototype=this,new de(this)}return R}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:A,epochTime:E,unixTime:x,isoTime:v});function s(g,l,m,N){const $=Object.getPrototypeOf(l);l[m]=l.levelVal>l.levels.values[m]?C:$[m]?$[m]:e[m]||e[N]||C,o(g,l,m)}function o(g,l,m){!g.transmit&&l[m]===C||(l[m]=function(N){return function(){const z=g.timestamp(),W=new Array(arguments.length),X=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var R=0;R<W.length;R++)W[R]=arguments[R];if(g.serialize&&!g.asObject&&c(W,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?N.call(X,a(this,m,W,z)):N.apply(X,W),g.transmit){const j=g.transmit.level||l.level,se=i.levels.values[j],Z=i.levels.values[m];if(Z<se)return;d(this,{ts:z,methodLevel:m,methodValue:Z,transmitLevel:j,transmitValue:i.levels.values[g.transmit.level||l.level],send:g.transmit.send,val:l.levelVal},W)}}}(l[m]))}function a(g,l,m,N){g._serialize&&c(m,g._serialize,g.serializers,g._stdErrSerialize);const $=m.slice();let z=$[0];const W={};N&&(W.time=N),W.level=i.levels.values[l];let X=(g._childLevel|0)+1;if(X<1&&(X=1),z!==null&&typeof z=="object"){for(;X--&&typeof $[0]=="object";)Object.assign(W,$.shift());z=$.length?t($.shift(),$):void 0}else typeof z=="string"&&(z=t($.shift(),$));return z!==void 0&&(W.msg=z),W}function c(g,l,m,N){for(const $ in g)if(N&&g[$]instanceof Error)g[$]=i.stdSerializers.err(g[$]);else if(typeof g[$]=="object"&&!Array.isArray(g[$]))for(const z in g[$])l&&l.indexOf(z)>-1&&z in m&&(g[$][z]=m[z](g[$][z]))}function u(g,l,m){return function(){const N=new Array(1+arguments.length);N[0]=l;for(var $=1;$<N.length;$++)N[$]=arguments[$-1];return g[m].apply(this,N)}}function d(g,l,m){const N=l.send,$=l.ts,z=l.methodLevel,W=l.methodValue,X=l.val,R=g._logEvent.bindings;c(m,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=$,g._logEvent.messages=m.filter(function(j){return R.indexOf(j)===-1}),g._logEvent.level.label=z,g._logEvent.level.value=W,N(z,g._logEvent,X),g._logEvent=f(R)}function f(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function p(g){const l={type:g.constructor.name,msg:g.message,stack:g.stack};for(const m in g)l[m]===void 0&&(l[m]=g[m]);return l}function y(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?A:E}function b(){return{}}function S(g){return g}function C(){}function A(){return!1}function E(){return Date.now()}function x(){return Math.round(Date.now()/1e3)}function v(){return new Date(Date.now()).toISOString()}function w(){function g(l){return typeof l<"u"&&l}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return Ma}var Fn={},Hu;function Ku(){return Hu||(Hu=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.PINO_CUSTOM_CONTEXT_KEY=Fn.PINO_LOGGER_DEFAULTS=void 0,Fn.PINO_LOGGER_DEFAULTS={level:"info"},Fn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Fn}var tr={},Zu;function dg(){if(Zu)return tr;Zu=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.generateChildLogger=tr.formatChildLoggerContext=tr.getLoggerContext=tr.setBrowserLoggerContext=tr.getBrowserLoggerContext=tr.getDefaultLoggerOptions=void 0;const t=Ku();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}tr.getDefaultLoggerOptions=e;function r(a,c=t.PINO_CUSTOM_CONTEXT_KEY){return a[c]||""}tr.getBrowserLoggerContext=r;function n(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){return a[u]=c,a}tr.setBrowserLoggerContext=n;function i(a,c=t.PINO_CUSTOM_CONTEXT_KEY){let u="";return typeof a.bindings>"u"?u=r(a,c):u=a.bindings().context||"",u}tr.getLoggerContext=i;function s(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=i(a,u);return d.trim()?`${d}/${c}`:c}tr.formatChildLoggerContext=s;function o(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(a,c,u),f=a.child({context:d});return n(f,d,u)}return tr.generateChildLogger=o,tr}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=qr,r=e.__importDefault(ug());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(Ku(),t),e.__exportStar(dg(),t)})(Je);let hg=class extends yr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},fg=class extends yr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},pg=class{constructor(e,r){this.logger=e,this.core=r}},gg=class extends yr{constructor(e,r){super(),this.relayer=e,this.logger=r}},mg=class extends yr{constructor(e){super()}},yg=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},vg=class extends yr{constructor(e,r){super(),this.relayer=e,this.logger=r}},wg=class extends yr{constructor(e,r){super(),this.core=e,this.logger=r}},bg=class{constructor(e,r){this.projectId=e,this.logger=r}},_g=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},Eg=class{constructor(e){this.client=e}};const Sg=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),xg=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Gu(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return xg(t)}catch{return t}}function ka(t){return typeof t=="string"?t:Sg(t)||""}var Ua={},pi={},oo={},ao={};Object.defineProperty(ao,"__esModule",{value:!0}),ao.BrowserRandomSource=void 0;const Yu=65536;class Cg{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Yu)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Yu)));return r}}ao.BrowserRandomSource=Cg;function Ig(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var co={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});function Dg(t){for(var e=0;e<t.length;e++)t[e]=0;return t}vr.wipe=Dg;const Og=Sa(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(co,"__esModule",{value:!0}),co.NodeRandomSource=void 0;const Ag=vr;class Tg{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Ig<"u"){const e=Og;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,Ag.wipe)(r),n}}co.NodeRandomSource=Tg,Object.defineProperty(oo,"__esModule",{value:!0}),oo.SystemRandomSource=void 0;const $g=ao,Ng=co;class Rg{constructor(){if(this.isAvailable=!1,this.name="",this._source=new $g.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Ng.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}oo.SystemRandomSource=Rg;var De={},Ju={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var u=a>>>16&65535,d=a&65535,f=c>>>16&65535,p=c&65535;return d*p+(u*p+d*f<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(Ju),Object.defineProperty(De,"__esModule",{value:!0});var Qu=Ju;function Pg(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}De.readInt16BE=Pg;function Lg(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}De.readUint16BE=Lg;function Mg(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}De.readInt16LE=Mg;function kg(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}De.readUint16LE=kg;function Xu(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}De.writeUint16BE=Xu,De.writeInt16BE=Xu;function ed(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}De.writeUint16LE=ed,De.writeInt16LE=ed;function ja(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}De.readInt32BE=ja;function Fa(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}De.readUint32BE=Fa;function Ba(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}De.readInt32LE=Ba;function za(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}De.readUint32LE=za;function lo(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}De.writeUint32BE=lo,De.writeInt32BE=lo;function uo(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}De.writeUint32LE=uo,De.writeInt32LE=uo;function Ug(t,e){e===void 0&&(e=0);var r=ja(t,e),n=ja(t,e+4);return r*4294967296+n-(n>>31)*4294967296}De.readInt64BE=Ug;function jg(t,e){e===void 0&&(e=0);var r=Fa(t,e),n=Fa(t,e+4);return r*4294967296+n}De.readUint64BE=jg;function Fg(t,e){e===void 0&&(e=0);var r=Ba(t,e),n=Ba(t,e+4);return n*4294967296+r-(r>>31)*4294967296}De.readInt64LE=Fg;function Bg(t,e){e===void 0&&(e=0);var r=za(t,e),n=za(t,e+4);return n*4294967296+r}De.readUint64LE=Bg;function td(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),lo(t/4294967296>>>0,e,r),lo(t>>>0,e,r+4),e}De.writeUint64BE=td,De.writeInt64BE=td;function rd(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),uo(t>>>0,e,r),uo(t/4294967296>>>0,e,r+4),e}De.writeUint64LE=rd,De.writeInt64LE=rd;function zg(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}De.readUintBE=zg;function qg(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}De.readUintLE=qg;function Wg(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Qu.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}De.writeUintBE=Wg;function Vg(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Qu.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}De.writeUintLE=Vg;function Hg(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}De.readFloat32BE=Hg;function Kg(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}De.readFloat32LE=Kg;function Zg(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}De.readFloat64BE=Zg;function Gg(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}De.readFloat64LE=Gg;function Yg(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}De.writeFloat32BE=Yg;function Jg(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}De.writeFloat32LE=Jg;function Qg(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}De.writeFloat64BE=Qg;function Xg(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}De.writeFloat64LE=Xg,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=oo,r=De,n=vr;t.defaultRandomSource=new e.SystemRandomSource;function i(u,d=t.defaultRandomSource){return d.randomBytes(u)}t.randomBytes=i;function s(u=t.defaultRandomSource){const d=i(4,u),f=(0,r.readUint32LE)(d);return(0,n.wipe)(d),f}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(u,d=o,f=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let p="";const y=d.length,b=256-256%y;for(;u>0;){const S=i(Math.ceil(u*256/b),f);for(let C=0;C<S.length&&u>0;C++){const A=S[C];A<b&&(p+=d.charAt(A%y),u--)}(0,n.wipe)(S)}return p}t.randomString=a;function c(u,d=o,f=t.defaultRandomSource){const p=Math.ceil(u/(Math.log(d.length)/Math.LN2));return a(p,d,f)}t.randomStringForEntropy=c}(pi);var nd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=De,r=vr;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,p=u<<3,y=u%128<112?128:256;this._buffer[d]=128;for(var b=d+1;b<y-8;b++)this._buffer[b]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,y),this._finished=!0}for(var b=0;b<this.digestLength/8;b++)e.writeUint32BE(this._stateHi[b],c,b*8),e.writeUint32BE(this._stateLo[b],c,b*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,u,d,f,p,y){for(var b=u[0],S=u[1],C=u[2],A=u[3],E=u[4],x=u[5],v=u[6],w=u[7],g=d[0],l=d[1],m=d[2],N=d[3],$=d[4],z=d[5],W=d[6],X=d[7],R,j,se,Z,H,Y,V,J;y>=128;){for(var _e=0;_e<16;_e++){var ne=8*_e+p;a[_e]=e.readUint32BE(f,ne),c[_e]=e.readUint32BE(f,ne+4)}for(var _e=0;_e<80;_e++){var ve=b,de=S,we=C,B=A,F=E,L=x,h=v,T=w,oe=g,le=l,Be=m,Oe=N,We=$,Ge=z,ct=W,lt=X;if(R=w,j=X,H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=(E>>>14|$<<32-14)^(E>>>18|$<<32-18)^($>>>41-32|E<<32-(41-32)),j=($>>>14|E<<32-14)^($>>>18|E<<32-18)^(E>>>41-32|$<<32-(41-32)),H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,R=E&x^~E&v,j=$&z^~$&W,H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,R=i[_e*2],j=i[_e*2+1],H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,R=a[_e%16],j=c[_e%16],H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,se=V&65535|J<<16,Z=H&65535|Y<<16,R=se,j=Z,H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=(b>>>28|g<<32-28)^(g>>>34-32|b<<32-(34-32))^(g>>>39-32|b<<32-(39-32)),j=(g>>>28|b<<32-28)^(b>>>34-32|g<<32-(34-32))^(b>>>39-32|g<<32-(39-32)),H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,R=b&S^b&C^S&C,j=g&l^g&m^l&m,H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,T=V&65535|J<<16,lt=H&65535|Y<<16,R=B,j=Oe,H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=se,j=Z,H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,B=V&65535|J<<16,Oe=H&65535|Y<<16,S=ve,C=de,A=we,E=B,x=F,v=L,w=h,b=T,l=oe,m=le,N=Be,$=Oe,z=We,W=Ge,X=ct,g=lt,_e%16===15)for(var ne=0;ne<16;ne++)R=a[ne],j=c[ne],H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=a[(ne+9)%16],j=c[(ne+9)%16],H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,se=a[(ne+1)%16],Z=c[(ne+1)%16],R=(se>>>1|Z<<32-1)^(se>>>8|Z<<32-8)^se>>>7,j=(Z>>>1|se<<32-1)^(Z>>>8|se<<32-8)^(Z>>>7|se<<32-7),H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,se=a[(ne+14)%16],Z=c[(ne+14)%16],R=(se>>>19|Z<<32-19)^(Z>>>61-32|se<<32-(61-32))^se>>>6,j=(Z>>>19|se<<32-19)^(se>>>61-32|Z<<32-(61-32))^(Z>>>6|se<<32-6),H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,a[ne]=V&65535|J<<16,c[ne]=H&65535|Y<<16}R=b,j=g,H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=u[0],j=d[0],H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,u[0]=b=V&65535|J<<16,d[0]=g=H&65535|Y<<16,R=S,j=l,H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=u[1],j=d[1],H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,u[1]=S=V&65535|J<<16,d[1]=l=H&65535|Y<<16,R=C,j=m,H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=u[2],j=d[2],H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,u[2]=C=V&65535|J<<16,d[2]=m=H&65535|Y<<16,R=A,j=N,H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=u[3],j=d[3],H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,u[3]=A=V&65535|J<<16,d[3]=N=H&65535|Y<<16,R=E,j=$,H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=u[4],j=d[4],H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,u[4]=E=V&65535|J<<16,d[4]=$=H&65535|Y<<16,R=x,j=z,H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=u[5],j=d[5],H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,u[5]=x=V&65535|J<<16,d[5]=z=H&65535|Y<<16,R=v,j=W,H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=u[6],j=d[6],H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,u[6]=v=V&65535|J<<16,d[6]=W=H&65535|Y<<16,R=w,j=X,H=j&65535,Y=j>>>16,V=R&65535,J=R>>>16,R=u[7],j=d[7],H+=j&65535,Y+=j>>>16,V+=R&65535,J+=R>>>16,Y+=H>>>16,V+=Y>>>16,J+=V>>>16,u[7]=w=V&65535|J<<16,d[7]=X=H&65535|Y<<16,p+=128,y-=128}return p}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(nd),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=pi,r=nd,n=vr;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(B){const F=new Float64Array(16);if(B)for(let L=0;L<B.length;L++)F[L]=B[L];return F}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(B,F){for(let L=0;L<16;L++)B[L]=F[L]|0}function b(B){let F=1;for(let L=0;L<16;L++){let h=B[L]+F+65535;F=Math.floor(h/65536),B[L]=h-F*65536}B[0]+=F-1+37*(F-1)}function S(B,F,L){const h=~(L-1);for(let T=0;T<16;T++){const oe=h&(B[T]^F[T]);B[T]^=oe,F[T]^=oe}}function C(B,F){const L=i(),h=i();for(let T=0;T<16;T++)h[T]=F[T];b(h),b(h),b(h);for(let T=0;T<2;T++){L[0]=h[0]-65517;for(let le=1;le<15;le++)L[le]=h[le]-65535-(L[le-1]>>16&1),L[le-1]&=65535;L[15]=h[15]-32767-(L[14]>>16&1);const oe=L[15]>>16&1;L[14]&=65535,S(h,L,1-oe)}for(let T=0;T<16;T++)B[2*T]=h[T]&255,B[2*T+1]=h[T]>>8}function A(B,F){let L=0;for(let h=0;h<32;h++)L|=B[h]^F[h];return(1&L-1>>>8)-1}function E(B,F){const L=new Uint8Array(32),h=new Uint8Array(32);return C(L,B),C(h,F),A(L,h)}function x(B){const F=new Uint8Array(32);return C(F,B),F[0]&1}function v(B,F){for(let L=0;L<16;L++)B[L]=F[2*L]+(F[2*L+1]<<8);B[15]&=32767}function w(B,F,L){for(let h=0;h<16;h++)B[h]=F[h]+L[h]}function g(B,F,L){for(let h=0;h<16;h++)B[h]=F[h]-L[h]}function l(B,F,L){let h,T,oe=0,le=0,Be=0,Oe=0,We=0,Ge=0,ct=0,lt=0,ze=0,ke=0,Ue=0,Pe=0,Ne=0,Ae=0,Ie=0,Ee=0,Le=0,qe=0,Se=0,Ve=0,Ke=0,Qe=0,Ye=0,Xe=0,_r=0,pr=0,kr=0,cr=0,Xt=0,oi=0,Bi=0,bt=L[0],gt=L[1],St=L[2],xt=L[3],Ct=L[4],mt=L[5],Nt=L[6],Rt=L[7],Pt=L[8],Lt=L[9],Mt=L[10],It=L[11],Dt=L[12],ut=L[13],kt=L[14],Ut=L[15];h=F[0],oe+=h*bt,le+=h*gt,Be+=h*St,Oe+=h*xt,We+=h*Ct,Ge+=h*mt,ct+=h*Nt,lt+=h*Rt,ze+=h*Pt,ke+=h*Lt,Ue+=h*Mt,Pe+=h*It,Ne+=h*Dt,Ae+=h*ut,Ie+=h*kt,Ee+=h*Ut,h=F[1],le+=h*bt,Be+=h*gt,Oe+=h*St,We+=h*xt,Ge+=h*Ct,ct+=h*mt,lt+=h*Nt,ze+=h*Rt,ke+=h*Pt,Ue+=h*Lt,Pe+=h*Mt,Ne+=h*It,Ae+=h*Dt,Ie+=h*ut,Ee+=h*kt,Le+=h*Ut,h=F[2],Be+=h*bt,Oe+=h*gt,We+=h*St,Ge+=h*xt,ct+=h*Ct,lt+=h*mt,ze+=h*Nt,ke+=h*Rt,Ue+=h*Pt,Pe+=h*Lt,Ne+=h*Mt,Ae+=h*It,Ie+=h*Dt,Ee+=h*ut,Le+=h*kt,qe+=h*Ut,h=F[3],Oe+=h*bt,We+=h*gt,Ge+=h*St,ct+=h*xt,lt+=h*Ct,ze+=h*mt,ke+=h*Nt,Ue+=h*Rt,Pe+=h*Pt,Ne+=h*Lt,Ae+=h*Mt,Ie+=h*It,Ee+=h*Dt,Le+=h*ut,qe+=h*kt,Se+=h*Ut,h=F[4],We+=h*bt,Ge+=h*gt,ct+=h*St,lt+=h*xt,ze+=h*Ct,ke+=h*mt,Ue+=h*Nt,Pe+=h*Rt,Ne+=h*Pt,Ae+=h*Lt,Ie+=h*Mt,Ee+=h*It,Le+=h*Dt,qe+=h*ut,Se+=h*kt,Ve+=h*Ut,h=F[5],Ge+=h*bt,ct+=h*gt,lt+=h*St,ze+=h*xt,ke+=h*Ct,Ue+=h*mt,Pe+=h*Nt,Ne+=h*Rt,Ae+=h*Pt,Ie+=h*Lt,Ee+=h*Mt,Le+=h*It,qe+=h*Dt,Se+=h*ut,Ve+=h*kt,Ke+=h*Ut,h=F[6],ct+=h*bt,lt+=h*gt,ze+=h*St,ke+=h*xt,Ue+=h*Ct,Pe+=h*mt,Ne+=h*Nt,Ae+=h*Rt,Ie+=h*Pt,Ee+=h*Lt,Le+=h*Mt,qe+=h*It,Se+=h*Dt,Ve+=h*ut,Ke+=h*kt,Qe+=h*Ut,h=F[7],lt+=h*bt,ze+=h*gt,ke+=h*St,Ue+=h*xt,Pe+=h*Ct,Ne+=h*mt,Ae+=h*Nt,Ie+=h*Rt,Ee+=h*Pt,Le+=h*Lt,qe+=h*Mt,Se+=h*It,Ve+=h*Dt,Ke+=h*ut,Qe+=h*kt,Ye+=h*Ut,h=F[8],ze+=h*bt,ke+=h*gt,Ue+=h*St,Pe+=h*xt,Ne+=h*Ct,Ae+=h*mt,Ie+=h*Nt,Ee+=h*Rt,Le+=h*Pt,qe+=h*Lt,Se+=h*Mt,Ve+=h*It,Ke+=h*Dt,Qe+=h*ut,Ye+=h*kt,Xe+=h*Ut,h=F[9],ke+=h*bt,Ue+=h*gt,Pe+=h*St,Ne+=h*xt,Ae+=h*Ct,Ie+=h*mt,Ee+=h*Nt,Le+=h*Rt,qe+=h*Pt,Se+=h*Lt,Ve+=h*Mt,Ke+=h*It,Qe+=h*Dt,Ye+=h*ut,Xe+=h*kt,_r+=h*Ut,h=F[10],Ue+=h*bt,Pe+=h*gt,Ne+=h*St,Ae+=h*xt,Ie+=h*Ct,Ee+=h*mt,Le+=h*Nt,qe+=h*Rt,Se+=h*Pt,Ve+=h*Lt,Ke+=h*Mt,Qe+=h*It,Ye+=h*Dt,Xe+=h*ut,_r+=h*kt,pr+=h*Ut,h=F[11],Pe+=h*bt,Ne+=h*gt,Ae+=h*St,Ie+=h*xt,Ee+=h*Ct,Le+=h*mt,qe+=h*Nt,Se+=h*Rt,Ve+=h*Pt,Ke+=h*Lt,Qe+=h*Mt,Ye+=h*It,Xe+=h*Dt,_r+=h*ut,pr+=h*kt,kr+=h*Ut,h=F[12],Ne+=h*bt,Ae+=h*gt,Ie+=h*St,Ee+=h*xt,Le+=h*Ct,qe+=h*mt,Se+=h*Nt,Ve+=h*Rt,Ke+=h*Pt,Qe+=h*Lt,Ye+=h*Mt,Xe+=h*It,_r+=h*Dt,pr+=h*ut,kr+=h*kt,cr+=h*Ut,h=F[13],Ae+=h*bt,Ie+=h*gt,Ee+=h*St,Le+=h*xt,qe+=h*Ct,Se+=h*mt,Ve+=h*Nt,Ke+=h*Rt,Qe+=h*Pt,Ye+=h*Lt,Xe+=h*Mt,_r+=h*It,pr+=h*Dt,kr+=h*ut,cr+=h*kt,Xt+=h*Ut,h=F[14],Ie+=h*bt,Ee+=h*gt,Le+=h*St,qe+=h*xt,Se+=h*Ct,Ve+=h*mt,Ke+=h*Nt,Qe+=h*Rt,Ye+=h*Pt,Xe+=h*Lt,_r+=h*Mt,pr+=h*It,kr+=h*Dt,cr+=h*ut,Xt+=h*kt,oi+=h*Ut,h=F[15],Ee+=h*bt,Le+=h*gt,qe+=h*St,Se+=h*xt,Ve+=h*Ct,Ke+=h*mt,Qe+=h*Nt,Ye+=h*Rt,Xe+=h*Pt,_r+=h*Lt,pr+=h*Mt,kr+=h*It,cr+=h*Dt,Xt+=h*ut,oi+=h*kt,Bi+=h*Ut,oe+=38*Le,le+=38*qe,Be+=38*Se,Oe+=38*Ve,We+=38*Ke,Ge+=38*Qe,ct+=38*Ye,lt+=38*Xe,ze+=38*_r,ke+=38*pr,Ue+=38*kr,Pe+=38*cr,Ne+=38*Xt,Ae+=38*oi,Ie+=38*Bi,T=1,h=oe+T+65535,T=Math.floor(h/65536),oe=h-T*65536,h=le+T+65535,T=Math.floor(h/65536),le=h-T*65536,h=Be+T+65535,T=Math.floor(h/65536),Be=h-T*65536,h=Oe+T+65535,T=Math.floor(h/65536),Oe=h-T*65536,h=We+T+65535,T=Math.floor(h/65536),We=h-T*65536,h=Ge+T+65535,T=Math.floor(h/65536),Ge=h-T*65536,h=ct+T+65535,T=Math.floor(h/65536),ct=h-T*65536,h=lt+T+65535,T=Math.floor(h/65536),lt=h-T*65536,h=ze+T+65535,T=Math.floor(h/65536),ze=h-T*65536,h=ke+T+65535,T=Math.floor(h/65536),ke=h-T*65536,h=Ue+T+65535,T=Math.floor(h/65536),Ue=h-T*65536,h=Pe+T+65535,T=Math.floor(h/65536),Pe=h-T*65536,h=Ne+T+65535,T=Math.floor(h/65536),Ne=h-T*65536,h=Ae+T+65535,T=Math.floor(h/65536),Ae=h-T*65536,h=Ie+T+65535,T=Math.floor(h/65536),Ie=h-T*65536,h=Ee+T+65535,T=Math.floor(h/65536),Ee=h-T*65536,oe+=T-1+37*(T-1),T=1,h=oe+T+65535,T=Math.floor(h/65536),oe=h-T*65536,h=le+T+65535,T=Math.floor(h/65536),le=h-T*65536,h=Be+T+65535,T=Math.floor(h/65536),Be=h-T*65536,h=Oe+T+65535,T=Math.floor(h/65536),Oe=h-T*65536,h=We+T+65535,T=Math.floor(h/65536),We=h-T*65536,h=Ge+T+65535,T=Math.floor(h/65536),Ge=h-T*65536,h=ct+T+65535,T=Math.floor(h/65536),ct=h-T*65536,h=lt+T+65535,T=Math.floor(h/65536),lt=h-T*65536,h=ze+T+65535,T=Math.floor(h/65536),ze=h-T*65536,h=ke+T+65535,T=Math.floor(h/65536),ke=h-T*65536,h=Ue+T+65535,T=Math.floor(h/65536),Ue=h-T*65536,h=Pe+T+65535,T=Math.floor(h/65536),Pe=h-T*65536,h=Ne+T+65535,T=Math.floor(h/65536),Ne=h-T*65536,h=Ae+T+65535,T=Math.floor(h/65536),Ae=h-T*65536,h=Ie+T+65535,T=Math.floor(h/65536),Ie=h-T*65536,h=Ee+T+65535,T=Math.floor(h/65536),Ee=h-T*65536,oe+=T-1+37*(T-1),B[0]=oe,B[1]=le,B[2]=Be,B[3]=Oe,B[4]=We,B[5]=Ge,B[6]=ct,B[7]=lt,B[8]=ze,B[9]=ke,B[10]=Ue,B[11]=Pe,B[12]=Ne,B[13]=Ae,B[14]=Ie,B[15]=Ee}function m(B,F){l(B,F,F)}function N(B,F){const L=i();let h;for(h=0;h<16;h++)L[h]=F[h];for(h=253;h>=0;h--)m(L,L),h!==2&&h!==4&&l(L,L,F);for(h=0;h<16;h++)B[h]=L[h]}function $(B,F){const L=i();let h;for(h=0;h<16;h++)L[h]=F[h];for(h=250;h>=0;h--)m(L,L),h!==1&&l(L,L,F);for(h=0;h<16;h++)B[h]=L[h]}function z(B,F){const L=i(),h=i(),T=i(),oe=i(),le=i(),Be=i(),Oe=i(),We=i(),Ge=i();g(L,B[1],B[0]),g(Ge,F[1],F[0]),l(L,L,Ge),w(h,B[0],B[1]),w(Ge,F[0],F[1]),l(h,h,Ge),l(T,B[3],F[3]),l(T,T,u),l(oe,B[2],F[2]),w(oe,oe,oe),g(le,h,L),g(Be,oe,T),w(Oe,oe,T),w(We,h,L),l(B[0],le,Be),l(B[1],We,Oe),l(B[2],Oe,Be),l(B[3],le,We)}function W(B,F,L){for(let h=0;h<4;h++)S(B[h],F[h],L)}function X(B,F){const L=i(),h=i(),T=i();N(T,F[2]),l(L,F[0],T),l(h,F[1],T),C(B,h),B[31]^=x(L)<<7}function R(B,F,L){y(B[0],o),y(B[1],a),y(B[2],a),y(B[3],o);for(let h=255;h>=0;--h){const T=L[h/8|0]>>(h&7)&1;W(B,F,T),z(F,B),z(B,B),W(B,F,T)}}function j(B,F){const L=[i(),i(),i(),i()];y(L[0],d),y(L[1],f),y(L[2],a),l(L[3],d,f),R(B,L,F)}function se(B){if(B.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const F=(0,r.hash)(B);F[0]&=248,F[31]&=127,F[31]|=64;const L=new Uint8Array(32),h=[i(),i(),i(),i()];j(h,F),X(L,h);const T=new Uint8Array(64);return T.set(B),T.set(L,32),{publicKey:L,secretKey:T}}t.generateKeyPairFromSeed=se;function Z(B){const F=(0,e.randomBytes)(32,B),L=se(F);return(0,n.wipe)(F),L}t.generateKeyPair=Z;function H(B){if(B.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(B.subarray(32))}t.extractPublicKeyFromSecretKey=H;const Y=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function V(B,F){let L,h,T,oe;for(h=63;h>=32;--h){for(L=0,T=h-32,oe=h-12;T<oe;++T)F[T]+=L-16*F[h]*Y[T-(h-32)],L=Math.floor((F[T]+128)/256),F[T]-=L*256;F[T]+=L,F[h]=0}for(L=0,T=0;T<32;T++)F[T]+=L-(F[31]>>4)*Y[T],L=F[T]>>8,F[T]&=255;for(T=0;T<32;T++)F[T]-=L*Y[T];for(h=0;h<32;h++)F[h+1]+=F[h]>>8,B[h]=F[h]&255}function J(B){const F=new Float64Array(64);for(let L=0;L<64;L++)F[L]=B[L];for(let L=0;L<64;L++)B[L]=0;V(B,F)}function _e(B,F){const L=new Float64Array(64),h=[i(),i(),i(),i()],T=(0,r.hash)(B.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const oe=new Uint8Array(64);oe.set(T.subarray(32),32);const le=new r.SHA512;le.update(oe.subarray(32)),le.update(F);const Be=le.digest();le.clean(),J(Be),j(h,Be),X(oe,h),le.reset(),le.update(oe.subarray(0,32)),le.update(B.subarray(32)),le.update(F);const Oe=le.digest();J(Oe);for(let We=0;We<32;We++)L[We]=Be[We];for(let We=0;We<32;We++)for(let Ge=0;Ge<32;Ge++)L[We+Ge]+=Oe[We]*T[Ge];return V(oe.subarray(32),L),oe}t.sign=_e;function ne(B,F){const L=i(),h=i(),T=i(),oe=i(),le=i(),Be=i(),Oe=i();return y(B[2],a),v(B[1],F),m(T,B[1]),l(oe,T,c),g(T,T,B[2]),w(oe,B[2],oe),m(le,oe),m(Be,le),l(Oe,Be,le),l(L,Oe,T),l(L,L,oe),$(L,L),l(L,L,T),l(L,L,oe),l(L,L,oe),l(B[0],L,oe),m(h,B[0]),l(h,h,oe),E(h,T)&&l(B[0],B[0],p),m(h,B[0]),l(h,h,oe),E(h,T)?-1:(x(B[0])===F[31]>>7&&g(B[0],o,B[0]),l(B[3],B[0],B[1]),0)}function ve(B,F,L){const h=new Uint8Array(32),T=[i(),i(),i(),i()],oe=[i(),i(),i(),i()];if(L.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(ne(oe,B))return!1;const le=new r.SHA512;le.update(L.subarray(0,32)),le.update(B),le.update(F);const Be=le.digest();return J(Be),R(T,oe,Be),j(oe,L.subarray(32)),z(T,oe),X(h,T),!A(L,h)}t.verify=ve;function de(B){let F=[i(),i(),i(),i()];if(ne(F,B))throw new Error("Ed25519: invalid public key");let L=i(),h=i(),T=F[1];w(L,a,T),g(h,a,T),N(h,h),l(L,L,h);let oe=new Uint8Array(32);return C(oe,L),oe}t.convertPublicKeyToX25519=de;function we(B){const F=(0,r.hash)(B.subarray(0,32));F[0]&=248,F[31]&=127,F[31]|=64;const L=new Uint8Array(F.subarray(0,32));return(0,n.wipe)(F),L}t.convertSecretKeyToX25519=we}(Ua);const e1="EdDSA",t1="JWT",id=".",sd="base64url",r1="utf8",n1="utf8",i1=":",s1="did",o1="key",od="base58btc",a1="z",c1="K36",l1=32;function qa(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ad(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?qa(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Wa(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=ad(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return qa(r)}function u1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var S=0,C=0,A=0,E=b.length;A!==E&&b[A]===0;)A++,S++;for(var x=(E-A)*d+1>>>0,v=new Uint8Array(x);A!==E;){for(var w=b[A],g=0,l=x-1;(w!==0||g<C)&&l!==-1;l--,g++)w+=256*v[l]>>>0,v[l]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");C=g,A++}for(var m=x-C;m!==x&&v[m]===0;)m++;for(var N=c.repeat(S);m<x;++m)N+=t.charAt(v[m]);return N}function p(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var S=0;if(b[S]!==" "){for(var C=0,A=0;b[S]===c;)C++,S++;for(var E=(b.length-S)*u+1>>>0,x=new Uint8Array(E);b[S];){var v=r[b.charCodeAt(S)];if(v===255)return;for(var w=0,g=E-1;(v!==0||w<A)&&g!==-1;g--,w++)v+=a*x[g]>>>0,x[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");A=w,S++}if(b[S]!==" "){for(var l=E-A;l!==E&&x[l]===0;)l++;for(var m=new Uint8Array(C+(E-l)),N=C;l!==E;)m[N++]=x[l++];return m}}}function y(b){var S=p(b);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var d1=u1,h1=d1;const f1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},p1=t=>new TextEncoder().encode(t),g1=t=>new TextDecoder().decode(t);class m1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class y1{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cd(this,e)}}class v1{constructor(e){this.decoders=e}or(e){return cd(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const cd=(t,e)=>new v1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class w1{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new m1(e,r,n),this.decoder=new y1(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ho=({name:t,prefix:e,encode:r,decode:n})=>new w1(t,e,r,n),Qi=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=h1(r,e);return ho({prefix:t,name:e,encode:n,decode:s=>f1(i(s))})},b1=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},_1=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Wt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>ho({prefix:e,name:t,encode(i){return _1(i,n,r)},decode(i){return b1(i,n,r,t)}}),E1=ho({prefix:"\0",name:"identity",encode:t=>g1(t),decode:t=>p1(t)}),S1=Object.freeze(Object.defineProperty({__proto__:null,identity:E1},Symbol.toStringTag,{value:"Module"})),x1=Wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),C1=Object.freeze(Object.defineProperty({__proto__:null,base2:x1},Symbol.toStringTag,{value:"Module"})),I1=Wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),D1=Object.freeze(Object.defineProperty({__proto__:null,base8:I1},Symbol.toStringTag,{value:"Module"})),O1=Qi({prefix:"9",name:"base10",alphabet:"0123456789"}),A1=Object.freeze(Object.defineProperty({__proto__:null,base10:O1},Symbol.toStringTag,{value:"Module"})),T1=Wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$1=Wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),N1=Object.freeze(Object.defineProperty({__proto__:null,base16:T1,base16upper:$1},Symbol.toStringTag,{value:"Module"})),R1=Wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),P1=Wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),L1=Wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),M1=Wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),k1=Wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),U1=Wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),j1=Wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),F1=Wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),B1=Wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),z1=Object.freeze(Object.defineProperty({__proto__:null,base32:R1,base32hex:k1,base32hexpad:j1,base32hexpadupper:F1,base32hexupper:U1,base32pad:L1,base32padupper:M1,base32upper:P1,base32z:B1},Symbol.toStringTag,{value:"Module"})),q1=Qi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),W1=Qi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),V1=Object.freeze(Object.defineProperty({__proto__:null,base36:q1,base36upper:W1},Symbol.toStringTag,{value:"Module"})),H1=Qi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),K1=Qi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Z1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:H1,base58flickr:K1},Symbol.toStringTag,{value:"Module"})),G1=Wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Y1=Wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),J1=Wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Q1=Wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),X1=Object.freeze(Object.defineProperty({__proto__:null,base64:G1,base64pad:Y1,base64url:J1,base64urlpad:Q1},Symbol.toStringTag,{value:"Module"})),ld=Array.from(""),em=ld.reduce((t,e,r)=>(t[r]=e,t),[]),tm=ld.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function rm(t){return t.reduce((e,r)=>(e+=em[r],e),"")}function nm(t){const e=[];for(const r of t){const n=tm[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const im=ho({prefix:"",name:"base256emoji",encode:rm,decode:nm}),sm=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:im},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const ud={...S1,...C1,...D1,...A1,...N1,...z1,...V1,...Z1,...X1,...sm};function dd(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const hd=dd("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Va=dd("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=ad(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),fd={utf8:hd,"utf-8":hd,hex:ud.base16,latin1:Va,ascii:Va,binary:Va,...ud};function rr(t,e="utf8"){const r=fd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function ur(t,e="utf8"){const r=fd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?qa(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function fo(t){return rr(ur(ka(t),r1),sd)}function pd(t){const e=ur(c1,od),r=a1+rr(Wa([e,t]),od);return[s1,o1,r].join(i1)}function om(t){return rr(t,sd)}function am(t){return ur([fo(t.header),fo(t.payload)].join(id),n1)}function cm(t){return[fo(t.header),fo(t.payload),om(t.signature)].join(id)}function gd(t=pi.randomBytes(l1)){return Ua.generateKeyPairFromSeed(t)}async function lm(t,e,r,n,i=pe.fromMiliseconds(Date.now())){const s={alg:e1,typ:t1},o=pd(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},u=am({header:s,payload:c}),d=Ua.sign(n.secretKey,u);return cm({header:s,payload:c,signature:d})}var Ha={},po={};Object.defineProperty(po,"__esModule",{value:!0});var Zt=De,Ka=vr,um=20;function dm(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],b=r[31]<<24|r[30]<<16|r[29]<<8|r[28],S=e[3]<<24|e[2]<<16|e[1]<<8|e[0],C=e[7]<<24|e[6]<<16|e[5]<<8|e[4],A=e[11]<<24|e[10]<<16|e[9]<<8|e[8],E=e[15]<<24|e[14]<<16|e[13]<<8|e[12],x=n,v=i,w=s,g=o,l=a,m=c,N=u,$=d,z=f,W=p,X=y,R=b,j=S,se=C,Z=A,H=E,Y=0;Y<um;Y+=2)x=x+l|0,j^=x,j=j>>>32-16|j<<16,z=z+j|0,l^=z,l=l>>>32-12|l<<12,v=v+m|0,se^=v,se=se>>>32-16|se<<16,W=W+se|0,m^=W,m=m>>>32-12|m<<12,w=w+N|0,Z^=w,Z=Z>>>32-16|Z<<16,X=X+Z|0,N^=X,N=N>>>32-12|N<<12,g=g+$|0,H^=g,H=H>>>32-16|H<<16,R=R+H|0,$^=R,$=$>>>32-12|$<<12,w=w+N|0,Z^=w,Z=Z>>>32-8|Z<<8,X=X+Z|0,N^=X,N=N>>>32-7|N<<7,g=g+$|0,H^=g,H=H>>>32-8|H<<8,R=R+H|0,$^=R,$=$>>>32-7|$<<7,v=v+m|0,se^=v,se=se>>>32-8|se<<8,W=W+se|0,m^=W,m=m>>>32-7|m<<7,x=x+l|0,j^=x,j=j>>>32-8|j<<8,z=z+j|0,l^=z,l=l>>>32-7|l<<7,x=x+m|0,H^=x,H=H>>>32-16|H<<16,X=X+H|0,m^=X,m=m>>>32-12|m<<12,v=v+N|0,j^=v,j=j>>>32-16|j<<16,R=R+j|0,N^=R,N=N>>>32-12|N<<12,w=w+$|0,se^=w,se=se>>>32-16|se<<16,z=z+se|0,$^=z,$=$>>>32-12|$<<12,g=g+l|0,Z^=g,Z=Z>>>32-16|Z<<16,W=W+Z|0,l^=W,l=l>>>32-12|l<<12,w=w+$|0,se^=w,se=se>>>32-8|se<<8,z=z+se|0,$^=z,$=$>>>32-7|$<<7,g=g+l|0,Z^=g,Z=Z>>>32-8|Z<<8,W=W+Z|0,l^=W,l=l>>>32-7|l<<7,v=v+N|0,j^=v,j=j>>>32-8|j<<8,R=R+j|0,N^=R,N=N>>>32-7|N<<7,x=x+m|0,H^=x,H=H>>>32-8|H<<8,X=X+H|0,m^=X,m=m>>>32-7|m<<7;Zt.writeUint32LE(x+n|0,t,0),Zt.writeUint32LE(v+i|0,t,4),Zt.writeUint32LE(w+s|0,t,8),Zt.writeUint32LE(g+o|0,t,12),Zt.writeUint32LE(l+a|0,t,16),Zt.writeUint32LE(m+c|0,t,20),Zt.writeUint32LE(N+u|0,t,24),Zt.writeUint32LE($+d|0,t,28),Zt.writeUint32LE(z+f|0,t,32),Zt.writeUint32LE(W+p|0,t,36),Zt.writeUint32LE(X+y|0,t,40),Zt.writeUint32LE(R+b|0,t,44),Zt.writeUint32LE(j+S|0,t,48),Zt.writeUint32LE(se+C|0,t,52),Zt.writeUint32LE(Z+A|0,t,56),Zt.writeUint32LE(H+E|0,t,60)}function md(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){dm(a,s,t);for(var u=c;u<c+64&&u<r.length;u++)n[u]=r[u]^a[u-c];fm(s,0,o)}return Ka.wipe(a),i===0&&Ka.wipe(s),n}po.streamXOR=md;function hm(t,e,r,n){return n===void 0&&(n=0),Ka.wipe(r),md(t,e,r,r,n)}po.stream=hm;function fm(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var yd={},mn={};Object.defineProperty(mn,"__esModule",{value:!0});function pm(t,e,r){return~(t-1)&e|t-1&r}mn.select=pm;function gm(t,e){return(t|0)-(e|0)-1>>>31&1}mn.lessOrEqual=gm;function vd(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}mn.compare=vd;function mm(t,e){return t.length===0||e.length===0?!1:vd(t,e)!==0}mn.equal=mm,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=mn,r=vr;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var u=a[2]|a[3]<<8;this._r[1]=(c>>>13|u<<3)&8191;var d=a[4]|a[5]<<8;this._r[2]=(u>>>10|d<<6)&7939;var f=a[6]|a[7]<<8;this._r[3]=(d>>>7|f<<9)&8191;var p=a[8]|a[9]<<8;this._r[4]=(f>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var y=a[10]|a[11]<<8;this._r[6]=(p>>>14|y<<2)&8191;var b=a[12]|a[13]<<8;this._r[7]=(y>>>11|b<<5)&8065;var S=a[14]|a[15]<<8;this._r[8]=(b>>>8|S<<8)&8191,this._r[9]=S>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,u){for(var d=this._fin?0:2048,f=this._h[0],p=this._h[1],y=this._h[2],b=this._h[3],S=this._h[4],C=this._h[5],A=this._h[6],E=this._h[7],x=this._h[8],v=this._h[9],w=this._r[0],g=this._r[1],l=this._r[2],m=this._r[3],N=this._r[4],$=this._r[5],z=this._r[6],W=this._r[7],X=this._r[8],R=this._r[9];u>=16;){var j=a[c+0]|a[c+1]<<8;f+=j&8191;var se=a[c+2]|a[c+3]<<8;p+=(j>>>13|se<<3)&8191;var Z=a[c+4]|a[c+5]<<8;y+=(se>>>10|Z<<6)&8191;var H=a[c+6]|a[c+7]<<8;b+=(Z>>>7|H<<9)&8191;var Y=a[c+8]|a[c+9]<<8;S+=(H>>>4|Y<<12)&8191,C+=Y>>>1&8191;var V=a[c+10]|a[c+11]<<8;A+=(Y>>>14|V<<2)&8191;var J=a[c+12]|a[c+13]<<8;E+=(V>>>11|J<<5)&8191;var _e=a[c+14]|a[c+15]<<8;x+=(J>>>8|_e<<8)&8191,v+=_e>>>5|d;var ne=0,ve=ne;ve+=f*w,ve+=p*(5*R),ve+=y*(5*X),ve+=b*(5*W),ve+=S*(5*z),ne=ve>>>13,ve&=8191,ve+=C*(5*$),ve+=A*(5*N),ve+=E*(5*m),ve+=x*(5*l),ve+=v*(5*g),ne+=ve>>>13,ve&=8191;var de=ne;de+=f*g,de+=p*w,de+=y*(5*R),de+=b*(5*X),de+=S*(5*W),ne=de>>>13,de&=8191,de+=C*(5*z),de+=A*(5*$),de+=E*(5*N),de+=x*(5*m),de+=v*(5*l),ne+=de>>>13,de&=8191;var we=ne;we+=f*l,we+=p*g,we+=y*w,we+=b*(5*R),we+=S*(5*X),ne=we>>>13,we&=8191,we+=C*(5*W),we+=A*(5*z),we+=E*(5*$),we+=x*(5*N),we+=v*(5*m),ne+=we>>>13,we&=8191;var B=ne;B+=f*m,B+=p*l,B+=y*g,B+=b*w,B+=S*(5*R),ne=B>>>13,B&=8191,B+=C*(5*X),B+=A*(5*W),B+=E*(5*z),B+=x*(5*$),B+=v*(5*N),ne+=B>>>13,B&=8191;var F=ne;F+=f*N,F+=p*m,F+=y*l,F+=b*g,F+=S*w,ne=F>>>13,F&=8191,F+=C*(5*R),F+=A*(5*X),F+=E*(5*W),F+=x*(5*z),F+=v*(5*$),ne+=F>>>13,F&=8191;var L=ne;L+=f*$,L+=p*N,L+=y*m,L+=b*l,L+=S*g,ne=L>>>13,L&=8191,L+=C*w,L+=A*(5*R),L+=E*(5*X),L+=x*(5*W),L+=v*(5*z),ne+=L>>>13,L&=8191;var h=ne;h+=f*z,h+=p*$,h+=y*N,h+=b*m,h+=S*l,ne=h>>>13,h&=8191,h+=C*g,h+=A*w,h+=E*(5*R),h+=x*(5*X),h+=v*(5*W),ne+=h>>>13,h&=8191;var T=ne;T+=f*W,T+=p*z,T+=y*$,T+=b*N,T+=S*m,ne=T>>>13,T&=8191,T+=C*l,T+=A*g,T+=E*w,T+=x*(5*R),T+=v*(5*X),ne+=T>>>13,T&=8191;var oe=ne;oe+=f*X,oe+=p*W,oe+=y*z,oe+=b*$,oe+=S*N,ne=oe>>>13,oe&=8191,oe+=C*m,oe+=A*l,oe+=E*g,oe+=x*w,oe+=v*(5*R),ne+=oe>>>13,oe&=8191;var le=ne;le+=f*R,le+=p*X,le+=y*W,le+=b*z,le+=S*$,ne=le>>>13,le&=8191,le+=C*N,le+=A*m,le+=E*l,le+=x*g,le+=v*w,ne+=le>>>13,le&=8191,ne=(ne<<2)+ne|0,ne=ne+ve|0,ve=ne&8191,ne=ne>>>13,de+=ne,f=ve,p=de,y=we,b=B,S=F,C=L,A=h,E=T,x=oe,v=le,c+=16,u-=16}this._h[0]=f,this._h[1]=p,this._h[2]=y,this._h[3]=b,this._h[4]=S,this._h[5]=C,this._h[6]=A,this._h[7]=E,this._h[8]=x,this._h[9]=v},o.prototype.finish=function(a,c){c===void 0&&(c=0);var u=new Uint16Array(10),d,f,p,y;if(this._leftover){for(y=this._leftover,this._buffer[y++]=1;y<16;y++)this._buffer[y]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,y=2;y<10;y++)this._h[y]+=d,d=this._h[y]>>>13,this._h[y]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,u[0]=this._h[0]+5,d=u[0]>>>13,u[0]&=8191,y=1;y<10;y++)u[y]=this._h[y]+d,d=u[y]>>>13,u[y]&=8191;for(u[9]-=8192,f=(d^1)-1,y=0;y<10;y++)u[y]&=f;for(f=~f,y=0;y<10;y++)this._h[y]=this._h[y]&f|u[y];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,p=this._h[0]+this._pad[0],this._h[0]=p&65535,y=1;y<8;y++)p=(this._h[y]+this._pad[y]|0)+(p>>>16)|0,this._h[y]=p&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,u=a.length,d;if(this._leftover){d=16-this._leftover,d>u&&(d=u);for(var f=0;f<d;f++)this._buffer[this._leftover+f]=a[c+f];if(u-=d,c+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(d=u-u%16,this._blocks(a,c,d),c+=d,u-=d),u){for(var f=0;f<u;f++)this._buffer[this._leftover+f]=a[c+f];this._leftover+=u}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var u=c.digest();return c.clean(),u}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(yd),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=po,r=yd,n=vr,i=De,s=mn;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function c(u){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,u.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return c.prototype.seal=function(u,d,f,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var y=new Uint8Array(16);y.set(u,y.length-u.length);var b=new Uint8Array(32);e.stream(this._key,y,b,4);var S=d.length+this.tagLength,C;if(p){if(p.length!==S)throw new Error("ChaCha20Poly1305: incorrect destination length");C=p}else C=new Uint8Array(S);return e.streamXOR(this._key,y,d,C,4),this._authenticate(C.subarray(C.length-this.tagLength,C.length),b,C.subarray(0,C.length-this.tagLength),f),n.wipe(y),C},c.prototype.open=function(u,d,f,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var y=new Uint8Array(16);y.set(u,y.length-u.length);var b=new Uint8Array(32);e.stream(this._key,y,b,4);var S=new Uint8Array(this.tagLength);if(this._authenticate(S,b,d.subarray(0,d.length-this.tagLength),f),!s.equal(S,d.subarray(d.length-this.tagLength,d.length)))return null;var C=d.length-this.tagLength,A;if(p){if(p.length!==C)throw new Error("ChaCha20Poly1305: incorrect destination length");A=p}else A=new Uint8Array(C);return e.streamXOR(this._key,y,d.subarray(0,d.length-this.tagLength),A,4),n.wipe(y),A},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(u,d,f,p){var y=new r.Poly1305(d);p&&(y.update(p),p.length%16>0&&y.update(o.subarray(p.length%16))),y.update(f),f.length%16>0&&y.update(o.subarray(f.length%16));var b=new Uint8Array(8);p&&i.writeUint64LE(p.length,b),y.update(b),i.writeUint64LE(f.length,b),y.update(b);for(var S=y.digest(),C=0;C<S.length;C++)u[C]=S[C];y.clean(),n.wipe(S),n.wipe(b)},c}();t.ChaCha20Poly1305=a}(Ha);var wd={},Xi={},Za={};Object.defineProperty(Za,"__esModule",{value:!0});function ym(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Za.isSerializableHash=ym,Object.defineProperty(Xi,"__esModule",{value:!0});var Wr=Za,vm=mn,wm=vr,bd=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Wr.isSerializableHash(this._inner)&&Wr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),wm.wipe(n)}return t.prototype.reset=function(){if(!Wr.isSerializableHash(this._inner)||!Wr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Wr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Wr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Wr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Wr.isSerializableHash(this._inner)||!Wr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Wr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();Xi.HMAC=bd;function bm(t,e,r){var n=new bd(t,e);n.update(r);var i=n.digest();return n.clean(),i}Xi.hmac=bm,Xi.equal=vm.equal,Object.defineProperty(wd,"__esModule",{value:!0});var _d=Xi,Ed=vr,_m=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=_d.hmac(this._hash,n,r);this._hmac=new _d.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Ed.wipe(this._buffer),Ed.wipe(this._counter),this._bufpos=0},t}(),Em=wd.HKDF=_m,go={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=De,r=vr;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=s(this._temp,this._state,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,p=u<<3,y=u%64<56?64:128;this._buffer[d]=128;for(var b=d+1;b<y-8;b++)this._buffer[b]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._temp,this._state,this._buffer,0,y),this._finished=!0}for(var b=0;b<this.digestLength/4;b++)e.writeUint32BE(this._state[b],c,b*4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,c,u,d,f){for(;f>=64;){for(var p=c[0],y=c[1],b=c[2],S=c[3],C=c[4],A=c[5],E=c[6],x=c[7],v=0;v<16;v++){var w=d+v*4;a[v]=e.readUint32BE(u,w)}for(var v=16;v<64;v++){var g=a[v-2],l=(g>>>17|g<<32-17)^(g>>>19|g<<32-19)^g>>>10;g=a[v-15];var m=(g>>>7|g<<32-7)^(g>>>18|g<<32-18)^g>>>3;a[v]=(l+a[v-7]|0)+(m+a[v-16]|0)}for(var v=0;v<64;v++){var l=(((C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7))+(C&A^~C&E)|0)+(x+(i[v]+a[v]|0)|0)|0,m=((p>>>2|p<<32-2)^(p>>>13|p<<32-13)^(p>>>22|p<<32-22))+(p&y^p&b^y&b)|0;x=E,E=A,A=C,C=S+l|0,S=b,b=y,y=p,p=l+m|0}c[0]+=p,c[1]+=y,c[2]+=b,c[3]+=S,c[4]+=C,c[5]+=A,c[6]+=E,c[7]+=x,d+=64,f-=64}return d}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(go);var Ga={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=pi,r=vr;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(v){const w=new Float64Array(16);if(v)for(let g=0;g<v.length;g++)w[g]=v[g];return w}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(v){let w=1;for(let g=0;g<16;g++){let l=v[g]+w+65535;w=Math.floor(l/65536),v[g]=l-w*65536}v[0]+=w-1+37*(w-1)}function a(v,w,g){const l=~(g-1);for(let m=0;m<16;m++){const N=l&(v[m]^w[m]);v[m]^=N,w[m]^=N}}function c(v,w){const g=n(),l=n();for(let m=0;m<16;m++)l[m]=w[m];o(l),o(l),o(l);for(let m=0;m<2;m++){g[0]=l[0]-65517;for(let $=1;$<15;$++)g[$]=l[$]-65535-(g[$-1]>>16&1),g[$-1]&=65535;g[15]=l[15]-32767-(g[14]>>16&1);const N=g[15]>>16&1;g[14]&=65535,a(l,g,1-N)}for(let m=0;m<16;m++)v[2*m]=l[m]&255,v[2*m+1]=l[m]>>8}function u(v,w){for(let g=0;g<16;g++)v[g]=w[2*g]+(w[2*g+1]<<8);v[15]&=32767}function d(v,w,g){for(let l=0;l<16;l++)v[l]=w[l]+g[l]}function f(v,w,g){for(let l=0;l<16;l++)v[l]=w[l]-g[l]}function p(v,w,g){let l,m,N=0,$=0,z=0,W=0,X=0,R=0,j=0,se=0,Z=0,H=0,Y=0,V=0,J=0,_e=0,ne=0,ve=0,de=0,we=0,B=0,F=0,L=0,h=0,T=0,oe=0,le=0,Be=0,Oe=0,We=0,Ge=0,ct=0,lt=0,ze=g[0],ke=g[1],Ue=g[2],Pe=g[3],Ne=g[4],Ae=g[5],Ie=g[6],Ee=g[7],Le=g[8],qe=g[9],Se=g[10],Ve=g[11],Ke=g[12],Qe=g[13],Ye=g[14],Xe=g[15];l=w[0],N+=l*ze,$+=l*ke,z+=l*Ue,W+=l*Pe,X+=l*Ne,R+=l*Ae,j+=l*Ie,se+=l*Ee,Z+=l*Le,H+=l*qe,Y+=l*Se,V+=l*Ve,J+=l*Ke,_e+=l*Qe,ne+=l*Ye,ve+=l*Xe,l=w[1],$+=l*ze,z+=l*ke,W+=l*Ue,X+=l*Pe,R+=l*Ne,j+=l*Ae,se+=l*Ie,Z+=l*Ee,H+=l*Le,Y+=l*qe,V+=l*Se,J+=l*Ve,_e+=l*Ke,ne+=l*Qe,ve+=l*Ye,de+=l*Xe,l=w[2],z+=l*ze,W+=l*ke,X+=l*Ue,R+=l*Pe,j+=l*Ne,se+=l*Ae,Z+=l*Ie,H+=l*Ee,Y+=l*Le,V+=l*qe,J+=l*Se,_e+=l*Ve,ne+=l*Ke,ve+=l*Qe,de+=l*Ye,we+=l*Xe,l=w[3],W+=l*ze,X+=l*ke,R+=l*Ue,j+=l*Pe,se+=l*Ne,Z+=l*Ae,H+=l*Ie,Y+=l*Ee,V+=l*Le,J+=l*qe,_e+=l*Se,ne+=l*Ve,ve+=l*Ke,de+=l*Qe,we+=l*Ye,B+=l*Xe,l=w[4],X+=l*ze,R+=l*ke,j+=l*Ue,se+=l*Pe,Z+=l*Ne,H+=l*Ae,Y+=l*Ie,V+=l*Ee,J+=l*Le,_e+=l*qe,ne+=l*Se,ve+=l*Ve,de+=l*Ke,we+=l*Qe,B+=l*Ye,F+=l*Xe,l=w[5],R+=l*ze,j+=l*ke,se+=l*Ue,Z+=l*Pe,H+=l*Ne,Y+=l*Ae,V+=l*Ie,J+=l*Ee,_e+=l*Le,ne+=l*qe,ve+=l*Se,de+=l*Ve,we+=l*Ke,B+=l*Qe,F+=l*Ye,L+=l*Xe,l=w[6],j+=l*ze,se+=l*ke,Z+=l*Ue,H+=l*Pe,Y+=l*Ne,V+=l*Ae,J+=l*Ie,_e+=l*Ee,ne+=l*Le,ve+=l*qe,de+=l*Se,we+=l*Ve,B+=l*Ke,F+=l*Qe,L+=l*Ye,h+=l*Xe,l=w[7],se+=l*ze,Z+=l*ke,H+=l*Ue,Y+=l*Pe,V+=l*Ne,J+=l*Ae,_e+=l*Ie,ne+=l*Ee,ve+=l*Le,de+=l*qe,we+=l*Se,B+=l*Ve,F+=l*Ke,L+=l*Qe,h+=l*Ye,T+=l*Xe,l=w[8],Z+=l*ze,H+=l*ke,Y+=l*Ue,V+=l*Pe,J+=l*Ne,_e+=l*Ae,ne+=l*Ie,ve+=l*Ee,de+=l*Le,we+=l*qe,B+=l*Se,F+=l*Ve,L+=l*Ke,h+=l*Qe,T+=l*Ye,oe+=l*Xe,l=w[9],H+=l*ze,Y+=l*ke,V+=l*Ue,J+=l*Pe,_e+=l*Ne,ne+=l*Ae,ve+=l*Ie,de+=l*Ee,we+=l*Le,B+=l*qe,F+=l*Se,L+=l*Ve,h+=l*Ke,T+=l*Qe,oe+=l*Ye,le+=l*Xe,l=w[10],Y+=l*ze,V+=l*ke,J+=l*Ue,_e+=l*Pe,ne+=l*Ne,ve+=l*Ae,de+=l*Ie,we+=l*Ee,B+=l*Le,F+=l*qe,L+=l*Se,h+=l*Ve,T+=l*Ke,oe+=l*Qe,le+=l*Ye,Be+=l*Xe,l=w[11],V+=l*ze,J+=l*ke,_e+=l*Ue,ne+=l*Pe,ve+=l*Ne,de+=l*Ae,we+=l*Ie,B+=l*Ee,F+=l*Le,L+=l*qe,h+=l*Se,T+=l*Ve,oe+=l*Ke,le+=l*Qe,Be+=l*Ye,Oe+=l*Xe,l=w[12],J+=l*ze,_e+=l*ke,ne+=l*Ue,ve+=l*Pe,de+=l*Ne,we+=l*Ae,B+=l*Ie,F+=l*Ee,L+=l*Le,h+=l*qe,T+=l*Se,oe+=l*Ve,le+=l*Ke,Be+=l*Qe,Oe+=l*Ye,We+=l*Xe,l=w[13],_e+=l*ze,ne+=l*ke,ve+=l*Ue,de+=l*Pe,we+=l*Ne,B+=l*Ae,F+=l*Ie,L+=l*Ee,h+=l*Le,T+=l*qe,oe+=l*Se,le+=l*Ve,Be+=l*Ke,Oe+=l*Qe,We+=l*Ye,Ge+=l*Xe,l=w[14],ne+=l*ze,ve+=l*ke,de+=l*Ue,we+=l*Pe,B+=l*Ne,F+=l*Ae,L+=l*Ie,h+=l*Ee,T+=l*Le,oe+=l*qe,le+=l*Se,Be+=l*Ve,Oe+=l*Ke,We+=l*Qe,Ge+=l*Ye,ct+=l*Xe,l=w[15],ve+=l*ze,de+=l*ke,we+=l*Ue,B+=l*Pe,F+=l*Ne,L+=l*Ae,h+=l*Ie,T+=l*Ee,oe+=l*Le,le+=l*qe,Be+=l*Se,Oe+=l*Ve,We+=l*Ke,Ge+=l*Qe,ct+=l*Ye,lt+=l*Xe,N+=38*de,$+=38*we,z+=38*B,W+=38*F,X+=38*L,R+=38*h,j+=38*T,se+=38*oe,Z+=38*le,H+=38*Be,Y+=38*Oe,V+=38*We,J+=38*Ge,_e+=38*ct,ne+=38*lt,m=1,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=$+m+65535,m=Math.floor(l/65536),$=l-m*65536,l=z+m+65535,m=Math.floor(l/65536),z=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=X+m+65535,m=Math.floor(l/65536),X=l-m*65536,l=R+m+65535,m=Math.floor(l/65536),R=l-m*65536,l=j+m+65535,m=Math.floor(l/65536),j=l-m*65536,l=se+m+65535,m=Math.floor(l/65536),se=l-m*65536,l=Z+m+65535,m=Math.floor(l/65536),Z=l-m*65536,l=H+m+65535,m=Math.floor(l/65536),H=l-m*65536,l=Y+m+65535,m=Math.floor(l/65536),Y=l-m*65536,l=V+m+65535,m=Math.floor(l/65536),V=l-m*65536,l=J+m+65535,m=Math.floor(l/65536),J=l-m*65536,l=_e+m+65535,m=Math.floor(l/65536),_e=l-m*65536,l=ne+m+65535,m=Math.floor(l/65536),ne=l-m*65536,l=ve+m+65535,m=Math.floor(l/65536),ve=l-m*65536,N+=m-1+37*(m-1),m=1,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=$+m+65535,m=Math.floor(l/65536),$=l-m*65536,l=z+m+65535,m=Math.floor(l/65536),z=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=X+m+65535,m=Math.floor(l/65536),X=l-m*65536,l=R+m+65535,m=Math.floor(l/65536),R=l-m*65536,l=j+m+65535,m=Math.floor(l/65536),j=l-m*65536,l=se+m+65535,m=Math.floor(l/65536),se=l-m*65536,l=Z+m+65535,m=Math.floor(l/65536),Z=l-m*65536,l=H+m+65535,m=Math.floor(l/65536),H=l-m*65536,l=Y+m+65535,m=Math.floor(l/65536),Y=l-m*65536,l=V+m+65535,m=Math.floor(l/65536),V=l-m*65536,l=J+m+65535,m=Math.floor(l/65536),J=l-m*65536,l=_e+m+65535,m=Math.floor(l/65536),_e=l-m*65536,l=ne+m+65535,m=Math.floor(l/65536),ne=l-m*65536,l=ve+m+65535,m=Math.floor(l/65536),ve=l-m*65536,N+=m-1+37*(m-1),v[0]=N,v[1]=$,v[2]=z,v[3]=W,v[4]=X,v[5]=R,v[6]=j,v[7]=se,v[8]=Z,v[9]=H,v[10]=Y,v[11]=V,v[12]=J,v[13]=_e,v[14]=ne,v[15]=ve}function y(v,w){p(v,w,w)}function b(v,w){const g=n();for(let l=0;l<16;l++)g[l]=w[l];for(let l=253;l>=0;l--)y(g,g),l!==2&&l!==4&&p(g,g,w);for(let l=0;l<16;l++)v[l]=g[l]}function S(v,w){const g=new Uint8Array(32),l=new Float64Array(80),m=n(),N=n(),$=n(),z=n(),W=n(),X=n();for(let Z=0;Z<31;Z++)g[Z]=v[Z];g[31]=v[31]&127|64,g[0]&=248,u(l,w);for(let Z=0;Z<16;Z++)N[Z]=l[Z];m[0]=z[0]=1;for(let Z=254;Z>=0;--Z){const H=g[Z>>>3]>>>(Z&7)&1;a(m,N,H),a($,z,H),d(W,m,$),f(m,m,$),d($,N,z),f(N,N,z),y(z,W),y(X,m),p(m,$,m),p($,N,W),d(W,m,$),f(m,m,$),y(N,m),f($,z,X),p(m,$,s),d(m,m,z),p($,$,m),p(m,z,X),p(z,N,l),y(N,W),a(m,N,H),a($,z,H)}for(let Z=0;Z<16;Z++)l[Z+16]=m[Z],l[Z+32]=$[Z],l[Z+48]=N[Z],l[Z+64]=z[Z];const R=l.subarray(32),j=l.subarray(16);b(R,R),p(j,j,R);const se=new Uint8Array(32);return c(se,j),se}t.scalarMult=S;function C(v){return S(v,i)}t.scalarMultBase=C;function A(v){if(v.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const w=new Uint8Array(v);return{publicKey:C(w),secretKey:w}}t.generateKeyPairFromSeed=A;function E(v){const w=(0,e.randomBytes)(32,v),g=A(w);return(0,r.wipe)(w),g}t.generateKeyPair=E;function x(v,w,g=!1){if(v.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(w.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const l=S(v,w);if(g){let m=0;for(let N=0;N<l.length;N++)m|=l[N];if(m===0)throw new Error("X25519: invalid shared key")}return l}t.sharedKey=x})(Ga);var Sd=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Sm=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),xm=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Cm=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Im=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Dm=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Om=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Am=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,xd=3,Tm=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Om]],Cd=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function $m(t){return t?Id(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Dm:typeof navigator<"u"?Id(navigator.userAgent):Pm()}function Nm(t){return t!==""&&Tm.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Id(t){var e=Nm(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Im;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<xd&&(i=Sd(Sd([],i,!0),Lm(xd-i.length),!0)):i=[];var s=i.join("."),o=Rm(t),a=Am.exec(t);return a&&a[1]?new Cm(r,s,o,a[1]):new Sm(r,s,o)}function Rm(t){for(var e=0,r=Cd.length;e<r;e++){var n=Cd[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function Pm(){var t=typeof process<"u"&&process.version;return t?new xm(process.version.slice(1)):null}function Lm(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var at={};Object.defineProperty(at,"__esModule",{value:!0}),at.getLocalStorage=at.getLocalStorageOrThrow=at.getCrypto=at.getCryptoOrThrow=Od=at.getLocation=at.getLocationOrThrow=Ya=at.getNavigator=at.getNavigatorOrThrow=Dd=at.getDocument=at.getDocumentOrThrow=at.getFromWindowOrThrow=at.getFromWindow=void 0;function Bn(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}at.getFromWindow=Bn;function gi(t){const e=Bn(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}at.getFromWindowOrThrow=gi;function Mm(){return gi("document")}at.getDocumentOrThrow=Mm;function km(){return Bn("document")}var Dd=at.getDocument=km;function Um(){return gi("navigator")}at.getNavigatorOrThrow=Um;function jm(){return Bn("navigator")}var Ya=at.getNavigator=jm;function Fm(){return gi("location")}at.getLocationOrThrow=Fm;function Bm(){return Bn("location")}var Od=at.getLocation=Bm;function zm(){return gi("crypto")}at.getCryptoOrThrow=zm;function qm(){return Bn("crypto")}at.getCrypto=qm;function Wm(){return gi("localStorage")}at.getLocalStorageOrThrow=Wm;function Vm(){return Bn("localStorage")}at.getLocalStorage=Vm;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});var Ad=Ja.getWindowMetadata=void 0;const Td=at;function Hm(){let t,e;try{t=Td.getDocumentOrThrow(),e=Td.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),p=[];for(let y=0;y<f.length;y++){const b=f[y],S=b.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const C=b.getAttribute("href");if(C)if(C.toLowerCase().indexOf("https:")===-1&&C.toLowerCase().indexOf("http:")===-1&&C.indexOf("//")!==0){let A=e.protocol+"//"+e.host;if(C.indexOf("/")===0)A+=C;else{const E=e.pathname.split("/");E.pop();const x=E.join("/");A+=x+"/"+C}p.push(A)}else if(C.indexOf("//")===0){const A=e.protocol+C;p.push(A)}else p.push(C)}}return p}function n(...f){const p=t.getElementsByTagName("meta");for(let y=0;y<p.length;y++){const b=p[y],S=["itemprop","property","name"].map(C=>b.getAttribute(C)).filter(C=>C?f.includes(C):!1);if(S.length&&S){const C=b.getAttribute("content");if(C)return C}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,u=r();return{description:a,url:c,icons:u,name:o}}Ad=Ja.getWindowMetadata=Hm;var es={},Km=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),$d="%[a-f0-9]{2}",Nd=new RegExp("("+$d+")|([^%]+?)","gi"),Rd=new RegExp("("+$d+")+","gi");function Qa(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Qa(r),Qa(n))}function Zm(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Nd)||[],r=1;r<e.length;r++)t=Qa(e,r).join(""),e=t.match(Nd)||[];return t}}function Gm(t){for(var e={"%FE%FF":"","%FF%FE":""},r=Rd.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Zm(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Rd.exec(t)}e["%C2"]="";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var Ym=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Gm(t)}},Jm=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Qm=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=Km,r=Ym,n=Jm,i=Qm,s=E=>E==null,o=Symbol("encodeFragmentIdentifier");function a(E){switch(E.arrayFormat){case"index":return x=>(v,w)=>{const g=v.length;return w===void 0||E.skipNull&&w===null||E.skipEmptyString&&w===""?v:w===null?[...v,[d(x,E),"[",g,"]"].join("")]:[...v,[d(x,E),"[",d(g,E),"]=",d(w,E)].join("")]};case"bracket":return x=>(v,w)=>w===void 0||E.skipNull&&w===null||E.skipEmptyString&&w===""?v:w===null?[...v,[d(x,E),"[]"].join("")]:[...v,[d(x,E),"[]=",d(w,E)].join("")];case"colon-list-separator":return x=>(v,w)=>w===void 0||E.skipNull&&w===null||E.skipEmptyString&&w===""?v:w===null?[...v,[d(x,E),":list="].join("")]:[...v,[d(x,E),":list=",d(w,E)].join("")];case"comma":case"separator":case"bracket-separator":{const x=E.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(w,g)=>g===void 0||E.skipNull&&g===null||E.skipEmptyString&&g===""?w:(g=g===null?"":g,w.length===0?[[d(v,E),x,d(g,E)].join("")]:[[w,d(g,E)].join(E.arrayFormatSeparator)])}default:return x=>(v,w)=>w===void 0||E.skipNull&&w===null||E.skipEmptyString&&w===""?v:w===null?[...v,d(x,E)]:[...v,[d(x,E),"=",d(w,E)].join("")]}}function c(E){let x;switch(E.arrayFormat){case"index":return(v,w,g)=>{if(x=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!x){g[v]=w;return}g[v]===void 0&&(g[v]={}),g[v][x[1]]=w};case"bracket":return(v,w,g)=>{if(x=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!x){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"colon-list-separator":return(v,w,g)=>{if(x=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!x){g[v]=w;return}if(g[v]===void 0){g[v]=[w];return}g[v]=[].concat(g[v],w)};case"comma":case"separator":return(v,w,g)=>{const l=typeof w=="string"&&w.includes(E.arrayFormatSeparator),m=typeof w=="string"&&!l&&f(w,E).includes(E.arrayFormatSeparator);w=m?f(w,E):w;const N=l||m?w.split(E.arrayFormatSeparator).map($=>f($,E)):w===null?w:f(w,E);g[v]=N};case"bracket-separator":return(v,w,g)=>{const l=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!l){g[v]=w&&f(w,E);return}const m=w===null?[]:w.split(E.arrayFormatSeparator).map(N=>f(N,E));if(g[v]===void 0){g[v]=m;return}g[v]=[].concat(g[v],m)};default:return(v,w,g)=>{if(g[v]===void 0){g[v]=w;return}g[v]=[].concat(g[v],w)}}}function u(E){if(typeof E!="string"||E.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(E,x){return x.encode?x.strict?e(E):encodeURIComponent(E):E}function f(E,x){return x.decode?r(E):E}function p(E){return Array.isArray(E)?E.sort():typeof E=="object"?p(Object.keys(E)).sort((x,v)=>Number(x)-Number(v)).map(x=>E[x]):E}function y(E){const x=E.indexOf("#");return x!==-1&&(E=E.slice(0,x)),E}function b(E){let x="";const v=E.indexOf("#");return v!==-1&&(x=E.slice(v)),x}function S(E){E=y(E);const x=E.indexOf("?");return x===-1?"":E.slice(x+1)}function C(E,x){return x.parseNumbers&&!Number.isNaN(Number(E))&&typeof E=="string"&&E.trim()!==""?E=Number(E):x.parseBooleans&&E!==null&&(E.toLowerCase()==="true"||E.toLowerCase()==="false")&&(E=E.toLowerCase()==="true"),E}function A(E,x){x=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},x),u(x.arrayFormatSeparator);const v=c(x),w=Object.create(null);if(typeof E!="string"||(E=E.trim().replace(/^[?#&]/,""),!E))return w;for(const g of E.split("&")){if(g==="")continue;let[l,m]=n(x.decode?g.replace(/\+/g," "):g,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes(x.arrayFormat)?m:f(m,x),v(f(l,x),m,w)}for(const g of Object.keys(w)){const l=w[g];if(typeof l=="object"&&l!==null)for(const m of Object.keys(l))l[m]=C(l[m],x);else w[g]=C(l,x)}return x.sort===!1?w:(x.sort===!0?Object.keys(w).sort():Object.keys(w).sort(x.sort)).reduce((g,l)=>{const m=w[l];return m&&typeof m=="object"&&!Array.isArray(m)?g[l]=p(m):g[l]=m,g},Object.create(null))}t.extract=S,t.parse=A,t.stringify=(E,x)=>{if(!E)return"";x=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},x),u(x.arrayFormatSeparator);const v=m=>x.skipNull&&s(E[m])||x.skipEmptyString&&E[m]==="",w=a(x),g={};for(const m of Object.keys(E))v(m)||(g[m]=E[m]);const l=Object.keys(g);return x.sort!==!1&&l.sort(x.sort),l.map(m=>{const N=E[m];return N===void 0?"":N===null?d(m,x):Array.isArray(N)?N.length===0&&x.arrayFormat==="bracket-separator"?d(m,x)+"[]":N.reduce(w(m),[]).join("&"):d(m,x)+"="+d(N,x)}).filter(m=>m.length>0).join("&")},t.parseUrl=(E,x)=>{x=Object.assign({decode:!0},x);const[v,w]=n(E,"#");return Object.assign({url:v.split("?")[0]||"",query:A(S(E),x)},x&&x.parseFragmentIdentifier&&w?{fragmentIdentifier:f(w,x)}:{})},t.stringifyUrl=(E,x)=>{x=Object.assign({encode:!0,strict:!0,[o]:!0},x);const v=y(E.url).split("?")[0]||"",w=t.extract(E.url),g=t.parse(w,{sort:!1}),l=Object.assign(g,E.query);let m=t.stringify(l,x);m&&(m=`?${m}`);let N=b(E.url);return E.fragmentIdentifier&&(N=`#${x[o]?d(E.fragmentIdentifier,x):E.fragmentIdentifier}`),`${v}${m}${N}`},t.pick=(E,x,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[o]:!1},v);const{url:w,query:g,fragmentIdentifier:l}=t.parseUrl(E,v);return t.stringifyUrl({url:w,query:i(g,x),fragmentIdentifier:l},v)},t.exclude=(E,x,v)=>{const w=Array.isArray(x)?g=>!x.includes(g):(g,l)=>!x(g,l);return t.pick(E,w,v)}})(es);const Xm={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Pd(t,e){return t.includes(":")?[t]:e.chains||[]}const Ld="base10",nr="base16",Xa="base64pad",ec="utf8",Md=0,zn=1,ey=0,kd=1,tc=12,rc=32;function ty(){const t=Ga.generateKeyPair();return{privateKey:rr(t.secretKey,nr),publicKey:rr(t.publicKey,nr)}}function nc(){const t=pi.randomBytes(rc);return rr(t,nr)}function ry(t,e){const r=Ga.sharedKey(ur(t,nr),ur(e,nr)),n=new Em(go.SHA256,r).expand(rc);return rr(n,nr)}function ny(t){const e=go.hash(ur(t,nr));return rr(e,nr)}function mi(t){const e=go.hash(ur(t,ec));return rr(e,nr)}function iy(t){return ur(`${t}`,Ld)}function ts(t){return Number(rr(t,Ld))}function sy(t){const e=iy(typeof t.type<"u"?t.type:Md);if(ts(e)===zn&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?ur(t.senderPublicKey,nr):void 0,n=typeof t.iv<"u"?ur(t.iv,nr):pi.randomBytes(tc),i=new Ha.ChaCha20Poly1305(ur(t.symKey,nr)).seal(n,ur(t.message,ec));return ay({type:e,sealed:i,iv:n,senderPublicKey:r})}function oy(t){const e=new Ha.ChaCha20Poly1305(ur(t.symKey,nr)),{sealed:r,iv:n}=mo(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return rr(i,ec)}function ay(t){if(ts(t.type)===zn){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return rr(Wa([t.type,t.senderPublicKey,t.iv,t.sealed]),Xa)}return rr(Wa([t.type,t.iv,t.sealed]),Xa)}function mo(t){const e=ur(t,Xa),r=e.slice(ey,kd),n=kd;if(ts(r)===zn){const a=n+rc,c=a+tc,u=e.slice(n,a),d=e.slice(a,c),f=e.slice(c);return{type:r,sealed:f,iv:d,senderPublicKey:u}}const i=n+tc,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function cy(t,e){const r=mo(t);return Ud({type:ts(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?rr(r.senderPublicKey,nr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Ud(t){const e=(t==null?void 0:t.type)||Md;if(e===zn){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function jd(t){return t.type===zn&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var ly=Object.defineProperty,Fd=Object.getOwnPropertySymbols,uy=Object.prototype.hasOwnProperty,dy=Object.prototype.propertyIsEnumerable,Bd=(t,e,r)=>e in t?ly(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zd=(t,e)=>{for(var r in e||(e={}))uy.call(e,r)&&Bd(t,r,e[r]);if(Fd)for(var r of Fd(e))dy.call(e,r)&&Bd(t,r,e[r]);return t};const hy="ReactNative",wr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},fy="js";function ic(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function yo(){return!Dd()&&!!Ya()&&navigator.product===hy}function rs(){return!ic()&&!!Ya()}function ns(){return yo()?wr.reactNative:ic()?wr.node:rs()?wr.browser:wr.unknown}function py(t,e){let r=es.parse(t);return r=zd(zd({},r),e),t=es.stringify(r),t}function gy(){return Ad()||{name:"",description:"",url:"",icons:[""]}}function my(){if(ns()===wr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=$m();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function yy(){var t;const e=ns();return e===wr.browser?[e,((t=Od())==null?void 0:t.host)||"unknown"].join(":"):e}function vy(t,e,r){const n=my(),i=yy();return[[t,e].join("-"),[fy,r].join("-"),n,i].join("/")}function wy({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),c=vy(t,e,n),u={auth:i,ua:c,projectId:s,useOnCloseEvent:o||void 0},d=py(a[1]||"",u);return a[0]+"?"+d}function qn(t,e){return t.filter(r=>e.includes(r)).length===t.length}function qd(t){return Object.fromEntries(t.entries())}function Wd(t){return new Map(Object.entries(t))}function yi(t=pe.FIVE_MINUTES,e){const r=pe.toMiliseconds(t||pe.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function is(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function Vd(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function by(t){return Vd("topic",t)}function _y(t){return Vd("id",t)}function Hd(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Ar(t,e){return pe.fromMiliseconds((e||Date.now())+pe.toMiliseconds(t))}function yn(t){return Date.now()>=pe.toMiliseconds(t)}function Tt(t,e){return`${t}${e?`:${e}`:""}`}async function Ey({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=ns();o===wr.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===wr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}const Sy="irn";function sc(t){return(t==null?void 0:t.relay)||{protocol:Sy}}function vo(t){const e=Xm[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var xy=Object.defineProperty,Kd=Object.getOwnPropertySymbols,Cy=Object.prototype.hasOwnProperty,Iy=Object.prototype.propertyIsEnumerable,Zd=(t,e,r)=>e in t?xy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dy=(t,e)=>{for(var r in e||(e={}))Cy.call(e,r)&&Zd(t,r,e[r]);if(Kd)for(var r of Kd(e))Iy.call(e,r)&&Zd(t,r,e[r]);return t};function Oy(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Ay(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=es.parse(s);return{protocol:n,topic:Ty(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:Oy(o)}}function Ty(t){return t.startsWith("//")?t.substring(2):t}function $y(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Ny(t){return`${t.protocol}:${t.topic}@${t.version}?`+es.stringify(Dy({symKey:t.symKey},$y(t.relay)))}function vi(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Ry(t){const e=[];return Object.values(t).forEach(r=>{e.push(...vi(r.accounts))}),e}function Py(t,e){const r=[];return Object.values(t).forEach(n=>{vi(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Ly(t,e){const r=[];return Object.values(t).forEach(n=>{vi(n.accounts).includes(e)&&r.push(...n.events)}),r}function My(t,e){const r=bo(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}const ky={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Uy={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ce(t,e){const{message:r,code:n}=Uy[t];return{message:e?`${r} ${e}`:r,code:n}}function $t(t,e){const{message:r,code:n}=ky[t];return{message:e?`${r} ${e}`:r,code:n}}function ss(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function os(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ir(t){return typeof t>"u"}function Bt(t,e){return e&&ir(t)?!0:typeof t=="string"&&!!t.trim().length}function oc(t,e){return e&&ir(t)?!0:typeof t=="number"&&!isNaN(t)}function jy(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return qn(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],d=vi(a),f=r[o];(!qn(Pd(o,f),d)||!qn(f.methods,c)||!qn(f.events,u))&&(s=!1)}),s):!1}function wo(t){return Bt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Fy(t){if(Bt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&wo(r)}}return!1}function By(t){if(Bt(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function zy(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function qy(t){return t==null?void 0:t.topic}function Wy(t,e){let r=null;return Bt(t==null?void 0:t.publicKey,!1)||(r=ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Gd(t){let e=!0;return ss(t)?t.length&&(e=t.every(r=>Bt(r,!1))):e=!1,e}function Vy(t,e,r){let n=null;return ss(e)&&e.length?e.forEach(i=>{n||wo(i)||(n=$t("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):wo(t)||(n=$t("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Hy(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=Vy(i,Pd(i,s),`${e} ${r}`);o&&(n=o)}),n}function Ky(t,e){let r=null;return ss(t)?t.forEach(n=>{r||Fy(n)||(r=$t("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=$t("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Zy(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Ky(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function Gy(t,e){let r=null;return Gd(t==null?void 0:t.methods)?Gd(t==null?void 0:t.events)||(r=$t("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=$t("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Yd(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Gy(n,`${e}, namespace`);i&&(r=i)}),r}function Yy(t,e,r){let n=null;if(t&&os(t)){const i=Yd(t,e);i&&(n=i);const s=Hy(t,e,r);s&&(n=s)}else n=ce("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function bo(t,e){let r=null;if(t&&os(t)){const n=Yd(t,e);n&&(r=n);const i=Zy(t,e);i&&(r=i)}else r=ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Jd(t){return Bt(t.protocol,!0)}function Jy(t,e){let r=!1;return e&&!t?r=!0:t&&ss(t)&&t.length&&t.forEach(n=>{r=Jd(n)}),r}function Qy(t){return typeof t=="number"}function dr(t){return typeof t<"u"&&typeof t!==null}function Xy(t){return!(!t||typeof t!="object"||!t.code||!oc(t.code,!1)||!t.message||!Bt(t.message,!1))}function ev(t){return!(ir(t)||!Bt(t.method,!1))}function tv(t){return!(ir(t)||ir(t.result)&&ir(t.error)||!oc(t.id,!1)||!Bt(t.jsonrpc,!1))}function rv(t){return!(ir(t)||!Bt(t.name,!1))}function Qd(t,e){return!(!wo(e)||!Ry(t).includes(e))}function nv(t,e,r){return Bt(r,!1)?Py(t,e).includes(r):!1}function iv(t,e,r){return Bt(r,!1)?Ly(t,e).includes(r):!1}function Xd(t,e,r){let n=null;const i=sv(t),s=ov(e),o=Object.keys(i),a=Object.keys(s),c=eh(Object.keys(t)),u=eh(Object.keys(e)),d=c.filter(f=>!u.includes(f));return d.length&&(n=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),qn(o,a)||(n=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const p=vi(e[f].accounts);p.includes(f)||(n=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${p.toString()}`))}),o.forEach(f=>{n||(qn(i[f].methods,s[f].methods)?qn(i[f].events,s[f].events)||(n=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function sv(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function eh(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function ov(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=vi(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function av(t,e){return oc(t,!1)&&t<=e.max&&t>=e.min}function th(){const t=ns();return new Promise(e=>{switch(t){case wr.browser:e(cv());break;case wr.reactNative:e(lv());break;case wr.node:e(uv());break;default:e(!0)}})}function cv(){return rs()&&(navigator==null?void 0:navigator.onLine)}async function lv(){if(yo()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function uv(){return!0}function dv(t){switch(ns()){case wr.browser:hv(t);break;case wr.reactNative:fv(t);break}}function hv(t){rs()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function fv(t){yo()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const ac={};let _o=class{static get(e){return ac[e]}static set(e,r){ac[e]=r}static delete(e){delete ac[e]}};const pv="PARSE_ERROR",gv="INVALID_REQUEST",mv="METHOD_NOT_FOUND",yv="INVALID_PARAMS",rh="INTERNAL_ERROR",cc="SERVER_ERROR",vv=[-32700,-32600,-32601,-32602,-32603],as={[pv]:{code:-32700,message:"Parse error"},[gv]:{code:-32600,message:"Invalid Request"},[mv]:{code:-32601,message:"Method not found"},[yv]:{code:-32602,message:"Invalid params"},[rh]:{code:-32603,message:"Internal error"},[cc]:{code:-32e3,message:"Server error"}},nh=cc;function wv(t){return vv.includes(t)}function ih(t){return Object.keys(as).includes(t)?as[t]:as[nh]}function bv(t){const e=Object.values(as).find(r=>r.code===t);return e||as[nh]}function _v(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var sh={},Qr={},oh;function Ev(){if(oh)return Qr;oh=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.isBrowserCryptoAvailable=Qr.getSubtleCrypto=Qr.getBrowerCrypto=void 0;function t(){return(zr==null?void 0:zr.crypto)||(zr==null?void 0:zr.msCrypto)||{}}Qr.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Qr.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Qr.isBrowserCryptoAvailable=r,Qr}var Xr={},ah;function Sv(){if(ah)return Xr;ah=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.isBrowser=Xr.isNode=Xr.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Xr.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Xr.isNode=e;function r(){return!t()&&!e()}return Xr.isBrowser=r,Xr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=qr;e.__exportStar(Ev(),t),e.__exportStar(Sv(),t)})(sh);function lc(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function ch(t=6){return BigInt(lc(t))}function cs(t,e,r){return{id:r||lc(),jsonrpc:"2.0",method:t,params:e}}function uc(t,e){return{id:t,jsonrpc:"2.0",result:e}}function dc(t,e,r){return{id:t,jsonrpc:"2.0",error:xv(e,r)}}function xv(t,e){return typeof t>"u"?ih(rh):(typeof t=="string"&&(t=Object.assign(Object.assign({},ih(cc)),{message:t})),typeof e<"u"&&(t.data=e),wv(t.code)&&(t=bv(t.code)),t)}class Cv{}class Iv extends Cv{constructor(){super()}}class Dv extends Iv{constructor(e){super()}}const Ov="^wss?:";function Av(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Tv(t,e){const r=Av(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function lh(t){return Tv(t,Ov)}function $v(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function uh(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function hc(t){return uh(t)&&"method"in t}function Eo(t){return uh(t)&&(en(t)||Tr(t))}function en(t){return"result"in t}function Tr(t){return"error"in t}class Nv extends Dv{constructor(e){super(e),this.events=new Sr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(cs(e.method,e.params||[],e.id||ch().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Tr(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Eo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Rv=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Pv=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",dh=t=>t.split("?")[0],hh=10,Lv=Rv();class Mv{constructor(e){if(this.url=e,this.events=new Sr.EventEmitter,this.registering=!1,!lh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ka(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!lh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=sh.isReactNative()?void 0:{rejectUnauthorized:!$v(e)},s=new Lv(e,[],i);Pv()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Gu(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=dc(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return _v(e,dh(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>hh&&this.events.setMaxListeners(hh)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${dh(this.url)}`));return this.events.emit("register_error",r),r}}var So={exports:{}};So.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",p="[object Error]",y="[object Function]",b="[object GeneratorFunction]",S="[object Map]",C="[object Number]",A="[object Null]",E="[object Object]",x="[object Promise]",v="[object Proxy]",w="[object RegExp]",g="[object Set]",l="[object String]",m="[object Symbol]",N="[object Undefined]",$="[object WeakMap]",z="[object ArrayBuffer]",W="[object DataView]",X="[object Float32Array]",R="[object Float64Array]",j="[object Int8Array]",se="[object Int16Array]",Z="[object Int32Array]",H="[object Uint8Array]",Y="[object Uint8ClampedArray]",V="[object Uint16Array]",J="[object Uint32Array]",_e=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,ve=/^(?:0|[1-9]\d*)$/,de={};de[X]=de[R]=de[j]=de[se]=de[Z]=de[H]=de[Y]=de[V]=de[J]=!0,de[a]=de[c]=de[z]=de[d]=de[W]=de[f]=de[p]=de[y]=de[S]=de[C]=de[E]=de[w]=de[g]=de[l]=de[$]=!1;var we=typeof zr=="object"&&zr&&zr.Object===Object&&zr,B=typeof self=="object"&&self&&self.Object===Object&&self,F=we||B||Function("return this")(),L=e&&!e.nodeType&&e,h=L&&!0&&t&&!t.nodeType&&t,T=h&&h.exports===L,oe=T&&we.process,le=function(){try{return oe&&oe.binding&&oe.binding("util")}catch{}}(),Be=le&&le.isTypedArray;function Oe(I,M){for(var K=-1,fe=I==null?0:I.length,ft=0,Re=[];++K<fe;){var Ot=I[K];M(Ot,K,I)&&(Re[ft++]=Ot)}return Re}function We(I,M){for(var K=-1,fe=M.length,ft=I.length;++K<fe;)I[ft+K]=M[K];return I}function Ge(I,M){for(var K=-1,fe=I==null?0:I.length;++K<fe;)if(M(I[K],K,I))return!0;return!1}function ct(I,M){for(var K=-1,fe=Array(I);++K<I;)fe[K]=M(K);return fe}function lt(I){return function(M){return I(M)}}function ze(I,M){return I.has(M)}function ke(I,M){return I==null?void 0:I[M]}function Ue(I){var M=-1,K=Array(I.size);return I.forEach(function(fe,ft){K[++M]=[ft,fe]}),K}function Pe(I,M){return function(K){return I(M(K))}}function Ne(I){var M=-1,K=Array(I.size);return I.forEach(function(fe){K[++M]=fe}),K}var Ae=Array.prototype,Ie=Function.prototype,Ee=Object.prototype,Le=F["__core-js_shared__"],qe=Ie.toString,Se=Ee.hasOwnProperty,Ve=function(){var I=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),Ke=Ee.toString,Qe=RegExp("^"+qe.call(Se).replace(_e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ye=T?F.Buffer:void 0,Xe=F.Symbol,_r=F.Uint8Array,pr=Ee.propertyIsEnumerable,kr=Ae.splice,cr=Xe?Xe.toStringTag:void 0,Xt=Object.getOwnPropertySymbols,oi=Ye?Ye.isBuffer:void 0,Bi=Pe(Object.keys,Object),bt=it(F,"DataView"),gt=it(F,"Map"),St=it(F,"Promise"),xt=it(F,"Set"),Ct=it(F,"WeakMap"),mt=it(Object,"create"),Nt=ci(bt),Rt=ci(gt),Pt=ci(St),Lt=ci(xt),Mt=ci(Ct),It=Xe?Xe.prototype:void 0,Dt=It?It.valueOf:void 0;function ut(I){var M=-1,K=I==null?0:I.length;for(this.clear();++M<K;){var fe=I[M];this.set(fe[0],fe[1])}}function kt(){this.__data__=mt?mt(null):{},this.size=0}function Ut(I){var M=this.has(I)&&delete this.__data__[I];return this.size-=M?1:0,M}function Wl(I){var M=this.__data__;if(mt){var K=M[I];return K===n?void 0:K}return Se.call(M,I)?M[I]:void 0}function Vl(I){var M=this.__data__;return mt?M[I]!==void 0:Se.call(M,I)}function Hl(I,M){var K=this.__data__;return this.size+=this.has(I)?0:1,K[I]=mt&&M===void 0?n:M,this}ut.prototype.clear=kt,ut.prototype.delete=Ut,ut.prototype.get=Wl,ut.prototype.has=Vl,ut.prototype.set=Hl;function Ur(I){var M=-1,K=I==null?0:I.length;for(this.clear();++M<K;){var fe=I[M];this.set(fe[0],fe[1])}}function Kl(){this.__data__=[],this.size=0}function Zl(I){var M=this.__data__,K=D(M,I);if(K<0)return!1;var fe=M.length-1;return K==fe?M.pop():kr.call(M,K,1),--this.size,!0}function Gl(I){var M=this.__data__,K=D(M,I);return K<0?void 0:M[K][1]}function Yl(I){return D(this.__data__,I)>-1}function Jl(I,M){var K=this.__data__,fe=D(K,I);return fe<0?(++this.size,K.push([I,M])):K[fe][1]=M,this}Ur.prototype.clear=Kl,Ur.prototype.delete=Zl,Ur.prototype.get=Gl,Ur.prototype.has=Yl,Ur.prototype.set=Jl;function un(I){var M=-1,K=I==null?0:I.length;for(this.clear();++M<K;){var fe=I[M];this.set(fe[0],fe[1])}}function Ql(){this.size=0,this.__data__={hash:new ut,map:new(gt||Ur),string:new ut}}function ha(I){var M=ht(this,I).delete(I);return this.size-=M?1:0,M}function ai(I){return ht(this,I).get(I)}function fa(I){return ht(this,I).has(I)}function $n(I,M){var K=ht(this,I),fe=K.size;return K.set(I,M),this.size+=K.size==fe?0:1,this}un.prototype.clear=Ql,un.prototype.delete=ha,un.prototype.get=ai,un.prototype.has=fa,un.prototype.set=$n;function zi(I){var M=-1,K=I==null?0:I.length;for(this.__data__=new un;++M<K;)this.add(I[M])}function qi(I){return this.__data__.set(I,n),this}function Gs(I){return this.__data__.has(I)}zi.prototype.add=zi.prototype.push=qi,zi.prototype.has=Gs;function Jr(I){var M=this.__data__=new Ur(I);this.size=M.size}function Xl(){this.__data__=new Ur,this.size=0}function Ys(I){var M=this.__data__,K=M.delete(I);return this.size=M.size,K}function eu(I){return this.__data__.get(I)}function tu(I){return this.__data__.has(I)}function _(I,M){var K=this.__data__;if(K instanceof Ur){var fe=K.__data__;if(!gt||fe.length<r-1)return fe.push([I,M]),this.size=++K.size,this;K=this.__data__=new un(fe)}return K.set(I,M),this.size=K.size,this}Jr.prototype.clear=Xl,Jr.prototype.delete=Ys,Jr.prototype.get=eu,Jr.prototype.has=tu,Jr.prototype.set=_;function O(I,M){var K=ga(I),fe=!K&&t8(I),ft=!K&&!fe&&iu(I),Re=!K&&!fe&&!ft&&Yp(I),Ot=K||fe||ft||Re,qt=Ot?ct(I.length,String):[],Ht=qt.length;for(var _t in I)(M||Se.call(I,_t))&&!(Ot&&(_t=="length"||ft&&(_t=="offset"||_t=="parent")||Re&&(_t=="buffer"||_t=="byteLength"||_t=="byteOffset")||ru(_t,Ht)))&&qt.push(_t);return qt}function D(I,M){for(var K=I.length;K--;)if(Hp(I[K][0],M))return K;return-1}function k(I,M,K){var fe=M(I);return ga(I)?fe:We(fe,K(I))}function P(I){return I==null?I===void 0?N:A:cr&&cr in Object(I)?gr(I):e8(I)}function U(I){return Qs(I)&&P(I)==a}function q(I,M,K,fe,ft){return I===M?!0:I==null||M==null||!Qs(I)&&!Qs(M)?I!==I&&M!==M:Q(I,M,K,fe,q,ft)}function Q(I,M,K,fe,ft,Re){var Ot=ga(I),qt=ga(M),Ht=Ot?c:Ir(I),_t=qt?c:Ir(M);Ht=Ht==a?E:Ht,_t=_t==a?E:_t;var Er=Ht==E,jr=_t==E,er=Ht==_t;if(er&&iu(I)){if(!iu(M))return!1;Ot=!0,Er=!1}if(er&&!Er)return Re||(Re=new Jr),Ot||Yp(I)?ge(I,M,K,fe,ft,Re):je(I,M,Ht,K,fe,ft,Re);if(!(K&i)){var Dr=Er&&Se.call(I,"__wrapped__"),Or=jr&&Se.call(M,"__wrapped__");if(Dr||Or){var Nn=Dr?I.value():I,dn=Or?M.value():M;return Re||(Re=new Jr),ft(Nn,dn,K,fe,Re)}}return er?(Re||(Re=new Jr),st(I,M,K,fe,ft,Re)):!1}function re(I){if(!Gp(I)||pa(I))return!1;var M=Kp(I)?Qe:ne;return M.test(ci(I))}function te(I){return Qs(I)&&Zp(I.length)&&!!de[P(I)]}function ee(I){if(!X4(I))return Bi(I);var M=[];for(var K in Object(I))Se.call(I,K)&&K!="constructor"&&M.push(K);return M}function ge(I,M,K,fe,ft,Re){var Ot=K&i,qt=I.length,Ht=M.length;if(qt!=Ht&&!(Ot&&Ht>qt))return!1;var _t=Re.get(I);if(_t&&Re.get(M))return _t==M;var Er=-1,jr=!0,er=K&s?new zi:void 0;for(Re.set(I,M),Re.set(M,I);++Er<qt;){var Dr=I[Er],Or=M[Er];if(fe)var Nn=Ot?fe(Or,Dr,Er,M,I,Re):fe(Dr,Or,Er,I,M,Re);if(Nn!==void 0){if(Nn)continue;jr=!1;break}if(er){if(!Ge(M,function(dn,li){if(!ze(er,li)&&(Dr===dn||ft(Dr,dn,K,fe,Re)))return er.push(li)})){jr=!1;break}}else if(!(Dr===Or||ft(Dr,Or,K,fe,Re))){jr=!1;break}}return Re.delete(I),Re.delete(M),jr}function je(I,M,K,fe,ft,Re,Ot){switch(K){case W:if(I.byteLength!=M.byteLength||I.byteOffset!=M.byteOffset)return!1;I=I.buffer,M=M.buffer;case z:return!(I.byteLength!=M.byteLength||!Re(new _r(I),new _r(M)));case d:case f:case C:return Hp(+I,+M);case p:return I.name==M.name&&I.message==M.message;case w:case l:return I==M+"";case S:var qt=Ue;case g:var Ht=fe&i;if(qt||(qt=Ne),I.size!=M.size&&!Ht)return!1;var _t=Ot.get(I);if(_t)return _t==M;fe|=s,Ot.set(I,M);var Er=ge(qt(I),qt(M),fe,ft,Re,Ot);return Ot.delete(I),Er;case m:if(Dt)return Dt.call(I)==Dt.call(M)}return!1}function st(I,M,K,fe,ft,Re){var Ot=K&i,qt=tt(I),Ht=qt.length,_t=tt(M),Er=_t.length;if(Ht!=Er&&!Ot)return!1;for(var jr=Ht;jr--;){var er=qt[jr];if(!(Ot?er in M:Se.call(M,er)))return!1}var Dr=Re.get(I);if(Dr&&Re.get(M))return Dr==M;var Or=!0;Re.set(I,M),Re.set(M,I);for(var Nn=Ot;++jr<Ht;){er=qt[jr];var dn=I[er],li=M[er];if(fe)var Jp=Ot?fe(li,dn,er,M,I,Re):fe(dn,li,er,I,M,Re);if(!(Jp===void 0?dn===li||ft(dn,li,K,fe,Re):Jp)){Or=!1;break}Nn||(Nn=er=="constructor")}if(Or&&!Nn){var ma=I.constructor,ya=M.constructor;ma!=ya&&"constructor"in I&&"constructor"in M&&!(typeof ma=="function"&&ma instanceof ma&&typeof ya=="function"&&ya instanceof ya)&&(Or=!1)}return Re.delete(I),Re.delete(M),Or}function tt(I){return k(I,i8,Js)}function ht(I,M){var K=I.__data__;return nu(M)?K[typeof M=="string"?"string":"hash"]:K.map}function it(I,M){var K=ke(I,M);return re(K)?K:void 0}function gr(I){var M=Se.call(I,cr),K=I[cr];try{I[cr]=void 0;var fe=!0}catch{}var ft=Ke.call(I);return fe&&(M?I[cr]=K:delete I[cr]),ft}var Js=Xt?function(I){return I==null?[]:(I=Object(I),Oe(Xt(I),function(M){return pr.call(I,M)}))}:s8,Ir=P;(bt&&Ir(new bt(new ArrayBuffer(1)))!=W||gt&&Ir(new gt)!=S||St&&Ir(St.resolve())!=x||xt&&Ir(new xt)!=g||Ct&&Ir(new Ct)!=$)&&(Ir=function(I){var M=P(I),K=M==E?I.constructor:void 0,fe=K?ci(K):"";if(fe)switch(fe){case Nt:return W;case Rt:return S;case Pt:return x;case Lt:return g;case Mt:return $}return M});function ru(I,M){return M=M??o,!!M&&(typeof I=="number"||ve.test(I))&&I>-1&&I%1==0&&I<M}function nu(I){var M=typeof I;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?I!=="__proto__":I===null}function pa(I){return!!Ve&&Ve in I}function X4(I){var M=I&&I.constructor,K=typeof M=="function"&&M.prototype||Ee;return I===K}function e8(I){return Ke.call(I)}function ci(I){if(I!=null){try{return qe.call(I)}catch{}try{return I+""}catch{}}return""}function Hp(I,M){return I===M||I!==I&&M!==M}var t8=U(function(){return arguments}())?U:function(I){return Qs(I)&&Se.call(I,"callee")&&!pr.call(I,"callee")},ga=Array.isArray;function r8(I){return I!=null&&Zp(I.length)&&!Kp(I)}var iu=oi||o8;function n8(I,M){return q(I,M)}function Kp(I){if(!Gp(I))return!1;var M=P(I);return M==y||M==b||M==u||M==v}function Zp(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=o}function Gp(I){var M=typeof I;return I!=null&&(M=="object"||M=="function")}function Qs(I){return I!=null&&typeof I=="object"}var Yp=Be?lt(Be):te;function i8(I){return r8(I)?O(I):ee(I)}function s8(){return[]}function o8(){return!1}t.exports=n8}(So,So.exports);var kv=So.exports;const Uv=Vi(kv);function jv(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var S=0,C=0,A=0,E=b.length;A!==E&&b[A]===0;)A++,S++;for(var x=(E-A)*d+1>>>0,v=new Uint8Array(x);A!==E;){for(var w=b[A],g=0,l=x-1;(w!==0||g<C)&&l!==-1;l--,g++)w+=256*v[l]>>>0,v[l]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");C=g,A++}for(var m=x-C;m!==x&&v[m]===0;)m++;for(var N=c.repeat(S);m<x;++m)N+=t.charAt(v[m]);return N}function p(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var S=0;if(b[S]!==" "){for(var C=0,A=0;b[S]===c;)C++,S++;for(var E=(b.length-S)*u+1>>>0,x=new Uint8Array(E);b[S];){var v=r[b.charCodeAt(S)];if(v===255)return;for(var w=0,g=E-1;(v!==0||w<A)&&g!==-1;g--,w++)v+=a*x[g]>>>0,x[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");A=w,S++}if(b[S]!==" "){for(var l=E-A;l!==E&&x[l]===0;)l++;for(var m=new Uint8Array(C+(E-l)),N=C;l!==E;)m[N++]=x[l++];return m}}}function y(b){var S=p(b);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var Fv=jv,Bv=Fv;const fh=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},zv=t=>new TextEncoder().encode(t),qv=t=>new TextDecoder().decode(t);class Wv{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Vv{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ph(this,e)}}class Hv{constructor(e){this.decoders=e}or(e){return ph(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ph=(t,e)=>new Hv({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Kv{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Wv(e,r,n),this.decoder=new Vv(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const xo=({name:t,prefix:e,encode:r,decode:n})=>new Kv(t,e,r,n),ls=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Bv(r,e);return xo({prefix:t,name:e,encode:n,decode:s=>fh(i(s))})},Zv=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Gv=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Vt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>xo({prefix:e,name:t,encode(i){return Gv(i,n,r)},decode(i){return Zv(i,n,r,t)}}),Yv=xo({prefix:"\0",name:"identity",encode:t=>qv(t),decode:t=>zv(t)});var Jv=Object.freeze({__proto__:null,identity:Yv});const Qv=Vt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Xv=Object.freeze({__proto__:null,base2:Qv});const ew=Vt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var tw=Object.freeze({__proto__:null,base8:ew});const rw=ls({prefix:"9",name:"base10",alphabet:"0123456789"});var nw=Object.freeze({__proto__:null,base10:rw});const iw=Vt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sw=Vt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ow=Object.freeze({__proto__:null,base16:iw,base16upper:sw});const aw=Vt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cw=Vt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lw=Vt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),uw=Vt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dw=Vt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hw=Vt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fw=Vt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pw=Vt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gw=Vt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var mw=Object.freeze({__proto__:null,base32:aw,base32upper:cw,base32pad:lw,base32padupper:uw,base32hex:dw,base32hexupper:hw,base32hexpad:fw,base32hexpadupper:pw,base32z:gw});const yw=ls({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),vw=ls({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ww=Object.freeze({__proto__:null,base36:yw,base36upper:vw});const bw=ls({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_w=ls({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ew=Object.freeze({__proto__:null,base58btc:bw,base58flickr:_w});const Sw=Vt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xw=Vt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cw=Vt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Iw=Vt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Dw=Object.freeze({__proto__:null,base64:Sw,base64pad:xw,base64url:Cw,base64urlpad:Iw});const gh=Array.from(""),Ow=gh.reduce((t,e,r)=>(t[r]=e,t),[]),Aw=gh.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Tw(t){return t.reduce((e,r)=>(e+=Ow[r],e),"")}function $w(t){const e=[];for(const r of t){const n=Aw[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Nw=xo({prefix:"",name:"base256emoji",encode:Tw,decode:$w});var Rw=Object.freeze({__proto__:null,base256emoji:Nw}),Pw=yh,mh=128,Lw=127,Mw=~Lw,kw=Math.pow(2,31);function yh(t,e,r){e=e||[],r=r||0;for(var n=r;t>=kw;)e[r++]=t&255|mh,t/=128;for(;t&Mw;)e[r++]=t&255|mh,t>>>=7;return e[r]=t|0,yh.bytes=r-n+1,e}var Uw=fc,jw=128,vh=127;function fc(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw fc.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&vh)<<i:(o&vh)*Math.pow(2,i),i+=7}while(o>=jw);return fc.bytes=s-n,r}var Fw=Math.pow(2,7),Bw=Math.pow(2,14),zw=Math.pow(2,21),qw=Math.pow(2,28),Ww=Math.pow(2,35),Vw=Math.pow(2,42),Hw=Math.pow(2,49),Kw=Math.pow(2,56),Zw=Math.pow(2,63),Gw=function(t){return t<Fw?1:t<Bw?2:t<zw?3:t<qw?4:t<Ww?5:t<Vw?6:t<Hw?7:t<Kw?8:t<Zw?9:10},Yw={encode:Pw,decode:Uw,encodingLength:Gw},wh=Yw;const bh=(t,e,r=0)=>(wh.encode(t,e,r),e),_h=t=>wh.encodingLength(t),pc=(t,e)=>{const r=e.byteLength,n=_h(t),i=n+_h(r),s=new Uint8Array(i+r);return bh(t,s,0),bh(r,s,n),s.set(e,i),new Jw(t,r,e,s)};class Jw{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Eh=({name:t,code:e,encode:r})=>new Qw(t,e,r);class Qw{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?pc(this.code,r):r.then(n=>pc(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Sh=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Xw=Eh({name:"sha2-256",code:18,encode:Sh("SHA-256")}),eb=Eh({name:"sha2-512",code:19,encode:Sh("SHA-512")});var tb=Object.freeze({__proto__:null,sha256:Xw,sha512:eb});const xh=0,rb="identity",Ch=fh;var nb=Object.freeze({__proto__:null,identity:{code:xh,name:rb,encode:Ch,digest:t=>pc(xh,Ch(t))}});new TextEncoder,new TextDecoder;const Ih={...Jv,...Xv,...tw,...nw,...ow,...mw,...ww,...Ew,...Dw,...Rw};({...tb,...nb});function Dh(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ib(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Dh(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Oh(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Ah=Oh("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),gc=Oh("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=ib(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),sb={utf8:Ah,"utf-8":Ah,hex:Ih.base16,latin1:gc,ascii:gc,binary:gc,...Ih};function ob(t,e="utf8"){const r=sb[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Dh(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Th="wc",ab=2,mc="core",vn=`${Th}@2:${mc}:`,cb={name:mc,logger:"error"},lb={database:":memory:"},ub="crypto",$h="client_ed25519_seed",db=pe.ONE_DAY,hb="keychain",fb="0.3",pb="messages",gb="0.3",mb=pe.SIX_HOURS,yb="publisher",Nh="irn",vb="error",Rh="wss://relay.walletconnect.com",Ph="wss://relay.walletconnect.org",wb="relayer",Gt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},bb="_subscription",tn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},_b=pe.ONE_SECOND,Eb="2.10.0",Sb=1e4,xb="0.3",Cb="WALLETCONNECT_CLIENT_ID",Vr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Ib="subscription",Db="0.3",Ob=pe.FIVE_SECONDS*1e3,Ab="pairing",Tb="0.3",us={wc_pairingDelete:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:pe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:pe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:0},res:{ttl:pe.ONE_DAY,prompt:!1,tag:0}}},Hr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},$b="history",Nb="0.3",Rb="expirer",xr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Pb="0.3",yc="verify-api",Co="https://verify.walletconnect.com",Lh="https://verify.walletconnect.org";let Lb=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=hb,this.version=fb,this.initialized=!1,this.storagePrefix=vn,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Je.generateChildLogger(r,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,qd(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Wd(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}},Mb=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=ub,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=gd(i);return pd(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=ty();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=gd(s),a=nc();return await lm(a,i,db,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=ry(a,s);return this.setSymKey(c,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||ny(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=Ud(o),c=ka(s);if(jd(a)){const p=a.senderPublicKey,y=a.receiverPublicKey;i=await this.generateSharedKey(p,y)}const u=this.getSymKey(i),{type:d,senderPublicKey:f}=a;return sy({type:d,symKey:u,message:c,senderPublicKey:f})},this.decode=async(i,s,o)=>{this.isInitialized();const a=cy(s,o);if(jd(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;i=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(i),u=oy({symKey:c,encoded:s});return Gu(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=i=>{const s=mo(i);return ts(s.type)},this.getPayloadSenderPublicKey=i=>{const s=mo(i);return s.senderPublicKey?rr(s.senderPublicKey,nr):void 0},this.core=e,this.logger=Je.generateChildLogger(r,this.name),this.keychain=n||new Lb(this.core,this.logger)}get context(){return Je.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get($h)}catch{e=nc(),await this.keychain.set($h,e)}return ob(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}},kb=class extends pg{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=pb,this.version=gb,this.initialized=!1,this.storagePrefix=vn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=mi(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=mi(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Je.generateChildLogger(e,this.name),this.core=r}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,qd(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Wd(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}};class Ub extends gg{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Sr.EventEmitter,this.name=yb,this.queue=new Map,this.publishTimeout=pe.toMiliseconds(pe.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const a=(s==null?void 0:s.ttl)||mb,c=sc(s),u=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,f=(s==null?void 0:s.id)||ch().toString(),p={topic:n,message:i,opts:{ttl:a,relay:c,prompt:u,tag:d,id:f}},y=setTimeout(()=>this.queue.set(f,p),this.publishTimeout);try{await await is(this.rpcPublish(n,i,a,c,u,d,f),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(f),this.relayer.events.emit(Gt.publish,p)}catch(b){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(f),b;return}finally{clearTimeout(y)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Je.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Je.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var c,u,d,f;const p={method:vo(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return ir((c=p.params)==null?void 0:c.prompt)&&((u=p.params)==null||delete u.prompt),ir((d=p.params)==null?void 0:d.tag)&&((f=p.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(hi.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Gt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Gt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class jb{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Fb=Object.defineProperty,Bb=Object.defineProperties,zb=Object.getOwnPropertyDescriptors,Mh=Object.getOwnPropertySymbols,qb=Object.prototype.hasOwnProperty,Wb=Object.prototype.propertyIsEnumerable,kh=(t,e,r)=>e in t?Fb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ds=(t,e)=>{for(var r in e||(e={}))qb.call(e,r)&&kh(t,r,e[r]);if(Mh)for(var r of Mh(e))Wb.call(e,r)&&kh(t,r,e[r]);return t},vc=(t,e)=>Bb(t,zb(e));let Vb=class extends vg{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new jb,this.events=new Sr.EventEmitter,this.name=Ib,this.version=Db,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=vn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=sc(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const o=new pe.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=Ob&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Je.generateChildLogger(r,this.name),this.clientId=""}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=sc(n);await this.rpcUnsubscribe(e,r,i);const s=$t("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:vo(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await is(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Gt.connection_stalled)}return mi(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:vo(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await is(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Gt.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:vo(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,vc(ds({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,ds({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,ds({},r)),this.topicMap.set(r.topic,e),this.events.emit(Vr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Vr.deleted,vc(ds({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Vr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(Vr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);ss(r)&&this.onBatchSubscribe(r.map((n,i)=>vc(ds({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(hi.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Gt.connect,async()=>{await this.onConnect()}),this.relayer.on(Gt.disconnect,()=>{this.onDisconnect()}),this.events.on(Vr.created,async e=>{const r=Vr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Vr.deleted,async e=>{const r=Vr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var Hb=Object.defineProperty,Uh=Object.getOwnPropertySymbols,Kb=Object.prototype.hasOwnProperty,Zb=Object.prototype.propertyIsEnumerable,jh=(t,e,r)=>e in t?Hb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gb=(t,e)=>{for(var r in e||(e={}))Kb.call(e,r)&&jh(t,r,e[r]);if(Uh)for(var r of Uh(e))Zb.call(e,r)&&jh(t,r,e[r]);return t};let Yb=class extends mg{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Sr.EventEmitter,this.name=wb,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Gt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Gt.error,r)},this.registerProviderListeners=()=>{this.provider.on(tn.payload,this.onPayloadHandler),this.provider.on(tn.connect,this.onConnectHandler),this.provider.on(tn.disconnect,this.onDisconnectHandler),this.provider.on(tn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Je.generateChildLogger(e.logger,this.name):Je.pino(Je.getDefaultLoggerOptions({level:e.logger||vb})),this.messages=new kb(this.logger,e.core),this.subscriber=new Vb(this,this.logger),this.publisher=new Ub(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Rh,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Ph}...`),await this.restartTransport(Ph)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},Sb)}get context(){return Je.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(s=>{this.subscriber.once(Vr.created,o=>{o.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,r),s()})]),i)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await is(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(Vr.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await is(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(tn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await th())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Nv(new Mv(wy({sdkVersion:Eb,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),hc(e)){if(!e.method.endsWith(bb))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Gb({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else Eo(e)&&this.events.emit(Gt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Gt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=uc(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(tn.payload,this.onPayloadHandler),this.provider.off(tn.connect,this.onConnectHandler),this.provider.off(tn.disconnect,this.onDisconnectHandler),this.provider.off(tn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Gt.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await th();dv(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Gt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},pe.toMiliseconds(_b)))}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var Jb=Object.defineProperty,Fh=Object.getOwnPropertySymbols,Qb=Object.prototype.hasOwnProperty,Xb=Object.prototype.propertyIsEnumerable,Bh=(t,e,r)=>e in t?Jb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zh=(t,e)=>{for(var r in e||(e={}))Qb.call(e,r)&&Bh(t,r,e[r]);if(Fh)for(var r of Fh(e))Xb.call(e,r)&&Bh(t,r,e[r]);return t};let Io=class extends yg{constructor(e,r,n,i=vn,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=xb,this.cached=[],this.initialized=!1,this.storagePrefix=vn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!ir(o)?this.map.set(this.getKey(o),o):zy(o)?this.map.set(o.id,o):qy(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Uv(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=zh(zh({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=Je.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}},e2=class{constructor(e,r){this.core=e,this.logger=r,this.name=Ab,this.version=Tb,this.events=new Ca,this.initialized=!1,this.storagePrefix=vn,this.ignoredPayloadTypes=[zn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=nc(),i=await this.core.crypto.setSymKey(n),s=Ar(pe.FIVE_MINUTES),o={protocol:Nh},a={topic:i,expiry:s,relay:o,active:!1},c=Ny({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o}=Ay(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const a=Ar(pe.FIVE_MINUTES),c={topic:i,relay:o,expiry:a,active:!1};return await this.pairings.set(i,c),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),c},this.activate=async({topic:n})=>{this.isInitialized();const i=Ar(pe.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=yi();this.events.once(Tt("pairing_ping",s),({error:u})=>{u?c(u):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",$t("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=cs(i,s),a=await this.core.crypto.encode(n,o),c=us[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id},this.sendResult=async(n,i,s)=>{const o=uc(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=us[c.request.method].res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=dc(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=us[c.request.method]?us[c.request.method].res:us.unregistered_method.res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,$t("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>yn(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{en(i)?this.events.emit(Tt("pairing_ping",s),{}):Tr(i)&&this.events.emit(Tt("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=$t("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error($t("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!dr(n)){const{message:i}=ce("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!By(n.uri)){const{message:i}=ce("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!dr(n)){const{message:s}=ce("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!dr(n)){const{message:s}=ce("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!Bt(n,!1)){const{message:i}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(yn(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=ce("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Je.generateChildLogger(r,this.name),this.pairings=new Io(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Je.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Gt.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{hc(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Eo(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(xr.expired,async e=>{const{topic:r}=Hd(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},t2=class extends fg{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Sr.EventEmitter,this.name=$b,this.version=Nb,this.cached=[],this.initialized=!1,this.storagePrefix=vn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Ar(pe.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(Hr.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Tr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Hr.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Hr.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Je.generateChildLogger(r,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:cs(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Hr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Hr.created,e=>{const r=Hr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Hr.updated,e=>{const r=Hr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Hr.deleted,e=>{const r=Hr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(hi.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{pe.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}},r2=class extends wg{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Sr.EventEmitter,this.name=Rb,this.version=Pb,this.cached=[],this.initialized=!1,this.storagePrefix=vn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(xr.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(xr.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Je.generateChildLogger(r,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return by(e);if(typeof e=="number")return _y(e);const{message:r}=ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(xr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;pe.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(xr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(hi.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(xr.created,e=>{const r=xr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(xr.expired,e=>{const r=xr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(xr.deleted,e=>{const r=xr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}},n2=class extends bg{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=yc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||yo()||!rs())return;const i=(n==null?void 0:n.verifyUrl)||Co;this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Lh;try{await this.createIframe()}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=(n==null?void 0:n.verifyUrl)||Co;let s="";try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.warn(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.warn(o),s=await this.fetchAttestation(n.attestationId,Lh)}return s},this.fetchAttestation=async(n,i)=>{var s;this.logger.info(`resolving attestation: ${n} from url: ${i}`);const o=this.startAbortTimer(pe.ONE_SECOND*2),a=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?(s=await a.json())==null?void 0:s.origin:""},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(yc))return s();window.addEventListener("message",i);const o=document.createElement("iframe");o.id=yc,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},pe.toMiliseconds(pe.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Je.generateChildLogger(r,this.name),this.verifyUrl=Co,this.abortController=new AbortController,this.isDevEnv=ic()&&process.env.IS_VITEST}get context(){return Je.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),pe.toMiliseconds(e))}};var i2=Object.defineProperty,qh=Object.getOwnPropertySymbols,s2=Object.prototype.hasOwnProperty,o2=Object.prototype.propertyIsEnumerable,Wh=(t,e,r)=>e in t?i2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vh=(t,e)=>{for(var r in e||(e={}))s2.call(e,r)&&Wh(t,r,e[r]);if(qh)for(var r of qh(e))o2.call(e,r)&&Wh(t,r,e[r]);return t};const a2=class Qp extends hg{constructor(e){super(e),this.protocol=Th,this.version=ab,this.name=mc,this.events=new Sr.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Rh;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||cb.logger}));this.logger=Je.generateChildLogger(r,this.name),this.heartbeat=new hi.HeartBeat,this.crypto=new Mb(this,this.logger,e==null?void 0:e.keychain),this.history=new t2(this,this.logger),this.expirer=new r2(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new $0(Vh(Vh({},lb),e==null?void 0:e.storageOptions)),this.relayer=new Yb({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new e2(this,this.logger),this.verify=new n2(this.projectId||"",this.logger)}static async init(e){const r=new Qp(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Cb,n),r}get context(){return Je.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},Hh="wc",Kh=2,Zh="client",wc=`${Hh}@${Kh}:${Zh}:`,bc={name:Zh,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Gh="WALLETCONNECT_DEEPLINK_CHOICE",c2="proposal",l2="Proposal expired",u2="session",Do=pe.SEVEN_DAYS,d2="engine",hs={wc_sessionPropose:{req:{ttl:pe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:pe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:pe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:pe.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:pe.THIRTY_SECONDS,prompt:!1,tag:1115}}},_c={min:pe.FIVE_MINUTES,max:pe.SEVEN_DAYS},rn={idle:"IDLE",active:"ACTIVE"},h2="request",f2=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var p2=Object.defineProperty,g2=Object.defineProperties,m2=Object.getOwnPropertyDescriptors,Yh=Object.getOwnPropertySymbols,y2=Object.prototype.hasOwnProperty,v2=Object.prototype.propertyIsEnumerable,Jh=(t,e,r)=>e in t?p2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hr=(t,e)=>{for(var r in e||(e={}))y2.call(e,r)&&Jh(t,r,e[r]);if(Yh)for(var r of Yh(e))v2.call(e,r)&&Jh(t,r,e[r]);return t},fs=(t,e)=>g2(t,m2(e));class w2 extends Eg{constructor(e){super(e),this.name=d2,this.events=new Ca,this.initialized=!1,this.ignoredPayloadTypes=[zn],this.requestQueue={state:rn.idle,queue:[]},this.sessionRequestQueue={state:rn.idle,queue:[]},this.requestQueueDelay=pe.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(hs)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},pe.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=fs(hr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let u=i,d,f=!1;if(u&&(f=this.client.core.pairing.pairings.get(u).active),!u||!f){const{topic:x,uri:v}=await this.client.core.pairing.create();u=x,d=v}const p=await this.client.core.crypto.generateKeyPair(),y=hr({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:Nh}],proposer:{publicKey:p,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:b,resolve:S,done:C}=yi(pe.FIVE_MINUTES,l2);if(this.events.once(Tt("session_connect"),async({error:x,session:v})=>{if(x)b(x);else if(v){v.self.publicKey=p;const w=fs(hr({},v),{requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces});await this.client.session.set(v.topic,w),await this.setExpiry(v.topic,v.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:v.peer.metadata}),S(w)}}),!u){const{message:x}=ce("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(x)}const A=await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y}),E=Ar(pe.FIVE_MINUTES);return await this.setProposal(A,hr({id:A,expiry:E},y)),{uri:d,approval:C}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:c,proposer:u,requiredNamespaces:d,optionalNamespaces:f}=a;c=c||"",os(d)||(d=My(s,"approve()"));const p=await this.client.core.crypto.generateKeyPair(),y=u.publicKey,b=await this.client.core.crypto.generateSharedKey(p,y);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:u.metadata}),await this.sendResult({id:n,topic:c,result:{relay:{protocol:i??"irn"},responderPublicKey:p}}),await this.client.proposal.delete(n,$t("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const S=hr({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:d,optionalNamespaces:f,pairingTopic:c,controller:{publicKey:p,metadata:this.client.metadata},expiry:Ar(Do)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(b),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0});const C=fs(hr({},S),{topic:b,pairingTopic:c,acknowledged:!1,self:S.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:p});return await this.client.session.set(b,C),await this.setExpiry(b,Ar(Do)),{topic:b,acknowledged:()=>new Promise(A=>setTimeout(()=>A(this.client.session.get(b)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,$t("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:a,reject:c}=yi();return this.events.once(Tt("session_update",s),({error:u})=>{u?c(u):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=yi();return this.events.once(Tt("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Ar(Do)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o}=r,a=lc(),{done:c,resolve:u,reject:d}=yi(o);return this.events.once(Tt("session_request",a),({error:f,result:p})=>{f?d(f):u(p)}),await Promise.all([new Promise(async f=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:i,chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(p=>d(p)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),f()}),new Promise(async f=>{const p=await this.client.core.storage.getItem(Gh);Ey({id:a,topic:s,wcDeepLink:p}),f()}),c()]).then(f=>f[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;en(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):Tr(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=yi();this.events.once(Tt("session_ping",i),({error:c})=>{c?a(c):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:$t("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>jy(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,$t("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Gh).catch(s=>this.client.logger.warn(s))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,$t("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=rn.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=hs.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o}),n&&this.client.core.expirer.set(i,Ar(n))},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u}=r,d=cs(i,s,c);if(rs()&&f2.includes(i)){const y=mi(JSON.stringify(d));this.client.core.verify.register({attestationId:y})}const f=await this.client.core.crypto.encode(n,d),p=hs[i].req;return o&&(p.ttl=o),a&&(p.id=a),this.client.core.history.set(n,d),u?(p.internal=fs(hr({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,p)):this.client.core.relayer.publish(n,f,p).catch(y=>this.client.logger.error(y)),d.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o}=r,a=uc(n,s),c=await this.client.core.crypto.encode(i,a),u=await this.client.core.history.get(i,n),d=hs[u.request.method].res;o?(d.internal=fs(hr({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,c,d)):this.client.core.relayer.publish(i,c,d).catch(f=>this.client.logger.error(f)),await this.client.core.history.resolve(a)},this.sendError=async(r,n,i)=>{const s=dc(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),c=hs[a.request.method].res;this.client.core.relayer.publish(n,o,c),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{yn(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{yn(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===rn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=rn.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=rn.idle},this.processRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=ce("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(hr({},n.params));const o=Ar(pe.FIVE_MINUTES),a=hr({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);const c=mi(JSON.stringify(n)),u=await this.getVerifyContext(c,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:u})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(en(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const u=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const d=await this.client.core.relayer.subscribe(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else Tr(n)&&(await this.client.proposal.delete(i,$t("USER_DISCONNECTED")),this.events.emit(Tt("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:u,requiredNamespaces:d,optionalNamespaces:f,sessionProperties:p,pairingTopic:y}=n.params,b=hr({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:y,requiredNamespaces:d,optionalNamespaces:f,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},p&&{sessionProperties:p});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(Tt("session_connect"),{session:b}),this.cleanupDuplicatePairings(b)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;en(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Tt("session_approve",i),{})):Tr(n)&&(await this.client.session.delete(r,$t("USER_DISCONNECTED")),this.events.emit(Tt("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=_o.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(hr({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),_o.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;en(n)?this.events.emit(Tt("session_update",i),{}):Tr(n)&&this.events.emit(Tt("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Ar(Do)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;en(n)?this.events.emit(Tt("session_extend",i),{}):Tr(n)&&this.events.emit(Tt("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{en(n)?this.events.emit(Tt("session_ping",i),{}):Tr(n)&&this.events.emit(Tt("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Gt.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult({id:i,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(hr({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.addSessionRequestToSessionRequestQueue({id:i,topic:r,params:s}),await this.processSessionRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;en(n)?this.events.emit(Tt("session_request",i),{result:n.result}):Tr(n)&&this.events.emit(Tt("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=_o.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(hr({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),_o.set(o,i)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=rn.idle,this.processSessionRequestQueue()},pe.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===rn.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:s}=r,o=mi(JSON.stringify(cs("wc_sessionRequest",s,n))),a=this.client.session.get(i),c=await this.getVerifyContext(o,a.peer.metadata);this.sessionRequestQueue.state=rn.active,this.client.events.emit("session_request",{id:n,topic:i,params:s,verifyContext:c})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!dr(r)){const{message:c}=ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(ir(n)||await this.isValidPairingTopic(n),!Jy(a,!0)){const{message:c}=ce("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!ir(i)&&os(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!ir(s)&&os(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),ir(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Yy(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!dr(r))throw new Error(ce("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=bo(i,"approve()");if(c)throw new Error(c.message);const u=Xd(a.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!Bt(s,!0)){const{message:d}=ce("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}ir(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!dr(r)){const{message:s}=ce("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Xy(i)){const{message:s}=ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!dr(r)){const{message:u}=ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!Jd(n)){const{message:u}=ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=Wy(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=bo(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(yn(o)){const{message:u}=ce("EXPIRED","onSessionSettleRequest()");throw new Error(u)}},this.isValidUpdate=async r=>{if(!dr(r)){const{message:c}=ce("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=bo(i,"update()");if(o)throw new Error(o.message);const a=Xd(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!dr(r)){const{message:i}=ce("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!dr(r)){const{message:c}=ce("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!Qd(a,s)){const{message:c}=ce("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!ev(i)){const{message:c}=ce("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!nv(a,s,i.method)){const{message:c}=ce("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!av(o,_c)){const{message:c}=ce("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${_c.min} and ${_c.max}`);throw new Error(c)}},this.isValidRespond=async r=>{if(!dr(r)){const{message:s}=ce("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!tv(i)){const{message:s}=ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!dr(r)){const{message:i}=ce("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!dr(r)){const{message:a}=ce("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!Qd(o,s)){const{message:a}=ce("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!rv(i)){const{message:a}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!iv(o,s,i.name)){const{message:a}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!dr(r)){const{message:i}=ce("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||Co,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s,i.verified.validation=s===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!Bt(i,!1)){const{message:s}=ce("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Gt.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);try{hc(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Eo(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(xr.expired,async e=>{const{topic:r,id:n}=Hd(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ce("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!Bt(e,!1)){const{message:r}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(yn(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ce("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Bt(e,!1)){const{message:r}=ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(yn(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=ce("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Bt(e,!1)){const{message:r}=ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Qy(e)){const{message:r}=ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(yn(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=ce("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class b2 extends Io{constructor(e,r){super(e,r,c2,wc),this.core=e,this.logger=r}}class _2 extends Io{constructor(e,r){super(e,r,u2,wc),this.core=e,this.logger=r}}class E2 extends Io{constructor(e,r){super(e,r,h2,wc,n=>n.id),this.core=e,this.logger=r}}let S2=class Xp extends _g{constructor(e){super(e),this.protocol=Hh,this.version=Kh,this.name=bc.name,this.events=new Sr.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||bc.name,this.metadata=(e==null?void 0:e.metadata)||gy();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||bc.logger}));this.core=(e==null?void 0:e.core)||new a2(e),this.logger=Je.generateChildLogger(r,this.name),this.session=new _2(this.core,this.logger),this.proposal=new b2(this.core,this.logger),this.pendingRequest=new E2(this.core,this.logger),this.engine=new w2(this)}static async init(e){const r=new Xp(e);return await r.initialize(),r}get context(){return Je.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var x2=Object.defineProperty,C2=Object.defineProperties,I2=Object.getOwnPropertyDescriptors,Qh=Object.getOwnPropertySymbols,D2=Object.prototype.hasOwnProperty,O2=Object.prototype.propertyIsEnumerable,Xh=(t,e,r)=>e in t?x2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,A2=(t,e)=>{for(var r in e||(e={}))D2.call(e,r)&&Xh(t,r,e[r]);if(Qh)for(var r of Qh(e))O2.call(e,r)&&Xh(t,r,e[r]);return t},T2=(t,e)=>C2(t,I2(e)),Ec=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},pt=(t,e,r)=>(Ec(t,e,"read from private field"),r?r.call(t):e.get(t)),Wn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Oo=(t,e,r,n)=>(Ec(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Yt=(t,e,r)=>(Ec(t,e,"access private method"),r),Vn,wi,ps,zt,Sc,ef,Jt,sr,xc,tf;let $2=class{constructor(e){Wn(this,Sc),Wn(this,Jt),Wn(this,xc),Wn(this,Vn,void 0),Wn(this,wi,void 0),Wn(this,ps,void 0),Wn(this,zt,void 0),Oo(this,Vn,e),Oo(this,wi,Yt(this,Sc,ef).call(this)),Yt(this,Jt,sr).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await Yt(this,Jt,sr).call(this);const o=pt(this,wi).subscribeModal(u=>{u.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:c}=await pt(this,zt).connect(e);if(a){const u=new Set;r&&Object.values(r).forEach(({chains:d})=>{d&&d.forEach(f=>u.add(f))}),n&&Object.values(n).forEach(({chains:d})=>{d&&d.forEach(f=>u.add(f))}),await pt(this,wi).openModal({uri:a,chains:Array.from(u)})}try{const u=await c();i(u)}catch(u){s(u)}finally{o(),pt(this,wi).closeModal()}})}async disconnect(e){await Yt(this,Jt,sr).call(this),await pt(this,zt).disconnect(e)}async request(e){return await Yt(this,Jt,sr).call(this),await pt(this,zt).request(e)}async getSessions(){return await Yt(this,Jt,sr).call(this),pt(this,zt).session.getAll()}async getSession(){return await Yt(this,Jt,sr).call(this),pt(this,zt).session.getAll().at(-1)}async onSessionEvent(e){await Yt(this,Jt,sr).call(this),pt(this,zt).on("session_event",e)}async offSessionEvent(e){await Yt(this,Jt,sr).call(this),pt(this,zt).off("session_event",e)}async onSessionUpdate(e){await Yt(this,Jt,sr).call(this),pt(this,zt).on("session_update",e)}async offSessionUpdate(e){await Yt(this,Jt,sr).call(this),pt(this,zt).off("session_update",e)}async onSessionDelete(e){await Yt(this,Jt,sr).call(this),pt(this,zt).on("session_delete",e)}async offSessionDelete(e){await Yt(this,Jt,sr).call(this),pt(this,zt).off("session_delete",e)}async onSessionExpire(e){await Yt(this,Jt,sr).call(this),pt(this,zt).on("session_expire",e)}async offSessionExpire(e){await Yt(this,Jt,sr).call(this),pt(this,zt).off("session_expire",e)}};Vn=new WeakMap,wi=new WeakMap,ps=new WeakMap,zt=new WeakMap,Sc=new WeakSet,ef=function(){const{modalOptions:t,projectId:e}=pt(this,Vn);return new _0(T2(A2({},t),{projectId:e}))},Jt=new WeakSet,sr=async function(){return pt(this,zt)?!0:(!pt(this,ps)&&typeof window<"u"&&Oo(this,ps,Yt(this,xc,tf).call(this)),pt(this,ps))},xc=new WeakSet,tf=async function(){Oo(this,zt,await S2.init({metadata:pt(this,Vn).metadata,projectId:pt(this,Vn).projectId,relayUrl:pt(this,Vn).relayUrl}));const t=await pt(this,zt).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};const Ao=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent","getEvent","getEvents","createSharedState","importSharedState","requestSignature"],gs=["aleo:1"],To=["chainChanged","accountSelected","selectedAccountSynced","sharedAccountSynced"],rf="f0aaeffe71b636da453fce042d79d723",nf={standaloneChains:gs,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"puzzleapp://",universal:""}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:"https://walletconnect.puzzle.online/"}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},N2={requiredNamespaces:{aleo:{methods:Ao,chains:gs,events:To}}};var sf={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,f||c,p),b=r?r+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],y]:c._events[b].push(y):(c._events[b]=y,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,y=f.length,b=new Array(y);p<y;p++)b[p]=f[p].fn;return b},a.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,d,f,p,y,b){var S=r?r+u:u;if(!this._events[S])return!1;var C=this._events[S],A=arguments.length,E,x;if(C.fn){switch(C.once&&this.removeListener(u,C.fn,void 0,!0),A){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,d),!0;case 3:return C.fn.call(C.context,d,f),!0;case 4:return C.fn.call(C.context,d,f,p),!0;case 5:return C.fn.call(C.context,d,f,p,y),!0;case 6:return C.fn.call(C.context,d,f,p,y,b),!0}for(x=1,E=new Array(A-1);x<A;x++)E[x-1]=arguments[x];C.fn.apply(C.context,E)}else{var v=C.length,w;for(x=0;x<v;x++)switch(C[x].once&&this.removeListener(u,C[x].fn,void 0,!0),A){case 1:C[x].fn.call(C[x].context);break;case 2:C[x].fn.call(C[x].context,d);break;case 3:C[x].fn.call(C[x].context,d,f);break;case 4:C[x].fn.call(C[x].context,d,f,p);break;default:if(!E)for(w=1,E=new Array(A-1);w<A;w++)E[w-1]=arguments[w];C[x].fn.apply(C[x].context,E)}}return!0},a.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},a.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},a.prototype.removeListener=function(u,d,f,p){var y=r?r+u:u;if(!this._events[y])return this;if(!d)return o(this,y),this;var b=this._events[y];if(b.fn)b.fn===d&&(!p||b.once)&&(!f||b.context===f)&&o(this,y);else{for(var S=0,C=[],A=b.length;S<A;S++)(b[S].fn!==d||p&&!b[S].once||f&&b[S].context!==f)&&C.push(b[S]);C.length?this._events[y]=C.length===1?C[0]:C:o(this,y)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(sf);var R2=sf.exports;const P2=Vi(R2),Hn=new P2;let ms;function L2(t){ms=new $2({projectId:rf,metadata:{name:t.dAppName,description:t.dAppDescription,url:t.dAppUrl,icons:[t.dAppIconURL]},modalOptions:{...nf}}),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")}async function dt(){return new Promise(t=>{if(ms)t(ms);else{const e=setInterval(()=>{ms&&(clearInterval(e),t(ms))},200)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}var et;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(et||(et={}));var Cc;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Cc||(Cc={}));const ue=et.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wn=t=>{switch(typeof t){case"undefined":return ue.undefined;case"string":return ue.string;case"number":return isNaN(t)?ue.nan:ue.number;case"boolean":return ue.boolean;case"function":return ue.function;case"bigint":return ue.bigint;case"symbol":return ue.symbol;case"object":return Array.isArray(t)?ue.array:t===null?ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ue.promise:typeof Map<"u"&&t instanceof Map?ue.map:typeof Set<"u"&&t instanceof Set?ue.set:typeof Date<"u"&&t instanceof Date?ue.date:ue.object;default:return ue.unknown}},ie=et.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),M2=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class $r extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,et.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}$r.create=t=>new $r(t);const ys=(t,e)=>{let r;switch(t.code){case ie.invalid_type:t.received===ue.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ie.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,et.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:r=`Unrecognized key(s) in object: ${et.joinValues(t.keys,", ")}`;break;case ie.invalid_union:r="Invalid input";break;case ie.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${et.joinValues(t.options)}`;break;case ie.invalid_enum_value:r=`Invalid enum value. Expected ${et.joinValues(t.options)}, received '${t.received}'`;break;case ie.invalid_arguments:r="Invalid function arguments";break;case ie.invalid_return_type:r="Invalid function return type";break;case ie.invalid_date:r="Invalid date";break;case ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:et.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ie.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ie.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ie.custom:r="Invalid input";break;case ie.invalid_intersection_types:r="Intersection results could not be merged";break;case ie.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ie.not_finite:r="Number must be finite";break;default:r=e.defaultError,et.assertNever(t)}return{message:r}};let of=ys;function k2(t){of=t}function $o(){return of}const No=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],o={...i,path:s};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},U2=[];function he(t,e){const r=No({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$o(),ys].filter(n=>!!n)});t.common.issues.push(r)}class Qt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return xe;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return Qt.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return xe;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:e.value,value:n}}}const xe=Object.freeze({status:"aborted"}),af=t=>({status:"dirty",value:t}),or=t=>({status:"valid",value:t}),Ic=t=>t.status==="aborted",Dc=t=>t.status==="dirty",Ro=t=>t.status==="valid",Po=t=>typeof Promise<"u"&&t instanceof Promise;var ye;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ye||(ye={}));class Kr{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const cf=(t,e)=>{if(Ro(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new $r(t.common.issues);return this._error=r,this._error}}};function Te(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:i}}class Me{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return wn(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:wn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qt,ctx:{common:e.parent.common,data:e.data,parsedType:wn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Po(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wn(e)},s=this._parseSync({data:e,path:i.path,parent:i});return cf(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wn(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(Po(i)?i:Promise.resolve(i));return cf(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ie.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Pr({schema:this,typeName:be.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return sn.create(this,this._def)}nullable(){return Yn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Rr.create(this,this._def)}promise(){return Si.create(this,this._def)}or(e){return _s.create([this,e],this._def)}and(e){return Es.create(this,e,this._def)}transform(e){return new Pr({...Te(this._def),schema:this,typeName:be.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Ds({...Te(this._def),innerType:this,defaultValue:r,typeName:be.ZodDefault})}brand(){return new uf({typeName:be.ZodBranded,type:this,...Te(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Fo({...Te(this._def),innerType:this,catchValue:r,typeName:be.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Os.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const j2=/^c[^\s-]{8,}$/i,F2=/^[a-z][a-z0-9]*$/,B2=/[0-9A-HJKMNP-TV-Z]{26}/,z2=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,q2=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,W2=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,V2=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,H2=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,K2=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Z2(t,e){return!!((e==="v4"||!e)&&V2.test(t)||(e==="v6"||!e)&&H2.test(t))}class Nr extends Me{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(i=>e.test(i),{validation:r,code:ie.invalid_string,...ye.errToObj(n)}),this.nonempty=e=>this.min(1,ye.errToObj(e)),this.trim=()=>new Nr({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Nr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Nr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ue.string){const s=this._getOrReturnCtx(e);return he(s,{code:ie.invalid_type,expected:ue.string,received:s.parsedType}),xe}const n=new Qt;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),he(i,{code:ie.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),he(i,{code:ie.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?he(i,{code:ie.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&he(i,{code:ie.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")q2.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"email",code:ie.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")W2.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"emoji",code:ie.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")z2.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"uuid",code:ie.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")j2.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"cuid",code:ie.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")F2.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"cuid2",code:ie.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")B2.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"ulid",code:ie.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),he(i,{validation:"url",code:ie.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"regex",code:ie.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),he(i,{code:ie.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),he(i,{code:ie.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),he(i,{code:ie.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?K2(s).test(e.data)||(i=this._getOrReturnCtx(e,i),he(i,{code:ie.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?Z2(e.data,s.version)||(i=this._getOrReturnCtx(e,i),he(i,{validation:"ip",code:ie.invalid_string,message:s.message}),n.dirty()):et.assertNever(s);return{status:n.value,value:e.data}}_addCheck(e){return new Nr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ye.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ye.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ye.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ye.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ye.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ye.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ye.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ye.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...ye.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ye.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...ye.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ye.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ye.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ye.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ye.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ye.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Nr.create=t=>{var e;return new Nr({checks:[],typeName:be.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};function G2(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class bn extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ue.number){const s=this._getOrReturnCtx(e);return he(s,{code:ie.invalid_type,expected:ue.number,received:s.parsedType}),xe}let n;const i=new Qt;for(const s of this._def.checks)s.kind==="int"?et.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),he(n,{code:ie.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?G2(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),he(n,{code:ie.not_finite,message:s.message}),i.dirty()):et.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ye.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ye.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ye.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ye.toString(r))}setLimit(e,r,n,i){return new bn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ye.toString(i)}]})}_addCheck(e){return new bn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ye.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ye.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ye.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ye.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ye.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&et.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}bn.create=t=>new bn({checks:[],typeName:be.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Te(t)});class _n extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ue.bigint){const s=this._getOrReturnCtx(e);return he(s,{code:ie.invalid_type,expected:ue.bigint,received:s.parsedType}),xe}let n;const i=new Qt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),he(n,{code:ie.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):et.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ye.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ye.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ye.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ye.toString(r))}setLimit(e,r,n,i){return new _n({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ye.toString(i)}]})}_addCheck(e){return new _n({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}_n.create=t=>{var e;return new _n({checks:[],typeName:be.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};class vs extends Me{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ue.boolean){const n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ue.boolean,received:n.parsedType}),xe}return or(e.data)}}vs.create=t=>new vs({typeName:be.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Te(t)});class Kn extends Me{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ue.date){const s=this._getOrReturnCtx(e);return he(s,{code:ie.invalid_type,expected:ue.date,received:s.parsedType}),xe}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return he(s,{code:ie.invalid_date}),xe}const n=new Qt;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),he(i,{code:ie.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),he(i,{code:ie.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):et.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Kn({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ye.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ye.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Kn.create=t=>new Kn({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:be.ZodDate,...Te(t)});class Lo extends Me{_parse(e){if(this._getType(e)!==ue.symbol){const n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ue.symbol,received:n.parsedType}),xe}return or(e.data)}}Lo.create=t=>new Lo({typeName:be.ZodSymbol,...Te(t)});class ws extends Me{_parse(e){if(this._getType(e)!==ue.undefined){const n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ue.undefined,received:n.parsedType}),xe}return or(e.data)}}ws.create=t=>new ws({typeName:be.ZodUndefined,...Te(t)});class bs extends Me{_parse(e){if(this._getType(e)!==ue.null){const n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ue.null,received:n.parsedType}),xe}return or(e.data)}}bs.create=t=>new bs({typeName:be.ZodNull,...Te(t)});class bi extends Me{constructor(){super(...arguments),this._any=!0}_parse(e){return or(e.data)}}bi.create=t=>new bi({typeName:be.ZodAny,...Te(t)});class Zn extends Me{constructor(){super(...arguments),this._unknown=!0}_parse(e){return or(e.data)}}Zn.create=t=>new Zn({typeName:be.ZodUnknown,...Te(t)});class nn extends Me{_parse(e){const r=this._getOrReturnCtx(e);return he(r,{code:ie.invalid_type,expected:ue.never,received:r.parsedType}),xe}}nn.create=t=>new nn({typeName:be.ZodNever,...Te(t)});class Mo extends Me{_parse(e){if(this._getType(e)!==ue.undefined){const n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ue.void,received:n.parsedType}),xe}return or(e.data)}}Mo.create=t=>new Mo({typeName:be.ZodVoid,...Te(t)});class Rr extends Me{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==ue.array)return he(r,{code:ie.invalid_type,expected:ue.array,received:r.parsedType}),xe;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(he(r,{code:o?ie.too_big:ie.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(he(r,{code:ie.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(he(r,{code:ie.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new Kr(r,o,r.path,a)))).then(o=>Qt.mergeArray(n,o));const s=[...r.data].map((o,a)=>i.type._parseSync(new Kr(r,o,r.path,a)));return Qt.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new Rr({...this._def,minLength:{value:e,message:ye.toString(r)}})}max(e,r){return new Rr({...this._def,maxLength:{value:e,message:ye.toString(r)}})}length(e,r){return new Rr({...this._def,exactLength:{value:e,message:ye.toString(r)}})}nonempty(e){return this.min(1,e)}}Rr.create=(t,e)=>new Rr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:be.ZodArray,...Te(e)});function _i(t){if(t instanceof wt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=sn.create(_i(n))}return new wt({...t._def,shape:()=>e})}else return t instanceof Rr?new Rr({...t._def,type:_i(t.element)}):t instanceof sn?sn.create(_i(t.unwrap())):t instanceof Yn?Yn.create(_i(t.unwrap())):t instanceof Zr?Zr.create(t.items.map(e=>_i(e))):t}class wt extends Me{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=et.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==ue.object){const u=this._getOrReturnCtx(e);return he(u,{code:ie.invalid_type,expected:ue.object,received:u.parsedType}),xe}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof nn&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const d=s[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Kr(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof nn){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of a)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")a.length>0&&(he(i,{code:ie.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of a){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Kr(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key;u.push({key:f,value:await d.value,alwaysSet:d.alwaysSet})}return u}).then(u=>Qt.mergeObjectSync(n,u)):Qt.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return ye.errToObj,new wt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=ye.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new wt({...this._def,unknownKeys:"strip"})}passthrough(){return new wt({...this._def,unknownKeys:"passthrough"})}extend(e){return new wt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new wt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:be.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new wt({...this._def,catchall:e})}pick(e){const r={};return et.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new wt({...this._def,shape:()=>r})}omit(e){const r={};return et.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new wt({...this._def,shape:()=>r})}deepPartial(){return _i(this)}partial(e){const r={};return et.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new wt({...this._def,shape:()=>r})}required(e){const r={};return et.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof sn;)s=s._def.innerType;r[n]=s}}),new wt({...this._def,shape:()=>r})}keyof(){return lf(et.objectKeys(this.shape))}}wt.create=(t,e)=>new wt({shape:()=>t,unknownKeys:"strip",catchall:nn.create(),typeName:be.ZodObject,...Te(e)}),wt.strictCreate=(t,e)=>new wt({shape:()=>t,unknownKeys:"strict",catchall:nn.create(),typeName:be.ZodObject,...Te(e)}),wt.lazycreate=(t,e)=>new wt({shape:t,unknownKeys:"strip",catchall:nn.create(),typeName:be.ZodObject,...Te(e)});class _s extends Me{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new $r(a.ctx.common.issues));return he(r,{code:ie.invalid_union,unionErrors:o}),xe}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new $r(c));return he(r,{code:ie.invalid_union,unionErrors:a}),xe}}get options(){return this._def.options}}_s.create=(t,e)=>new _s({options:t,typeName:be.ZodUnion,...Te(e)});const ko=t=>t instanceof xs?ko(t.schema):t instanceof Pr?ko(t.innerType()):t instanceof Cs?[t.value]:t instanceof En?t.options:t instanceof Is?Object.keys(t.enum):t instanceof Ds?ko(t._def.innerType):t instanceof ws?[void 0]:t instanceof bs?[null]:null;class Uo extends Me{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.object)return he(r,{code:ie.invalid_type,expected:ue.object,received:r.parsedType}),xe;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(he(r,{code:ie.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),xe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const o=ko(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Uo({typeName:be.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Te(n)})}}function Oc(t,e){const r=wn(t),n=wn(e);if(t===e)return{valid:!0,data:t};if(r===ue.object&&n===ue.object){const i=et.objectKeys(e),s=et.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=Oc(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===ue.array&&n===ue.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=Oc(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===ue.date&&n===ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Es extends Me{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,o)=>{if(Ic(s)||Ic(o))return xe;const a=Oc(s.value,o.value);return a.valid?((Dc(s)||Dc(o))&&r.dirty(),{status:r.value,value:a.data}):(he(n,{code:ie.invalid_intersection_types}),xe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Es.create=(t,e,r)=>new Es({left:t,right:e,typeName:be.ZodIntersection,...Te(r)});class Zr extends Me{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.array)return he(n,{code:ie.invalid_type,expected:ue.array,received:n.parsedType}),xe;if(n.data.length<this._def.items.length)return he(n,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xe;!this._def.rest&&n.data.length>this._def.items.length&&(he(n,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Kr(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>Qt.mergeArray(r,o)):Qt.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new Zr({...this._def,rest:e})}}Zr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zr({items:t,typeName:be.ZodTuple,rest:null,...Te(e)})};class Ss extends Me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.object)return he(n,{code:ie.invalid_type,expected:ue.object,received:n.parsedType}),xe;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in n.data)i.push({key:s._parse(new Kr(n,a,n.path,a)),value:o._parse(new Kr(n,n.data[a],n.path,a))});return n.common.async?Qt.mergeObjectAsync(r,i):Qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Me?new Ss({keyType:e,valueType:r,typeName:be.ZodRecord,...Te(n)}):new Ss({keyType:Nr.create(),valueType:e,typeName:be.ZodRecord,...Te(r)})}}class jo extends Me{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.map)return he(n,{code:ie.invalid_type,expected:ue.map,received:n.parsedType}),xe;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:i._parse(new Kr(n,a,n.path,[u,"key"])),value:s._parse(new Kr(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return xe;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(u.value,d.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return xe;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(u.value,d.value)}return{status:r.value,value:a}}}}jo.create=(t,e,r)=>new jo({valueType:e,keyType:t,typeName:be.ZodMap,...Te(r)});class Gn extends Me{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.set)return he(n,{code:ie.invalid_type,expected:ue.set,received:n.parsedType}),xe;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(he(n,{code:ie.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(he(n,{code:ie.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return xe;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>s._parse(new Kr(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new Gn({...this._def,minSize:{value:e,message:ye.toString(r)}})}max(e,r){return new Gn({...this._def,maxSize:{value:e,message:ye.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Gn.create=(t,e)=>new Gn({valueType:t,minSize:null,maxSize:null,typeName:be.ZodSet,...Te(e)});class Ei extends Me{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.function)return he(r,{code:ie.invalid_type,expected:ue.function,received:r.parsedType}),xe;function n(a,c){return No({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,$o(),ys].filter(u=>!!u),issueData:{code:ie.invalid_arguments,argumentsError:c}})}function i(a,c){return No({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,$o(),ys].filter(u=>!!u),issueData:{code:ie.invalid_return_type,returnTypeError:c}})}const s={errorMap:r.common.contextualErrorMap},o=r.data;return this._def.returns instanceof Si?or(async(...a)=>{const c=new $r([]),u=await this._def.args.parseAsync(a,s).catch(p=>{throw c.addIssue(n(a,p)),c}),d=await o(...u);return await this._def.returns._def.type.parseAsync(d,s).catch(p=>{throw c.addIssue(i(d,p)),c})}):or((...a)=>{const c=this._def.args.safeParse(a,s);if(!c.success)throw new $r([n(a,c.error)]);const u=o(...c.data),d=this._def.returns.safeParse(u,s);if(!d.success)throw new $r([i(u,d.error)]);return d.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ei({...this._def,args:Zr.create(e).rest(Zn.create())})}returns(e){return new Ei({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new Ei({args:e||Zr.create([]).rest(Zn.create()),returns:r||Zn.create(),typeName:be.ZodFunction,...Te(n)})}}class xs extends Me{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}xs.create=(t,e)=>new xs({getter:t,typeName:be.ZodLazy,...Te(e)});class Cs extends Me{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return he(r,{received:r.data,code:ie.invalid_literal,expected:this._def.value}),xe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Cs.create=(t,e)=>new Cs({value:t,typeName:be.ZodLiteral,...Te(e)});function lf(t,e){return new En({values:t,typeName:be.ZodEnum,...Te(e)})}class En extends Me{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return he(r,{expected:et.joinValues(n),received:r.parsedType,code:ie.invalid_type}),xe}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return he(r,{received:r.data,code:ie.invalid_enum_value,options:n}),xe}return or(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return En.create(e)}exclude(e){return En.create(this.options.filter(r=>!e.includes(r)))}}En.create=lf;class Is extends Me{_parse(e){const r=et.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ue.string&&n.parsedType!==ue.number){const i=et.objectValues(r);return he(n,{expected:et.joinValues(i),received:n.parsedType,code:ie.invalid_type}),xe}if(r.indexOf(e.data)===-1){const i=et.objectValues(r);return he(n,{received:n.data,code:ie.invalid_enum_value,options:i}),xe}return or(e.data)}get enum(){return this._def.values}}Is.create=(t,e)=>new Is({values:t,typeName:be.ZodNativeEnum,...Te(e)});class Si extends Me{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.promise&&r.common.async===!1)return he(r,{code:ie.invalid_type,expected:ue.promise,received:r.parsedType}),xe;const n=r.parsedType===ue.promise?r.data:Promise.resolve(r.data);return or(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Si.create=(t,e)=>new Si({type:t,typeName:be.ZodPromise,...Te(e)});class Pr extends Me{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===be.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null;if(i.type==="preprocess"){const o=i.transform(n.data);return n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}const s={addIssue:o=>{he(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?xe:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?xe:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ro(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Ro(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:r.value,value:a})):o);et.assertNever(i)}}Pr.create=(t,e,r)=>new Pr({schema:t,typeName:be.ZodEffects,effect:e,...Te(r)}),Pr.createWithPreprocess=(t,e,r)=>new Pr({schema:e,effect:{type:"preprocess",transform:t},typeName:be.ZodEffects,...Te(r)});class sn extends Me{_parse(e){return this._getType(e)===ue.undefined?or(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}sn.create=(t,e)=>new sn({innerType:t,typeName:be.ZodOptional,...Te(e)});class Yn extends Me{_parse(e){return this._getType(e)===ue.null?or(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Yn.create=(t,e)=>new Yn({innerType:t,typeName:be.ZodNullable,...Te(e)});class Ds extends Me{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===ue.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Ds.create=(t,e)=>new Ds({innerType:t,typeName:be.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});class Fo extends Me{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Po(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new $r(n.common.issues)}})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new $r(n.common.issues)}})}}removeCatch(){return this._def.innerType}}Fo.create=(t,e)=>new Fo({innerType:t,typeName:be.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});class Bo extends Me{_parse(e){if(this._getType(e)!==ue.nan){const n=this._getOrReturnCtx(e);return he(n,{code:ie.invalid_type,expected:ue.nan,received:n.parsedType}),xe}return{status:"valid",value:e.data}}}Bo.create=t=>new Bo({typeName:be.ZodNaN,...Te(t)});const Y2=Symbol("zod_brand");class uf extends Me{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Os extends Me{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?xe:s.status==="dirty"?(r.dirty(),af(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?xe:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Os({in:e,out:r,typeName:be.ZodPipeline})}}const df=(t,e={},r)=>t?bi.create().superRefine((n,i)=>{var s,o;if(!t(n)){const a=typeof e=="function"?e(n):e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...u,fatal:c})}}):bi.create(),J2={object:wt.lazycreate};var be;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(be||(be={}));const Q2=(t,e={message:`Input not instance of ${t.name}`})=>df(r=>r instanceof t,e),hf=Nr.create,ff=bn.create,X2=Bo.create,e_=_n.create,pf=vs.create,t_=Kn.create,r_=Lo.create,n_=ws.create,i_=bs.create,s_=bi.create,o_=Zn.create,a_=nn.create,c_=Mo.create,l_=Rr.create,u_=wt.create,d_=wt.strictCreate,h_=_s.create,f_=Uo.create,p_=Es.create,g_=Zr.create,m_=Ss.create,y_=jo.create,v_=Gn.create,w_=Ei.create,b_=xs.create,__=Cs.create,E_=En.create,S_=Is.create,x_=Si.create,gf=Pr.create,C_=sn.create,I_=Yn.create,D_=Pr.createWithPreprocess,O_=Os.create;var Lr=Object.freeze({__proto__:null,defaultErrorMap:ys,setErrorMap:k2,getErrorMap:$o,makeIssue:No,EMPTY_PATH:U2,addIssueToContext:he,ParseStatus:Qt,INVALID:xe,DIRTY:af,OK:or,isAborted:Ic,isDirty:Dc,isValid:Ro,isAsync:Po,get util(){return et},get objectUtil(){return Cc},ZodParsedType:ue,getParsedType:wn,ZodType:Me,ZodString:Nr,ZodNumber:bn,ZodBigInt:_n,ZodBoolean:vs,ZodDate:Kn,ZodSymbol:Lo,ZodUndefined:ws,ZodNull:bs,ZodAny:bi,ZodUnknown:Zn,ZodNever:nn,ZodVoid:Mo,ZodArray:Rr,ZodObject:wt,ZodUnion:_s,ZodDiscriminatedUnion:Uo,ZodIntersection:Es,ZodTuple:Zr,ZodRecord:Ss,ZodMap:jo,ZodSet:Gn,ZodFunction:Ei,ZodLazy:xs,ZodLiteral:Cs,ZodEnum:En,ZodNativeEnum:Is,ZodPromise:Si,ZodEffects:Pr,ZodTransformer:Pr,ZodOptional:sn,ZodNullable:Yn,ZodDefault:Ds,ZodCatch:Fo,ZodNaN:Bo,BRAND:Y2,ZodBranded:uf,ZodPipeline:Os,custom:df,Schema:Me,ZodSchema:Me,late:J2,get ZodFirstPartyTypeKind(){return be},coerce:{string:t=>Nr.create({...t,coerce:!0}),number:t=>bn.create({...t,coerce:!0}),boolean:t=>vs.create({...t,coerce:!0}),bigint:t=>_n.create({...t,coerce:!0}),date:t=>Kn.create({...t,coerce:!0})},any:s_,array:l_,bigint:e_,boolean:pf,date:t_,discriminatedUnion:f_,effect:gf,enum:E_,function:w_,instanceof:Q2,intersection:p_,lazy:b_,literal:__,map:y_,nan:X2,nativeEnum:S_,never:a_,null:i_,nullable:I_,number:ff,object:u_,oboolean:()=>pf().optional(),onumber:()=>ff().optional(),optional:C_,ostring:()=>hf().optional(),pipeline:O_,preprocess:D_,promise:x_,record:m_,set:v_,strictObject:d_,string:hf,symbol:r_,transformer:gf,tuple:g_,undefined:n_,union:h_,unknown:o_,void:c_,NEVER:xe,ZodIssueCode:ie,quotelessJson:M2,ZodError:$r});const mf=/^aleo1.{58}$/i,yf=/^AViewKey1.{44}$/i,vf=/^APrivateKey1.{47}$/i,wf=/^at1.{60}$/i,bf=/^\d+field$/,_f=/^\d+u32$/,Ef=/^\d+u64$/,A_=Lr.string().regex(mf),T_=Lr.string().regex(yf),$_=Lr.string().regex(vf),N_=Lr.string().regex(wf),R_=Lr.string().regex(bf),P_=Lr.string().regex(_f),L_=Lr.string().regex(Ef);G.EventType=void 0,function(t){t.Deploy="Deploy",t.Execute="Execute",t.Send="Send",t.Receive="Receive",t.Join="Join",t.Split="Split",t.Shield="Shield",t.Unshield="Unshield"}(G.EventType||(G.EventType={})),G.EventStatus=void 0,function(t){t.Creating="Creating",t.Pending="Pending",t.Settled="Settled",t.Failed="Failed"}(G.EventStatus||(G.EventStatus={})),G.Visibility=void 0,function(t){t.Private="Private",t.Public="Public"}(G.Visibility||(G.Visibility={})),G.Network=void 0,function(t){t.AleoTestnet="AleoTestnet",t.AleoMainnet="AleoMainnet"}(G.Network||(G.Network={})),G.AssetType=void 0,function(t){t[t.ALEO=0]="ALEO"}(G.AssetType||(G.AssetType={}));const M_=Lr.nativeEnum(G.EventType),k_=Lr.nativeEnum(G.EventStatus),U_=Lr.nativeEnum(G.Network),j_=Lr.nativeEnum(G.Visibility);let F_=class extends yr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},B_=class{constructor(e,r,n){this.core=e,this.logger=r}},z_=class extends yr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},q_=class{constructor(e,r){this.logger=e,this.core=r}},W_=class extends yr{constructor(e,r){super(),this.relayer=e,this.logger=r}},V_=class extends yr{constructor(e){super()}},H_=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},K_=class{constructor(){this.map=new Map}},Z_=class extends yr{constructor(e,r){super(),this.relayer=e,this.logger=r}},G_=class{constructor(e,r){this.core=e,this.logger=r}},Y_=class extends yr{constructor(e,r){super(),this.core=e,this.logger=r}},J_=class{constructor(e,r){this.logger=e,this.core=r}},Q_=class{constructor(e,r){this.projectId=e,this.logger=r}},X_=class extends Ca{constructor(){super()}},e3=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},t3=class extends Sr.EventEmitter{constructor(){super()}},r3=class{constructor(e){this.client=e}};function Ac(t){yt.useEffect(()=>(dt().then(e=>{e.onSessionDelete(t)}),()=>{dt().then(e=>{e.offSessionDelete(t)})}),[t])}function Sf(t){yt.useEffect(()=>(dt().then(e=>{e.onSessionExpire(t)}),()=>{dt().then(e=>{e.offSessionExpire(t)})}),[t])}function Tc(t){yt.useEffect(()=>(dt().then(e=>{e.onSessionUpdate(t)}),()=>{dt().then(e=>{e.offSessionUpdate(t)})}),[t])}function Mr(){const[t,e]=yt.useState(void 0);return Ac(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),Tc(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:n}=r.params,i={...t,namespaces:n};e(i)}}),Sf(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),yt.useEffect(()=>{async function r(){const i=await(await dt()).getSession();e(i)}return r(),Hn.on("session_change",r),()=>{Hn.off("session_change",r)}},[]),t}function As(t){yt.useEffect(()=>(dt().then(e=>{e.onSessionEvent(t)}),()=>{dt().then(e=>{e.offSessionEvent(t)})}),[t])}const xf=t=>{let e;const r=new Set,n=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??typeof d!="object"?d:Object.assign({},e,d),r.forEach(p=>p(e,f))}},i=()=>e,a={setState:n,getState:i,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{r.clear()}};return e=t(n,i,a),a},n3=t=>t?xf(t):xf;var $c={exports:{}},Nc={},zo={exports:{}},Rc={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cf;function i3(){if(Cf)return Rc;Cf=1;var t=yt;function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,p){var y=p(),b=n({inst:{value:y,getSnapshot:p}}),S=b[0].inst,C=b[1];return s(function(){S.value=y,S.getSnapshot=p,c(S)&&C({inst:S})},[f,y,p]),i(function(){return c(S)&&C({inst:S}),f(function(){c(S)&&C({inst:S})})},[f]),o(y),y}function c(f){var p=f.getSnapshot;f=f.value;try{var y=p();return!r(f,y)}catch{return!0}}function u(f,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return Rc.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,Rc}var Pc={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If;function s3(){return If||(If=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=yt,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(x){{for(var v=arguments.length,w=new Array(v>1?v-1:0),g=1;g<v;g++)w[g-1]=arguments[g];n("error",x,w)}}function n(x,v,w){{var g=e.ReactDebugCurrentFrame,l=g.getStackAddendum();l!==""&&(v+="%s",w=w.concat([l]));var m=w.map(function(N){return String(N)});m.unshift("Warning: "+v),Function.prototype.apply.call(console[x],console,m)}}function i(x,v){return x===v&&(x!==0||1/x===1/v)||x!==x&&v!==v}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,c=t.useLayoutEffect,u=t.useDebugValue,d=!1,f=!1;function p(x,v,w){d||t.startTransition!==void 0&&(d=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var g=v();if(!f){var l=v();s(g,l)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),f=!0)}var m=o({inst:{value:g,getSnapshot:v}}),N=m[0].inst,$=m[1];return c(function(){N.value=g,N.getSnapshot=v,y(N)&&$({inst:N})},[x,g,v]),a(function(){y(N)&&$({inst:N});var z=function(){y(N)&&$({inst:N})};return x(z)},[x]),u(g),g}function y(x){var v=x.getSnapshot,w=x.value;try{var g=v();return!s(w,g)}catch{return!0}}function b(x,v,w){return v()}var S=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",C=!S,A=C?b:p,E=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:A;Pc.useSyncExternalStore=E,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Pc}var Df;function Of(){return Df||(Df=1,process.env.NODE_ENV==="production"?zo.exports=i3():zo.exports=s3()),zo.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af;function o3(){if(Af)return Nc;Af=1;var t=yt,e=Of();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return Nc.useSyncExternalStoreWithSelector=function(u,d,f,p,y){var b=s(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=a(function(){function A(g){if(!E){if(E=!0,x=g,g=p(g),y!==void 0&&S.hasValue){var l=S.value;if(y(l,g))return v=l}return v=g}if(l=v,n(x,g))return l;var m=p(g);return y!==void 0&&y(l,m)?l:(x=g,v=m)}var E=!1,x,v,w=f===void 0?null:f;return[function(){return A(d())},w===null?void 0:function(){return A(w())}]},[d,f,p,y]);var C=i(u,b[0],b[1]);return o(function(){S.hasValue=!0,S.value=C},[C]),c(C),C},Nc}var Lc={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf;function a3(){return Tf||(Tf=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=yt,e=Of();function r(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;function u(d,f,p,y,b){var S=s(null),C;S.current===null?(C={hasValue:!1,value:null},S.current=C):C=S.current;var A=a(function(){var w=!1,g,l,m=function(W){if(!w){w=!0,g=W;var X=y(W);if(b!==void 0&&C.hasValue){var R=C.value;if(b(R,X))return l=R,R}return l=X,X}var j=g,se=l;if(n(j,W))return se;var Z=y(W);return b!==void 0&&b(se,Z)?se:(g=W,l=Z,Z)},N=p===void 0?null:p,$=function(){return m(f())},z=N===null?void 0:function(){return m(N())};return[$,z]},[f,p,y,b]),E=A[0],x=A[1],v=i(d,E,x);return o(function(){C.hasValue=!0,C.value=v},[v]),c(v),v}Lc.useSyncExternalStoreWithSelector=u,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Lc}process.env.NODE_ENV==="production"?$c.exports=o3():$c.exports=a3();var c3=$c.exports;const l3=Vi(c3),{useSyncExternalStoreWithSelector:u3}=l3;function d3(t,e=t.getState,r){const n=u3(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return yt.useDebugValue(n),n}const $f=t=>{const e=typeof t=="function"?n3(t):t,r=(n,i)=>d3(e,n,i);return Object.assign(r,e),r},h3=t=>t?$f(t):$f;function f3(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,e==null?void 0:e.reviver),a=(s=r.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>r.setItem(i,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:i=>r.removeItem(i)}}const Ts=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Ts(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Ts(n)(r)}}}},p3=(t,e)=>(r,n,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:C=>C,version:0,merge:(C,A)=>({...A,...C}),...e},o=!1;const a=new Set,c=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return t((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...C)},n,i);const d=Ts(s.serialize),f=()=>{const C=s.partialize({...n()});let A;const E=d({state:C,version:s.version}).then(x=>u.setItem(s.name,x)).catch(x=>{A=x});if(A)throw A;return E},p=i.setState;i.setState=(C,A)=>{p(C,A),f()};const y=t((...C)=>{r(...C),f()},n,i);let b;const S=()=>{var C;if(!u)return;o=!1,a.forEach(E=>E(n()));const A=((C=s.onRehydrateStorage)==null?void 0:C.call(s,n()))||void 0;return Ts(u.getItem.bind(u))(s.name).then(E=>{if(E)return s.deserialize(E)}).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==s.version){if(s.migrate)return s.migrate(E.state,E.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return E.state}).then(E=>{var x;return b=s.merge(E,(x=n())!=null?x:y),r(b,!0),f()}).then(()=>{A==null||A(b,void 0),o=!0,c.forEach(E=>E(b))}).catch(E=>{A==null||A(void 0,E)})};return i.persist={setOptions:C=>{s={...s,...C},C.getStorage&&(u=C.getStorage())},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:C=>(a.add(C),()=>{a.delete(C)}),onFinishHydration:C=>(c.add(C),()=>{c.delete(C)})},S(),b||y},g3=(t,e)=>(r,n,i)=>{let s={storage:f3(()=>localStorage),partialize:S=>S,version:0,merge:(S,C)=>({...C,...S}),...e},o=!1;const a=new Set,c=new Set;let u=s.storage;if(!u)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...S)},n,i);const d=()=>{const S=s.partialize({...n()});return u.setItem(s.name,{state:S,version:s.version})},f=i.setState;i.setState=(S,C)=>{f(S,C),d()};const p=t((...S)=>{r(...S),d()},n,i);let y;const b=()=>{var S,C;if(!u)return;o=!1,a.forEach(E=>{var x;return E((x=n())!=null?x:p)});const A=((C=s.onRehydrateStorage)==null?void 0:C.call(s,(S=n())!=null?S:p))||void 0;return Ts(u.getItem.bind(u))(s.name).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==s.version){if(s.migrate)return s.migrate(E.state,E.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return E.state}).then(E=>{var x;return y=s.merge(E,(x=n())!=null?x:p),r(y,!0),d()}).then(()=>{A==null||A(y,void 0),y=n(),o=!0,c.forEach(E=>E(y))}).catch(E=>{A==null||A(void 0,E)})};return i.persist={setOptions:S=>{s={...s,...S},S.storage&&(u=S.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(c.add(S),()=>{c.delete(S)})},s.skipHydration||b(),y||p},m3=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?p3(t,e):g3(t,e),Jn=h3()(m3((t,e)=>({account:void 0,chainId:"aleo:1",setAccount:r=>{t({account:r})},setChainId:r=>{t({chainId:r})},disconnect:()=>{t({account:void 0,chainId:void 0})}}),{name:"puzzle-wallet-store"}));function Mc(){const[t,e]=yt.useState(void 0),[r,n]=yt.useState(void 0),[i,s]=yt.useState(!1);return{data:t,error:r,loading:i,setData:e,setError:n,setLoading:s}}function on(t){const{data:e,error:r,loading:n,setData:i,setError:s,setLoading:o}=Mc();async function a(c){try{o(!0),s(void 0);const d=await(await dt()).request(c??t);return i(d),d}catch(u){throw s(u),u}finally{o(!1)}}return{data:e,error:r,loading:n,request:a}}const kc=t=>t.length<5*2?t:`${t.slice(0,5+5)}...${t.slice(t.length-5,t.length)}`,y3=()=>{const t=Mr(),e="aleo:1",[r,n]=Jn(u=>[u.account,u.setAccount]),{request:i,data:s,error:o,loading:a}=on({topic:t==null?void 0:t.topic,chainId:e,request:{jsonrpc:"2.0",method:"getSelectedAccount"}});As(({params:u,topic:d})=>{if(u.event.name==="accountSelected"&&t&&t.topic===d){const p=u.event.address,y=u.chainId.split(":")[0],b=u.chainId.split(":")[1];n({network:y,chainId:b,address:p,shortenedAddress:kc(p)})}}),Tc(({params:u,topic:d})=>{const f=u.event.address,p=u.chainId.split(":")[0],y=u.chainId.split(":")[1];n({network:p,chainId:y,address:f,shortenedAddress:kc(f)})}),Ac(({params:u,topic:d})=>{n(void 0)}),yt.useEffect(()=>{t&&!a&&i()},[t==null?void 0:t.topic]),yt.useEffect(()=>{if(s){const u=s,d=u==null?void 0:u.account;d&&n(d)}},[s]);const c=o?o.message:s&&s.error;return{account:r,error:c,loading:a}},v3=({address:t})=>{const e=Mr(),[r]=Jn(f=>[f.account]),n="aleo:1",{request:i,data:s,error:o,loading:a}=on({topic:e==null?void 0:e.topic,chainId:n,request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}});As(({params:f,topic:p})=>{const y=f.event.name,b=f.event.address;["accountSelected","selectedAccountSynced","sharedAccountSynced"].includes(y)&&e&&e.topic===p&&b===(r==null?void 0:r.address)&&!a&&i()}),yt.useEffect(()=>{e&&!a&&i()},[e==null?void 0:e.topic]);const c=o?o.message:s&&s.error,u=s;return{balances:u==null?void 0:u.balances,error:c,loading:a}};function w3(){const{data:t,error:e,loading:r,setData:n,setError:i,setLoading:s}=Mc();async function o(){try{s(!0),i(void 0);const c=await(await dt()).connect({requiredNamespaces:{aleo:{methods:Ao,chains:gs,events:To}}});return n(c),Hn.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),c}catch(a){throw i(a),a}finally{s(!1)}}return{data:t,error:e,loading:r,connect:o}}const b3=()=>{const t=Mr(),{request:e,data:r,error:n,loading:i}=on({topic:(t==null?void 0:t.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"createSharedState",params:{}}}),s=n?n.message:r&&r.error,o=r;return{createSharedState:()=>{e()},data:o==null?void 0:o.data,loading:i,error:s}};var Uc={exports:{}},jc,Nf;function _3(){if(Nf)return jc;Nf=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;jc=function(d,f){f=f||{};var p=typeof d;if(p==="string"&&d.length>0)return o(d);if(p==="number"&&isFinite(d))return f.long?c(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(f){var p=parseFloat(f[1]),y=(f[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return p*s;case"weeks":case"week":case"w":return p*i;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(d){var f=Math.abs(d);return f>=n?Math.round(d/n)+"d":f>=r?Math.round(d/r)+"h":f>=e?Math.round(d/e)+"m":f>=t?Math.round(d/t)+"s":d+"ms"}function c(d){var f=Math.abs(d);return f>=n?u(d,f,n,"day"):f>=r?u(d,f,r,"hour"):f>=e?u(d,f,e,"minute"):f>=t?u(d,f,t,"second"):d+" ms"}function u(d,f,p,y){var b=f>=p*1.5;return Math.round(d/p)+" "+y+(b?"s":"")}return jc}function E3(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=_3(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(d){let f,p=null,y,b;function S(...C){if(!S.enabled)return;const A=S,E=Number(new Date),x=E-(f||E);A.diff=x,A.prev=f,A.curr=E,f=E,C[0]=r.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let v=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(g,l)=>{if(g==="%%")return"%";v++;const m=r.formatters[l];if(typeof m=="function"){const N=C[v];g=m.call(A,N),C.splice(v,1),v--}return g}),r.formatArgs.call(A,C),(A.log||r.log).apply(A,C)}return S.namespace=d,S.useColors=r.useColors(),S.color=r.selectColor(d),S.extend=n,S.destroy=r.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,b=r.enabled(d)),b),set:C=>{p=C}}),typeof r.init=="function"&&r.init(S),S}function n(d,f){const p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const p=(typeof d=="string"?d:"").split(/[\s,]+/),y=p.length;for(f=0;f<y;f++)p[f]&&(d=p[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(d))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var S3=E3;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let d=0,f=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(d++,p==="%c"&&(f=d))}),c.splice(f,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=S3(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Uc,Uc.exports);var x3=Uc.exports;const Fc=Vi(x3)("wallet:sdk");Fc.enabled=!0;const C3=t=>{Fc("useDecrypt",t);const e=Mr(),{request:r,data:n,error:i,loading:s}=on({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}}),o=i?i.message:n&&n.error,a=n;return{decrypt:()=>{t&&r()},plaintexts:a==null?void 0:a.plaintexts,loading:s,error:o}};function I3(){const t=Mr(),{error:e,loading:r,setError:n,setLoading:i}=Mc();async function s(){try{i(!0),n(void 0),await(await dt()).disconnect({topic:t==null?void 0:t.topic,reason:$t("USER_DISCONNECTED")}),Hn.emit("session_change"),Jn.setState({account:void 0})}catch(o){throw n(o),o}finally{i(!1)}}return{error:e,loading:r,disconnect:s}}const D3=({filter:t,page:e})=>{const r=Mr(),[n]=Jn(b=>[b.account]);(t==null?void 0:t.programId)===""&&(t.programId=void 0);const{request:i,data:s,error:o,loading:a}=on({topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:e}}});As(({id:b,params:S,topic:C})=>{const A=S.event.name,E=S.event.address;A==="selectedAccountSynced"&&r&&r.topic===C&&E===(n==null?void 0:n.address)&&!a&&i()});const c=!!r&&!!n;yt.useEffect(()=>{c&&!a&&i()},[c]);const u=()=>{!!r&&!!n&&!a&&i()},d=o?o.message:s&&s.error,f=s,p=f==null?void 0:f.events,y=(f==null?void 0:f.pageCount)??0;return{fetchPage:u,events:p,error:d,loading:a,page:e,pageCount:y}},O3=t=>{const e=Mr(),{request:r,data:n,error:i,loading:s}=on({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}}),o=i?i.message:n&&n.error,a=n;return{importSharedState:()=>{r()},data:a==null?void 0:a.data,loading:s,error:o}},A3=t=>{try{return JSON.stringify(t,null,2).replaceAll('"',"")??""}catch{return""}},T3=({address:t,multisig:e=!1,filter:r,page:n})=>{const i=Mr(),[s,o]=Jn(A=>[A.chainId,A.account]),{request:a,data:c,error:u,loading:d}=on({topic:i==null?void 0:i.topic,chainId:s,request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:r,page:n}}}),f=!!i&&!!o&&(e?!!t:!0);As(({params:A,topic:E})=>{const x=A.event.name,v=A.event.address;(x==="selectedAccountSynced"||x==="accountSelected"||x==="sharedAccountSynced"&&v===t)&&f&&i.topic===E&&a()}),yt.useEffect(()=>{f&&!d&&a()},[f]);const p=()=>{f&&!d&&a()},y=u?u.message:c&&c.error,b=c,S=b==null?void 0:b.records,C=(b==null?void 0:b.pageCount)??0;return{fetchPage:p,records:S,error:y,loading:d,page:n,pageCount:C}},$3=(t,e)=>{const r=Mr(),{request:n,data:i,error:s,loading:o}=on({topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}}),a=s?s.message:i&&i.error;return{requestSignature:()=>{n()},response:i,loading:o,error:a}},N3=t=>{const e=Mr(),r=t==null?void 0:t.inputs.map(d=>typeof d=="string"?d:d.plaintext),{request:n,data:i,error:s,loading:o}=on({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:r}}}),a=s?s.message:i&&i.error,c=i;return{createEvent:()=>{t&&(Fc("useCreateEvent requesting...",t),n())},eventId:c==null?void 0:c.eventId,loading:o,error:a}},R3=async()=>{const t=await dt(),e=await t.getSession(),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{const n=await t.request({topic:e==null?void 0:e.topic,chainId:r,request:{jsonrpc:"2.0",method:"getSelectedAccount"}});return Jn.setState({account:n.account}),n}catch(n){const i=n.message;return console.error("getAccount error",i),{error:i}}},P3=async({address:t})=>{const e=await dt(),r=await e.getSession(),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r==null?void 0:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}})}catch(i){const s=i.message;return console.error("getBalance error",s),{error:s}}},L3=async()=>{const t=await dt();if(!t)throw new Error("call setConnection() first!");try{const e=await t.connect({requiredNamespaces:{aleo:{methods:Ao,chains:gs,events:To}}});return Hn.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),e}catch(e){console.error("connect error",e.message)}},M3=async t=>{const e=await dt(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};const i=t==null?void 0:t.inputs.map(s=>typeof s=="string"?s:s.plaintext);try{return await e.request({topic:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:i}}})}catch(s){const o=s.message;return console.error("createEvent error",o),{error:o}}},k3=async()=>{const t=await dt(),e=await(t==null?void 0:t.getSession()),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e.topic,chainId:r,request:{jsonrpc:"2.0",method:"createSharedState",params:{}}})}catch(n){const i=n.message;return console.error("createSharedState error",i),{error:i}}},U3=async t=>{const e=await dt(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}})}catch(i){return console.error("decrypt error",i.message),{error:i.message}}},j3=async()=>{const t=await dt(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session, or connection"};try{return await t.disconnect({reason:$t("USER_DISCONNECTED"),topic:e.topic}),Hn.emit("session_change"),Jn.setState({account:void 0}),{}}catch(r){const n=r.message;return console.error("error disconnecting",n),{error:n}}},F3=async({id:t,address:e})=>{const r=await dt(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{event:void 0,error:"no session, chainId, or connection"};const s=async()=>await r.request({topic:(n==null?void 0:n.topic)??"",chainId:i,request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}});try{return await s()}catch(o){const a=o.message;return console.error("getEvents error",a),{error:a}}},B3=async t=>{const e=await dt(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{events:void 0,error:"no session, chainId, or connection"};(t==null?void 0:t.programId)===""&&(t.programId=void 0);const i=async(s=0)=>await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:s}}});try{return await i()}catch(s){const o=s.message;return console.error("getEvents error",o),{error:o}}},z3=async t=>{const e=await dt(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}})}catch(i){const s=i.message;return console.error("importSharedState error",s),{error:s}}},q3=async({address:t,filter:e,page:r=0})=>{const n=await dt(),i=await(n==null?void 0:n.getSession()),s="aleo:1";if(!i||!s||!n)return{error:"no session, chainId, or connection"};const o=async(a=0)=>await n.request({topic:i.topic,chainId:s,request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:a}}});try{return await o()}catch(a){const c=a.message;return console.error("getRecords error",c),{error:c}}},W3=async({message:t,address:e})=>{const r=await dt(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{error:"no session, chainId, or connection"};try{return await r.request({topic:n.topic,chainId:i,request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}})}catch(s){const o=s.message;return console.error("signature error",o),{error:o}}},V3=50,H3=["wc@2:client:0.3//proposal","wc@2:core:0.3//subscription","wc@2:core:0.3//keychain","wc@2:core:0.3//messages","wc@2:core:0.3//history","wc@2:client:0.3//session","wc@2:core:0.3//expirer","WCM_WALLETCONNECT_CLIENT_ID","wc@2:core:0.3//pairing","debug"],Rf=e0.version;try{const t=localStorage.getItem("puzzle-sdk-version");Rf!==t&&(H3.forEach(e=>{localStorage.removeItem(e)}),localStorage.setItem("puzzle-sdk-version",Rf))}catch(t){console.error(t)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qo=window,Bc=qo.ShadowRoot&&(qo.ShadyCSS===void 0||qo.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,zc=Symbol(),Pf=new WeakMap;let Lf=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==zc)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(Bc&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Pf.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Pf.set(r,e))}return e}toString(){return this.cssText}};const K3=t=>new Lf(typeof t=="string"?t:t+"",void 0,zc),rt=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Lf(r,t,zc)},Z3=(t,e)=>{Bc?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=qo.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},Mf=Bc?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return K3(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var qc;const Wo=window,kf=Wo.trustedTypes,G3=kf?kf.emptyScript:"",Uf=Wo.reactiveElementPolyfillSupport,Wc={toAttribute(t,e){switch(e){case Boolean:t=t?G3:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},jf=(t,e)=>e!==t&&(e==e||t==t),Vc={attribute:!0,type:String,converter:Wc,reflect:!1,hasChanged:jf},Hc="finalized";let xi=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=Vc){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Vc}static finalize(){if(this.hasOwnProperty(Hc))return!1;this[Hc]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(Mf(i))}else e!==void 0&&r.push(Mf(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Z3(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=Vc){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:Wc).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:Wc;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||jf)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};xi[Hc]=!0,xi.elementProperties=new Map,xi.elementStyles=[],xi.shadowRootOptions={mode:"open"},Uf==null||Uf({ReactiveElement:xi}),((qc=Wo.reactiveElementVersions)!==null&&qc!==void 0?qc:Wo.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Kc;const Vo=window,Ci=Vo.trustedTypes,Ff=Ci?Ci.createPolicy("lit-html",{createHTML:t=>t}):void 0,Zc="$lit$",Sn=`lit$${(Math.random()+"").slice(9)}$`,Bf="?"+Sn,Y3=`<${Bf}>`,Qn=document,$s=()=>Qn.createComment(""),Ns=t=>t===null||typeof t!="object"&&typeof t!="function",zf=Array.isArray,J3=t=>zf(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Gc=`[ 	
\f\r]`,Rs=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,qf=/-->/g,Wf=/>/g,Xn=RegExp(`>|${Gc}(?:([^\\s"'>=/]+)(${Gc}*=${Gc}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Vf=/'/g,Hf=/"/g,Kf=/^(?:script|style|textarea|title)$/i,Zf=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),ae=Zf(1),Et=Zf(2),ei=Symbol.for("lit-noChange"),jt=Symbol.for("lit-nothing"),Gf=new WeakMap,ti=Qn.createTreeWalker(Qn,129,null,!1);function Yf(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Ff!==void 0?Ff.createHTML(e):e}const Q3=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=Rs;for(let a=0;a<r;a++){const c=t[a];let u,d,f=-1,p=0;for(;p<c.length&&(o.lastIndex=p,d=o.exec(c),d!==null);)p=o.lastIndex,o===Rs?d[1]==="!--"?o=qf:d[1]!==void 0?o=Wf:d[2]!==void 0?(Kf.test(d[2])&&(i=RegExp("</"+d[2],"g")),o=Xn):d[3]!==void 0&&(o=Xn):o===Xn?d[0]===">"?(o=i??Rs,f=-1):d[1]===void 0?f=-2:(f=o.lastIndex-d[2].length,u=d[1],o=d[3]===void 0?Xn:d[3]==='"'?Hf:Vf):o===Hf||o===Vf?o=Xn:o===qf||o===Wf?o=Rs:(o=Xn,i=void 0);const y=o===Xn&&t[a+1].startsWith("/>")?" ":"";s+=o===Rs?c+Y3:f>=0?(n.push(u),c.slice(0,f)+Zc+c.slice(f)+Sn+y):c+Sn+(f===-2?(n.push(void 0),a):y)}return[Yf(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class Ps{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[u,d]=Q3(e,r);if(this.el=Ps.createElement(u,n),ti.currentNode=this.el.content,r===2){const f=this.el.content,p=f.firstChild;p.remove(),f.append(...p.childNodes)}for(;(i=ti.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const f=[];for(const p of i.getAttributeNames())if(p.endsWith(Zc)||p.startsWith(Sn)){const y=d[o++];if(f.push(p),y!==void 0){const b=i.getAttribute(y.toLowerCase()+Zc).split(Sn),S=/([.?@])?(.*)/.exec(y);c.push({type:1,index:s,name:S[2],strings:b,ctor:S[1]==="."?e5:S[1]==="?"?r5:S[1]==="@"?n5:Ho})}else c.push({type:6,index:s})}for(const p of f)i.removeAttribute(p)}if(Kf.test(i.tagName)){const f=i.textContent.split(Sn),p=f.length-1;if(p>0){i.textContent=Ci?Ci.emptyScript:"";for(let y=0;y<p;y++)i.append(f[y],$s()),ti.nextNode(),c.push({type:2,index:++s});i.append(f[p],$s())}}}else if(i.nodeType===8)if(i.data===Bf)c.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(Sn,f+1))!==-1;)c.push({type:7,index:s}),f+=Sn.length-1}s++}}static createElement(e,r){const n=Qn.createElement("template");return n.innerHTML=e,n}}function Ii(t,e,r=t,n){var i,s,o,a;if(e===ei)return e;let c=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const u=Ns(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==u&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),u===void 0?c=void 0:(c=new u(t),c._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=c:r._$Cl=c),c!==void 0&&(e=Ii(t,c._$AS(t,e.values),c,n)),e}class X3{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:Qn).importNode(n,!0);ti.currentNode=s;let o=ti.nextNode(),a=0,c=0,u=i[0];for(;u!==void 0;){if(a===u.index){let d;u.type===2?d=new Ls(o,o.nextSibling,this,e):u.type===1?d=new u.ctor(o,u.name,u.strings,this,e):u.type===6&&(d=new i5(o,this,e)),this._$AV.push(d),u=i[++c]}a!==(u==null?void 0:u.index)&&(o=ti.nextNode(),a++)}return ti.currentNode=Qn,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class Ls{constructor(e,r,n,i){var s;this.type=2,this._$AH=jt,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Ii(this,e,r),Ns(e)?e===jt||e==null||e===""?(this._$AH!==jt&&this._$AR(),this._$AH=jt):e!==this._$AH&&e!==ei&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):J3(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==jt&&Ns(this._$AH)?this._$AA.nextSibling.data=e:this.$(Qn.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Ps.createElement(Yf(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new X3(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=Gf.get(e.strings);return r===void 0&&Gf.set(e.strings,r=new Ps(e)),r}T(e){zf(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new Ls(this.k($s()),this.k($s()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class Ho{constructor(e,r,n,i,s){this.type=1,this._$AH=jt,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=jt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Ii(this,e,r,0),o=!Ns(e)||e!==this._$AH&&e!==ei,o&&(this._$AH=e);else{const a=e;let c,u;for(e=s[0],c=0;c<s.length-1;c++)u=Ii(this,a[n+c],r,c),u===ei&&(u=this._$AH[c]),o||(o=!Ns(u)||u!==this._$AH[c]),u===jt?e=jt:e!==jt&&(e+=(u??"")+s[c+1]),this._$AH[c]=u}o&&!i&&this.j(e)}j(e){e===jt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class e5 extends Ho{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===jt?void 0:e}}const t5=Ci?Ci.emptyScript:"";let r5=class extends Ho{constructor(){super(...arguments),this.type=4}j(e){e&&e!==jt?this.element.setAttribute(this.name,t5):this.element.removeAttribute(this.name)}};class n5 extends Ho{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=Ii(this,e,r,0))!==null&&n!==void 0?n:jt)===ei)return;const i=this._$AH,s=e===jt&&i!==jt||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==jt&&(i===jt||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let i5=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Ii(this,e)}};const Jf=Vo.litHtmlPolyfillSupport;Jf==null||Jf(Ps,Ls),((Kc=Vo.litHtmlVersions)!==null&&Kc!==void 0?Kc:Vo.litHtmlVersions=[]).push("2.8.0");const s5=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new Ls(e.insertBefore($s(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Yc,Jc;class Fe extends xi{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=s5(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return ei}}Fe.finalized=!0,Fe._$litElement$=!0,(Yc=globalThis.litElementHydrateSupport)===null||Yc===void 0||Yc.call(globalThis,{LitElement:Fe});const Qf=globalThis.litElementPolyfillSupport;Qf==null||Qf({LitElement:Fe}),((Jc=globalThis.litElementVersions)!==null&&Jc!==void 0?Jc:globalThis.litElementVersions=[]).push("3.3.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ze=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o5=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},a5=(t,e,r)=>{e.constructor.createProperty(r,t)};function $e(t){return(e,r)=>r!==void 0?a5(t,e,r):o5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function fr(t){return $e({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Qc;((Qc=window.HTMLSlotElement)===null||Qc===void 0?void 0:Qc.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const c5={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},l5=t=>(...e)=>({_$litDirective$:t,values:e});class u5{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const an=l5(class extends u5{constructor(t){var e;if(super(t),t.type!==c5.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return ei}});function d5(t,e){t.indexOf(e)===-1&&t.push(e)}const Xf=(t,e,r)=>Math.min(Math.max(r,t),e),Cr={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},Ko=t=>typeof t=="number",Di=t=>Array.isArray(t)&&!Ko(t[0]),h5=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function f5(t,e){return Di(t)?t[h5(0,t.length,e)]:t}const ep=(t,e,r)=>-r*t+r*e+t,tp=()=>{},xn=t=>t,Xc=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function rp(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=Xc(0,e,n);t.push(ep(r,1,i))}}function p5(t){const e=[0];return rp(e,t-1),e}function g5(t,e=p5(t.length),r=xn){const n=t.length,i=n-e.length;return i>0&&rp(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=Xf(0,1,Xc(e[o],e[o+1],s));return a=f5(r,o)(a),ep(t[o],t[o+1],a)}}const np=t=>Array.isArray(t)&&Ko(t[0]),el=t=>typeof t=="object"&&!!t.createAnimation,Oi=t=>typeof t=="function",m5=t=>typeof t=="string",Ms={ms:t=>t*1e3,s:t=>t/1e3},ip=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,y5=1e-7,v5=12;function w5(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=ip(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>y5&&++a<v5);return o}function ks(t,e,r,n){if(t===e&&r===n)return xn;const i=s=>w5(s,0,1,t,r);return s=>s===0||s===1?s:ip(i(s),e,n)}const b5=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return Xf(0,1,i/t)},sp={ease:ks(.25,.1,.25,1),"ease-in":ks(.42,0,1,1),"ease-in-out":ks(.42,0,.58,1),"ease-out":ks(0,0,.58,1)},_5=/\((.*?)\)/;function op(t){if(Oi(t))return t;if(np(t))return ks(...t);if(sp[t])return sp[t];if(t.startsWith("steps")){const e=_5.exec(t);if(e){const r=e[1].split(",");return b5(parseFloat(r[0]),r[1].trim())}}return xn}class ap{constructor(e,r=[0,1],{easing:n,duration:i=Cr.duration,delay:s=Cr.delay,endDelay:o=Cr.endDelay,repeat:a=Cr.repeat,offset:c,direction:u="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=xn,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((f,p)=>{this.resolve=f,this.reject=p}),n=n||Cr.easing,el(n)){const f=n.createAnimation(r);n=f.easing,r=f.keyframes||r,i=f.duration||i}this.repeat=a,this.easing=Di(n)?xn:op(n),this.updateDuration(i);const d=g5(r,c,Di(n)?n.map(op):xn);this.tick=f=>{var p;s=s;let y=0;this.pauseTime!==void 0?y=this.pauseTime:y=(f-this.startTime)*this.rate,this.t=y,y/=1e3,y=Math.max(y-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(y=this.totalDuration);const b=y/this.duration;let S=Math.floor(b),C=b%1;!C&&b>=1&&(C=1),C===1&&S--;const A=S%2;(u==="reverse"||u==="alternate"&&A||u==="alternate-reverse"&&!A)&&(C=1-C);const E=y>=this.totalDuration?1:Math.min(C,1),x=d(this.easing(E));e(x),this.pauseTime===void 0&&(this.playState==="finished"||y>=this.totalDuration+o)?(this.playState="finished",(p=this.resolve)===null||p===void 0||p.call(this,x)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var tl=function(){};process.env.NODE_ENV!=="production"&&(tl=function(t,e){if(!t)throw new Error(e)});class E5{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const rl=new WeakMap;function cp(t){return rl.has(t)||rl.set(t,{transforms:[],values:new Map}),rl.get(t)}function S5(t,e){return t.has(e)||t.set(e,new E5),t.get(e)}const x5=["","X","Y","Z"],C5=["translate","scale","rotate","skew"],Zo={x:"translateX",y:"translateY",z:"translateZ"},lp={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},I5={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:lp,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:xn},skew:lp},Us=new Map,nl=t=>`--motion-${t}`,Go=["x","y","z"];C5.forEach(t=>{x5.forEach(e=>{Go.push(t+e),Us.set(nl(t+e),I5[t])})});const D5=(t,e)=>Go.indexOf(t)-Go.indexOf(e),O5=new Set(Go),up=t=>O5.has(t),A5=(t,e)=>{Zo[e]&&(e=Zo[e]);const{transforms:r}=cp(t);d5(r,e),t.style.transform=T5(r)},T5=t=>t.sort(D5).reduce($5,"").trim(),$5=(t,e)=>`${t} ${e}(var(${nl(e)}))`,il=t=>t.startsWith("--"),dp=new Set;function N5(t){if(!dp.has(t)){dp.add(t);try{const{syntax:e,initialValue:r}=Us.has(t)?Us.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const sl=(t,e)=>document.createElement("div").animate(t,e),hp={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{sl({opacity:[1]})}catch{return!1}return!0},finished:()=>!!sl({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{sl({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},ol={},Ai={};for(const t in hp)Ai[t]=()=>(ol[t]===void 0&&(ol[t]=hp[t]()),ol[t]);const R5=.015,P5=(t,e)=>{let r="";const n=Math.round(e/R5);for(let i=0;i<n;i++)r+=t(Xc(0,n-1,i))+", ";return r.substring(0,r.length-2)},fp=(t,e)=>Oi(t)?Ai.linearEasing()?`linear(${P5(t,e)})`:Cr.easing:np(t)?L5(t):t,L5=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function M5(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const k5=t=>Array.isArray(t)?t:[t];function al(t){return Zo[t]&&(t=Zo[t]),up(t)?nl(t):t}const Yo={get:(t,e)=>{e=al(e);let r=il(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=Us.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=al(e),il(e)?t.style.setProperty(e,r):t.style[e]=r}};function pp(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function U5(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||xn;const i=t[t.length-1];if(m5(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function j5(){return window.__MOTION_DEV_TOOLS_RECORD}function F5(t,e,r,n={},i){const s=j5(),o=n.record!==!1&&s;let a,{duration:c=Cr.duration,delay:u=Cr.delay,endDelay:d=Cr.endDelay,repeat:f=Cr.repeat,easing:p=Cr.easing,persist:y=!1,direction:b,offset:S,allowWebkitAcceleration:C=!1}=n;const A=cp(t),E=up(e);let x=Ai.waapi();E&&A5(t,e);const v=al(e),w=S5(A.values,v),g=Us.get(v);return pp(w.animation,!(el(p)&&w.generator)&&n.record!==!1),()=>{const l=()=>{var $,z;return(z=($=Yo.get(t,v))!==null&&$!==void 0?$:g==null?void 0:g.initialValue)!==null&&z!==void 0?z:0};let m=M5(k5(r),l);const N=U5(m,g);if(el(p)){const $=p.createAnimation(m,e!=="opacity",l,v,w);p=$.easing,m=$.keyframes||m,c=$.duration||c}if(il(v)&&(Ai.cssRegisterProperty()?N5(v):x=!1),E&&!Ai.linearEasing()&&(Oi(p)||Di(p)&&p.some(Oi))&&(x=!1),x){g&&(m=m.map(W=>Ko(W)?g.toDefaultUnit(W):W)),m.length===1&&(!Ai.partialKeyframes()||o)&&m.unshift(l());const $={delay:Ms.ms(u),duration:Ms.ms(c),endDelay:Ms.ms(d),easing:Di(p)?void 0:fp(p,c),direction:b,iterations:f+1,fill:"both"};a=t.animate({[v]:m,offset:S,easing:Di(p)?p.map(W=>fp(W,c)):void 0},$),a.finished||(a.finished=new Promise((W,X)=>{a.onfinish=W,a.oncancel=X}));const z=m[m.length-1];a.finished.then(()=>{y||(Yo.set(t,v,z),a.cancel())}).catch(tp),C||(a.playbackRate=1.000001)}else if(i&&E)m=m.map($=>typeof $=="string"?parseFloat($):$),m.length===1&&m.unshift(parseFloat(l())),a=new i($=>{Yo.set(t,v,N?N($):$)},m,Object.assign(Object.assign({},n),{duration:c,easing:p}));else{const $=m[m.length-1];Yo.set(t,v,g&&Ko($)?g.toDefaultUnit($):$)}return o&&s(t,e,m,{duration:c,delay:u,easing:p,repeat:f,offset:S},"motion-one"),w.setAnimation(a),a}}const B5=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function z5(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const q5=t=>t(),gp=(t,e,r=Cr.duration)=>new Proxy({animations:t.map(q5).filter(Boolean),duration:r,options:e},V5),W5=t=>t.animations[0],V5={get:(t,e)=>{const r=W5(t);switch(e){case"duration":return t.duration;case"currentTime":return Ms.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(H5)).catch(tp)),t.finished;case"stop":return()=>{t.animations.forEach(n=>pp(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=Ms.ms(r);case"currentTime":case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},H5=t=>t.finished;function K5(t,e,r){return Oi(t)?t(e,r):t}function Z5(t){return function(r,n,i={}){r=z5(r);const s=r.length;tl(!!s,"No valid element provided."),tl(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const u in n){const d=B5(i,u);d.delay=K5(d.delay,a,s);const f=F5(c,u,n[u],d,t);o.push(f)}}return gp(o,i,i.duration)}}const G5=Z5(ap);function Y5(t,e={}){return gp([()=>{const r=new ap(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function ri(t,e,r){return(Oi(t)?Y5:G5)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ar=t=>t??jt;var js={},J5=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},mp={},br={};let cl;const Q5=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];br.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},br.getSymbolTotalCodewords=function(e){return Q5[e]},br.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},br.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');cl=e},br.isKanjiModeEnabled=function(){return typeof cl<"u"},br.toSJIS=function(e){return cl(e)};var Jo={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(Jo);function yp(){this.buffer=[],this.length=0}yp.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var X5=yp;function Fs(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Fs.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},Fs.prototype.get=function(t,e){return this.data[t*this.size+e]},Fs.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},Fs.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var eE=Fs,vp={};(function(t){const e=br.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(vp);var wp={};const tE=br.getSymbolSize,bp=7;wp.getPositions=function(e){const r=tE(e);return[[0,0],[r-bp,0],[0,r-bp]]};var _p={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,u=null,d=null;for(let f=0;f<s;f++){a=c=0,u=d=null;for(let p=0;p<s;p++){let y=i.get(f,p);y===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=y,a=1),y=i.get(p,f),y===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=y,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const u=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let u=0;u<s;u++){a=c=0;for(let d=0;d<s;d++)a=a<<1&2047|i.get(u,d),d>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let u=0;u<o;u++){s(u),t.applyMask(u,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(u,i),d<c&&(c=d,a=u)}return a}})(_p);var Qo={};const Cn=Jo,Xo=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ea=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Qo.getBlocksCount=function(e,r){switch(r){case Cn.L:return Xo[(e-1)*4+0];case Cn.M:return Xo[(e-1)*4+1];case Cn.Q:return Xo[(e-1)*4+2];case Cn.H:return Xo[(e-1)*4+3];default:return}},Qo.getTotalCodewordsCount=function(e,r){switch(r){case Cn.L:return ea[(e-1)*4+0];case Cn.M:return ea[(e-1)*4+1];case Cn.Q:return ea[(e-1)*4+2];case Cn.H:return ea[(e-1)*4+3];default:return}};var Ep={},ta={};const Bs=new Uint8Array(512),ra=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Bs[r]=e,ra[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Bs[r]=Bs[r-255]})(),ta.log=function(e){if(e<1)throw new Error("log("+e+")");return ra[e]},ta.exp=function(e){return Bs[e]},ta.mul=function(e,r){return e===0||r===0?0:Bs[ra[e]+ra[r]]},function(t){const e=ta;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(Ep);const Sp=Ep;function ll(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}ll.prototype.initialize=function(e){this.degree=e,this.genPoly=Sp.generateECPolynomial(this.degree)},ll.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=Sp.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var rE=ll,xp={},In={},ul={};ul.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Gr={};const Cp="[0-9]+",nE="[A-Z $%*+\\-./:]+";let zs="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";zs=zs.replace(/u/g,"\\u");const iE="(?:(?![A-Z0-9 $%*+\\-./:]|"+zs+`)(?:.|[\r
]))+`;Gr.KANJI=new RegExp(zs,"g"),Gr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Gr.BYTE=new RegExp(iE,"g"),Gr.NUMERIC=new RegExp(Cp,"g"),Gr.ALPHANUMERIC=new RegExp(nE,"g");const sE=new RegExp("^"+zs+"$"),oE=new RegExp("^"+Cp+"$"),aE=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Gr.testKanji=function(e){return sE.test(e)},Gr.testNumeric=function(e){return oE.test(e)},Gr.testAlphanumeric=function(e){return aE.test(e)},function(t){const e=ul,r=Gr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(In),function(t){const e=br,r=Qo,n=Jo,i=In,s=ul,o=7973,a=e.getBCHDigit(o);function c(p,y,b){for(let S=1;S<=40;S++)if(y<=t.getCapacity(S,b,p))return S}function u(p,y){return i.getCharCountIndicator(p,y)+4}function d(p,y){let b=0;return p.forEach(function(S){const C=u(S.mode,y);b+=C+S.getBitsLength()}),b}function f(p,y){for(let b=1;b<=40;b++)if(d(p,b)<=t.getCapacity(b,y,i.MIXED))return b}t.from=function(y,b){return s.isValid(y)?parseInt(y,10):b},t.getCapacity=function(y,b,S){if(!s.isValid(y))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const C=e.getSymbolTotalCodewords(y),A=r.getTotalCodewordsCount(y,b),E=(C-A)*8;if(S===i.MIXED)return E;const x=E-u(S,y);switch(S){case i.NUMERIC:return Math.floor(x/10*3);case i.ALPHANUMERIC:return Math.floor(x/11*2);case i.KANJI:return Math.floor(x/13);case i.BYTE:default:return Math.floor(x/8)}},t.getBestVersionForData=function(y,b){let S;const C=n.from(b,n.M);if(Array.isArray(y)){if(y.length>1)return f(y,C);if(y.length===0)return 1;S=y[0]}else S=y;return c(S.mode,S.getLength(),C)},t.getEncodedBits=function(y){if(!s.isValid(y)||y<7)throw new Error("Invalid QR Code version");let b=y<<12;for(;e.getBCHDigit(b)-a>=0;)b^=o<<e.getBCHDigit(b)-a;return y<<12|b}}(xp);var Ip={};const dl=br,Dp=1335,cE=21522,Op=dl.getBCHDigit(Dp);Ip.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;dl.getBCHDigit(i)-Op>=0;)i^=Dp<<dl.getBCHDigit(i)-Op;return(n<<10|i)^cE};var Ap={};const lE=In;function Ti(t){this.mode=lE.NUMERIC,this.data=t.toString()}Ti.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Ti.prototype.getLength=function(){return this.data.length},Ti.prototype.getBitsLength=function(){return Ti.getBitsLength(this.data.length)},Ti.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var uE=Ti;const dE=In,hl=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function $i(t){this.mode=dE.ALPHANUMERIC,this.data=t}$i.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},$i.prototype.getLength=function(){return this.data.length},$i.prototype.getBitsLength=function(){return $i.getBitsLength(this.data.length)},$i.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=hl.indexOf(this.data[r])*45;n+=hl.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(hl.indexOf(this.data[r]),6)};var hE=$i,fE=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const pE=fE,gE=In;function Ni(t){this.mode=gE.BYTE,typeof t=="string"&&(t=pE(t)),this.data=new Uint8Array(t)}Ni.getBitsLength=function(e){return e*8},Ni.prototype.getLength=function(){return this.data.length},Ni.prototype.getBitsLength=function(){return Ni.getBitsLength(this.data.length)},Ni.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var mE=Ni;const yE=In,vE=br;function Ri(t){this.mode=yE.KANJI,this.data=t}Ri.getBitsLength=function(e){return e*13},Ri.prototype.getLength=function(){return this.data.length},Ri.prototype.getBitsLength=function(){return Ri.getBitsLength(this.data.length)},Ri.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=vE.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var wE=Ri,Tp={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,u,d,f,p,y,b,S,C;!a.empty();){c=a.pop(),u=c.value,f=c.cost,p=r[u]||{};for(d in p)p.hasOwnProperty(d)&&(y=p[d],b=f+y,S=o[d],C=typeof o[d]>"u",(C||S>b)&&(o[d]=b,a.push(d,b),s[d]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var A=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(A)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Tp);var bE=Tp.exports;(function(t){const e=In,r=uE,n=hE,i=mE,s=wE,o=Gr,a=br,c=bE;function u(A){return unescape(encodeURIComponent(A)).length}function d(A,E,x){const v=[];let w;for(;(w=A.exec(x))!==null;)v.push({data:w[0],index:w.index,mode:E,length:w[0].length});return v}function f(A){const E=d(o.NUMERIC,e.NUMERIC,A),x=d(o.ALPHANUMERIC,e.ALPHANUMERIC,A);let v,w;return a.isKanjiModeEnabled()?(v=d(o.BYTE,e.BYTE,A),w=d(o.KANJI,e.KANJI,A)):(v=d(o.BYTE_KANJI,e.BYTE,A),w=[]),E.concat(x,v,w).sort(function(l,m){return l.index-m.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function p(A,E){switch(E){case e.NUMERIC:return r.getBitsLength(A);case e.ALPHANUMERIC:return n.getBitsLength(A);case e.KANJI:return s.getBitsLength(A);case e.BYTE:return i.getBitsLength(A)}}function y(A){return A.reduce(function(E,x){const v=E.length-1>=0?E[E.length-1]:null;return v&&v.mode===x.mode?(E[E.length-1].data+=x.data,E):(E.push(x),E)},[])}function b(A){const E=[];for(let x=0;x<A.length;x++){const v=A[x];switch(v.mode){case e.NUMERIC:E.push([v,{data:v.data,mode:e.ALPHANUMERIC,length:v.length},{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.ALPHANUMERIC:E.push([v,{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.KANJI:E.push([v,{data:v.data,mode:e.BYTE,length:u(v.data)}]);break;case e.BYTE:E.push([{data:v.data,mode:e.BYTE,length:u(v.data)}])}}return E}function S(A,E){const x={},v={start:{}};let w=["start"];for(let g=0;g<A.length;g++){const l=A[g],m=[];for(let N=0;N<l.length;N++){const $=l[N],z=""+g+N;m.push(z),x[z]={node:$,lastCount:0},v[z]={};for(let W=0;W<w.length;W++){const X=w[W];x[X]&&x[X].node.mode===$.mode?(v[X][z]=p(x[X].lastCount+$.length,$.mode)-p(x[X].lastCount,$.mode),x[X].lastCount+=$.length):(x[X]&&(x[X].lastCount=$.length),v[X][z]=p($.length,$.mode)+4+e.getCharCountIndicator($.mode,E))}}w=m}for(let g=0;g<w.length;g++)v[w[g]].end=0;return{map:v,table:x}}function C(A,E){let x;const v=e.getBestModeForData(A);if(x=e.from(E,v),x!==e.BYTE&&x.bit<v.bit)throw new Error('"'+A+'" cannot be encoded with mode '+e.toString(x)+`.
 Suggested mode is: `+e.toString(v));switch(x===e.KANJI&&!a.isKanjiModeEnabled()&&(x=e.BYTE),x){case e.NUMERIC:return new r(A);case e.ALPHANUMERIC:return new n(A);case e.KANJI:return new s(A);case e.BYTE:return new i(A)}}t.fromArray=function(E){return E.reduce(function(x,v){return typeof v=="string"?x.push(C(v,null)):v.data&&x.push(C(v.data,v.mode)),x},[])},t.fromString=function(E,x){const v=f(E,a.isKanjiModeEnabled()),w=b(v),g=S(w,x),l=c.find_path(g.map,"start","end"),m=[];for(let N=1;N<l.length-1;N++)m.push(g.table[l[N]].node);return t.fromArray(y(m))},t.rawSplit=function(E){return t.fromArray(f(E,a.isKanjiModeEnabled()))}})(Ap);const na=br,fl=Jo,_E=X5,EE=eE,SE=vp,xE=wp,pl=_p,gl=Qo,CE=rE,ia=xp,IE=Ip,DE=In,ml=Ap;function OE(t,e){const r=t.size,n=xE.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function AE(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function TE(t,e){const r=SE.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function $E(t,e){const r=t.size,n=ia.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function yl(t,e,r){const n=t.size,i=IE.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function NE(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let u=!1;o<e.length&&(u=(e[o]>>>s&1)===1),t.set(i,a-c,u),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function RE(t,e,r){const n=new _E;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),DE.getCharCountIndicator(c.mode,t)),c.write(n)});const i=na.getSymbolTotalCodewords(t),s=gl.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return PE(n,t,e)}function PE(t,e,r){const n=na.getSymbolTotalCodewords(e),i=gl.getTotalCodewordsCount(e,r),s=n-i,o=gl.getBlocksCount(e,r),a=n%o,c=o-a,u=Math.floor(n/o),d=Math.floor(s/o),f=d+1,p=u-d,y=new CE(p);let b=0;const S=new Array(o),C=new Array(o);let A=0;const E=new Uint8Array(t.buffer);for(let l=0;l<o;l++){const m=l<c?d:f;S[l]=E.slice(b,b+m),C[l]=y.encode(S[l]),b+=m,A=Math.max(A,m)}const x=new Uint8Array(n);let v=0,w,g;for(w=0;w<A;w++)for(g=0;g<o;g++)w<S[g].length&&(x[v++]=S[g][w]);for(w=0;w<p;w++)for(g=0;g<o;g++)x[v++]=C[g][w];return x}function LE(t,e,r,n){let i;if(Array.isArray(t))i=ml.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const d=ml.rawSplit(t);u=ia.getBestVersionForData(d,r)}i=ml.fromString(t,u||40)}else throw new Error("Invalid data");const s=ia.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=RE(e,r,i),a=na.getSymbolSize(e),c=new EE(a);return OE(c,e),AE(c),TE(c,e),yl(c,r,0),e>=7&&$E(c,e),NE(c,o),isNaN(n)&&(n=pl.getBestMask(c,yl.bind(null,c,r))),pl.applyMask(n,c),yl(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}mp.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=fl.M,i,s;return typeof r<"u"&&(n=fl.from(r.errorCorrectionLevel,fl.M),i=ia.from(r.version),s=pl.from(r.maskPattern),r.toSJISFunc&&na.setToSJISFunction(r.toSJISFunc)),LE(e,i,n,s)};var $p={},vl={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),u=Math.floor((o+s.margin*2)*c),d=s.margin*c,f=[s.color.light,s.color.dark];for(let p=0;p<u;p++)for(let y=0;y<u;y++){let b=(p*u+y)*4,S=s.color.light;if(p>=d&&y>=d&&p<u-d&&y<u-d){const C=Math.floor((p-d)/c),A=Math.floor((y-d)/c);S=f[a[C*o+A]?1:0]}n[b++]=S.r,n[b++]=S.g,n[b++]=S.b,n[b]=S.a}}})(vl),function(t){const e=vl;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const d=e.getImageWidth(s.modules.size,c),f=u.getContext("2d"),p=f.createImageData(d,d);return e.qrToImageData(p.data,s,c),r(f,u,d),f.putImageData(p,0,0),u},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(s,o,c),d=c.type||"image/png",f=c.rendererOpts||{};return u.toDataURL(d,f.quality)}}($p);var Np={};const ME=vl;function Rp(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function wl(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function kE(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),u=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?wl("M",c+r,.5+u+r):wl("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=wl("h",o),o=0)):i++}return n}Np.render=function(e,r,n){const i=ME.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+Rp(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+Rp(i.color.dark,"stroke")+' d="'+kE(o,s,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,p),p};const UE=J5,bl=mp,Pp=$p,jE=Np;function _l(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!UE())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,u){try{const d=bl.create(r,n);c(t(d,e,n))}catch(d){u(d)}})}try{const c=bl.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}js.create=bl.create,js.toCanvas=_l.bind(null,Pp.render),js.toDataURL=_l.bind(null,Pp.renderToDataURL),js.toString=_l.bind(null,function(t,e,r){return jE.render(t,r)});var FE=Object.defineProperty,Lp=Object.getOwnPropertySymbols,BE=Object.prototype.hasOwnProperty,zE=Object.prototype.propertyIsEnumerable,Mp=(t,e,r)=>e in t?FE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,El=(t,e)=>{for(var r in e||(e={}))BE.call(e,r)&&Mp(t,r,e[r]);if(Lp)for(var r of Lp(e))zE.call(e,r)&&Mp(t,r,e[r]);return t};function qE(){var t;const e=(t=pn.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function kp(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const He={getPreset(t){return kp()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=pn.state;if(t){const r=El(El(El({},qE()),kp()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:rt`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},WE=rt`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var VE=Object.defineProperty,HE=Object.getOwnPropertyDescriptor,Pi=(t,e,r,n)=>{for(var i=n>1?void 0:n?HE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&VE(e,r,i),i};let Dn=class extends Fe{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),ae`<button class="${an(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};Dn.styles=[He.globalCss,WE],Pi([$e({type:Boolean})],Dn.prototype,"disabled",2),Pi([$e()],Dn.prototype,"iconLeft",2),Pi([$e()],Dn.prototype,"iconRight",2),Pi([$e()],Dn.prototype,"onClick",2),Pi([$e()],Dn.prototype,"variant",2),Dn=Pi([Ze("wcm-button")],Dn);const KE=rt`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var ZE=Object.defineProperty,GE=Object.getOwnPropertyDescriptor,Sl=(t,e,r,n)=>{for(var i=n>1?void 0:n?GE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&ZE(e,r,i),i};let qs=class extends Fe{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return ae`<button ?disabled="${this.disabled}" class="${an(t)}"><slot></slot></button>`}};qs.styles=[He.globalCss,KE],Sl([$e({type:Boolean})],qs.prototype,"disabled",2),Sl([$e()],qs.prototype,"variant",2),qs=Sl([Ze("wcm-button-big")],qs);const YE=rt`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var JE=Object.defineProperty,QE=Object.getOwnPropertyDescriptor,XE=(t,e,r,n)=>{for(var i=n>1?void 0:n?QE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&JE(e,r,i),i};let xl=class extends Fe{render(){return ae`<div><slot></slot></div>`}};xl.styles=[He.globalCss,YE],xl=XE([Ze("wcm-info-footer")],xl);const nt={CROSS_ICON:Et`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:Et`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:Et`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:Et`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:Et`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:Et`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:Et`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:Et`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:Et`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:Et`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:Et`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:Et`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:Et`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:Et`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:Et`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:Et`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:Et`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:Et`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},e6=rt`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var t6=Object.defineProperty,r6=Object.getOwnPropertyDescriptor,n6=(t,e,r,n)=>{for(var i=n>1?void 0:n?r6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&t6(e,r,i),i};let Cl=class extends Fe{render(){return ae`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${nt.WALLET_CONNECT_LOGO} <button @click="${Ln.close}">${nt.CROSS_ICON}</button></div>`}};Cl.styles=[He.globalCss,e6],Cl=n6([Ze("wcm-modal-backcard")],Cl);const i6=rt`main{padding:20px;padding-top:0;width:100%}`;var s6=Object.defineProperty,o6=Object.getOwnPropertyDescriptor,a6=(t,e,r,n)=>{for(var i=n>1?void 0:n?o6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&s6(e,r,i),i};let Il=class extends Fe{render(){return ae`<main><slot></slot></main>`}};Il.styles=[He.globalCss,i6],Il=a6([Ze("wcm-modal-content")],Il);const c6=rt`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var l6=Object.defineProperty,u6=Object.getOwnPropertyDescriptor,d6=(t,e,r,n)=>{for(var i=n>1?void 0:n?u6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&l6(e,r,i),i};let Dl=class extends Fe{render(){return ae`<footer><slot></slot></footer>`}};Dl.styles=[He.globalCss,c6],Dl=d6([Ze("wcm-modal-footer")],Dl);const h6=rt`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var f6=Object.defineProperty,p6=Object.getOwnPropertyDescriptor,Ws=(t,e,r,n)=>{for(var i=n>1?void 0:n?p6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&f6(e,r,i),i};let ni=class extends Fe{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return ae`<button class="wcm-back-btn" @click="${vt.goBack}">${nt.BACK_ICON}</button>`}actionBtnTemplate(){return ae`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=vt.state.history.length>1,r=this.title?ae`<wcm-text variant="big-bold">${this.title}</wcm-text>`:ae`<slot></slot>`;return ae`<header class="${an(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};ni.styles=[He.globalCss,h6],Ws([$e()],ni.prototype,"title",2),Ws([$e()],ni.prototype,"onAction",2),Ws([$e()],ni.prototype,"actionIcon",2),Ws([$e({type:Boolean})],ni.prototype,"border",2),ni=Ws([Ze("wcm-modal-header")],ni);const Ce={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=mr.state;return r!=null&&r[t]?r[t]:e?lr.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=Ce.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,me.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=At.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;Ce.setRecentWallet(t);function o(a){let c="";i?c=me.formatUniversalUrl(i,a,n):s&&(c=me.formatNativeUrl(s,a,n)),me.openHref(c,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=At.state;t&&(me.setWalletConnectAndroidDeepLink(t),me.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=At.state;if(t)try{await navigator.clipboard.writeText(t),gn.openToast("Link copied","success")}catch{gn.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=mr.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(Ce.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(Ce.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){me.openHref(Ce.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=me.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){vt.setData({Wallet:t});const e=me.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=Ce.getCachedRouterWalletPlatforms();e?i?vt.push("MobileConnecting"):n?vt.push("WebConnecting"):vt.push("InstallWallet"):r?vt.push("DesktopConnecting"):n?vt.push("WebConnecting"):i?vt.push("MobileQrcodeConnecting"):vt.push("InstallWallet")}},g6=rt`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var m6=Object.defineProperty,y6=Object.getOwnPropertyDescriptor,Ol=(t,e,r,n)=>{for(var i=n>1?void 0:n?y6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&m6(e,r,i),i};let Vs=class extends Fe{constructor(){super(),this.view=vt.state.view,this.prevView=vt.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=vt.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&ri(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return Ce.getShadowRootElement(this,".wcm-router")}get contentEl(){return Ce.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return ae`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return ae`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return ae`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return ae`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return ae`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return ae`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return ae`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return ae`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return ae`<div>Not Found</div>`}}async onChangeRoute(){await ri(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=vt.state.view,ri(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return ae`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};Vs.styles=[He.globalCss,g6],Ol([fr()],Vs.prototype,"view",2),Ol([fr()],Vs.prototype,"prevView",2),Vs=Ol([Ze("wcm-modal-router")],Vs);const v6=rt`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var w6=Object.defineProperty,b6=Object.getOwnPropertyDescriptor,Up=(t,e,r,n)=>{for(var i=n>1?void 0:n?b6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&w6(e,r,i),i};let sa=class extends Fe{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=gn.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>gn.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),gn.closeToast()}render(){const{message:t,variant:e}=gn.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?ae`<div class="${an(r)}">${e==="success"?nt.CHECKMARK_ICON:null} ${e==="error"?nt.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};sa.styles=[He.globalCss,v6],Up([fr()],sa.prototype,"open",2),sa=Up([Ze("wcm-modal-toast")],sa);const _6=.1,jp=2.5,cn=7;function Al(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+_6}function E6(t,e){const r=Array.prototype.slice.call(js.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const S6={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=E6(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:b,y:S})=>{const C=(o.length-cn)*a*b,A=(o.length-cn)*a*S,E=.45;for(let x=0;x<c.length;x+=1){const v=a*(cn-x*2);s.push(Et`<rect fill="${x%2===0?n:i}" height="${v}" rx="${v*E}" ry="${v*E}" width="${v}" x="${C+a*x}" y="${A+a*x}">`)}});const u=Math.floor((r+25)/a),d=o.length/2-u/2,f=o.length/2+u/2-1,p=[];o.forEach((b,S)=>{b.forEach((C,A)=>{if(o[S][A]&&!(S<cn&&A<cn||S>o.length-(cn+1)&&A<cn||S<cn&&A>o.length-(cn+1))&&!(S>d&&S<f&&A>d&&A<f)){const E=S*a+a/2,x=A*a+a/2;p.push([E,x])}})});const y={};return p.forEach(([b,S])=>{y[b]?y[b].push(S):y[b]=[S]}),Object.entries(y).map(([b,S])=>{const C=S.filter(A=>S.every(E=>!Al(A,E,a)));return[Number(b),C]}).forEach(([b,S])=>{S.forEach(C=>{s.push(Et`<circle cx="${b}" cy="${C}" fill="${n}" r="${a/jp}">`)})}),Object.entries(y).filter(([b,S])=>S.length>1).map(([b,S])=>{const C=S.filter(A=>S.some(E=>Al(A,E,a)));return[Number(b),C]}).map(([b,S])=>{S.sort((A,E)=>A<E?-1:1);const C=[];for(const A of S){const E=C.find(x=>x.some(v=>Al(A,v,a)));E?E.push(A):C.push([A])}return[b,C.map(A=>[A[0],A[A.length-1]])]}).forEach(([b,S])=>{S.forEach(([C,A])=>{s.push(Et`<line x1="${b}" x2="${b}" y1="${C}" y2="${A}" stroke="${n}" stroke-width="${a/(jp/2)}" stroke-linecap="round">`)})}),s}},x6=rt`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var C6=Object.defineProperty,I6=Object.getOwnPropertyDescriptor,Li=(t,e,r,n)=>{for(var i=n>1?void 0:n?I6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&C6(e,r,i),i};let ln=class extends Fe{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=pn.state.themeMode==="light"?this.size:this.size-36;return Et`<svg height="${t}" width="${t}">${S6.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":pn.state.themeMode==="dark"};return ae`<div style="${`width: ${this.size}px`}" class="${an(t)}">${this.walletId||this.imageUrl?ae`<wcm-wallet-image walletId="${ar(this.walletId)}" imageId="${ar(this.imageId)}" imageUrl="${ar(this.imageUrl)}"></wcm-wallet-image>`:nt.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};ln.styles=[He.globalCss,x6],Li([$e()],ln.prototype,"uri",2),Li([$e({type:Number})],ln.prototype,"size",2),Li([$e()],ln.prototype,"imageId",2),Li([$e()],ln.prototype,"walletId",2),Li([$e()],ln.prototype,"imageUrl",2),ln=Li([Ze("wcm-qrcode")],ln);const D6=rt`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var O6=Object.defineProperty,A6=Object.getOwnPropertyDescriptor,Fp=(t,e,r,n)=>{for(var i=n>1?void 0:n?A6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&O6(e,r,i),i};let oa=class extends Fe{constructor(){super(...arguments),this.onChange=()=>null}render(){return ae`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${nt.SEARCH_ICON}`}};oa.styles=[He.globalCss,D6],Fp([$e()],oa.prototype,"onChange",2),oa=Fp([Ze("wcm-search-input")],oa);const T6=rt`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var $6=Object.defineProperty,N6=Object.getOwnPropertyDescriptor,R6=(t,e,r,n)=>{for(var i=n>1?void 0:n?N6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&$6(e,r,i),i};let Tl=class extends Fe{render(){return ae`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};Tl.styles=[He.globalCss,T6],Tl=R6([Ze("wcm-spinner")],Tl);const P6=rt`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var L6=Object.defineProperty,M6=Object.getOwnPropertyDescriptor,$l=(t,e,r,n)=>{for(var i=n>1?void 0:n?M6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&L6(e,r,i),i};let Hs=class extends Fe{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return ae`<span><slot class="${an(t)}"></slot></span>`}};Hs.styles=[He.globalCss,P6],$l([$e()],Hs.prototype,"variant",2),$l([$e()],Hs.prototype,"color",2),Hs=$l([Ze("wcm-text")],Hs);const k6=rt`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var U6=Object.defineProperty,j6=Object.getOwnPropertyDescriptor,On=(t,e,r,n)=>{for(var i=n>1?void 0:n?j6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&U6(e,r,i),i};let Yr=class extends Fe{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?ae`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?ae`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){au.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return ae`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${ar(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:Ce.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};Yr.styles=[He.globalCss,k6],On([$e()],Yr.prototype,"onClick",2),On([$e()],Yr.prototype,"name",2),On([$e()],Yr.prototype,"walletId",2),On([$e()],Yr.prototype,"label",2),On([$e()],Yr.prototype,"imageId",2),On([$e({type:Boolean})],Yr.prototype,"installed",2),On([$e({type:Boolean})],Yr.prototype,"recent",2),Yr=On([Ze("wcm-wallet-button")],Yr);const F6=rt`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var B6=Object.defineProperty,z6=Object.getOwnPropertyDescriptor,aa=(t,e,r,n)=>{for(var i=n>1?void 0:n?z6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&B6(e,r,i),i};let Mi=class extends Fe{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:Ce.getWalletIcon({id:this.walletId,image_id:this.imageId});return ae`${e.length?ae`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:nt.WALLET_PLACEHOLDER}`}};Mi.styles=[He.globalCss,F6],aa([$e()],Mi.prototype,"walletId",2),aa([$e()],Mi.prototype,"imageId",2),aa([$e()],Mi.prototype,"imageUrl",2),Mi=aa([Ze("wcm-wallet-image")],Mi);var q6=Object.defineProperty,W6=Object.getOwnPropertyDescriptor,Bp=(t,e,r,n)=>{for(var i=n>1?void 0:n?W6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&q6(e,r,i),i};let Nl=class extends Fe{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>Ce.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(mr.state.enableExplorer){await lr.getRecomendedWallets(),At.setIsDataLoaded(!0);const{recomendedWallets:t}=lr.state,e=t.map(r=>Ce.getWalletIcon(r));await this.loadImages(e)}else At.setIsDataLoaded(!0)}async preloadCustomImages(){const t=Ce.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),gn.openToast("Failed preloading","error")}}};Bp([fr()],Nl.prototype,"preload",2),Nl=Bp([Ze("wcm-explorer-context")],Nl);var V6=Object.defineProperty,H6=Object.getOwnPropertyDescriptor,K6=(t,e,r,n)=>{for(var i=n>1?void 0:n?H6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&V6(e,r,i),i};let zp=class extends Fe{constructor(){super(),this.unsubscribeTheme=void 0,He.setTheme(),this.unsubscribeTheme=pn.subscribe(He.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};zp=K6([Ze("wcm-theme-context")],zp);const Z6=rt`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var G6=Object.defineProperty,Y6=Object.getOwnPropertyDescriptor,J6=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G6(e,r,i),i};let Rl=class extends Fe{onGoToQrcode(){vt.push("Qrcode")}render(){const{recomendedWallets:t}=lr.state,e=[...t,...t],r=me.RECOMMENDED_WALLET_AMOUNT*2;return ae`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${nt.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${nt.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?ae`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:nt.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${Ce.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};Rl.styles=[He.globalCss,Z6],Rl=J6([Ze("wcm-android-wallet-selection")],Rl);const Q6=rt`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var X6=Object.defineProperty,e4=Object.getOwnPropertyDescriptor,ki=(t,e,r,n)=>{for(var i=n>1?void 0:n?e4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&X6(e,r,i),i};let An=class extends Fe{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=pn.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:He.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return ae`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return ae`<div class="${an(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${ar(this.walletId)}" imageId="${ar(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};An.styles=[He.globalCss,Q6],ki([$e()],An.prototype,"walletId",2),ki([$e()],An.prototype,"imageId",2),ki([$e({type:Boolean})],An.prototype,"isError",2),ki([$e({type:Boolean})],An.prototype,"isStale",2),ki([$e()],An.prototype,"label",2),An=ki([Ze("wcm-connector-waiting")],An);const Ui={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=mr.state,i=(t=Ui.recentWallet())==null?void 0:t.id,s=me.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=me.isMobile()?o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,mobile:u,links:u})):o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,desktop:u,links:u})))!=null?e:[]},recentWallet(){return Ce.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=Ui.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=lr.state;return n.filter(i=>r!==i.id)}},Tn={onConnecting(t){Ce.goToConnectingView(t)},manualWalletsTemplate(){return Ui.manualWallets().map(t=>ae`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return Ui.recomendedWallets(t).map(e=>ae`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=Ui.recentWallet();if(t)return ae`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${ar(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},t4=rt`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var r4=Object.defineProperty,n4=Object.getOwnPropertyDescriptor,i4=(t,e,r,n)=>{for(var i=n>1?void 0:n?n4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&r4(e,r,i),i};let Pl=class extends Fe{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=mr.state,r=t!=="ALL"&&e,n=Tn.manualWalletsTemplate(),i=Tn.recomendedWalletsTemplate();let s=[Tn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const c=!!a.length;return ae`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${Ce.handleUriCopy}" .actionIcon="${nt.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${nt.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${nt.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?ae`<wcm-modal-footer><div class="wcm-desktop-title">${nt.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?ae`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};Pl.styles=[He.globalCss,t4],Pl=i4([Ze("wcm-desktop-wallet-selection")],Pl);const s4=rt`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var o4=Object.defineProperty,a4=Object.getOwnPropertyDescriptor,c4=(t,e,r,n)=>{for(var i=n>1?void 0:n?a4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&o4(e,r,i),i};let Ll=class extends Fe{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=mr.state;return t??e?ae`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?ae`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?ae`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};Ll.styles=[He.globalCss,s4],Ll=c4([Ze("wcm-legal-notice")],Ll);const l4=rt`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var u4=Object.defineProperty,d4=Object.getOwnPropertyDescriptor,h4=(t,e,r,n)=>{for(var i=n>1?void 0:n?d4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&u4(e,r,i),i};let Ml=class extends Fe{onQrcode(){vt.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=mr.state,r=t!=="ALL"&&e,n=Tn.manualWalletsTemplate(),i=Tn.recomendedWalletsTemplate();let s=[Tn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const c=!!a.length;return ae`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${nt.QRCODE_ICON}"></wcm-modal-header>${c?ae`<wcm-modal-content><div>${a} ${o?ae`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};Ml.styles=[He.globalCss,l4],Ml=h4([Ze("wcm-mobile-wallet-selection")],Ml);const f4=rt`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var p4=Object.defineProperty,g4=Object.getOwnPropertyDescriptor,kl=(t,e,r,n)=>{for(var i=n>1?void 0:n?g4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&p4(e,r,i),i};let ji=class extends Fe{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=Ln.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return Ce.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return Ce.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&Ln.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=Ce.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([ri(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,ri(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=Ce.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([ri(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,ri(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?Ln.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return ae`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${an(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?ae`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};ji.styles=[He.globalCss,f4],kl([fr()],ji.prototype,"open",2),kl([fr()],ji.prototype,"active",2),ji=kl([Ze("wcm-modal")],ji);const m4=rt`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var y4=Object.defineProperty,v4=Object.getOwnPropertyDescriptor,Ks=(t,e,r,n)=>{for(var i=n>1?void 0:n?v4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&y4(e,r,i),i};let ii=class extends Fe{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){me.isMobile()?vt.replace("MobileConnecting"):vt.replace("MobileQrcodeConnecting")}onDesktop(){vt.replace("DesktopConnecting")}onWeb(){vt.replace("WebConnecting")}render(){return ae`<div>${this.isRetry?ae`<slot></slot>`:null} ${this.isMobile?ae`<wcm-button .onClick="${this.onMobile}" .iconLeft="${nt.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?ae`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${nt.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?ae`<wcm-button .onClick="${this.onWeb}" .iconLeft="${nt.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};ii.styles=[He.globalCss,m4],Ks([$e({type:Boolean})],ii.prototype,"isMobile",2),Ks([$e({type:Boolean})],ii.prototype,"isDesktop",2),Ks([$e({type:Boolean})],ii.prototype,"isWeb",2),Ks([$e({type:Boolean})],ii.prototype,"isRetry",2),ii=Ks([Ze("wcm-platform-selection")],ii);const w4=rt`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var b4=Object.defineProperty,_4=Object.getOwnPropertyDescriptor,E4=(t,e,r,n)=>{for(var i=n>1?void 0:n?_4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&b4(e,r,i),i};let Ul=class extends Fe{onClick(){vt.push("WalletExplorer")}render(){const{recomendedWallets:t}=lr.state,e=Ui.manualWallets(),r=[...t,...e].reverse().slice(0,4);return ae`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=Ce.getWalletIcon(n);if(i)return ae`<img crossorigin="anonymous" src="${i}">`;const s=Ce.getWalletIcon({id:n.id});return s?ae`<img crossorigin="anonymous" src="${s}">`:nt.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>nt.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};Ul.styles=[He.globalCss,w4],Ul=E4([Ze("wcm-view-all-wallets-button")],Ul);const S4=rt`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var x4=Object.defineProperty,C4=Object.getOwnPropertyDescriptor,ca=(t,e,r,n)=>{for(var i=n>1?void 0:n?C4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&x4(e,r,i),i};let Fi=class extends Fe{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=At.state;this.uri=t},0)}get overlayEl(){return Ce.getShadowRootElement(this,".wcm-qr-container")}render(){return ae`<div class="wcm-qr-container">${this.uri?ae`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${ar(this.walletId)}" imageId="${ar(this.imageId)}"></wcm-qrcode>`:ae`<wcm-spinner></wcm-spinner>`}</div>`}};Fi.styles=[He.globalCss,S4],ca([$e()],Fi.prototype,"walletId",2),ca([$e()],Fi.prototype,"imageId",2),ca([fr()],Fi.prototype,"uri",2),Fi=ca([Ze("wcm-walletconnect-qr")],Fi);var I4=Object.defineProperty,D4=Object.getOwnPropertyDescriptor,O4=(t,e,r,n)=>{for(var i=n>1?void 0:n?D4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&I4(e,r,i),i};let jl=class extends Fe{viewTemplate(){return me.isAndroid()?ae`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:me.isMobile()?ae`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:ae`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return ae`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};jl.styles=[He.globalCss],jl=O4([Ze("wcm-connect-wallet-view")],jl);const A4=rt`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var T4=Object.defineProperty,$4=Object.getOwnPropertyDescriptor,qp=(t,e,r,n)=>{for(var i=n>1?void 0:n?$4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&T4(e,r,i),i};let la=class extends Fe{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=me.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=me.formatNativeUrl(n,t,r);me.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=At.state,e=me.getWalletRouterData();Ce.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=me.getWalletRouterData(),{isMobile:n,isWeb:i}=Ce.getCachedRouterWalletPlatforms();return ae`<wcm-modal-header title="${t}" .onAction="${Ce.handleUriCopy}" .actionIcon="${nt.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${ar(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${nt.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};la.styles=[He.globalCss,A4],qp([fr()],la.prototype,"isError",2),la=qp([Ze("wcm-desktop-connecting-view")],la);const N4=rt`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var R4=Object.defineProperty,P4=Object.getOwnPropertyDescriptor,L4=(t,e,r,n)=>{for(var i=n>1?void 0:n?P4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&R4(e,r,i),i};let Fl=class extends Fe{onInstall(t){t&&me.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=me.getWalletRouterData();return ae`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${ar(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${nt.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};Fl.styles=[He.globalCss,N4],Fl=L4([Ze("wcm-install-wallet-view")],Fl);const M4=rt`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var k4=Object.defineProperty,U4=Object.getOwnPropertyDescriptor,Wp=(t,e,r,n)=>{for(var i=n>1?void 0:n?U4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&k4(e,r,i),i};let ua=class extends Fe{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=me.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=me.formatNativeUrl(i,t,n);me.openHref(o,"_self")}else if(s){const o=me.formatUniversalUrl(s,t,n);me.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=At.state,r=me.getWalletRouterData();Ce.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&me.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=me.getWalletRouterData(),{isWeb:s}=Ce.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return ae`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${ar(r)}" label="Tap 'Open' to continue" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${nt.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?ae`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${ar(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${nt.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};ua.styles=[He.globalCss,M4],Wp([fr()],ua.prototype,"isError",2),ua=Wp([Ze("wcm-mobile-connecting-view")],ua);const j4=rt`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var F4=Object.defineProperty,B4=Object.getOwnPropertyDescriptor,z4=(t,e,r,n)=>{for(var i=n>1?void 0:n?B4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&F4(e,r,i),i};let Bl=class extends Fe{render(){const{name:t,id:e,image_id:r}=me.getWalletRouterData(),{isDesktop:n,isWeb:i}=Ce.getCachedRouterWalletPlatforms();return ae`<wcm-modal-header title="${t}" .onAction="${Ce.handleUriCopy}" .actionIcon="${nt.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${ar(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};Bl.styles=[He.globalCss,j4],Bl=z4([Ze("wcm-mobile-qr-connecting-view")],Bl);var q4=Object.defineProperty,W4=Object.getOwnPropertyDescriptor,V4=(t,e,r,n)=>{for(var i=n>1?void 0:n?W4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&q4(e,r,i),i};let zl=class extends Fe{render(){return ae`<wcm-modal-header title="Scan the code" .onAction="${Ce.handleUriCopy}" .actionIcon="${nt.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};zl.styles=[He.globalCss],zl=V4([Ze("wcm-qrcode-view")],zl);const H4=rt`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var K4=Object.defineProperty,Z4=Object.getOwnPropertyDescriptor,Zs=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&K4(e,r,i),i};const ql=40;let si=class extends Fe{constructor(){super(...arguments),this.loading=!lr.state.wallets.listings.length,this.firstFetch=!lr.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=Ce.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,lr.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),lr.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return Ce.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=lr.state,{listings:r,total:n}=this.search?e:t;return n<=ql||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=lr.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>ql&&n.length<i))try{this.loading=!0;const o=(t=At.state.chains)==null?void 0:t.join(","),{listings:a}=await lr.getWallets({page:this.firstFetch?1:s+1,entries:ql,search:this.search,version:2,chains:o}),c=a.map(u=>Ce.getWalletIcon(u));await Promise.all([...c.map(async u=>Ce.preloadImage(u)),me.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),gn.openToast(Ce.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){me.isAndroid()?Ce.handleMobileLinking(t):Ce.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=lr.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=Tn.manualWalletsTemplate(),o=Tn.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:u})=>Ce.caseSafeIncludes(u[0],this.search)),o=o.filter(({values:u})=>Ce.caseSafeIncludes(u[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return ae`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${an(c)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(u=>ae`${u?ae`<wcm-wallet-button imageId="${u.image_id}" name="${u.name}" walletId="${u.id}" .onClick="${()=>this.onConnect(u)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?ae`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?ae`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};si.styles=[He.globalCss,H4],Zs([fr()],si.prototype,"loading",2),Zs([fr()],si.prototype,"firstFetch",2),Zs([fr()],si.prototype,"search",2),Zs([fr()],si.prototype,"endReached",2),si=Zs([Ze("wcm-wallet-explorer-view")],si);const G4=rt`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Y4=Object.defineProperty,J4=Object.getOwnPropertyDescriptor,Vp=(t,e,r,n)=>{for(var i=n>1?void 0:n?J4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Y4(e,r,i),i};let da=class extends Fe{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=me.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=me.formatUniversalUrl(n,t,r);me.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=At.state,e=me.getWalletRouterData();Ce.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=me.getWalletRouterData(),{isMobile:n,isDesktop:i}=Ce.getCachedRouterWalletPlatforms(),s=me.isMobile();return ae`<wcm-modal-header title="${t}" .onAction="${Ce.handleUriCopy}" .actionIcon="${nt.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${ar(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${nt.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};da.styles=[He.globalCss,G4],Vp([fr()],da.prototype,"isError",2),da=Vp([Ze("wcm-web-connecting-view")],da);const Q4=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return ji},get WcmQrCode(){return ln}},Symbol.toStringTag,{value:"Module"}));G.ICore=F_,G.ICrypto=B_,G.IEngine=r3,G.IEngineEvents=t3,G.IExpirer=Y_,G.IJsonRpcHistory=z_,G.IKeyChain=G_,G.IMessageTracker=q_,G.IPairing=J_,G.IPublisher=W_,G.IRelayer=V_,G.ISignClient=e3,G.ISignClientEvents=X_,G.IStore=H_,G.ISubscriber=Z_,G.ISubscriberTopicMap=K_,G.IVerify=Q_,G.PAGE_SIZE=V3,G.aleoAddressRegex=mf,G.aleoFieldRegex=bf,G.aleoPrivateKeyRegex=vf,G.aleoTransactionIdRegex=wf,G.aleoU32=_f,G.aleoU64=Ef,G.aleoViewKeyRegex=yf,G.configureConnection=L2,G.connect=L3,G.createSharedState=k3,G.decrypt=U3,G.disconnect=j3,G.emitter=Hn,G.getAccount=R3,G.getBalance=P3,G.getEvent=F3,G.getEvents=B3,G.getFormattedRecordPlaintext=A3,G.getRecords=q3,G.getWalletConnectModalSignClient=dt,G.importSharedState=z3,G.projectId=rf,G.requestCreateEvent=M3,G.requestSignature=W3,G.shortenAddress=kc,G.signClient_puzzleProps=N2,G.useAccount=y3,G.useBalance=v3,G.useConnect=w3,G.useCreateSharedState=b3,G.useDecrypt=C3,G.useDisconnect=I3,G.useEvents=D3,G.useImportSharedState=O3,G.useOnSessionDelete=Ac,G.useOnSessionEvent=As,G.useOnSessionExpire=Sf,G.useOnSessionUpdate=Tc,G.useRecords=T3,G.useRequestCreateEvent=N3,G.useRequestSignature=$3,G.useSession=Mr,G.wc_aleo_chains=gs,G.wc_aleo_methods=Ao,G.wc_events=To,G.web3modal_puzzle_props=nf,G.zodAddress=A_,G.zodEventStatus=k_,G.zodEventType=M_,G.zodField=R_,G.zodNetwork=U_,G.zodPrivateKey=$_,G.zodTransactionId=N_,G.zodU32=P_,G.zodU64=L_,G.zodViewKey=T_,G.zodVisibility=j_,Object.defineProperty(G,Symbol.toStringTag,{value:"Module"})});
